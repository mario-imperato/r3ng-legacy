
$.r3Utils.namespace("org.r3");org.r3.ActionForm=Class.extend({init:function(anHtmlActionFormContainerId,aParentActionForm)
{this.htmlContainerId=anHtmlActionFormContainerId;this.parentActionForm=aParentActionForm;this.queryParams={};this.htmlHasBeenLoaded=false;},isHasBeenLoaded:function()
{return this.htmlHasBeenLoaded;},setHasBeenLoaded:function(aFlag)
{this.htmlHasBeenLoaded=aFlag;},setHtml:function(anHtml)
{this.getHtmlContainer().html(anHtml);this.htmlHasBeenLoaded=true;},loadHtml:function(aUrl,onCompleteCallBack,showOnComplete)
{this.getHtmlContainer().load(aUrl,$.r3Utils.hitch(this,function(jsonData)
{this.htmlHasBeenLoaded=true;if(showOnComplete)
this.getHtmlContainer().show();if(onCompleteCallBack)
onCompleteCallBack();}));},loadHtmlAndShow:function(aUrl,onCompleteCallBack)
{if(!this.isHasBeenLoaded())
this.loadHtml(aUrl,onCompleteCallBack,true);else
{if(onCompleteCallBack)onCompleteCallBack();this.getHtmlContainer().show();}},show:function()
{this.getHtmlContainer().show();},hide:function()
{this.getHtmlContainer().hide();},getHtmlContainer:function()
{return $(this.htmlContainerId);},closeParentActionForm:function()
{if(this.parentActionForm)
this.parentActionForm.close();},hideParentActionForm:function()
{if(this.parentActionForm)
this.parentActionForm.hide();},fnGetQueryParameters:function(aoData)
{if(this.queryParams!=null)
{for(var name in this.queryParams)
{aoData.push({"name":name,"value":this.queryParams[name]});}}},addQueryParameter:function(param)
{for(var pname in param)
{this.queryParams[pname]=param[pname];}}});$.r3Utils.namespace("org.r3");org.r3.ActionFormManager=Class.extend({setDataBeanInfo:function(aDataBeanInfo)
{this.dataBeanInfo=aDataBeanInfo;},setPageManager:function(aPageManager)
{this.pageManager=aPageManager;},setCanvas:function(amActionFormCanvasId)
{this.canvasId=amActionFormCanvasId;},showCanvas:function()
{if(this.canvasId)
$(this.canvasId).show();},hideCanvas:function()
{if(this.canvasId)
$(this.canvasId).hide();}});$.r3Utils.namespace("org.r3");org.r3.ActionFormView=Class.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this.htmlContainerId=anHtmlActionFormContainerId;this.actionFormManager=anActionFormManager;this.viewIsVisible=false;},isVisible:function()
{return this.viewIsVisible;},setHtml:function(anHtml)
{this.getHtmlContainer().html(anHtml);},loadHtml:function(aUrl,onCompleteCallBack,showOnComplete)
{this.getHtmlContainer().load(aUrl,$.r3Utils.hitch(this,function(jsonData)
{if(showOnComplete)
this.getHtmlContainer().show();if(onCompleteCallBack)
onCompleteCallBack();}));},loadHtmlAndShow:function(aUrl,onCompleteCallBack)
{this.loadHtml(aUrl,onCompleteCallBack,true);},show:function()
{this.getHtmlContainer().show();this.viewIsVisible=true;},refresh:function()
{},hide:function()
{this.getHtmlContainer().hide();this.viewIsVisible=false;},getHtmlContainer:function()
{return $(this.htmlContainerId);},queryParams:[],fnGetQueryParameters:function(aoData)
{if(this.queryParams!=null&&this.queryParams.length)
{for(var i=0;i<this.queryParams.length;i++)
{aoData.push(this.queryParams[i]);}}},addQueryParameter:function(param)
{this.queryParams.push(param);},clearQueryParameters:function()
{this.queryParams=[];}});$.r3Utils.namespace("org.r3");org.r3.AjaxUtils={init:function()
{},submitForm:function(method,restUrl,theForm,onSuccess,onError,confirmationMessageId,systemWaitFlag)
{if(theForm.valid())
{if(confirmationMessageId)
{if(!org.r3.PageManager.confirmation(confirmationMessageId))
return;}
if(systemWaitFlag)
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{if(systemWaitFlag)
org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{if(systemWaitFlag)
org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});}},ajaxInvoke:function(method,restUrl,onSuccess,onError,confirmationMessageId,systemWaitFlag)
{if(confirmationMessageId)
{if(!org.r3.PageManager.confirmation(confirmationMessageId))
return;}
if(systemWaitFlag)
org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{if(systemWaitFlag)
org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{if(systemWaitFlag)
org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});},submitFormData:function(method,restUrl,theFormDataObject,onSuccess,onError,confirmationMessageId,systemWaitFlag)
{if(confirmationMessageId)
{if(!org.r3.PageManager.confirmation(confirmationMessageId))
return;}
if(systemWaitFlag)
org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","data":theFormDataObject,"processData":false,"contentType":false,"success":function(responseData)
{if(systemWaitFlag)
org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{if(systemWaitFlag)
org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});},doPostLoginFormData:function(aLoginUrl,aLoginUrlEncodedPostData,onLoginRedirect)
{var method="post";var restUrl=aLoginUrl;$.ajax({"type":method,"url":restUrl,"dataType":"json","data":aLoginUrlEncodedPostData,"success":function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{org.r3.PageManager.closeNotifier();var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isFail())
{var o=$('#loginform_form_fieldset_message');if(o.length)
{restDto.showMessage('loginform_form_fieldset_message');}
else
{$('#loginform_form .loginform_mainsection .form-group').addClass('has-error');}}}
else
{org.r3.PageManager.gotoPage(onLoginRedirect);}},"error":function(jqXHR,timeout,message)
{console.log(arguments);$('#loginform_form_fieldset_message').formmessage('setText',{text:message,category:'error'});}});},doLogin:function(aLoginUrl,onLoginRedirect)
{var theForm=$('#loginform_form');var method="post";var restUrl=aLoginUrl;org.r3.AjaxUtils.submitForm(method,restUrl,theForm,function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{org.r3.PageManager.closeNotifier();var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isFail())
{var o=$('#loginform_form_fieldset_message');if(o.length)
restDto.showMessage('loginform_form_fieldset_message');else
{$('#loginform_form .loginform_mainsection .form-group').addClass('has-error');}}}
else
{org.r3.PageManager.gotoPage(onLoginRedirect);}},function(jqXHR,timeout,message){console.log(arguments);$('#loginform_form_fieldset_message').formmessage('setText',{text:message,category:'error'});},null,false);},logUserActionEvent:function(eventLogAmbit,eventLogUseCase,eventLogRefEntityId)
{var currentSite=org.r3.Constants.site;org.r3.AjaxUtils.ajaxInvoke('post',org.r3.PageManager.getRESTUrl('POST_EventLOG',[eventLogAmbit,eventLogUseCase,eventLogRefEntityId]));}};$.r3Utils.namespace("org.r3");org.r3.BreadCrumbManager=Class.extend({init:function()
{this._browserHistory_initialize();},_browserHistory_synchronization:false,_browserHistory_initialize:function()
{if(!org.r3.Constants.browserHistory_isEnabled())
return;_browserHistory_synchronization=false;var numberOfEntries=window.history.length;var currentState=window.history.state;if(currentState){history.replaceState(null,'Resetted State',null);}
window.onpopstate=$.r3Utils.hitch(this,this._browserHistory_onPopState);},_browserHistory_onPopState:function(e)
{if(this._browserHistory_synchronization)
{this._browserHistory_synchronization=false;return;}
var currentState=e.state;if(currentState&&currentState.breadCrumbIndex>=0){if(currentState.breadCrumbIndex>=this.breadCrumbData.length){var numberOfSteps=(currentState.breadCrumbIndex-this.breadCrumbData.length)+1;history.go(-numberOfSteps);}else
if(currentState.breadCrumbIndex<(this.breadCrumbData.length-1))
{this.activateBreadCrumb(currentState.breadCrumbIndex,true);}
else
{history.replaceState({"breadCrumbIndex":currentState.breadCrumbIndex},'Title BreadCrumb_'+(currentState.breadCrumbIndex),'#'+this.breadCrumbData[currentState.breadCrumbIndex].title);}}},_browserHistory_back:function(numberOfEntries)
{if(!org.r3.Constants.browserHistory_isEnabled()||!numberOfEntries)
return;this._browserHistory_synchronization=true;history.go(-numberOfEntries);},_browserHistory_onPushState:function(aBreadCrumb)
{if(!org.r3.Constants.browserHistory_isEnabled())
return;if(!aBreadCrumb.noHistory)
{if(history.state)
{if(history.state.breadCrumbIndex<(this.breadCrumbData.length-1))
{history.pushState({"breadCrumbIndex":this.breadCrumbData.length-1},'Title BreadCrumb_'+(this.breadCrumbData.length-1),'#'+aBreadCrumb.title);}
else if(history.state.breadCrumbIndex==(this.breadCrumbData.length-1))
{history.replaceState({"breadCrumbIndex":this.breadCrumbData.length-1},'Title BreadCrumb_'+(this.breadCrumbData.length-1),'#'+aBreadCrumb.title);}
else
{this._browserHistory_synchronization=false;}}
else
{history.replaceState({"breadCrumbIndex":this.breadCrumbData.length-1},'Title BreadCrumb_'+(this.breadCrumbData.length-1),'#'+aBreadCrumb.title);}}},breadCrumbData:[],_isBreadCrumbReadOnly:function()
{if(this.breadCrumbData.length==0)
return false;var bc=this.peekBreadCrumb();if(typeof bc.readOnly==="undefined")
return false;return bc.readOnly;},_adminlte_renderBreadCrumb:function()
{var ol=$('.content-wrapper .content-header .breadcrumb');ol.empty();if(!this.breadCrumbData.length)
{ol.parent().hide();}
else
ol.parent().show();for(var i=0;i<(this.breadCrumbData.length-1);i++)
{var child=null;if(this.breadCrumbData[i].actionForm&&!this._isBreadCrumbReadOnly())
ol.append(this._adminlte_renderHrefBreadCrumbData(this.breadCrumbData[i],i));else
ol.append(this._adminlte_renderReadOnlyBreadCrumbData(this.breadCrumbData[i],i));}
var i=(this.breadCrumbData.length-1);ol.append(this._adminlte_renderReadOnlyBreadCrumbData(this.breadCrumbData[i],i));ol.show();},_adminlte_renderHrefBreadCrumbData:function(aBreadCrumb,aBreadCrumbIndex)
{return"<li id='breadcrumb_"+aBreadCrumbIndex
+"'><a href='javascript:void(0)' onClick='org.r3.PageManager.activateBreadCrumb("+aBreadCrumbIndex+")' >"
+aBreadCrumb.title+"</a></li>";},_adminlte_renderReadOnlyBreadCrumbData:function(aBreadCrumb,aBreadCrumbIndex)
{return"<li id=\"breadcrumb_"+aBreadCrumbIndex+"\" class=\"active\" >"+aBreadCrumb.title+"</li>";},renderBreadCrumb:function()
{if(console_layout)
return this._adminlte_renderBreadCrumb();var outHtml="";for(var i=0;i<(this.breadCrumbData.length-1);i++)
{if(i>0)
{outHtml+=" &gt;&gt; ";}
if(this.breadCrumbData[i].actionForm&&!this._isBreadCrumbReadOnly())
outHtml+=this._renderHrefBreadCrumbData(this.breadCrumbData[i],i);else
outHtml+=this._renderReadOnlyBreadCrumbData(this.breadCrumbData[i],i);}
if(this.breadCrumbData.length>1)
{outHtml+=" &gt;&gt; ";}
var i=(this.breadCrumbData.length-1);outHtml+=this._renderReadOnlyBreadCrumbData(this.breadCrumbData[i],i);$('#breadcrumbs').html(outHtml);$('#breadcrumb_bar').show();},_renderHrefBreadCrumbData:function(aBreadCrumb,aBreadCrumbIndex)
{return"<span id=\"breadcrumb_"+aBreadCrumbIndex
+"\" class=\"r3_breadcrumb\" onClick=\"org.r3.PageManager.activateBreadCrumb("+aBreadCrumbIndex+")\" >"
+aBreadCrumb.title+"</span>";},_renderReadOnlyBreadCrumbData:function(aBreadCrumb,aBreadCrumbIndex)
{return"<span id=\"breadcrumb_"+aBreadCrumbIndex+"\" class=\"r3_breadcrumb_current\" >"+aBreadCrumb.title+"</span>";},_countBreadCrumbsByType:function(matchType)
{var rc=-1;if(this.breadCrumbData&&this.breadCrumbData.length)
{rc=0;for(var i=0;i<this.breadCrumbData.length;i++)
{var b=this.breadCrumbData[i];if(b&&b.type&&b.type==matchType)
rc++;}}
return rc;},back:function()
{this.activateBreadCrumb(this.breadCrumbData.length-2);},pushBreadCrumb:function(aBreadCrumb)
{this.breadCrumbData.push(aBreadCrumb);this.renderBreadCrumb();this._browserHistory_onPushState(aBreadCrumb);},popBreadCrumb:function()
{this.breadCrumbData.pop();this.renderBreadCrumb();},peekBreadCrumb:function()
{return this.breadCrumbData[this.breadCrumbData.length-1];},setBreadCrumb:function(aBreadCrumb)
{this.breadCrumbData=[aBreadCrumb];this.renderBreadCrumb();this._browserHistory_onPushState(aBreadCrumb);},closeAllBreadCrumbs:function()
{var startingIndex=this._countBreadCrumbsByType('breadcrumb_system');var numberOfEntries=this.breadCrumbData.length-1-(startingIndex)+1;if(numberOfEntries>1)
this._browserHistory_back(numberOfEntries-1);this.closeBreadCrumbs(startingIndex);},closeBreadCrumbs:function(startingBreadCrumbIndex,onBrowserHistory)
{console.info("closeBreadCrumbs: "+startingBreadCrumbIndex);if(startingBreadCrumbIndex>=this.breadCrumbData.length)
{console.error("Could not close breadcrumb at index: "+startingBreadCrumbIndex);return;}
for(var i=this.breadCrumbData.length-1;i>=startingBreadCrumbIndex;i--)
{if(this.breadCrumbData[i].actionForm)
this.breadCrumbData[i].actionForm.close();this.breadCrumbData.pop();}
this.renderBreadCrumb();},activateFirstBreadCrumb:function()
{var startingIndex=this._countBreadCrumbsByType('breadcrumb_system');this.activateBreadCrumb(startingIndex);},activateBreadCrumb:function(breadCrumbIndex,onBrowserHistory)
{console.info("activateBreadCrumb: "+breadCrumbIndex);if($('#canvas_report').is(":visible"))
{this.closeFullScreenLayout();}
if(breadCrumbIndex>=this.breadCrumbData.length)
{console.error("Could not activate breadcrumb at index: "+breadCrumbIndex);return;}
var numberOfEntries=(this.breadCrumbData.length-1)-(breadCrumbIndex+1)+1;this.closeBreadCrumbs(breadCrumbIndex+1,onBrowserHistory);if(onBrowserHistory)
this._browserHistory_back(numberOfEntries);if(this.breadCrumbData[breadCrumbIndex].actionForm)
{this.breadCrumbData[breadCrumbIndex].actionForm.show();if(this.breadCrumbData[breadCrumbIndex].actionForm.refresh)
this.breadCrumbData[breadCrumbIndex].actionForm.refresh();else
console.error("No Refresh for: ",this.breadCrumbData[breadCrumbIndex].actionForm);}
this.renderBreadCrumb();}});$.r3Utils.namespace("org.r3");org.r3.GoogleMapsUtils={init:function()
{},geoCodeAddress:function(anAddress,aStreetNumber,aZipCode,aTown,aCounty,aDistrict,aCountry,onSuccess,onNotFound,onQuotaExceeded,onError,googleAPIKey)
{var searchAddress="";var numberOfInfos=0;var pattern=0;if(anAddress)pattern+=1;if(aStreetNumber)pattern+=2;if(aZipCode)pattern+=4;if(aTown)pattern+=8;if(aCounty)pattern+=16;if(aDistrict)pattern+=32;if(aCountry)pattern+=64;switch(pattern&(1+2))
{case 1:searchAddress=anAddress;break;case 3:searchAddress=anAddress+", "+aStreetNumber;break;default:console.error("GoogleMapsUtils::geoCodeAddress - InvalidArgs",arguments);}
switch(pattern&(4+8+16))
{case 8:searchAddress=searchAddress+", "+aTown;break;case 12:searchAddress=searchAddress+", "+aZipCode+" "+aTown;break;case 8+16:searchAddress=searchAddress+", "+aTown+" "+aCounty;break;case 12+16:searchAddress=searchAddress+", "+aZipCode+" "+aTown+" "+aCounty;break;default:console.error("GoogleMapsUtils::geoCodeAddress - InvalidArgs",arguments);}
switch(pattern&(32))
{case 32:searchAddress=searchAddress+", "+aDistrict;break;}
switch(pattern&(64))
{case 64:searchAddress=searchAddress+", "+aCountry;break;}
var qs=encodeURI(searchAddress);var method="get";var restUrl="https://maps.googleapis.com/maps/api/geocode/json?address="+qs;if(!onSuccess)
{console.error("GoogleMapsUtils::geoCodeAddress - OnSuccess Not Specified For: "+searchAddress);return;}
$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{console.log(responseData)
switch(responseData.status)
{case'OK':if(onSuccess)
onSuccess(responseData);else console.log("GoogleMapsUtils::geoCodeAddress - OK",responseData);break;case'ZERO_RESULTS':if(onNotFound)
onNotFound(responseData);else console.log("GoogleMapsUtils::geoCodeAddress - ZERO_RESULTS",responseData);break;case'OVER_QUERY_LIMIT':if(onQuotaExceeded)
onQuotaExceeded(responseData);else console.log("GoogleMapsUtils::geoCodeAddress - OVER_QUERY_LIMIT",responseData);break;case'REQUEST_DENIED':if(onError)
onError(responseData.status,responseData);else console.log("GoogleMapsUtils::geoCodeAddress - REQUEST_DENIED",responseData);break;case'INVALID_REQUEST':if(onError)
onError(responseData.status,responseData);else console.log("GoogleMapsUtils::geoCodeAddress - INVALID_REQUEST",responseData);break;case'UNKNOWN_ERROR':if(onError)
onError(responseData.status,responseData);else console.log("GoogleMapsUtils::geoCodeAddress - UNKNOWN_ERROR",responseData);break;}},"error":function(jqXHR,timeout,message)
{if(onError)
onError('AJAX_ERROR',message);else console.error(message);}});},getGeoCodeStreetAddressResultIndex:function(geoCodeJSON)
{if(!geoCodeJSON||geoCodeJSON.status!='OK')
return null;for(var i=0;i<geoCodeJSON.results.length;i++)
{if(geoCodeJSON.results[i].types.indexOf('street_address')>=0||geoCodeJSON.results[i].types.indexOf('route')>=0)
{return i;}}
return-1;},getGeoCodeAddressComponent:function(geoCodeJSON,resultIndex,componentName)
{if(!geoCodeJSON||geoCodeJSON.status!='OK')
return null;if(!resultIndex)
resultIndex=0;if(geoCodeJSON.results.length<=resultIndex)
return null;var result=geoCodeJSON.results[resultIndex];switch(componentName)
{case'street_number':case'route':case'locality':case'administrative_area_level_3':case'administrative_area_level_2':case'administrative_area_level_1':case'country':case'postal_code':if(result.address_components&&result.address_components.length>0)
{for(var i=0;i<result.address_components.length;i++)
{var t=result.address_components[i].types;if(t.indexOf(componentName)>=0)
return result.address_components[i];}}
break;case'formatted_address':return result.formatted_address;break;case'location':if(result.geometry)
return result.geometry.location;break;case'northeast':if(result.geometry&&result.geometry.viewport)
return result.geometry.viewport.northeast;break;case'southwest':if(result.geometry&&result.geometry.viewport)
return result.geometry.viewport.southwest;break;case'place_id':return result.place_id;break;}},googleGeoCodeLocation:function(onSuccess,onError)
{var method="POST";var restUrl="https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyA8t_rKmjzImtLh3OKyn31hOZgra2B9r2s";$.ajax({"type":method,"url":restUrl,"data":JSON.stringify({}),"dataType":"json","contentType":"application/json","success":function(responseData)
{console.info("googleGeoCodeLocation");console.info(responseData);if(onSuccess)
onSuccess(responseData.location.lat,responseData.location.lng,responseData.accuracy);},"error":function(jqXHR,timeout,message)
{console.info("googleGeoCodeLocation");console.error(message);if(onError)
onError(2,"[POSITION_UNAVAILABLE] Geo Location NOT Available "+message);}});},geoCodeLocation:function(onSuccess,onError)
{if("geolocation"in navigator)
{var geoOptions={timeout:10*1000};navigator.geolocation.getCurrentPosition(function(location)
{if(onSuccess)
onSuccess(location.coords.latitude,location.coords.longitude,location.coords.accuracy);},function(error)
{var msg="UNKNOWN";switch(error.code)
{case 1:msg="PERMISSION_DENIED";break;case 2:msg="POSITION_UNAVAILABLE";break;case 3:msg="TIMEOUT";break;default:msg=error.code+'';}
console.error(error.code,"["+msg+"] "+error.message);if(onError)
onError(error.code,"["+msg+"] "+error.message);},geoOptions);}
else
{console.error("[POSITION_UNAVAILABLE] Geo Location NOT Available");if(onError)
onError(2,"[POSITION_UNAVAILABLE] Geo Location NOT Available");}}};$.r3Utils.namespace("org.r3");org.r3.LUTManager=Class.extend({init:function()
{this.lutMAP={};},isLUTLoaded:function(aUrl)
{return this.lutMAP[aUrl];},invalidateLUT:function(aUrl)
{this.lutMAP[aUrl]=null;},getLUTNetworkRequest:function(aContext,aRequiredLUT,paramsArray)
{var networkRequest={"id":"requiredLUT_"+aRequiredLUT,"context":aContext,"requester":function(onSuccess,onError)
{var resolvedUrl=org.r3.PageManager.getRESTUrl(aRequiredLUT,paramsArray);org.r3.PageManager.lutManager.getLUT(resolvedUrl,onSuccess);}};return networkRequest;},addLUT:function(aUrl,jsonData)
{var theLUT=jsonData;this.lutMAP[aUrl]=theLUT;},getLUT:function(aUrl,onComplete)
{if(this.lutMAP[aUrl])
{var theLUT=this.lutMAP[aUrl];if(onComplete)
onComplete(theLUT);return theLUT;}
$.getJSON(aUrl,$.r3Utils.hitch(this,function(jsonData)
{var theLUT=jsonData;this.lutMAP[aUrl]=theLUT;if(onComplete)
onComplete(theLUT);})).error(function(jqXHR,timeout,message)
{console.error(aUrl,jqXHR,timeout,message);});return false;},getLUTItem:function(aUrl,anItemComparable,onComplete)
{if(this.isLUTLoaded(aUrl))
{var theLUT=this.lutMAP[aUrl];var theLUTItem=this._findItem(theLUT,anItemComparable);if(onComplete)
onComplete(theLUTItem);return theLUTItem;}
else
{this.getLUT(aUrl,$.r3Utils.hitch(this,function(theLUT)
{var theLUTItem=this._findItem(theLUT,anItemComparable);if(onComplete)
onComplete(theLUTItem);}));}
return false;},_findItem:function(theLUT,anItemComparable)
{for(var i=0;i<theLUT.aaData.length;i++)
{var item=theLUT.aaData[i];if(_.isString(anItemComparable)||_.isNumber(anItemComparable))
{if(item.dtokey==anItemComparable)
{return item;}}
else if($.isFunction(anItemComparable))
{if(anItemComparable(item))
return item;}}
return false;},populateCheckBoxGroup:function(argsHash)
{if(!argsHash.groupContainer||!argsHash.groupContainer.length)
console.error("LUTManager::populateCheckBoxGroup::",argsHash.groupContainer);var container=argsHash.groupContainer;this.getLUT(argsHash.lutUrl,$.r3Utils.hitch(this,function(theLUT)
{var me=this;if(theLUT.aaData&&theLUT.iTotalRecords)
{$.each(theLUT.aaData,function(index,item)
{var ddescr=(argsHash.fnRenderText)?argsHash.fnRenderText(item):item.dtodescr;var htmlFragment=me._createCheckBoxItem(argsHash.groupName,argsHash.groupId+item.dtokey.toLowerCase(),item.dtokey,ddescr,argsHash.value&&argsHash.value.indexOf(item.dtokey)>=0,argsHash.labelSize);container.append(htmlFragment);});}
if(argsHash.onComplete)
argsHash.onComplete(theLUT);}));},_createCheckBoxItem:function(aCheckName,aCheckId,aCheckValue,aCheckText,isChecked,aLabelSize)
{if(aLabelSize)
aLabelSize='width: '+aLabelSize+'px;';else aLabelSize="";var selectionIndicator=(isChecked)?' checked ':'';var htmlFragment="<label class='checkbox-inline' style='"+aLabelSize+" '><input name='"+aCheckName+"' id='"+aCheckId+"' type='checkbox' value='"+aCheckValue+"' "
+selectionIndicator+" />"+aCheckText+"</label>";return htmlFragment;},populateRadioGroup:function(argsHash)
{if(!argsHash.groupContainer||!argsHash.groupContainer.length)
console.error("LUTManager::populateRadioGroup::",argsHash.groupContainer);var container=argsHash.groupContainer;this.getLUT(argsHash.lutUrl,$.r3Utils.hitch(this,function(theLUT)
{var me=this;if(theLUT.aaData&&theLUT.iTotalRecords)
{$.each(theLUT.aaData,function(index,item)
{var ddescr=(argsHash.fnRenderText)?argsHash.fnRenderText(item):item.dtodescr;var htmlFragment=me._createRadioItem(argsHash.groupName,argsHash.groupId+item.dtokey.toLowerCase(),item.dtokey,ddescr,argsHash.value&&item.dtokey==argsHash.value,argsHash.labelSize);container.append(htmlFragment);});}
if(argsHash.onComplete)
argsHash.onComplete(theLUT);}));},_createRadioItem:function(aRadioName,aRadioId,aRadioValue,aRadioText,isSelected,aLabelSize)
{if(aLabelSize)
aLabelSize='width: '+aLabelSize+'px;';else aLabelSize="";var selectionIndicator=(isSelected)?' checked ':'';var htmlFragment="<label class='radio-inline' style='"+aLabelSize+" '><input name='"+aRadioName+"' id='"+aRadioId+"' type='radio' value='"+aRadioValue+"' "
+selectionIndicator+"  />"+aRadioText+"</label>";return htmlFragment;},populateInputFieldAsCSV:function(argsHash)
{if(!argsHash.selectWidget||!argsHash.selectWidget.length)
console.error("LUTManager::populateInputFieldAsCSV::",argsHash.selectWidget);this.getLUT(argsHash.lutUrl,$.r3Utils.hitch(this,function(aLUT)
{var csvValue="";if(aLUT.aaData&&aLUT.iTotalRecords)
{$.each(aLUT.aaData,function(index,item)
{if(index>0)
csvValue+=",";csvValue+=item.dtokey;});}
if(argsHash.selectWidget.length>1)
{$(argsHash.selectWidget[0]).val(csvValue);}
else
$(argsHash.selectWidget).val(csvValue);if(argsHash.onComplete)
argsHash.onComplete(theLUT);}));},populateSelectField:function(argsHash)
{if(!argsHash.selectWidget||!argsHash.selectWidget.length)
console.error("LUTManager::populateSelectField::",argsHash.selectWidget);this.getLUT(argsHash.lutUrl,$.r3Utils.hitch(this,function(theLUT)
{if(argsHash.selectWidget.length>1)
{for(var i=0;i<argsHash.selectWidget.length;i++)
{this._populateSelect(theLUT,$(argsHash.selectWidget[i]),argsHash.blankOptionText,argsHash.selectedValue,argsHash.keepTopNItems,argsHash.useBusinessKey,argsHash.fnRenderKey,argsHash.fnRenderText,argsHash.clientFilter);}}
else
this._populateSelect(theLUT,argsHash.selectWidget,argsHash.blankOptionText,argsHash.selectedValue,argsHash.keepTopNItems,argsHash.useBusinessKey,argsHash.fnRenderKey,argsHash.fnRenderText,argsHash.clientFilter);if(argsHash.onComplete)
argsHash.onComplete(theLUT);}));},_populateSelect:function(aLUT,selectWidget,nullOption,selectedValue,keepTopNItems,useBusinessKey,fnRenderKey,fnRenderText,clientFilterFunction)
{console.log("_populateSelect::",selectWidget);var selectOptions=selectWidget.prop('options');if(!selectOptions)
console.error("Select Option is NULL for: ",selectWidget.attr('id'),selectedValue);selectOptions.length=keepTopNItems||0;if(nullOption)
{selectOptions[selectOptions.length]=new Option(nullOption,'');}
if(aLUT.aaData&&aLUT.aaData.length)
{var itemSelected=false;$.each(aLUT.aaData,function(index,item)
{if(!clientFilterFunction||clientFilterFunction(item))
{var dkey=item.dtokey;if(useBusinessKey&&item.businesskey)
dkey=item.businesskey;else if(fnRenderKey)
dkey=fnRenderKey(item);var ddescr=(fnRenderText)?fnRenderText(item):item.dtodescr;if(index==0)
firstItemKey=dkey;itemSelected=false;if(selectedValue&&$.isArray(selectedValue))
{if($.inArray(dkey,selectedValue)>=0)
itemSelected=true;}
else if(selectedValue&&_.isString(selectedValue))
{if(selectedValue&&dkey==selectedValue&&!itemSelected)
{itemSelected=true;}}
selectOptions[selectOptions.length]=new Option(ddescr,dkey,itemSelected,itemSelected);}});}},populateTextBoxGroup:function(argsHash)
{if(!argsHash.groupContainer||!argsHash.groupContainer.length)
console.error("LUTManager::populateTextBoxGroup::",argsHash.groupContainer);var container=argsHash.groupContainer;this.getLUT(argsHash.lutUrl,$.r3Utils.hitch(this,function(theLUT)
{var me=this;if(theLUT.aaData&&theLUT.iTotalRecords)
{$.each(theLUT.aaData,function(index,item)
{var ddescr=(argsHash.fnRenderText)?argsHash.fnRenderText(item):item.dtodescr;var htmlFragment=me._createTextBoxItem(argsHash.groupId+item.dtokey.toLowerCase(),argsHash.groupName+item.dtokey.toLowerCase(),ddescr,argsHash.template);container.append(htmlFragment);if(argsHash.getValue)
{$('#'+argsHash.groupId+item.dtokey.toLowerCase()).val(argsHash.getValue(item.dtokey.toLowerCase(),null));}});}
if(argsHash.onComplete)
argsHash.onComplete(theLUT);}));},_createTextBoxItem:function(aTextBoxId,aTextBoxName,aLabelText,aTemplate)
{var templatedObject={inputFieldTextLabel:aLabelText,inputFieldTextName:aTextBoxName,inputFieldTextId:aTextBoxId};var htmlFragment=tmpl(aTemplate,templatedObject);return htmlFragment;}});$.r3Utils.namespace("org.r3");org.r3.PageManager={restConfigManager:null,userInfo:null,siteCollectionDTOAdapter:null,userCollectionProfileInfo:null,actorUserProfileInfo:null,lutManager:null,notifier:null,urlRandomParameterName:'_r',secondaryWindow:null,autoCloseSecondaryWindow:true,pageCookie:null,jsAppVersionForm:null,clientGeoLocation:null,init:function()
{$.fn.dataTable.ext.legacy.ajax=true;tmpl.helper+=",log=function(){console.log.apply(console, arguments)}"+",st='',stream=function(cb){var l=st.length;st=_s;cb( _s.slice(l));}";this.notifier=$("#wmg_application_notifier").notifier();$('#notifierButtonOK').click($.r3Utils.hitch(this,this.closeNotifier));$('#pageAction_logOut').attr('href',"javascript:void(0)");$('#pageAction_logOut').click($.r3Utils.hitch(this,this.logOut));$('#pageAction_console_logOut').attr('href',"javascript:void(0)");$('#pageAction_console_logOut').click($.r3Utils.hitch(this,this.consoleLogOut));if($("#loginform_form").length>0&&$('#loginform_form').is(":visible"))
{$.r3Utils.onEnter('#loginform_form_password',this,function(){org.r3.AjaxUtils.doLogin(org.r3.PageManager.getRESTUrl('POST_User_Login',[$('#loginform_form_nickname').val()]),org.r3.Constants.getStrutsActionContext()+"/org/r3/home.do");},true);$("#loginform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.login.loginform_form_validationRules,messages:org.r3.jsportlet.login.loginform_form_validationMessages});}
else console.info("Login Assente o NON visibile");$('#AppVersion').html(org.r3.Constants.applicationVersion);this.jsAppVersionForm=$('#r3_js_appversionform_form');this.lutManager=new org.r3.LUTManager();this.breadCrumbManager=new org.r3.BreadCrumbManager();if(org.r3.Constants.isI18NTranslationRequired())
{$.i18n.init({fallbackLng:false,dynamicLoad:false,sendMissing:false,lng:org.r3.Constants.language,ns:'org.r3',customLoad:this._i18n_resource_loading,resGetPath:"/r3ng/{0}/i18n.{1}.json"});}
this.pageCookie=$.r3Utils.getCookie("UNEPSESSIONID");this.cookieCheckInterval=setInterval($.r3Utils.hitch(this,this.checkCookie),3000);this.clientGeoLocation=[41.7693635,12.224426];if(false)
{org.r3.GoogleMapsUtils.geoCodeLocation(function(lat,lng,accuracy){org.r3.PageManager.clientGeoLocation=[lat,lng];},function(errCode,errMessage){console.log("ErrCode/ErrMsg ",errCode,errMessage);org.r3.PageManager.clientGeoLocation=[41.890112,12.4920743,18];});}
L.Icon.Default.imagePath='/r3ng/resources/bootstrap/css/leaflet/images';},checkCookie:function()
{var c=$.r3Utils.getCookie("UNEPSESSIONID");if(c!=this.pageCookie)
{console.error("Cookie Doesn't match");clearInterval(this.cookieCheckInterval);}},_i18n_resource_loading:function(lng,ns,options,done)
{var ns_path=ns.replace(/\./g,'/');console.log('_i18n_resource_loading...ns_path: '+ns_path);var url=$.r3Utils.stringFormat(options.resGetPath,[ns_path,lng]);$.ajax({url:url,success:function(data,status,xhr){console.log('loaded: '+url);done(null,data);},error:function(xhr,status,error)
{if((status&&status==200)||(xhr&&xhr.status&&xhr.status==200)){console.error('_i18n_resource_loading...There is a typo in: '+url+" error is "+error);}else if((status&&status==404)||(xhr&&xhr.status&&xhr.status==404)){console.log('_i18n_resource_loading....Does not exist: '+url);}else{var theStatus=status?status:((xhr&&xhr.status)?xhr.status:null);console.log(theStatus+' when loading '+url);}
done(error,{});},"dataType":"json","method":"GET",async:true});},networkInitialization:function(processOptions)
{this.userInfo=null;this.restConfigManager=new org.r3.RESTConfigManager(org.r3.Constants.applicationContext,org.r3.Constants.getRestServicesContext(),org.r3.Constants.restServicesConfigDictionary);var networkInitializationQueue=[];networkInitializationQueue.push({"id":"restConfigManager","context":this.restConfigManager,"requester":this.restConfigManager.networkInitialization});networkInitializationQueue.push({id:"sitecollection",type:"Get",url:org.r3.Constants.getRestServicesContext()+"/sitecollection/"+org.r3.Constants.site,dataType:"json"});if(processOptions.verifyIdentity)
{networkInitializationQueue.push({"id":"whoami","context":this,"requester":this.whoami});networkInitializationQueue.push({"id":"usercollection_whoami","context":this,"requester":this.usercollection_whoami});}
this.multiAjax(networkInitializationQueue,$.r3Utils.hitch(this,function(responseData){var s=responseData['sitecollection'];if(s!=null)
this.siteCollectionDTOAdapter=new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(s);else this.siteCollectionDTOAdapter=null;if(this.userCollectionProfileInfo)
{this.userCollectionProfileInfo.setupEnabledRoles4Site(this.userInfo,this.siteCollectionDTOAdapter);}
if(processOptions&&processOptions.success)
processOptions.success(responseData);}),function(jqXHR,timeout,message)
{console.error("org.r3.Pagemanager Initialization Error",message);if(processOptions&&processOptions.error)
processOptions.error(jqXHR,timeout,message);});},isSmallDevice:function()
{var smallDevice=window.matchMedia("screen and (max-width: 767px)")
return smallDevice.matches;},isSmallOrTabletDevice:function()
{var smallDevice=window.matchMedia("screen and (max-width: 768px)")
return smallDevice.matches;},canvasInitialization:function()
{if(org.r3.PageManager.userInfo)
$('#userName').text(org.r3.PageManager.userInfo.getUsername());if(this.userInfo.isUserConsentRequired())
{this.cookieLawActionForm=new org.r3.jsportlet.cookielaw.CookieLawActionForm(this,'#cookieLawConsent');this.cookieLawActionForm.open();}
$('.language_selector').unbind().click($.r3Utils.hitch(this,function(e){var theItem=$(e.currentTarget);var languageCode=theItem.attr('data-language');if(org.r3.Constants.language!=languageCode)
this.goto2CurrentUrlAndSwitchLanguage(location.href,languageCode);}));if(!this.isSmallOrTabletDevice())
$().UItoTop({easingType:'easeOutQuart'});},consoleLogOut:function()
{this.doLogOut(true);},logOut:function()
{this.doLogOut(false);},doLogOut:function(isConsoleEnvironment)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"post",url:this.getRESTUrl('POST_User_Logout',[this.userInfo.dataBean.userid]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{this.redirectToHomePage(isConsoleEnvironment);}),$.r3Utils.hitch(this,function(jqXHR,timeout,message)
{this.redirectToHomePage(isConsoleEnvironment);}));},onlineHelp:function()
{var targetUrl=this.getRESTUrl('GET_Guida_In_Linea',['GUIDA_UTENTE']);this.openFullScreenSecondaryWindow("Guida_in_Linea",targetUrl);},redirectToHomePage:function(isConsoleEnvironment)
{if(isConsoleEnvironment)
this.redirectToConsoleHomePage();else this.gotoPage(org.r3.Constants.getStrutsActionContext()+"/org/r3/home.do");},redirectToConsoleHomePage:function()
{this.gotoPage(org.r3.Constants.getStrutsActionContext()+"/org/r3/console/home.do");},getHomeConsoleBreadCrumb:function()
{return{"type":"breadcrumb_system","noHistory":true,"title":"Home Console","actionForm":{show:function()
{org.r3.PageManager.redirectToConsoleHomePage();},close:function()
{},refresh:function()
{}}};},getReferrerWebSiteConsoleBreadCrumb:function()
{return{"type":"breadcrumb_system","noHistory":true,"title":org.r3.SiteConstants.referrerWebSiteConsoleName(),"actionForm":{show:function()
{org.r3.PageManager.gotoPage(org.r3.SiteConstants.referrerWebSiteConsoleUrl());},close:function()
{},refresh:function()
{}}};},pushHomeConsoleBreadCrumb:function()
{if(org.r3.SiteConstants.hasReferrerWebSiteConsoleReferences())
{this.pushBreadCrumb(this.getReferrerWebSiteConsoleBreadCrumb());}
this.pushBreadCrumb(this.getHomeConsoleBreadCrumb());},getHomeBreadCrumb:function()
{return{"type":"breadcrumb_system","noHistory":true,"title":org.r3.SiteConstants.targetSiteName,"actionForm":{show:function()
{org.r3.PageManager.redirectToHomePage();},close:function()
{},refresh:function()
{}}};},getReferrerWebSiteHomeBreadCrumb:function()
{return{"type":"breadcrumb_system","noHistory":true,"title":org.r3.SiteConstants.referrerWebSiteHomeName(),"actionForm":{show:function()
{org.r3.PageManager.gotoPage(org.r3.SiteConstants.referrerWebSiteHomeUrl());},close:function()
{},refresh:function()
{}}};},pushHomeBreadCrumb:function()
{if(org.r3.SiteConstants.hasReferrerWebSiteHomeReferences())
{this.pushBreadCrumb(this.getReferrerWebSiteHomeBreadCrumb());}
this.pushBreadCrumb(this.getHomeBreadCrumb());},buildURL2Page:function(aPage)
{return org.r3.Constants.getStrutsActionContext()+aPage;},goto2CurrentUrlAndSwitchLanguage:function(aUrl,aLanguageCode)
{var ndx=aUrl.indexOf('/'+org.r3.Constants.language+'/');if(ndx>=0)
{var newUrl=aUrl.substring(0,ndx+1);newUrl=newUrl+aLanguageCode;newUrl=newUrl+aUrl.substring(ndx+1+org.r3.Constants.language.length);console.log("goto2CurrentUrlAndSwitchLanguage: ",newUrl);window.location.href=newUrl;}},gotoPage:function(aUrl)
{window.location.href=this.getRandomParameterizedURL(aUrl);},isRestDTO:function(responseData)
{if(!responseData||!$.isPlainObject(responseData))
return false;if(responseData.status&&(responseData.status=='fail'||responseData.status=='ok'||responseData.status=='warning'))
return true;},getRestDTO:function(responseData)
{if(this.isRestDTO(responseData))
return new org.r3.RestDTOAdapter(responseData);return null;},initializeCanvas:function(fDescription)
{$('#info_area_functionid').text(fDescription);},whoami:function(onSuccess,onError)
{var whoamiRestUrl=this.getRandomParameterizedURL(org.r3.Constants.getRestServicesContext()+"/users/whoami");$.getJSON(whoamiRestUrl,$.r3Utils.hitch(this,function(jsonData)
{this.userInfo=new org.r3.db.system.user.user.UserDTOAdapter(jsonData);onSuccess();})).error($.r3Utils.hitch(this,function(jqXHR,timeout,message)
{console.info("UserInfo::whoami - Log-in error",jqXHR,timeout,message);if(jqXHR.status==403)
{var p=JSON.parse(jqXHR.responseText);if(p)
{console.info("Authorization Error: "+p.reasoncode);if(p.reasoncode=='userunknown')
this.redirectToLoginPage();else if(p.reasoncode=='usernotfound')
{this.redirectToIAMUserNotDefinedPage();}}}
else
{console.info("WhoAMI Returned: ",jqXHR.status);if(!jqXHR.status)
this.redirectToHomePage();else
this.redirectToWhoAmiServerErrorPage();}}));},scroll2BottomActive:false,scroll2BottomCallBack:null,setScrollToBottomCallback:function(aCallBack)
{var _self=this;this.scroll2BottomCallBack=aCallBack;if(!this.scroll2BottomActive)
{this.scroll2BottomActive=true;$(window).scroll(function(){if(!_self.scroll2BottomActive)
return;if($(window).scrollTop()==$(document).height()-$(window).height())
{_self.scroll2BottomCallBack();}});}},clearScrollToBottomCallback:function()
{if(this.scroll2BottomActive)
{}
this.scroll2BottomActive=false;},usercollection_whoami:function(onSuccess,onError)
{var whoamiRestUrl=this.getRandomParameterizedURL(org.r3.Constants.getRestServicesContext()+"/userscollection/whoami");$.getJSON(whoamiRestUrl,$.r3Utils.hitch(this,function(jsonData)
{this.userCollectionProfileInfo=null;if(jsonData)
this.userCollectionProfileInfo=new org.r3.db.mongo.usercollection.UserCollectionDTOAdapter(jsonData);onSuccess();})).error($.r3Utils.hitch(this,function(jqXHR,timeout,message)
{console.info("UserInfo::usercollection_whoami - Error",jqXHR,timeout,message);if(onError)onError();}));},getSiteActorId:function()
{return this.actorUserProfileInfo&&this.actorUserProfileInfo.getSiteActorId();},isUserInRole:function(functionCode)
{var checkRc=this.userInfo.isInRole(org.r3.Constants.site,functionCode);return checkRc;},getMessageFromDict:function(str,params)
{var msg=null;try
{msg=eval(str);}
catch(e)
{}
if(msg==null||msg=="undefined")
msg=str;return $.r3Utils.stringFormat(msg);},getRESTUrl:function(aUrlName,params)
{var restUrl=this.restConfigManager.getRESTUrl(aUrlName,params);if(!restUrl)
console.error("org.r3.PageManager::getRESTUrl - Resolution Error for - ",aUrlName);return restUrl;},wait:function(aMessage)
{this.notifier.wait(this.getMessageFromDict(aMessage),0);},error:function(aMessage)
{this.notifier.error(this.getMessageFromDict(aMessage),0);},message:function(aMessage)
{this.notifier.message(this.getMessageFromDict(aMessage),0);},closeNotifier:function()
{this.notifier.close();},confirmation:function(aMessage)
{return window.confirm(this.getMessageFromDict(aMessage));},alert:function(aMessage)
{return window.alert(this.getMessageFromDict(aMessage));},multiAjax:function(requests,success,error)
{var sucessIndex=1,numberOfRequests=requests.length-1,data={};$.each(requests,function(i,d)
{var multiAjaxSuccess=function(d2)
{if(d.requester&&d.context)
{data[d.id]=d.context;}
else
{data[d.id]=d2;}
if(sucessIndex>numberOfRequests)
{success(data);}
else
{sucessIndex++;}};var multiAjaxError=function(jqXHR,timeout,message)
{if(typeof error=='function')
{error(jqXHR,timeout,message);}
else
console.error("Getting an unmanaged error: ",message);};if(d.requester)
{d.requester.call(d.context,multiAjaxSuccess,multiAjaxError);}
else
{$.ajax({type:d.type,url:d.url,dataType:d.dataType,success:multiAjaxSuccess,error:multiAjaxError});}});},back:function()
{this.breadCrumbManager.back();},pushBreadCrumb:function(aBreadCrumb)
{this.breadCrumbManager.pushBreadCrumb(aBreadCrumb);},popBreadCrumb:function()
{this.breadCrumbManager.popBreadCrumb();},peekBreadCrumb:function()
{this.breadCrumbManager.peekBreadCrumb();},setBreadCrumb:function(aBreadCrumb)
{this.breadCrumbManager.setBreadCrumb(aBreadCrumb);},closeAllBreadCrumbs:function()
{this.breadCrumbManager.closeAllBreadCrumbs();},closeBreadCrumbs:function(startingBreadCrumbIndex,onBrowserHistory)
{if($('#canvas_report').is(":visible"))
{this.closeFullScreenLayout();}
this.breadCrumbManager.closeBreadCrumbs(startingBreadCrumbIndex,onBrowserHistory);},activateFirstBreadCrumb:function()
{this.breadCrumbManager.activateFirstBreadCrumb();},activateBreadCrumb:function(breadCrumbIndex,onBrowserHistory)
{this.breadCrumbManager.activateBreadCrumb(breadCrumbIndex,onBrowserHistory);},getVersionedUIURL:function(aUrl)
{var u=$.r3Utils.addParameterToUrl(aUrl,'r3_ui_version',org.r3.Constants.r3_ui_version);u=$.r3Utils.addParameterToUrl(u,'r3_site',org.r3.Constants.site);u=$.r3Utils.addParameterToUrl(u,'r3_lang',org.r3.Constants.language);return u;},getRandomParameterizedURL:function(aUrl)
{return $.r3Utils.addParameterToUrl(aUrl,this.urlRandomParameterName,Math.random()*5);},getLUTItemDescription:function(aLutUrl,aLutItemKey,lutUrlParameters)
{var theLUTItem=this.getLUTItem(aLutUrl,aLutItemKey,lutUrlParameters);if(!theLUTItem)
return'';return theLUTItem.dtodescr;},getLUTItem:function(aLutUrl,aLutItemKey,lutUrlParameters)
{if(!aLutItemKey)
return null;var resolvedUrl=aLutUrl;if(aLutUrl.indexOf('/')<0)
resolvedUrl=this.getRESTUrl(aLutUrl,lutUrlParameters);var theLUTItem=this.lutManager.getLUTItem(resolvedUrl,aLutItemKey,false);return theLUTItem;},openWindow:function(aName,targetUrl,aWidth,anHeight,withMenuBar,isResizable,withScrollbars,withStatus)
{var windowName=(aName)?aName:"_blank";var windowOptions="dependent,width="+aWidth+",height="+anHeight;if(withMenuBar)
windowOptions=windowOptions+",menubar";if(isResizable)
windowOptions=windowOptions+",resizable";if(withScrollbars)
windowOptions=windowOptions+",scrollbars";if(withStatus)
windowOptions=windowOptions+",status";var winObject=window.open(targetUrl,windowName,windowOptions);winObject.focus();return winObject;},openSecondaryWindow:function(aName,targetUrl,aWidth,anHeight,withMenuBar,isResizable,withScrollbars,withStatus)
{this.secondaryWindow=this.openWindow(aName,targetUrl,aWidth,anHeight,withMenuBar,isResizable,withScrollbars,withStatus);},openFullScreenSecondaryWindow:function(aName,targetUrl)
{console.info("Screen: ",window.screen+' - '+window.screen.availWidth+' - '+window.screen.availHeight);if(targetUrl.indexOf("DMS_FILE")==0)
targetUrl=$.r3Utils.formatDMSUrl4ClientAccess(targetUrl);this.secondaryWindow=this.openWindow(aName,targetUrl,screen.availWidth,screen.availHeight);},closeSecondaryWindow:function()
{if(this.secondaryWindow&&this.autoCloseSecondaryWindow)
{if(!this.secondaryWindow.closed)
{this.secondaryWindow.close();}}
this.secondaryWindow=null;},viewDocument:function(documentUrl)
{this.openFullScreenSecondaryWindow('Visualizza_Documenti',documentUrl);},saveAsDocument:function(targetUrl)
{if(targetUrl.indexOf("DMS_FILE")==0)
targetUrl=$.r3Utils.formatDMSUrl4ClientAccess(targetUrl,';saveas=true');window.location.href=targetUrl;},loadImage:function(targetUrl,loadImageOptions,onSuccess)
{if(targetUrl.indexOf("DMS_FILE")==0)
targetUrl=$.r3Utils.formatDMSUrl4ClientAccess(targetUrl);loadImage(targetUrl,function(img)
{if(img.type==="error"){console.error("Error loading image "+targetUrl);}else{onSuccess($(img));}},loadImageOptions);},openFullScreenLayout:function(anActionForm)
{this.googleAnalyticsSendPageView();if(console_layout)
{$('.wrapper').hide();}
else
{$('#header').hide();$('#canvas_content').hide();$('#layoutFooter').hide();}
$('#canvas_report').show();$('#canvas_report_closeAction').unbind().click(function(e)
{anActionForm.close();org.r3.PageManager.closeFullScreenLayout();});$('#canvas_report_printAction').unbind().click(function(e)
{window.print();});},closeFullScreenLayout:function()
{if(console_layout)
{$('.wrapper').show();}
else
{$('#header').show();$('#canvas_content').show();$('#layoutFooter').show();}
$('#canvas_report').hide();},googleAnalyticsCurrentUrl:function(aPageSpecifier)
{if(aPageSpecifier)
{return window.location.pathname+"/"+aPageSpecifier;}
return window.location.pathname;},googleAnalyticsSendPageView:function(pageSpecifier)
{if(org.r3.SiteConstants.googleAnalytics&&org.r3.SiteConstants.googleAnalytics.trackerid&&typeof ga!='undefined')
{var gaPayload={'hitType':'pageview'};if(pageSpecifier)
{gaPayload['page']=this.googleAnalyticsCurrentUrl(pageSpecifier);}
ga('send',gaPayload);}
else console.info('No Google Analytics Tracker defined: skipping....'+this.googleAnalyticsCurrentUrl(pageSpecifier));}};$.r3Utils.namespace("org.r3");org.r3.RESTConfigManager=Class.extend({init:function(anAppContext,aRestPrefix,aRestConfigFile)
{this.appContext=anAppContext;this.restContext=aRestPrefix;this.restConfigFile=aRestConfigFile;this.restConfigHash={};},networkInitialization:function(onSuccess,onError)
{var configFileUrl=this.appContext+this.restConfigFile;$.getJSON(org.r3.PageManager.getRandomParameterizedURL(configFileUrl),$.r3Utils.hitch(this,function(jsonData)
{this.restConfigHash=jsonData;onSuccess();})).error(function(jqXHR,timeout,message)
{console.error("That's an error...");onError(jqXHR,timeout,message);});},getRESTUrl:function(aUrlName,params)
{var restUrl=this.restConfigHash[aUrlName];if(restUrl==null)
{console.error("RestConfigManager::getRESTUrl",aUrlName);return null;}
if(this._isMockupRESTUrl(restUrl))
{restUrl=this._getMockupRESTUrl(restUrl);}
else if(this._isAbspathRESTUrl(restUrl))
{restUrl=this._getAbspathRESTUrl(restUrl);}
else
{restUrl=this._getStdRESTUrl(restUrl);}
if(params)
{restUrl=$.r3Utils.stringFormat(restUrl,params);}
return restUrl;},_getMockupRESTUrl:function(aRestUrl)
{var restUrl=this.appContext+"/rest_staticmockup"+aRestUrl.substring('mockup:'.length);return restUrl;},_isMockupRESTUrl:function(aRestUrl)
{return(aRestUrl.indexOf('mockup:')>=0);},_isAbspathRESTUrl:function(aRestUrl)
{return(aRestUrl.indexOf('abspath:')>=0);},_getAbspathRESTUrl:function(aRestUrl)
{var restUrl=org.r3.Constants.restServicesContext+aRestUrl.substring('abspath:'.length);return restUrl;},_getStdRESTUrl:function(aRestUrl)
{var restUrl=this.restContext+aRestUrl;return restUrl;}});$.r3Utils.namespace("org.r3");org.r3.RestDTOAdapter=Class.extend({init:function(aRowDataBean)
{this.status=aRowDataBean.status;this.reason=aRowDataBean.reason;this.reasoncode=aRowDataBean.reasoncode;this.correlationid=aRowDataBean.correlationid;this.counter1=aRowDataBean.counter1;this.counter2=aRowDataBean.counter2;},isOk:function()
{return this.status=='ok';},isFail:function()
{return this.status=='fail';},isWarning:function()
{return this.status=='warning';},isFailOrWarning:function()
{return this.isFail()||this.isWarning();},showMessage:function(formMessageWidgetId,messageNamespace)
{var msgCategory='info';if(this.isFailOrWarning())
msgCategory='error';var msgReason=this.getMessageReason(messageNamespace);var formMessageObj=$('#'+formMessageWidgetId);if(formMessageObj.length==0)
console.error("Invalid form message id: "+formMessageWidgetId);formMessageObj.formmessage('setText',{text:msgReason,category:msgCategory});},getMessageReason:function(aNamespace)
{var msgReason=this.reason;if(this.reasoncode&&this.reasoncode!='_NO_CODE_')
{if(aNamespace)
msgReason=org.r3.PageManager.getMessageFromDict(aNamespace+'.message.'+this.reasoncode);else
msgReason=org.r3.PageManager.getMessageFromDict('org.r3.message.'+this.reasoncode);}
return msgReason;}});(function($)
{$.validator.setDefaults({highlight:function(element){$(element).closest('.form-group').addClass('has-error');},unhighlight:function(element){$(element).closest('.form-group').removeClass('has-error');},errorElement:'span',errorClass:'help-block',errorPlacement:function(error,element){if(element.parent('.input-group').length){error.insertAfter(element.parent());}else{error.insertAfter(element);}}});function validator_normaliseParams(params)
{if(typeof params=='string'){params=params.split(' ');}
else if(!$.isArray(params)){var opts=[];for(var name in params){opts[0]=name;opts[1]=params[name];}
params=opts;}
return params;}
$.validator.addMethod("failRule",function(value,element,params)
{return false;},$.validator.format("Fallira' sempre!"));$.validator.addMethod('timevalue',function(value,element)
{return this.optional(element)||value.match(/([0-9]{2}):([0-9]{2})/);});$.validator.addMethod('timevalue_withsecs',function(value,element)
{return value.match(/([0-9]{2}):([0-9]{2}):([0-9]{2})/);});function validator_dp_extractOtherDateAsMoment(element,source,noOther)
{if(source.constructor==Date){return moment(source);}
if(typeof source=='string')
{if(source=='today')
return moment();else
{var m=moment(source,org.r3.message.default_momentDateFormat);if(m.isValid())
return m;var s=$(source);if(s.length&&s.length==1)
m=moment(s.val(),org.r3.message.default_momentDateFormat);if(m.isValid())
return m;}}
return null;}
$.validator.addMethod('dpDate',function(value,element,params)
{var s=moment(value,org.r3.message.default_momentDateFormat);return this.optional(element)||s.isValid();},$.validator.format(org.r3.message.field_dpDate));var dpDate_compareOperators={equal:'eq',same:'eq',notEqual:'ne',notSame:'ne',lessThan:'lt',before:'lt',greaterThan:'gt',after:'gt',notLessThan:'ge',notBefore:'ge',notGreaterThan:'le',notAfter:'le'};$.validator.addMethod('dpCompareDate',function(value,element,params)
{if(this.optional(element)){return true;}
params=validator_normaliseParams(params);var thisDate=moment(value,org.r3.message.default_momentDateFormat);var thatDate=validator_dp_extractOtherDateAsMoment(element,params[1]);if(!thisDate||!thatDate){return true;}
lastElement=element;var result=true;switch(dpDate_compareOperators[params[0]]||params[0]){case'eq':result=(thisDate.diff(thatDate)==0);break;case'ne':result=(thisDate.diff(thatDate)!=0);break;case'lt':result=(thisDate.diff(thatDate)<0);break;case'gt':result=(thisDate.diff(thatDate)>0);break;case'le':result=(thisDate.diff(thatDate)<=0);break;case'ge':result=(thisDate.diff(thatDate)>=0);break;default:result=true;}
return result;},$.validator.format(org.r3.message.field_dpDateCompare));$.validator.addMethod('gdatetime_range',function(value,element,params)
{var startDate=$(params[0]).gdatetime('getDateTime');var endDate=$(params[1]).gdatetime('getDateTime');if(!startDate!=!endDate)
{return false;}
var s=moment(startDate,"DD/MM/YYYY HH:mm");var e=moment(endDate,"DD/MM/YYYY HH:mm");var d=e.diff(s,'minutes');return d>=0;},$.validator.format("L'intervallo Temporale non e' corretto!"));$.validator.addMethod('identifier',function(value,element,params)
{return this.optional(element)||value.match(/^[a-zA-Z][a-zA-Z0-9]*$/);});$.validator.addMethod('letters',function(value)
{return value.match(/^[- a-zA-Z]+$/);});$.validator.addMethod('noSpecialCharacters',function(value)
{return value.match(/^[- a-zA-Z0-9]+$/);});$.validator.addMethod('lettersNumbersPunctuation',function(value)
{return value.match(/^[- a-zA-Z0-9\\.]+$/);});$.validator.addMethod('sailnumber',function(value)
{return value.match(/^[a-zA-Z]{3}\d+$/);});$.validator.addMethod("emptyOrEqualTo",function(value,element,params)
{var otherItemValue=$(params).val();return this.optional(element)||!otherItemValue||value==otherItemValue;},$.validator.format("Il valore indicato non e' corretto!"));$.validator.addMethod("codeLowEnd",function(value,element,params)
{var pattern="";for(var i=0;i<params[1];i++)
pattern+=params[2];var newValue=(pattern+value).slice(-params[1]);var otherItemValue=(pattern+$(params[0]).val()).slice(-params[1]);console.info("Validator:codeInterval: "+newValue+"/"+otherItemValue+"/"+params[0]+"/"+params[1]);return this.optional(element)||!$(params[0]).val()||newValue<otherItemValue;},$.validator.format("Please enter a valid code for the low end of the interval!"));$.validator.addMethod("lessOrEqualThan",function(value,element,params)
{var theIntValue=parseInt(value);var otherFieldValue=($.isArray(params))?$(params[0]).val():$(params).val();var otherItemValue=parseInt(otherFieldValue);return this.optional(element)||!otherFieldValue||theIntValue<=otherItemValue;},$.validator.format("Il valore indicato non rappresenta un intervallo valido!"));$.validator.addMethod("greaterOrEqualThan",function(value,element,params)
{var theIntValue=parseInt(value);var otherFieldValue=($.isArray(params))?$(params[0]).val():$(params).val();var otherItemValue=parseInt(otherFieldValue);return this.optional(element)||!otherFieldValue||theIntValue>=otherItemValue;},$.validator.format("Il valore indicato non rappresenta un intervallo valido!"));$.validator.addMethod("greaterThan",function(value,element,params)
{var theIntValue=parseInt(value);var otherFieldValue=($.isArray(params))?$(params[0]).val():$(params).val();var otherItemValue=parseInt(otherFieldValue);return this.optional(element)||!otherFieldValue||theIntValue>otherItemValue;},$.validator.format("Il valore indicato non rappresenta un intervallo valido!"));$.validator.addMethod("isCAD4",function(value,element,params)
{var otherItem=$(params[0]);var otherItemValue=otherItem.val();var codiceCAD=$.codecUtils.getCodiceARCadFromCodiceRaccomandata(otherItemValue);return this.optional(element)||!otherItem.val()||value==codiceCAD;},$.validator.format("Il valore indicato non rappresenta un codice CAD valido!"));$.validator.addMethod("isCAN4",function(value,element,params)
{var otherItem=$(params[0]);var otherItemValue=otherItem.val();var codiceCAN=$.codecUtils.getCodiceARCadFromCodiceRaccomandata(otherItemValue);return this.optional(element)||!otherItem.val()||value==codiceCAN;},$.validator.format("Il valore indicato non rappresenta un codice CAN valido!"));$.validator.addMethod("formatPad",function(value,element,params)
{var pattern="";for(var i=0;i<params[0];i++)
pattern+=params[1];var newValue=(pattern+value).slice(-params[0]);console.info("Validator:codeInterval:",element);$(element).val(newValue);return true;},$.validator.format("Please the padding has not properly specified!"));$.validator.addMethod("texttransform",function(value,element,params)
{var validated=false;if(params&&_.isString(params))
{var newValue=value;switch(params)
{case'uppercase':newValue=value.toUpperCase();validated=true;break;case'lowercase':newValue=value.toLowerCase();validated=true;break;}
$(element).val(newValue);}
return validated;},$.validator.format("The Casing option has not been properly specified"));$.validator.addMethod("invalidCSSClass",function(value,element,params)
{var validated=false;if(params&&_.isString(params))
{if(!$(element).hasClass(params))
validated=true;}
return validated;},$.validator.format("The Field has a style invalid"));$.validator.addMethod("noDuplicates",function(value,element,params)
{var currentValue=$(element).val();if(currentValue&&currentValue.length>0)
{var listOfCodici=$(params[0]);for(var i=0;i<listOfCodici.length;i++)
{var item=$(listOfCodici[i]);if(currentValue==item.val())
return false;}}
return true;},$.validator.format("Sono presenti elementi duplicati nella lista!"));$.validator.addMethod("codiceraccomandata",function(value,element,params)
{if(value&&$.trim(value).length>0)
return $.codecUtils.checkCheckDigit(value);return true;},$.validator.format("Il codice indicato non rappresenta un codice valido!"));})(jQuery);$.r3Utils.namespace("org.r3.cms");org.r3.cms.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.pageId=pageInfo.pageid;$("#cardview_detail").cmsCard({card_tmpl:"cms_tpl_cardview_type1",pageid:this.pageId,cardid:cardInfo.cardid,onComplete:function()
{$("a[rel='lightbox-"+cardInfo.cardid+"']").slimbox();}});org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":cardInfo.title,"actionForm":null});this.cmsPageDecorator.open();}};$.r3Utils.namespace("org.r3.cms.articles");org.r3.cms.articles.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardPagedIndexActionForm(this,'#cmsPagedIndexActionForm','#cmsPagedIndexActionForm_cardIndexCanvas');this.pagedIndexOpen=false;this.newsletterSubscriptionActionForm=new org.r3.jsportlet.newslettersubscription.NewsletterSubscriptionActionForm(this,'#newsletterSubscriptionActionForm');this.cmsPageDetailActionForm=new org.r3.jsportlet.cms.CMSPage_CardDetailActionForm(this,'#cmsPageDetailActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();this.cmsPageDecorator.open();if(cardInfo&&cardInfo.cardid)
{org.r3.PageManager.pushBreadCrumb({"title":"Articoli","actionForm":{show:function()
{if(_self.pagedIndexOpen)
{_self.cmsPageActionForm.show();}
else
{_self.pagedIndexOpen=true;_self.openCMSCardIndex(pageInfo,cardInfo);}},close:function()
{if(_self.pagedIndexOpen)
{_self.cmsPageActionForm.close();_self.pagedIndexOpen=false;}
else
{}}}});org.r3.PageManager.pushBreadCrumb({"title":"Dettaglio Scheda","actionForm":this.cmsPageDetailActionForm});this.cmsPageDetailActionForm.open(pageInfo,cardInfo,{});}
else
{org.r3.PageManager.pushBreadCrumb({"title":"Articoli","actionForm":this.cmsPageActionForm});this.openCMSCardIndex(pageInfo,cardInfo);}},openCMSCardIndex:function(pageInfo,cardInfo)
{this.newsletterSubscriptionActionForm.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=articles","cardindextemplate":"cms_tpl_cardgroup_iconicindex",iDisplayStart:0,iDisplayLength:10,fetchmode:'partial'});$('#cms_newsletterCardIndex').cmsCard({pageid:pageInfo.pageid,card_tmpl:"cms_tpl_cardsetlistofdocuments",cardquery:"categoryid=newsletter",fetchmode:"full",onComplete:function(responseInfo,totalNumberOfItems)
{}});},openCMSCardDetailByPageIdCardId:function(aPageId,aCardId)
{console.info("Should Open... ",aCardId);var _self=this;org.r3.PageManager.pushBreadCrumb({"title":"Dettaglio Scheda","actionForm":this.cmsPageDetailActionForm});this.cmsPageDetailActionForm.open({pageid:aPageId},{cardid:aCardId},{});}};$.r3Utils.namespace("org.r3.cms.club");org.r3.cms.club.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Club","actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=club","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.cms.grouppage1");org.r3.cms.grouppage1.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.indexdetail.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.open(pageInfo,cardInfo);},open:function(pageInfo,cardInfo)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_Page_Detail',[pageInfo.pageid]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var aPageDTOAdapter=responseData['content'];if(aPageDTOAdapter)
{aPageDTOAdapter=new org.r3.db.cms.page.PageDTOAdapter(aPageDTOAdapter);}
this.openCMSPage(aPageDTOAdapter,cardInfo);}),function(d)
{console.error("controller did not load");});},openCMSPage:function(aPageDTOAdapter,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":aPageDTOAdapter.dataBean.pagetitle,"actionForm":null});this.cmsPageDecorator.open();var viewOptions=aPageDTOAdapter.getViewOptionsJSObject();this.cmsPageActionForm.open(aPageDTOAdapter,cardInfo,viewOptions);}};$.r3Utils.namespace("org.r3.cms.media");org.r3.cms.media.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardPagedIndexActionForm(this,'#cmsPagedIndexActionForm','#cmsPagedIndexActionForm_cardIndexCanvas');this.pagedIndexOpen=false;this.cmsPageDetailActionForm=new org.r3.jsportlet.cms.CMSPage_CardDetailActionForm(this,'#cmsPageDetailActionForm');this.openPageIndex(pageInfo,cardInfo);},openPageIndex:function(pageInfo,cardInfo)
{var _self=this;var resolvedUrl=org.r3.PageManager.getRESTUrl("LUT_CMS_MediaPage");var page2Open=null;org.r3.PageManager.lutManager.getLUT(resolvedUrl,function(theLUT)
{if(theLUT.aaData&&theLUT.aaData.length>0)
{page2Open=theLUT.aaData[0];var templatedHtml=tmpl('cms_tpl_page_index',theLUT);$('#cms_pageIndex').html(templatedHtml);}
if(pageInfo.pagetype&&pageInfo.pagetype=='group'&&page2Open)
{_self.openCMSPage({pageid:page2Open.pageid,pagetype:page2Open.pagetype},{cardid:null,title:null});}
else _self.openCMSPage(pageInfo,cardInfo);});},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();this.cmsPageDecorator.open();if(cardInfo&&cardInfo.cardid)
{org.r3.PageManager.pushBreadCrumb({"title":"Media","actionForm":{show:function()
{if(_self.pagedIndexOpen)
{_self.cmsPageActionForm.show();}
else
{_self.pagedIndexOpen=true;_self.openCMSCardIndex(pageInfo,cardInfo);}},close:function()
{if(_self.pagedIndexOpen)
{_self.cmsPageActionForm.close();_self.pagedIndexOpen=false;}
else
{}}}});org.r3.PageManager.pushBreadCrumb({"title":"Dettaglio Scheda","actionForm":this.cmsPageDetailActionForm});this.cmsPageDetailActionForm.open(pageInfo,cardInfo,{});}
else
{org.r3.PageManager.pushBreadCrumb({"title":"Media","actionForm":this.cmsPageActionForm});this.openCMSCardIndex(pageInfo,cardInfo);}},openCMSCardIndex:function(pageInfo,cardInfo)
{this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=media&pageid="+pageInfo.pageid,"cardindextemplate":"cms_tpl_cardgroup_iconicindex",iDisplayStart:0,iDisplayLength:10,fetchmode:'partial'});},openCMSCardDetailByPageIdCardId:function(aPageId,aCardId)
{console.info("Should Open... ",aCardId);var _self=this;org.r3.PageManager.pushBreadCrumb({"title":"Dettaglio Scheda","actionForm":this.cmsPageDetailActionForm});this.cmsPageDetailActionForm.open({pageid:aPageId},{cardid:aCardId},{});}};$.r3Utils.namespace("org.r3.cms.meteo");org.r3.cms.meteo.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":cardInfo.title,"actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{});}};$.r3Utils.namespace("org.r3.cms.pressroom");org.r3.cms.pressroom.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Rassesgna Stampa","actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=grp_pressinfo","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.cms.regattas");org.r3.cms.regattas.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardPagedIndexActionForm(this,'#cmsPagedIndexActionForm','#cmsPagedIndexActionForm_cardIndexCanvas');this.pagedIndexOpen=false;this.cmsPageDetailActionForm=new org.r3.jsportlet.cms.CMSPage_CardDetailActionForm(this,'#cmsPageDetailActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();this.cmsPageDecorator.open();if(cardInfo&&cardInfo.cardid)
{org.r3.PageManager.pushBreadCrumb({"title":"Regate","actionForm":{show:function()
{if(_self.pagedIndexOpen)
{_self.cmsPageActionForm.show();}
else
{_self.pagedIndexOpen=true;_self.openCMSCardIndex(pageInfo,cardInfo);}},close:function()
{if(_self.pagedIndexOpen)
{_self.cmsPageActionForm.close();_self.pagedIndexOpen=false;}
else
{}}}});org.r3.PageManager.pushBreadCrumb({"title":"Scheda Regata","actionForm":this.cmsPageDetailActionForm});this.cmsPageDetailActionForm.open(pageInfo,cardInfo,{});}
else
{org.r3.PageManager.pushBreadCrumb({"title":"Regate","actionForm":this.cmsPageActionForm});this.openCMSCardIndex(pageInfo,cardInfo);}},openCMSCardIndex:function(pageInfo,cardInfo)
{this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=sailevent","cardindextemplate":"cms_tpl_cardgroup_iconicindex",iDisplayStart:0,iDisplayLength:10,fetchmode:'partial'});$('#cms_cardRegattasCalendar').cmsCard({pageid:pageInfo.pageid,card_tmpl:"cms_tpl_cardview_type3",cardid:"REGATTACALENDAR",fetchmode:"full",onComplete:function(responseInfo,totalNumberOfItems)
{}});},openCMSCardDetailByPageIdCardId:function(aPageId,aCardId)
{console.info("Should Open... ",aCardId);var _self=this;org.r3.PageManager.pushBreadCrumb({"title":"Scheda Regata","actionForm":this.cmsPageDetailActionForm});this.cmsPageDetailActionForm.open({pageid:aPageId},{cardid:aCardId},{});}};$.r3Utils.namespace("org.r3.cms.school");org.r3.cms.school.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Scuola Vela","actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=sailschool","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.cms.ss.accessori");org.r3.cms.ss.accessori.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Accessori","actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=accessori","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.cms.ss.derive");org.r3.cms.ss.derive.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Derive e Monotipi","actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=derive","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.cms.ss.genoa");org.r3.cms.ss.genoa.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Genoa","actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=genoa","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.cms.ss.mainsails");org.r3.cms.ss.mainsails.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Rande","actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=mainsails","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.cms.ss.spi");org.r3.cms.ss.spi.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Vele Portanti","actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=spi","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.cms.ss.veleria");org.r3.cms.ss.veleria.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageDecorator=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(this,'#NoDiv');this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"La Veleria","actionForm":null});this.cmsPageDecorator.open();this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=veleria","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.console.bbs");org.r3.console.bbs.BBSThreadDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId,aDeleteGroupDialogConfirmationActionFormContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.bbs.BBSThreadDetailActionFormView(aDetailViewContainerId,this);this.listView=new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewQueryActionFormView
(aChildEntityListViewContainerId,this,{dataTableId:'BBSThreadNodeQueryActionFormView',gradeLevel:'grade_level4 grade_clickable',legend:org.r3.db.bbs.bbsthreadnodeview.message.queryactionformview_legend,iDisplayLength:25,layout:'fullWidth',sortable:true,dataTableColumns:"multiselector,threadnodeid;sort,nodetitle,username,creationdate",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.threadNodeDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_threadnode_action_deletepost',label:org.r3.console.bbs.message.action_deleteselectedposts,disabled:true,onClick:$.r3Utils.hitch(this,function(){this.onDeleteThreadNodes();})},{id:'console_threadnode_action_addpost',label:org.r3.console.bbs.message.action_newpost,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.onNewThreadNode();})}],onInitializationComplete:function()
{$('#BBSThreadNodeQueryActionFormView_all_threadnodeid').unbind().click(function(e)
{var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$('#console_threadnode_action_deletepost').prop('disabled',false);$("#BBSThreadNodeQueryActionFormView_tableform input[type='checkbox'][name='threadnodeid']").prop('checked',true);}
else
{$('#console_threadnode_action_deletepost').prop('disabled',true);$("#BBSThreadNodeQueryActionFormView_tableform input[type='checkbox'][name='threadnodeid']").prop('checked',false);}});$('#BBSThreadNodeQueryActionFormView').bind('page',function(){$('#BBSThreadNodeQueryActionFormView_all_threadnodeid').prop('checked',false);$('#console_threadnode_action_deletepost').prop('disabled',true);});var matchExpr="#BBSThreadNodeQueryActionFormView_tableform input[type='checkbox'][name='threadnodeid']";$(document).off('click',matchExpr).on('click',matchExpr,function(e){$('#BBSThreadNodeQueryActionFormView_all_threadnodeid').prop('checked',false);var numberOfSelected=0;$.each($("#BBSThreadNodeQueryActionFormView_tableform input[type='checkbox'][name='threadnodeid']"),function(index,item)
{if($(item).prop('checked'))
numberOfSelected++;});if(numberOfSelected)
{$('#console_threadnode_action_deletepost').prop('disabled',false);}
else
{$('#console_threadnode_action_deletepost').prop('disabled',true);}
e.stopPropagation();});}});},close:function()
{this.hide();},hide:function()
{this.detailView.hide();this.listView.hide();},show:function()
{this.detailView.show();this.listView.show();},refresh:function()
{this.listView.refresh();},open:function(aTopicId,aThreadDTOAdapter)
{this.setDataBeanInfo(aThreadDTOAdapter);this.topicId=aTopicId;this.detailView.open(aTopicId,aThreadDTOAdapter);if(aThreadDTOAdapter)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_BBSThreadNodes_InThread',[aTopicId,aThreadDTOAdapter.dataBean.threadid]);this.listView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});}},updateItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(true,onSuccessResponse,onFailResponse);},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(false,onSuccessResponse,onFailResponse);},_saveItem:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#threaddetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method=null;var restUrl=null;if(isUpdate)
{var topicId=this.dataBeanInfo.dataBean.topicid;var threadId=this.dataBeanInfo.dataBean.threadid;restUrl=org.r3.PageManager.getRESTUrl('PUT_BBSThread',[topicId,threadId]);method="put";}
else
{var topicId=this.topicId;restUrl=org.r3.PageManager.getRESTUrl('POST_BBSThread',[topicId]);method="post";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var closeDetailPanel=true;if(onSuccessResponse)
closeDetailPanel=onSuccessResponse(responseData);if(closeDetailPanel)
org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},onNewThreadNode:function()
{this.hide();this.pageManager.openThreadNodePanel(this.dataBeanInfo.dataBean.topicid,this.dataBeanInfo.dataBean.threadid,null,null);},threadNodeDetail:function(aThreadNodeDTOAdapter)
{this.hide();this.pageManager.openThreadNodePanel(this.dataBeanInfo.dataBean.topicid,this.dataBeanInfo.dataBean.threadid,null,aThreadNodeDTOAdapter);},onDeleteThread:function()
{if(!org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{return;}
var _self=this;var method="DELETE";var aTopicId=this.dataBeanInfo.dataBean.topicid;var aThreadId=this.dataBeanInfo.dataBean.threadid;var restUrl=org.r3.PageManager.getRESTUrl('DELETE_BBSThread',[aTopicId,aThreadId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{console.error("Errore Deleting Actor Group: ",message);}});},onDeleteThreadNodes:function()
{var _self=this;var theForm=$('#BBSThreadNodeQueryActionFormView_tableform');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.deletemulticonfirm"))
{var topicId=this.dataBeanInfo.dataBean.topicid;var threadId=this.dataBeanInfo.dataBean.threadid;var restUrl=org.r3.PageManager.getRESTUrl('DELETE_Selected_BBSThreadNodes',[topicId,threadId]);var method="put";org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.listView.refresh();$('#BBSThreadNodeQueryActionFormView_all_threadnodeid').prop('checked',false);$('#console_threadnode_action_deletepost').prop('disabled',true);},"error":function(jqXHR,timeout,message)
{console.error(message);org.r3.PageManager.closeNotifier();}});}}});$.r3Utils.namespace("org.r3.console.bbs");org.r3.console.bbs.BBSThreadDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aTopicId,aThreadDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/bbs/BBSThreadDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(aThreadDTOAdapter)
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_BBSThreadDetail',[aTopicId,aThreadDTOAdapter.dataBean.threadid]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var threadDataBean=responseData['content'];if(threadDataBean)
{threadDataBean=new org.r3.db.bbs.bbsthread.BBSThreadDTOAdapter(threadDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#threaddetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.bbs.threaddetailactionform_form_validationRules,messages:org.r3.console.bbs.threaddetailactionform_form_validationMessages});this._initializeFormFields(threadDataBean);if(threadDataBean==null)
{$('#threaddetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));$('#threaddetailactionform_oncreatefields').show();$('#threaddetailactionform_action_delete').hide();}
else
{$('#threaddetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onUpdateItem));$('#threaddetailactionform_action_delete').show();$('#threaddetailactionform_action_delete').unbind().click($.r3Utils.hitch(this,this._onDeleteItem));}
$('#threaddetailactionform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{this.actionFormManager.createItem(function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('threaddetailactionform_fieldset_message');return false;}
return true;},function(jqXHR,timeout,message){$('#threaddetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{this.actionFormManager.updateItem(function(responseData){},function(jqXHR,timeout,message){$('#threaddetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onDeleteItem:function()
{this.actionFormManager.onDeleteThread();},_initializeFormFields:function(aThreadDTOAdapter)
{if(aThreadDTOAdapter)
{$('#threaddetailactionform_threadid_label').html(aThreadDTOAdapter.dataBean.threadid+' - ');$('#threaddetailactionform_threadtitle').val(aThreadDTOAdapter.dataBean.threadtitle);$('#threaddetailactionform_threadid').val(aThreadDTOAdapter.dataBean.threadid);$('#threaddetailactionform_threadid').prop('disabled',true);}
else $('#threaddetailactionform_threadid').prop('disabled',false);}});$.r3Utils.namespace("org.r3.console.bbs",window,function(aNamespace){aNamespace.threaddetailactionform_form_validationRules={threadid:{required:false,maxlength:15,identifier:true,texttransform:'uppercase'},threadtitle:{required:true,maxlength:80,texttransform:'uppercase'}};aNamespace.threaddetailactionform_form_validationMessages={threadid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},threadtitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.bbs");org.r3.console.bbs.BBSThreadNodeDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId,aDeleteGroupDialogConfirmationActionFormContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.bbs.BBSThreadNodeDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{this.listView.refresh();},open:function(aTopicId,aThreadId,aParentThreadNodeId,aThreadNodeDTOAdapter)
{this.setDataBeanInfo(aThreadNodeDTOAdapter);this.topicId=aTopicId;this.threadId=aThreadId;this.parentThreadId=aParentThreadNodeId;this.detailView.open(aTopicId,aThreadId,aParentThreadNodeId,aThreadNodeDTOAdapter);},updateItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(true,onSuccessResponse,onFailResponse);},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(false,onSuccessResponse,onFailResponse);},_saveItem:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#threadnodedetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var topicId=this.topicId;var threadId=this.threadId;var method=null;var restUrl=null;if(isUpdate)
{var threadNodeId=this.dataBeanInfo.dataBean.threadnodeid;restUrl=org.r3.PageManager.getRESTUrl('PUT_BBSThreadNode',[topicId,threadId,threadNodeId]);method="put";}
else
{restUrl=org.r3.PageManager.getRESTUrl('POST_BBSThreadNode',[topicId,threadId]);method="post";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);var threadNodeDataBean=new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTOAdapter(responseData);org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},onDeleteThreadNode:function()
{if(!org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{return;}
var _self=this;var method="DELETE";var aTopicId=this.topicId;var aThreadId=this.dataBeanInfo.dataBean.threadid;var aPostId=this.dataBeanInfo.dataBean.threadnodeid;var restUrl=org.r3.PageManager.getRESTUrl('DELETE_BBSThreadNode',[aTopicId,aThreadId,aPostId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{console.error("Errore Deleting Actor Group: ",message);}});}});$.r3Utils.namespace("org.r3.console.bbs");org.r3.console.bbs.BBSThreadNodeDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{$('#threadnodedetailactionform_nodetext').ckeditor('destroy');this.hide();},open:function(aTopicId,aThreadId,aParentThreadNodeId,aThreadNodeDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/bbs/BBSThreadNodeDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(aThreadNodeDTOAdapter)
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_BBSThreadNodeDetail',[aTopicId,aThreadId,aThreadNodeDTOAdapter.dataBean.threadnodeid]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var threadNodeDataBean=responseData['content'];if(threadNodeDataBean)
{threadNodeDataBean=new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTOAdapter(threadNodeDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#threadnodedetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.bbs.threadnodedetailactionform_form_validationRules,messages:org.r3.console.bbs.threadnodedetailactionform_form_validationMessages});this._initializeFormFields(threadNodeDataBean);if(threadNodeDataBean==null)
{$('#threadnodedetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));$('#threadnodedetailactionform_oncreatefields').show();$('#threadnodedetailactionform_action_delete').hide();}
else
{$('#threadnodedetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onUpdateItem));$('#threadnodedetailactionform_action_delete').show();$('#threadnodedetailactionform_action_delete').unbind().click($.r3Utils.hitch(this,this._onDeleteItem));}
$('#threadnodedetailactionform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{this.actionFormManager.createItem(function(responseData){},function(jqXHR,timeout,message){$('#threadnodedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{this.actionFormManager.updateItem(function(responseData){},function(jqXHR,timeout,message){$('#threadnodedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onDeleteItem:function()
{this.actionFormManager.onDeleteThreadNode();},_initializeFormFields:function(aThreadNodeDTOAdapter)
{$('#threadnodedetailactionform_nodetext').ckeditor();if(aThreadNodeDTOAdapter)
{$('#threadnodedetailactionform_threadnodeid_label').html(aThreadNodeDTOAdapter.dataBean.threadnodeid+' - ');$('#threadnodedetailactionform_nodetitle').val(aThreadNodeDTOAdapter.dataBean.nodetitle);$('#threadnodedetailactionform_nodetext').val(aThreadNodeDTOAdapter.dataBean.nodetext);}}});$.r3Utils.namespace("org.r3.console.bbs",window,function(aNamespace)
{aNamespace.threadnodedetailactionform_form_validationRules={nodetitle:{required:true,maxlength:80},nodetext:{required:true,maxlength:8192}};aNamespace.threadnodedetailactionform_form_validationMessages={nodetext:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},nodetitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.bbs");org.r3.console.bbs.BBSTopicDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId,aDeleteGroupDialogConfirmationActionFormContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.bbs.BBSTopicDetailActionFormView(aDetailViewContainerId,this);this.listView=new org.r3.db.bbs.bbsthread.BBSThreadQueryActionFormView
(aChildEntityListViewContainerId,this,{dataTableId:'BBSThreadQueryActionFormView',gradeLevel:'grade_level3 grade_clickable',legend:org.r3.db.bbs.bbsthread.message.queryactionformview_legend,iDisplayLength:25,layout:'fullWidth',sortable:true,dataTableColumns:"multiselector,threadid;sort,threadtitle;sort,numposts,lastposttimestamp,creationdate",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.threadDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_thread_action_deletethread',label:org.r3.console.bbs.message.action_deleteselectedthreads,disabled:true,onClick:$.r3Utils.hitch(this,function(){this.onDeleteThreads();})},{id:'console_thread_action_addthread',label:org.r3.console.bbs.message.action_newthread,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.onNewThread();})}],onInitializationComplete:function()
{$('#BBSThreadQueryActionFormView_all_threadid').unbind().click(function(e)
{var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$('#console_thread_action_deletethread').prop('disabled',false);$("#BBSThreadQueryActionFormView_tableform input[type='checkbox'][name='threadid']").prop('checked',true);}
else
{$('#console_thread_action_deletethread').prop('disabled',true);$("#BBSThreadQueryActionFormView_tableform input[type='checkbox'][name='threadid']").prop('checked',false);}});$('#BBSThreadQueryActionFormView').bind('page',function(){$('#BBSThreadQueryActionFormView_all_threadid').prop('checked',false);$('#console_thread_action_deletethread').prop('disabled',true);});var matchExpr="#BBSThreadQueryActionFormView_tableform input[type='checkbox'][name='threadid']";$(document).off('click',matchExpr).on('click',matchExpr,function(e){$('#BBSThreadQueryActionFormView_all_threadid').prop('checked',false);var numberOfSelected=0;$.each($("#BBSThreadQueryActionFormView_tableform input[type='checkbox'][name='threadid']"),function(index,item)
{if($(item).prop('checked'))
numberOfSelected++;});if(numberOfSelected)
{$('#console_thread_action_deletethread').prop('disabled',false);}
else
{$('#console_thread_action_deletethread').prop('disabled',true);}
e.stopPropagation();});}});},close:function()
{this.hide();},hide:function()
{this.detailView.hide();this.listView.hide();},show:function()
{this.detailView.show();this.listView.show();},refresh:function()
{this.listView.refresh();},open:function(aTopicDTOAdapter)
{this.setDataBeanInfo(aTopicDTOAdapter);this.detailView.open(aTopicDTOAdapter);if(aTopicDTOAdapter)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_BBSThreads_InTopic',[aTopicDTOAdapter.dataBean.topicid]);this.listView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});}},updateItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(true,onSuccessResponse,onFailResponse);},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(false,onSuccessResponse,onFailResponse);},_saveItem:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#topicdetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_BBSTopics');if(isUpdate)
{var topicId=this.dataBeanInfo.dataBean.topicid;restUrl=org.r3.PageManager.getRESTUrl('PUT_BBSTopic',[topicId]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var closeDetailPanel=true;if(onSuccessResponse)
closeDetailPanel=onSuccessResponse(responseData);if(closeDetailPanel)
_self.pageManager.closeBBSTopicPanel();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},onNewThread:function()
{this.hide();this.pageManager.openThreadPanel(this.dataBeanInfo.dataBean.topicid,null);},threadDetail:function(aThreadDTOAdapter)
{this.hide();this.pageManager.openThreadPanel(this.dataBeanInfo.dataBean.topicid,aThreadDTOAdapter);},onDeleteTopic:function()
{if(!org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{return;}
var _self=this;var method="DELETE";var aTopicId=this.dataBeanInfo.dataBean.topicid;var restUrl=org.r3.PageManager.getRESTUrl('DELETE_BBSTopics',[aTopicId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();_self.pageManager.closeBBSTopicPanel();},"error":function(jqXHR,timeout,message)
{console.error("Errore Deleting Actor Group: ",message);}});},onDeleteThreads:function()
{var _self=this;var theForm=$('#BBSThreadQueryActionFormView_tableform');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.deletemulticonfirm"))
{var topicId=this.dataBeanInfo.dataBean.topicid;restUrl=org.r3.PageManager.getRESTUrl('PUT_Selected_BBSThreads',[topicId]);method="put";org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.listView.refresh();$('#BBSThreadQueryActionFormView_all_threadid').prop('checked',false);$('#console_thread_action_deletethread').prop('disabled',true);},"error":function(jqXHR,timeout,message)
{console.error(message);org.r3.PageManager.closeNotifier();}});}}});$.r3Utils.namespace("org.r3.console.bbs");org.r3.console.bbs.BBSTopicDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aTopicDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/bbs/BBSTopicDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(aTopicDTOAdapter)
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_BBSTopicDetail',[aTopicDTOAdapter.dataBean.topicid]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var topicDataBean=responseData['content'];if(topicDataBean)
{topicDataBean=new org.r3.db.bbs.bbstopicview.BBSTopicViewDTOAdapter(topicDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#topicdetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.bbs.topicdetailactionform_form_validationRules,messages:org.r3.console.bbs.topicdetailactionform_form_validationMessages});this._initializeFormFields(topicDataBean);if(topicDataBean==null)
{$('#topicdetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));$('#topicdetailactionform_oncreatefields').show();$('#topicdetailactionform_action_delete').hide();}
else
{$('#topicdetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onUpdateItem));$('#topicdetailactionform_action_delete').show();$('#topicdetailactionform_action_delete').unbind().click($.r3Utils.hitch(this,this._onDeleteItem));}
$('#topicdetailactionform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{this.actionFormManager.createItem(function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('topicdetailactionform_fieldset_message');return false;}
return true;},function(jqXHR,timeout,message){$('#topicdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{this.actionFormManager.updateItem(function(responseData){},function(jqXHR,timeout,message){$('#topicdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onDeleteItem:function()
{this.actionFormManager.onDeleteTopic();},_initializeFormFields:function(aTopicDTOAdapter)
{if(aTopicDTOAdapter)
{$('#topicdetailactionform_topicid_label').html(aTopicDTOAdapter.dataBean.topicid+' - ');$('#topicdetailactionform_topictitle').val(aTopicDTOAdapter.dataBean.topictitle);$('#topicdetailactionform_moderatormode_'+aTopicDTOAdapter.dataBean.moderatormode).prop('checked',true);$('#topicdetailactionform_cardid').html(aTopicDTOAdapter.dataBean.cardid);$('#topicdetailactionform_topicid').val(aTopicDTOAdapter.dataBean.topicid);$('#topicdetailactionform_topicid').prop('disabled',true);}
else
{$("#topicdetailactionform_moderatormode_moderated").prop('checked',true);$('#topicdetailactionform_topicid').prop('disabled',false);}}});$.r3Utils.namespace("org.r3.console.bbs",window,function(aNamespace)
{aNamespace.topicdetailactionform_form_validationRules={topicid:{required:false,maxlength:15,identifier:true,texttransform:'uppercase'},topictitle:{required:true,maxlength:80,texttransform:'uppercase'}};aNamespace.topicdetailactionform_form_validationMessages={topicid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},topictitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.bbs");org.r3.console.bbs.BBSTopicQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.bbs.bbstopicview.BBSTopicViewQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'BBSTopicViewQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.bbs.bbstopicview.message.queryactionformview_legend,iDisplayLength:25,dataTableSource:'GET_BBSTopics',layout:'fullWidth',sortable:true,dataTableColumns:"topicid,topictitle,numthreads,numposts",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.openDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_bbs_action_refresh',label:org.r3.message.action_refresh,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},openDetail:function(aBBSDTOAdapter)
{this.listView.hide();this.pageManager.openBBSTopicPanel(aBBSDTOAdapter);}});$.r3Utils.namespace("org.r3.console.bbs");org.r3.console.bbs.PageManager={init:function()
{this.bbsTopicQueryActionForm=new org.r3.console.bbs.BBSTopicQueryActionForm(this,'#bbsTopicQueryActionForm');this.bbsTopicDetailActionForm=new org.r3.console.bbs.BBSTopicDetailActionForm(this,'#bbsTopicDetailActionForm','#bbsThreadQueryActionForm');this.bbsThreadDetailActionForm=new org.r3.console.bbs.BBSThreadDetailActionForm(this,'#bbsThreadDetailActionForm','#bbsThreadNodeQueryActionForm');this.bbsThreadNodeDetailActionForm=new org.r3.console.bbs.BBSThreadNodeDetailActionForm(this,'#bbsThreadNodeDetailActionForm');this.createGSideBar();org.r3.PageManager.pushHomeConsoleBreadCrumb();this.openBBSTopicQueryActionFormPanel();},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'gmenubar_act_newbbstopic',title:org.r3.console.bbs.message.gmenubar_act_newbbstopic,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'plus'});sect1.items.push({id:'act_query_bbstopic',title:org.r3.console.bbs.message.gmenubar_act_query_bbstopic,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'table'});$('#gsidebar-navanchor').gsidebar(gsidebarCfg);},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newbbstopic')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openBBSTopicPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_query_bbstopic':this.openBBSTopicQueryActionFormPanel();break;default:break;}}}},openBBSTopicPanel:function(aBbsDtoAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.bbs.message.breadcrumb_bbstopic,"actionForm":this.bbsTopicDetailActionForm});this.bbsTopicDetailActionForm.open(aBbsDtoAdapter);},closeBBSTopicPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openBBSTopicQueryActionFormPanel();},openBBSTopicQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.bbs.message.breadcrumb_querybbstopic,"actionForm":this.bbsTopicQueryActionForm});this.bbsTopicQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_query_bbstopic');},openThreadPanel:function(aTopicId,aThreadDTOAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.bbs.message.breadcrumb_bbsthread,"actionForm":this.bbsThreadDetailActionForm});this.bbsThreadDetailActionForm.open(aTopicId,aThreadDTOAdapter);},openThreadNodePanel:function(aTopicId,aThreadId,aParentThreadNodeId,aThreadNodeDTOAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.bbs.message.breadcrumb_bbspost,"actionForm":this.bbsThreadNodeDetailActionForm});this.bbsThreadNodeDetailActionForm.open(aTopicId,aThreadId,aParentThreadNodeId,aThreadNodeDTOAdapter);}};$.r3Utils.namespace("org.r3.console.cms.cards");org.r3.console.cms.cards.CardChannelQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.cms.cardchannelview.CardChannelViewQueryActionFormView(anHtmlActionFormContainerId,this,{dataTableId:'CardChannelViewQueryActionFormView',layout:'fullWidth',iDisplayLength:25,gradeLevel:'grade_level2 grade_clickable',legend:org.r3.db.cms.cardchannelview.message.queryactionformview_legend,dataTableSource:'GET_CMSCardChannels',sortable:true,dataTableColumns:"multiselector,channelid;sort,site;sort,cardid;sort,title,summary,refdate;sort",onSelected:null,onDblClick:null,onClearSelection:function(){$('#cardqueryactionform_action_deleteItem').prop('disabled',true);},requiredLUTs:["LUT_CMS_Channels","LUT_Site"],searchInfo:{widget:'select',widgetInitialization:{url:org.r3.PageManager.getRESTUrl('LUT_CMS_Channels'),blankOptionText:org.r3.PageManager.getMessageFromDict("org.r3.console.cms.cards.message.any")},label:org.r3.console.cms.cards.message.search_chanel,validationRules:org.r3.console.cms.cards.CardChannelQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.console.cms.cards.CardChannelQueryActionFormView_filter_searchform_validationMessages,autoStart:true},actionBarOnTop:true,buttons:[{id:'console_cardchannel_action_delete',label:org.r3.console.cms.cards.message.action_deleteselectedcardchannels,disabled:true,onClick:$.r3Utils.hitch(this,function(){this.onDeleteCardChannels();})}],onInitializationComplete:function()
{$('#CardChannelViewQueryActionFormView_all_channelid_site_cardid').unbind().click(function(e)
{var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$('#console_cardchannel_action_delete').prop('disabled',false);$("#CardChannelViewQueryActionFormView_tableform input[type='checkbox'][name='channelid_site_cardid']").prop('checked',true);}
else
{$('#console_cardchannel_action_delete').prop('disabled',true);$("#CardChannelViewQueryActionFormView_tableform input[type='checkbox'][name='channelid_site_cardid']").prop('checked',false);}});$('#CardChannelViewQueryActionFormView').bind('page',function(){$('#CardChannelViewQueryActionFormView_all_channelid_site_cardid').prop('checked',false);$('#console_cardchannel_action_delete').prop('disabled',true);});var matchExpr="#CardChannelViewQueryActionFormView_tableform input[type='checkbox'][name='channelid_site_cardid']";$(document).off('click',matchExpr).on('click',matchExpr,function(e){$('#CardChannelViewQueryActionFormView_all_channelid_site_cardid').prop('checked',false);var numberOfSelected=0;$.each($("#CardChannelViewQueryActionFormView_tableform input[type='checkbox'][name='channelid_site_cardid']"),function(index,item)
{if($(item).prop('checked'))
numberOfSelected++;});if(numberOfSelected)
{$('#console_cardchannel_action_delete').prop('disabled',false);}
else
{$('#console_cardchannel_action_delete').prop('disabled',true);}
e.stopPropagation();});}});},close:function()
{this.listView.hide();},open:function()
{this.listView.open();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},onDeleteCardChannels:function()
{var _self=this;var theForm=$('#CardChannelViewQueryActionFormView_tableform');org.r3.AjaxUtils.submitForm("PUT",org.r3.PageManager.getRESTUrl('DELETE_Selected_CardChannel'),theForm,function(responseData){_self.listView.refresh();},function(jqXHR,timeout,message){console.error(message);},"org.r3.message.deletemulticonfirm",true);}});$.r3Utils.namespace("org.r3.console.cms.cards",window,function(aNamespace)
{aNamespace.CardChannelQueryActionFormView_filter_searchform_validationRules={filter_item:{required:false}};aNamespace.CardChannelQueryActionFormView_filter_searchform_validationMessages={filter_item:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.cms.cards");org.r3.console.cms.cards.PageManager={init:function()
{this.cardQueryActionForm=new org.r3.jsportlet.cmsconsole.CardQueryActionForm(this,'#cardQueryActionForm','#cardQueryAdvancedSearchActionForm');this.cardDetailActionForm=new org.r3.jsportlet.cmsconsole.CardDetailActionForm(this,'#cardDetailActionForm');this.uploadFileActionForm=new org.r3.jsportlet.cmsconsole.UploadFileActionForm(this,'#uploadFileActionForm');this.cardChannelQueryActionForm=new org.r3.console.cms.cards.CardChannelQueryActionForm(this,'#cardChannelQueryActionForm');this.createGSideBar();org.r3.PageManager.pushHomeConsoleBreadCrumb();this.openCMSCardQueryActionFormPanel();},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'gmenubar_act_newcard',title:org.r3.console.cms.cards.message.gmenubar_action_newcard,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'plus'});sect1.items.push({id:'act_querycards',title:org.r3.console.cms.cards.message.gmenubar_action_querycards,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'table'});sect1.items.push({id:'act_querychannelcards',title:org.r3.console.cms.cards.message.gmenubar_action_querychannelcards,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'table'});var sect2={type:'section',id:'gmenubar_sect_promotedcats',title:org.r3.console.cms.cards.message.gmenubar_action_promotedcategories,bottom_border:true,items:[],grouped:true,icon:'bars'};gsidebarCfg.sections.push(sect2);$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var _self=this;$.ajax({"dataType":'json',"type":"GET","url":org.r3.PageManager.getRESTUrl('LUT_CMS_Category'),"success":function(data,textStatus,jqXHR)
{if(data.aaData&&data.aaData.length)
{var categoryItems=[];for(var i=0;i<data.aaData.length;i++)
{if(data.aaData[i].categorymode=='promoted')
{categoryItems.push({id:data.aaData[i].categoryid,title:data.aaData[i].categorydescr,onClick:$.r3Utils.hitch(_self,_self._onGMenuBarClick),deletable:false});}}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_promotedcats',categoryItems);}},"error":function(xhr,error,thrown)
{if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. "+"This is caused by a JSON formatting error.");}}});},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newcard')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openNewCardPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_querycards':this.openCMSCardQueryActionFormPanel();break;case'act_querychannelcards':this.openCMSCardChannelQueryActionFormPanel();break;default:this.openCMSCardQueryActionFormPanel(e.id);break;}}}},openCMSCardQueryActionFormPanel:function(categoryId)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.cms.cards.message.breadcrumb_managecards,"actionForm":this.cardQueryActionForm});this.cardQueryActionForm.open(categoryId);if(categoryId)
$('#gsidebar-navanchor').gsidebar('select',categoryId);else
$('#gsidebar-navanchor').gsidebar('select','act_querycards');},openCMSCardChannelQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.cms.cards.message.breadcrumb_managecardchannels,"actionForm":this.cardChannelQueryActionForm});this.cardChannelQueryActionForm.open();},openNewCardPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.cms.cards.message.breadcrumb_newcard,"actionForm":this.cardDetailActionForm});this.cardDetailActionForm.open(null);},closeNewCardPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openCMSCardQueryActionFormPanel();},detailCard:function(cardDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.cms.cards.message.breadcrumb_carddetail,"actionForm":this.cardDetailActionForm});var dataBeanInfo={"cardDataBean":cardDataBean};this.cardDetailActionForm.open(cardDataBean);},uploadFile:function(cardDTOAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.cms.cards.message.breadcrumb_fileupload,"actionForm":this.uploadFileActionForm});this.uploadFileActionForm.open(cardDTOAdapter);}};$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ActorDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aDetailViewContainerId_tab_generale,aDetailViewContainerId_tab_siteresource)
{this.setPageManager(aPageManager);this.htmlContainerId=aDetailViewContainerId;this.detailView=new org.r3.console.contacts.ActorDetailActionFormView(aDetailViewContainerId_tab_generale,this,'tabs_mode');},close:function()
{this.hide();},hide:function()
{$(this.htmlContainerId).hide();},show:function()
{$(this.htmlContainerId).show();},open:function(aDataBeanInfo)
{this.setDataBeanInfo(aDataBeanInfo);var navigatorMode=aDataBeanInfo?'detail':'create';var navigatorUrl=org.r3.Constants.applicationContext+'/org/r3/console/contacts/ActorDetailActionFormView_tab_navigator.html.jsp?mode='+navigatorMode;$.ajax({"type":"GET","url":org.r3.PageManager.getVersionedUIURL(navigatorUrl),"dataType":"html","success":$.r3Utils.hitch(this,function(responseData)
{$(this.htmlContainerId).html(tmpl(responseData,{}));this.detailView.open(aDataBeanInfo);$(this.htmlContainerId).show();}),"error":function(jqXHR,timeout,message)
{console.error("Errore Loading: ",navigatorUrl);}});},updateItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(true,onSuccessResponse,onFailResponse);},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(false,onSuccessResponse,onFailResponse);},_saveItem:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#actordetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_Actor');if(isUpdate)
{var actorId=this.dataBeanInfo.dataBean.actorid;restUrl=org.r3.PageManager.getRESTUrl('PUT_Actor',[actorId]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);if(!org.r3.PageManager.isRestDTO(responseData))
{if(method=='put')
_self.listaContatti();else _self.pageManager.closeNewActorPanel();}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},deleteItem:function(onSuccessResponse,onErrorResponse)
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var method="DELETE";var restUrl=null;var actorId=this.dataBeanInfo.dataBean.actorid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_Actor',[actorId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);_self.pageManager.closeNewActorPanel();},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},listaContatti:function()
{org.r3.PageManager.back();},openLogInUserPicker:function(srcPickerWidget)
{console.info("Opening The Picker",srcPickerWidget);this.hide();this.pageManager.openLogInUserPicker(srcPickerWidget);}});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ActorDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,openMode)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.openMode=openMode||'default';},close:function()
{this.hide();},open:function(aDataBeanInfo)
{if(this.openMode=='default')org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/contacts/ActorDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/contacts/ActorDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(aDataBeanInfo)
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_ActorDetail',[aDataBeanInfo.dataBean.actorid]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{if(this.openMode=='default')org.r3.PageManager.closeNotifier();var actorDataBean=responseData['content'];if(actorDataBean)
{actorDataBean=new org.r3.db.actor.actor.ActorDTOAdapter(actorDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#actordetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.contacts.actordetailactionform_form_validationRules,messages:org.r3.console.contacts.actordetailactionform_form_validationMessages});$('#actordetailactionform_fieldset_message').formmessage({});$('#actordetailactionform_form_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.listaContatti));this._initializeFormFields(actorDataBean);if(actorDataBean==null)
{$('#actordetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));$('#actordetailactionform_form_action_cancel').hide();$('#actordetailactionform_action_delete').hide();}
else
{$('#actordetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));$('#actordetailactionform_form_action_cancel').show();if(!actorDataBean.isLocked())
{$('#actordetailactionform_action_delete').unbind().click($.r3Utils.hitch(this,this._onDeleteItem));$('#actordetailactionform_action_delete').show();}
else
$('#actordetailactionform_action_delete').hide();}
if(this.openMode=='default')this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{this.actionFormManager.createItem(function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('actordetailactionform_fieldset_message');}},function(jqXHR,timeout,message){$('#actordetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{this.actionFormManager.updateItem(function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('actordetailactionform_fieldset_message');}},function(jqXHR,timeout,message){$('#actordetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onDeleteItem:function()
{this.actionFormManager.deleteItem(function(responseData){},function(jqXHR,timeout,message){$('#actordetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function(anActorDTOAdapter)
{var useridPickerValue=null;if(anActorDTOAdapter)
{$('#actordetailactionform_actorid').html(anActorDTOAdapter.dataBean.actorid);$('#actordetailactionform_firstname').val(anActorDTOAdapter.dataBean.firstname);$('#actordetailactionform_lastname').val(anActorDTOAdapter.dataBean.lastname);$('#actordetailactionform_email').val(anActorDTOAdapter.dataBean.email);$('#actordetailactionform_cellphone').val(anActorDTOAdapter.dataBean.cellphone);$('#actordetailactionform_phone').val(anActorDTOAdapter.dataBean.phone);$('#actordetailactionform_address').val(anActorDTOAdapter.dataBean.address);$('#actordetailactionform_userid').html(anActorDTOAdapter.dataBean.userid);$('#actordetailactionform_town').val(anActorDTOAdapter.dataBean.town);$('#actordetailactionform_zipcode').val(anActorDTOAdapter.dataBean.zipcode);$('#actordetailactionform_sysgroups').html(anActorDTOAdapter.getSystemgroupsDescr());}
$('#gruppi_ms').gmultiselect({"fieldName":'actorgroup',"lutUrl":org.r3.PageManager.getRESTUrl('GET_UserAndApp_ActorGroups'),"selectedValue":anActorDTOAdapter&&anActorDTOAdapter.getNONSystemgroupsAsCSV()});}});$.r3Utils.namespace("org.r3.console.contacts",window,function(aNamespace)
{aNamespace.actordetailactionform_form_validationRules={firstname:{required:true,maxlength:30,texttransform:'uppercase'},lastname:{required:true,maxlength:30,texttransform:'uppercase'},email:{required:false,maxlength:50,email:true},cellphone:{required:false,maxlength:15,digits:true},phone:{required:false,maxlength:15,digits:true},address:{required:false,maxlength:30,texttransform:'uppercase'},town:{required:false,maxlength:30,texttransform:'uppercase'},zipcode:{required:false,maxlength:5,digits:true}};aNamespace.actordetailactionform_form_validationMessages={firstname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},lastname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},email:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email},cellphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},phone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},address:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},town:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},zipcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits}};});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ActorGroupAddActorsActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.actor.actor.ActorQueryActionFormView
(aDetailViewContainerId,this,{dataTableId:'ActorGroupAddActorsQueryActionFormView',gradeLevel:'grade_level4 grade_clickable',legend:org.r3.console.contacts.message.actorgroupdetailactionform_listofcandidateactors,iDisplayLength:25,layout:'fullWidth',sortable:true,dataTableColumns:"multiselector,actorid;sort,firstname,lastname;sort,address,email,cellphone",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:null,onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_actorgroupaddactor_action_addactor',label:org.r3.console.contacts.message.actorgroupdetailactionform_addselectedactors2group,disabled:true,onClick:$.r3Utils.hitch(this,function(){this.addItemsToGroup();})},{id:'console_actorgroupaddactor_action_cancel',label:org.r3.message.action_cancel,disabled:false,onClick:$.r3Utils.hitch(this,function(){org.r3.PageManager.back();})}],onInitializationComplete:function()
{$('#ActorGroupAddActorsQueryActionFormView_all_actorid').unbind().click(function(e)
{var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$('#console_actorgroupaddactor_action_addactor').prop('disabled',false);$("#ActorGroupAddActorsQueryActionFormView_tableform input[type='checkbox'][name='actorid']").prop('checked',true);}
else
{$('#console_actorgroupaddactor_action_addactor').prop('disabled',true);$("#ActorGroupAddActorsQueryActionFormView_tableform input[type='checkbox'][name='actorid']").prop('checked',false);}});$('#ActorGroupAddActorsQueryActionFormView').bind('page',function(){$('#ActorGroupAddActorsQueryActionFormView_all_actorid').prop('checked',false);$('#console_actorgroupaddactor_action_addactor').prop('disabled',true);});var matchExpr="#ActorGroupAddActorsQueryActionFormView_tableform input[type='checkbox'][name='actorid']";$(document).off('click',matchExpr).on('click',matchExpr,function(e){$('#ActorGroupAddActorsQueryActionFormView_all_actorid').prop('checked',false);var numberOfSelected=0;$.each($("#ActorGroupAddActorsQueryActionFormView_tableform input[type='checkbox'][name='actorid']"),function(index,item)
{if($(item).prop('checked'))
numberOfSelected++;});if(numberOfSelected)
{$('#console_actorgroupaddactor_action_addactor').prop('disabled',false);}
else
{$('#console_actorgroupaddactor_action_addactor').prop('disabled',true);}
e.stopPropagation();});}});},close:function()
{this.hide();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},open:function(aGroupId)
{this.setDataBeanInfo(aGroupId);var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Actors_NotInGroup',[aGroupId]);this.listView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});},onAddActors:function()
{this.hide();this.pageManager.addActorsToGroup(this.dataBeanInfo);},addItemsToGroup:function()
{var _self=this;var theForm=$('#ActorGroupAddActorsQueryActionFormView_tableform');if(theForm.valid())
{var groupId=this.dataBeanInfo;restUrl=org.r3.PageManager.getRESTUrl('PUT_AddContactsIntoActorGroup',[groupId]);method="put";org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.listView.refresh();},"error":function(jqXHR,timeout,message)
{console.error(message);org.r3.PageManager.closeNotifier();}});}}});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ActorGroupDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId,aDeleteGroupDialogConfirmationActionFormContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.contacts.ActorGroupDetailActionFormView(aDetailViewContainerId,this);this.listView=new org.r3.db.actor.actor.ActorQueryActionFormView
(aChildEntityListViewContainerId,this,{dataTableId:'ActorGroupActorQueryActionFormView',gradeLevel:'grade_level5 grade_clickable',legend:org.r3.console.contacts.message.actorgroupdetailactionform_listofactors,iDisplayLength:25,layout:'fullWidth',sortable:true,dataTableColumns:"multiselector,actorid;sort,firstname,lastname;sort,address,email,cellphone",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.actorDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_actorgroup_action_deleteactor',label:org.r3.console.contacts.message.actorgroupdetailactionform_deleteactorsfromgroup,disabled:true,onClick:$.r3Utils.hitch(this,function(){this.onRemoveItemsFromGroup();})},{id:'console_actorgroup_action_addactor',label:org.r3.console.contacts.message.actorgroupdetailactionform_addactors2group,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.onAddActors();})}],onInitializationComplete:function()
{$('#ActorGroupActorQueryActionFormView_all_actorid').unbind().click(function(e)
{var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$('#console_actorgroup_action_deleteactor').prop('disabled',false);$("#ActorGroupActorQueryActionFormView_tableform input[type='checkbox'][name='actorid']").prop('checked',true);}
else
{$('#console_actorgroup_action_deleteactor').prop('disabled',true);$("#ActorGroupActorQueryActionFormView_tableform input[type='checkbox'][name='actorid']").prop('checked',false);}});$('#ActorGroupActorQueryActionFormView').bind('page',function(){$('#ActorGroupActorQueryActionFormView_all_actorid').prop('checked',false);$('#console_actorgroup_action_deleteactor').prop('disabled',true);});var matchExpr="#ActorGroupActorQueryActionFormView_tableform input[type='checkbox'][name='actorid']";$(document).off('click',matchExpr).on('click',matchExpr,function(e){$('#ActorGroupActorQueryActionFormView_all_actorid').prop('checked',false);var numberOfSelected=0;$.each($("#ActorGroupActorQueryActionFormView_tableform input[type='checkbox'][name='actorid']"),function(index,item)
{if($(item).prop('checked'))
numberOfSelected++;});if(numberOfSelected)
{$('#console_actorgroup_action_deleteactor').prop('disabled',false);}
else
{$('#console_actorgroup_action_deleteactor').prop('disabled',true);}
e.stopPropagation();});}});},close:function()
{this.hide();},hide:function()
{this.detailView.hide();this.listView.hide();},show:function()
{this.detailView.show();this.listView.show();},refresh:function()
{this.listView.refresh();},open:function(aGroupId)
{this.setDataBeanInfo(aGroupId);this.detailView.open(aGroupId);if(aGroupId)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Actors_InGroup',[aGroupId]);this.listView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});}},updateItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(true,onSuccessResponse,onFailResponse);},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(false,onSuccessResponse,onFailResponse);},_saveItem:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#actorgroupdetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_ActorGroup');if(isUpdate)
{var groupId=this.dataBeanInfo;restUrl=org.r3.PageManager.getRESTUrl('PUT_ActorGroup',[groupId]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var actorGroupDataBean=new org.r3.db.actor.group.ActorGroupDTOAdapter(responseData);if(onSuccessResponse)
onSuccessResponse(actorGroupDataBean);if(method=='put')
{_self.pageManager.onActorGroupUpdate(actorGroupDataBean);}
else
{_self.pageManager.onActorGroupCreate(actorGroupDataBean);}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},onAddActors:function()
{this.hide();this.pageManager.addActorsToGroup(this.dataBeanInfo);},onRemoveGroup:function()
{this.pageManager.ask4Confirmation({onConfirmed:$.r3Utils.hitch(this,this.removeGroup)});},removeGroup:function(removeActors)
{this.pageManager.deleteActorGroup(this.dataBeanInfo,removeActors);},onRemoveItemsFromGroup:function()
{var theForm=$('#ActorGroupActorQueryActionFormView_tableform');if(theForm.valid())
{this.pageManager.ask4Confirmation({onConfirmed:$.r3Utils.hitch(this,this.removeItemsFromGroup)});}},removeItemsFromGroup:function(removeActors)
{var _self=this;var theForm=$('#ActorGroupActorQueryActionFormView_tableform');if(theForm.valid())
{var groupId=this.dataBeanInfo;restUrl=org.r3.PageManager.getRESTUrl('PUT_RemoveContactsFromActorGroup',[groupId,removeActors]);method="put";org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.listView.refresh();},"error":function(jqXHR,timeout,message)
{console.error(message);org.r3.PageManager.closeNotifier();}});}},actorDetail:function(aDTOAdapter)
{this.hide();org.r3.console.contacts.PageManager.openActorDetailPanel(aDTOAdapter);}});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ActorGroupDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aGroupId)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/contacts/ActorGroupDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(aGroupId)
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_ActorGroupDetail',[aGroupId]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var actorGroupDataBean=responseData['content'];if(actorGroupDataBean)
{actorGroupDataBean=new org.r3.db.actor.group.ActorGroupDTOAdapter(actorGroupDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#actorgroupdetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.contacts.actorgroupdetailactionform_form_validationRules,messages:org.r3.console.contacts.actorgroupdetailactionform_form_validationMessages});this._initializeFormFields(actorGroupDataBean);if(actorGroupDataBean==null)
{$('#actorgroupdetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));$('#actorgroupdetailactionform_oncreatefields').show();org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_ActorGroups'),"selectWidget":$('#actorgroupdetailactionform_createfromgroup'),"keepTopNItems":2});$('#actorgroupdetailactionform_action_delete').hide();}
else
{$('#actorgroupdetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onUpdateItem));if(actorGroupDataBean.isGroupprofile('deletable'))
{$('#actorgroupdetailactionform_action_delete').show();$('#actorgroupdetailactionform_action_delete').unbind().click($.r3Utils.hitch(this,this._onDeleteItem));}
else $('#actorgroupdetailactionform_action_delete').hide();$('#actorgroupdetailactionform_oncreatefields').hide();}
$('#actorgroupdetailactionform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{this.actionFormManager.createItem(function(anActorGroupDTOAdapter){if(anActorGroupDTOAdapter)
if(anActorGroupDTOAdapter.isGroupprofile('deletable'))
{$('#actorgroupdetailactionform_action_delete').show();}
else
{$('#actorgroupdetailactionform_action_delete').hide();}},function(jqXHR,timeout,message){$('#actorgroupdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{this.actionFormManager.updateItem(function(anActorGroupDTOAdapter){if(anActorGroupDTOAdapter)
if(anActorGroupDTOAdapter.isGroupprofile('deletable'))
{$('#actorgroupdetailactionform_action_delete').show();}
else
{$('#actorgroupdetailactionform_action_delete').hide();}},function(jqXHR,timeout,message){$('#actorgroupdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onDeleteItem:function()
{this.actionFormManager.onRemoveGroup();},_initializeFormFields:function(anActorGroupDTOAdapter)
{if(anActorGroupDTOAdapter)
{$('#actorgroupdetailactionform_groupid').html(anActorGroupDTOAdapter.dataBean.groupid+' - ');$('#actorgroupdetailactionform_grouptitle').val(anActorGroupDTOAdapter.dataBean.grouptitle);var groupProfile=anActorGroupDTOAdapter.getGroupprofile();if(groupProfile&&groupProfile.length>0)
{for(var i=0;i<groupProfile.length;i++)
{$('#actorgroupdetailactionform_groupprofile_'+groupProfile[i]).prop('checked',true);}}}
else $("#actorgroupdetailactionform_form input[name='groupprofile']").prop('checked',false);}});$.r3Utils.namespace("org.r3.console.contacts",window,function(aNamespace)
{aNamespace.actorgroupdetailactionform_form_validationRules={grouptitle:{required:true,maxlength:30,texttransform:'uppercase'}};aNamespace.actorgroupdetailactionform_form_validationMessages={grouptitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ActorGroupQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.actor.group.ActorGroupQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'ActorGroupQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.actor.group.message.queryactionformview_legend,iDisplayLength:25,dataTableSource:'GET_UserAndApp_ActorGroups',layout:'fullWidth',sortable:true,dataTableColumns:"groupid;sort,grouptitle,groupprofile",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.actorGroupDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_actorgroup_action_refresh',label:org.r3.message.action_refresh,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},actorGroupDetail:function(aDTOAdapter)
{this.listView.hide();this.pageManager.openActorGroupDetailPanel(aDTOAdapter.dataBean.groupid);}});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ActorQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.actor.actor.ActorQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'ActorQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.actor.actor.message.queryactionformview_legend,iDisplayLength:25,dataTableSource:'GET_Actors',layout:'fullWidth',sortable:true,dataTableColumns:"recstatus,actorid;sort,firstname,lastname;sort,address,email,cellphone",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.actorDetail),onClearSelection:null,searchInfo:{label:org.r3.console.contacts.message.search_contact,validationRules:org.r3.console.contacts.actorQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.console.contacts.actorQueryActionFormView_filter_searchform_validationMessages,autoStart:true},actionBarOnTop:true,buttons:[{id:'console_actor_action_refresh',label:org.r3.console.contacts.message.console_actor_action_refresh,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},actorDetail:function(aDTOAdapter)
{this.listView.hide();this.pageManager.openActorDetailPanel(aDTOAdapter);}});$.r3Utils.namespace("org.r3.console.contacts",window,function(aNamespace)
{aNamespace.actorQueryActionFormView_filter_searchform_validationRules={filter_item:{required:false}};aNamespace.actorQueryActionFormView_filter_searchform_validationMessages={filter_item:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ExportContactsActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.contacts.ExportContactsActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(aDataBeanInfo)
{this.setDataBeanInfo(aDataBeanInfo);this.detailView.open(aDataBeanInfo);},exportItem:function(onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#exportcontactsactionform_form');if(theForm.valid())
{var queryParams=theForm.serialize();var restUrl=org.r3.PageManager.getRESTUrl('GET_ActorsAsCSV');restUrl=$.r3Utils.addQueryStringToUrl(restUrl,queryParams);window.location.href=restUrl;}}});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ExportContactsActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/contacts/ExportContactsActionFormView.html.jsp?mode=detail'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#exportcontactsactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.contacts.exportcontactsactionform_form_validationRules,messages:org.r3.console.contacts.exportcontactsactionform_form_validationMessages});$('#exportcontactsactionform_fieldset_message').formmessage({});this._initializeFormFields();$('#exportcontactsactionform_action_export').click($.r3Utils.hitch(this,this._onExportItem));this.show();}),function(d)
{console.error("controller did not load");});},_onExportItem:function()
{this.actionFormManager.exportItem(function(responseData){var m=$.r3Utils.stringFormat(org.r3.console.contacts.message.numberoftargets,[responseData.numberoftargets]);$('#exportcontactsactionform_fieldset_message').formmessage('setText',{text:m,category:'info'});},function(jqXHR,timeout,message){$('#exportcontactsactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function()
{org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_ActorGroups'),"selectWidget":$('#exportcontactsactionform_groupid'),"onComplete":function(){$('#exportcontactsactionform_groupid').multiselect(org.r3.message.getDefaultMultiSelectOptions());}});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_actor_expformat'),"selectWidget":$('#exportcontactsactionform_csvformat'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText")});}});$.r3Utils.namespace("org.r3.console.contacts",window,function(aNamespace)
{aNamespace.exportcontactsactionform_form_validationRules={csvformat:{required:true}};aNamespace.exportcontactsactionform_form_validationMessages={csvformat:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ImportActorsFromChildSiteActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId,aDeleteGroupDialogConfirmationActionFormContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.contacts.ImportActorsFromChildSiteActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},doImport:function(onSuccessResponse,onFailResponse)
{var _self=this;var theForm=$('#importactorgroupfromchildsiteactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_ImportActorsFromChildSite');org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);_self.close();_self.pageManager.openActorQueryActionFormPanel();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}}});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.ImportActorsFromChildSiteActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/contacts/ImportActorsFromChildSiteActionFormView.html.jsp?mode=detail'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#importactorgroupfromchildsiteactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.contacts.importactorgroupfromchildsiteactionform_form_validationRules,messages:org.r3.console.contacts.importactorgroupfromchildsiteactionform_form_validationMessages});this._initializeFormFields();$('#importactorgroupfromchildsiteactionform_action_import').click($.r3Utils.hitch(this,this._onImport));$('#importactorgroupfromchildsiteactionform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},_onImport:function()
{this.actionFormManager.doImport(function(responseData){},function(jqXHR,timeout,message){$('#importactorgroupfromchildsiteactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function()
{org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_UserAndApp_ActorGroups'),"selectWidget":$('#importactorgroupfromchildsiteactionform_actorgroup'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText")});$('#importactorgroupfromchildsiteactionform_cascade select').cascadingSelect({lutManager:org.r3.PageManager.lutManager,ajaxUrlMode:'restful',withNullOption:true,widgetConfig:[{'widgetId':'importactorgroupfromchildsiteactionform_sourcesite','ajaxSource':org.r3.PageManager.getRESTUrl('LUT_Site_Children'),'value':null},{'widgetId':'importactorgroupfromchildsiteactionform_sourcegroup','ajaxSource':org.r3.PageManager.getRESTUrl('GET_ActorGroups_4Site',[org.r3.Constants.language]),'value':null}]});}});$.r3Utils.namespace("org.r3.console.contacts",window,function(aNamespace)
{aNamespace.importactorgroupfromchildsiteactionform_form_validationRules={sourcesite:{required:true}};aNamespace.importactorgroupfromchildsiteactionform_form_validationMessages={sourcesite:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.OutMailQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.system.outmailspooler.OutMailSpoolerQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'OutMailSpoolerQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.system.outmailspooler.message.queryactionformview_legend,iDisplayLength:25,dataTableSource:'GET_OUTMAIL',layout:'fullWidth',sortable:true,dataTableColumns:"messageid;sort,msgtitle,numberoftargets,numberofsentitems,numberofattachments,recstatus,rectimestamp",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.openDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_mail_action_refresh',label:org.r3.message.action_refresh,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},openDetail:function(aDtoAdapter)
{this.hide();this.pageManager.openMailDetailPanel(aDtoAdapter);}});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.PageManager={init:function()
{this.deleteGroupConfirmationDialogActionForm=new org.r3.jsportlet.dialog.DialogConfirmationActionForm(this,"#actorGroupDeleteConfirmationDialogActionForm");this.deleteGroupConfirmationDialogActionForm.open();this.actorQueryActionForm=new org.r3.console.contacts.ActorQueryActionForm(this,"#actorQueryActionForm");this.actorDetailActionForm=new org.r3.console.contacts.ActorDetailActionForm(this,"#actorDetailActionForm","#actorDetailActionFormView_tab_generale","#actorDetailActionFormView_tab_siteresource");this.exportContactsActionForm=new org.r3.console.contacts.ExportContactsActionForm(this,"#exportContactsActionForm");this.actorGroupQueryActionForm=new org.r3.console.contacts.ActorGroupQueryActionForm(this,"#actorGroupQueryActionForm");this.actorGroupDetailActionForm=new org.r3.console.contacts.ActorGroupDetailActionForm(this,"#actorGroupDetailActionForm","#actorGroupActorQueryActionForm");this.actorGroupAddActorsActionForm=new org.r3.console.contacts.ActorGroupAddActorsActionForm(this,"#actorGroupAddActorsActionForm");this.smsDetailActionForm=new org.r3.console.contacts.SMSDetailActionForm(this,"#smsDetailActionForm");this.smsQueryActionForm=new org.r3.console.contacts.SMSQueryActionForm(this,"#smsQueryActionForm");this.mailQueryActionForm=new org.r3.console.contacts.OutMailQueryActionForm(this,"#mailQueryActionForm");this.sentMailDetailActionForm=new org.r3.jsportlet.outmail.SentMailMessageActionForm(this,"#outMailMessageActionForm");this.outMailMessageActionForm=new org.r3.jsportlet.outmail.OutMailMessageActionForm(this,"#outMailMessageActionForm","#outMailMessageAttachmentsActionForm");this.importActorsFromChildSiteActionForm=new org.r3.console.contacts.ImportActorsFromChildSiteActionForm(this,"#importActorsFromChildSiteActionForm");this.uploadFileActionForm=new org.r3.jsportlet.fileupload.UploadFileActionForm(this,"#uploadFileActionForm");this.userPickerActionForm=new org.r3.jsportlet.user.UserPickerActionForm(this,'#userPickerActionForm','#userPickerAdvancedSearchActionForm');this.userDetailActionForm=new org.r3.jsportlet.user.UserDetailActionForm(this,'#userDetailActionForm');this.fileImportQueryActionForm=new org.r3.jsportlet.fileupload.FileImportQueryActionForm(this,"#fileImportQueryActionForm");this.fileImportDetailActionForm=new org.r3.jsportlet.fileupload.FileImportDetailActionForm(this,"#fileImportDetailActionForm",{"formfragment":org.r3.Constants.applicationContext+'/org/r3/console/contacts/FileImportExtensionActionForm.html.jsp',"formFragmentInit":function()
{org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_UserAndApp_ActorGroups'),"selectWidget":$('#jsportletfileimportform_actorgroup'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText")});},"processURL":"PUT_ProcessUploadedActorFile"});this.createGSideBar();org.r3.PageManager.pushHomeConsoleBreadCrumb();this.openActorQueryActionFormPanel();},ask4Confirmation:function(optHash)
{this.deleteGroupConfirmationDialogActionForm.show(optHash);},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.csshoverenabled=false;gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'gmenubar_act_newcontact',title:org.r3.console.contacts.message.gmenubar_act_newcontact_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:true,icon:'user-plus'});sect1.items.push({id:'act_querycontacts',title:org.r3.console.contacts.message.gmenubar_act_querycontacts_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'users'});var sectExport={type:'section',id:'gmenubar_sect_export',bottom_border:true,items:[]};gsidebarCfg.sections.push(sectExport);sectExport.items.push({id:'act_exportcontacts',title:org.r3.console.contacts.message.gmenubar_act_exportcontacts_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'download'});sectExport.items.push({id:'act_filecontacts',title:org.r3.console.contacts.message.gmenubar_act_filecontacts_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'file'});sectExport.items.push({id:'act_importcontacts',title:org.r3.console.contacts.message.gmenubar_act_importcontacts_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'upload'});sectExport.items.push({id:'act_importchildsitecontacts',title:org.r3.console.contacts.message.gmenubar_act_importchildsitecontacts_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'upload'});var sectSMS={type:'section',id:'gmenubar_sect_sms',bottom_border:true,items:[]};gsidebarCfg.sections.push(sectSMS);sectSMS.items.push({id:'act_newsms',title:org.r3.console.contacts.message.gmenubar_act_newsms_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,icon:'envelope'});sectSMS.items.push({id:'act_querysms',title:org.r3.console.contacts.message.gmenubar_act_querysms_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,icon:'table'});var sectMail={type:'section',id:'gmenubar_sect_mail',bottom_border:true,items:[]};gsidebarCfg.sections.push(sectMail);sectMail.items.push({id:'act_newoutmail',title:org.r3.console.contacts.message.gmenubar_act_newoutmail_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,icon:'envelope-o'});sectMail.items.push({id:'act_querymail',title:org.r3.console.contacts.message.gmenubar_act_querymail_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,icon:'table'});var sectg={type:'section',id:'gmenubar_sect_groups',bottom_border:true,items:[]};gsidebarCfg.sections.push(sectg);sectg.items.push({id:'act_query_groups',title:org.r3.console.contacts.message.gmenubar_act_act_query_groups_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,icon:'group'});sectg.items.push({id:'act_newgroup',title:org.r3.console.contacts.message.gmenubar_act_act_newgroup_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,icon:'plus'});var sect2={type:'section',id:'gmenubar_sect_quickgroupmenu',bottom_border:true,items:[],title:"Menu' Rapido Gruppi",grouped:true,icon:'bars'};gsidebarCfg.sections.push(sect2);$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var _self=this;$.ajax({"dataType":'json',"type":"GET","url":org.r3.PageManager.getRESTUrl('GET_UserAndApp_ActorGroups'),"success":function(data,textStatus,jqXHR)
{if(data.aaData&&data.aaData.length)
{var groupItems=[];for(var i=0;i<data.aaData.length;i++)
{if(data.aaData[i].groupprofile&&data.aaData[i].groupprofile.indexOf('gmenubar')>=0)
{groupItems.push({id:data.aaData[i].groupid,title:data.aaData[i].grouptitle,onClick:$.r3Utils.hitch(_self,_self._onGMenuBarClick),deletable:data.aaData[i].groupprofile&&data.aaData[i].groupprofile.indexOf('deletable')>=0});}}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_quickgroupmenu',groupItems);}},"error":function(xhr,error,thrown)
{if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. "+"This is caused by a JSON formatting error.");}}});},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newcontact')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openNewActorPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_querycontacts':this.openActorQueryActionFormPanel();break;case'act_filecontacts':this.openUploadFilesPanel();break;case'act_importcontacts':this.openFileImportQueryActionFormPanel();break;case'act_exportcontacts':this.openExportContactsPanel();break;case'act_importchildsitecontacts':this.openImportContactsFromChildSitePanel();break;case'act_query_groups':this.openActorGroupQueryPanel();break;case'act_newgroup':this.openNewActorGroupPanel();break;case'act_newsms':this.openNewSMSPanel();break;case'act_querysms':this.openSMSQueryActionFormPanel();break;case'act_querymail':this.openMailQueryActionFormPanel();break;case'act_newoutmail':this.openNewBulkMailPanel();break;default:this.openActorGroupDetailPanel(e.id);break;}}}},openActorQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Elenco Contatti","actionForm":this.actorQueryActionForm});this.actorQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_querycontacts');},openUploadFilesPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Caricamento File Contatti","actionForm":this.uploadFileActionForm});this.uploadFileActionForm.open({"uploadfile_resturl":org.r3.PageManager.getRESTUrl('POST_Upload_Actor_Files'),"uploadfile_resturl_ie":org.r3.PageManager.getRESTUrl('POST_Upload_Actor_Files_IE'),"fileTypes":["csv","txt"],"formfragment":org.r3.Constants.applicationContext+'/org/r3/console/contacts/UploadFileExtensionActionForm.html.jsp'});},openExportContactsPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Esporta Contatti","actionForm":this.exportContactsActionForm});this.exportContactsActionForm.open();},openImportContactsFromChildSitePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Contatti da Sito","actionForm":this.importActorsFromChildSiteActionForm});this.importActorsFromChildSiteActionForm.open();},openActorGroupQueryPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Gruppi Contatto","actionForm":this.actorGroupQueryActionForm});this.actorGroupQueryActionForm.open();},openActorDetailPanel:function(actorDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":"Det. Contatto","actionForm":this.actorDetailActionForm});this.actorDetailActionForm.open(actorDataBean);},openNewActorPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuovo Contatto","actionForm":this.actorDetailActionForm});this.actorDetailActionForm.open();},closeNewActorPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openActorQueryActionFormPanel();},openNewSMSPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuovo SMS","actionForm":this.smsDetailActionForm});this.smsDetailActionForm.open();},closeNewSMSPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openSMSQueryActionFormPanel();},openSMSQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Elenco SMS","actionForm":this.smsQueryActionForm});this.smsQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_querysms');},openMailQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.contacts.message.gmenubar_act_querymail_caption,"actionForm":this.mailQueryActionForm});this.mailQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_querymail');},openMailDetailPanel:function(aMailDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.contacts.message.gmenubar_act_sentmaildetail_caption,"actionForm":this.sentMailDetailActionForm});this.sentMailDetailActionForm.open(aMailDataBean);},openFileImportQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Elenco File Caricati","actionForm":this.fileImportQueryActionForm});this.fileImportQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_importcontacts');},openFileImportDetailPanel:function(fileImportDTOAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":"Importazione File","actionForm":this.fileImportDetailActionForm});this.fileImportDetailActionForm.open(fileImportDTOAdapter);},openNewBulkMailPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Bulk Mail","actionForm":this.outMailMessageActionForm});this.outMailMessageActionForm.open();},closeNewBulkMailPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openActorQueryActionFormPanel();},openActorGroupDetailPanel:function(groupId)
{org.r3.PageManager.pushBreadCrumb({"title":"Det. Gruppo","actionForm":this.actorGroupDetailActionForm});this.actorGroupDetailActionForm.open(groupId);},onActorGroupUpdate:function(anActorGroupDTOAdapter)
{var theItem=$('#gsidebar-navanchor').gsidebar('find',anActorGroupDTOAdapter.dataBean.groupid);if(anActorGroupDTOAdapter.isGroupprofile('gmenubar'))
{if(theItem)
$('#gsidebar-navanchor').gsidebar('updateItemTitle',anActorGroupDTOAdapter.dataBean.groupid,anActorGroupDTOAdapter.dataBean.grouptitle);else
{groupItems=[{id:anActorGroupDTOAdapter.dataBean.groupid,title:anActorGroupDTOAdapter.dataBean.grouptitle,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:anActorGroupDTOAdapter.isGroupprofile('deletable')}];$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_quickgroupmenu',groupItems);}}
else
{if(theItem)
$('#gsidebar-navanchor').gsidebar('remove',anActorGroupDTOAdapter.dataBean.groupid);}},onActorGroupCreate:function(anActorGroupDTOAdapter)
{if(anActorGroupDTOAdapter.isGroupprofile('gmenubar'))
{groupItems=[{id:anActorGroupDTOAdapter.dataBean.groupid,title:anActorGroupDTOAdapter.dataBean.grouptitle,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:anActorGroupDTOAdapter.isGroupprofile('deletable')}];$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_quickgroupmenu',groupItems);}
this.closeNewActorGroupPanel(anActorGroupDTOAdapter);},openNewActorGroupPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuovo Gruppo","actionForm":this.actorGroupDetailActionForm});this.actorGroupDetailActionForm.open();},onDeleteActorGroup:function(aGroupId)
{this.ask4Confirmation({onConfirmed:$.r3Utils.hitch(this,function(aRemoveActorsFlag){this.deleteActorGroup(aGroupId,aRemoveActorsFlag);})});},deleteActorGroup:function(aGroupId,removeActorsFlag)
{var _self=this;var method="DELETE";var restUrl=org.r3.PageManager.getRESTUrl('DELETE_ActorGroup',[aGroupId,removeActorsFlag]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();$('#gsidebar-navanchor').gsidebar('remove',aGroupId);$('#gsidebar-navanchor').gsidebar('select','act_querycontacts');org.r3.PageManager.closeAllBreadCrumbs();_self.openActorQueryActionFormPanel();},"error":function(jqXHR,timeout,message)
{console.error("Errore Deleting Actor Group: ",message);}});},closeNewActorGroupPanel:function(anActorGroupDTOAdapter)
{org.r3.PageManager.closeAllBreadCrumbs();if(anActorGroupDTOAdapter)
{$('#gsidebar-navanchor').gsidebar('select',anActorGroupDTOAdapter.dataBean.groupid);this.openActorGroupDetailPanel(anActorGroupDTOAdapter.dataBean.groupid);}
else
{$('#gsidebar-navanchor').gsidebar('select','act_querycontacts');this.openActorQueryActionFormPanel();}},addActorsToGroup:function(aGroupId)
{org.r3.PageManager.pushBreadCrumb({"title":"Aggiungi Contatti","actionForm":this.actorGroupAddActorsActionForm});this.actorGroupAddActorsActionForm.open(aGroupId);},openLogInUserPicker:function(srcPickerWidget)
{org.r3.PageManager.pushBreadCrumb({"title":"Selezione Log-In","actionForm":this.userPickerActionForm});this.userPickerActionForm.open({pickerWidget:srcPickerWidget,queryUrl:"GET_Users_WithoutLoginContact"});},openUserDetailPanel:function(userDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":"Det. Utenza","actionForm":this.userDetailActionForm});var dataBeanInfo={"userDataBean":userDataBean};this.userDetailActionForm.open(dataBeanInfo);}};$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.SMSDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.contacts.SMSDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(aDataBeanInfo)
{this.setDataBeanInfo(aDataBeanInfo);this.detailView.open(aDataBeanInfo);},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(onSuccessResponse,onFailResponse);},_saveItem:function(onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#smsdetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_SMS');org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);_self.pageManager.closeNewSMSPanel();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},checkSMSCredits:function(onSuccessResponse,onErrorResponse)
{var _self=this;var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_GETSMSCredits');var theForm=$('#smsdetailactionform_form');org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});},listaContatti:function()
{org.r3.PageManager.back();}});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.SMSDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/contacts/SMSDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"sms_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SMS_SiteProperties'),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var sms_properties=responseData["sms_properties"];if(sms_properties)
{sms_properties=new org.r3.db.DTOTableAdapter(sms_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#smsdetailactionform_form').validate({ignore:[],errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.contacts.smsdetailactionform_form_validationRules,messages:org.r3.console.contacts.smsdetailactionform_form_validationMessages});var textarea=document.getElementById("smsdetailactionform_smstext");textarea.onfocus=function(){var initialValue=textarea.value;function testForChange(){if(textarea.value!=initialValue){$('#smsdetailactionform_smstext_numchars').html(textarea.value.length);}}
textarea.onblur=function(){window.clearInterval(timer);testForChange();textarea.onblur=null;};var timer=window.setInterval(function(){testForChange();},50);};$('#smsdetailactionform_smsopts_charlimit').unbind().click(function(e){$('#smsdetailactionform_smstext').valid();});$('#smsdetailactionform_smsopts_send2all').unbind().click(function(e){$('#smsdetailactionform_gruppi_actorgroup').valid();var element=$(e.currentTarget);if(element.prop('checked'))
$('#smsdetailactionform_gruppi_actorgroup').multiselect("disable");else
$('#smsdetailactionform_gruppi_actorgroup').multiselect("enable");});$('#smsdetailactionform_fieldset_message').formmessage({});this._initializeFormFields(sms_properties);$('#smsdetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onCreateItem));$('#smsdetailactionform_action_checksmscredits').unbind().click($.r3Utils.hitch(this,this._onCheckSMSCredits));this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{this.actionFormManager.createItem(function(responseData){$('#smsdetailactionform_action_saveitem').prop('disabled',true);var m=$.r3Utils.stringFormat(org.r3.console.contacts.message.numberoftargets,[responseData.numberoftargets]);$('#smsdetailactionform_fieldset_message').formmessage('setText',{text:m,category:'info'});},function(jqXHR,timeout,message){$('#smsdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onCheckSMSCredits:function()
{var _self=this;var smsLogin=$('#smsdetailactionform_smslogin');var smsPasswd=$('#smsdetailactionform_smspasswd');var smsGroups=$('#smsdetailactionform_gruppi_actorgroup');var isValid=smsLogin.valid()&&smsPasswd.valid()&&($('#smsdetailactionform_smsopts_send2all').prop('checked')||smsGroups.valid());if(isValid)
{this._startComputingSMSCredits();this.actionFormManager.checkSMSCredits(function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isOk())
{console.info("Comparazione Valori: ",restDto.counter1>restDto.counter2);_self._endComputingSMSCredits(restDto.counter1||'0',restDto.counter2||'0');}
else
{_self._endComputingSMSCredits();restDto.showMessage('smsdetailactionform_fieldset_message');}}},function(jqXHR,timeout,message){_self._endComputingSMSCredits();$('#smsdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}},_startComputingSMSCredits:function()
{var viewPortWidget=$('#smsdetailactionform_numberofsmscredits');viewPortWidget.addClass('ajax-loader');viewPortWidget.html('');viewPortWidget.show();$('#smsdetailactionform_fieldset_message').formmessage('clear');},_endComputingSMSCredits:function(value1,value2)
{var viewPortWidget=$('#smsdetailactionform_numberofsmscredits');viewPortWidget.removeClass('ajax-loader');switch(arguments.length)
{case 0:viewPortWidget.hide();break;case 1:viewPortWidget.html(value1);break;case 2:viewPortWidget.html(value1+"/"+value2);break;}},_initializeFormFields:function(smsPropertiesDataTableAdapter)
{var propertyName='sms.smssender';var property=smsPropertiesDataTableAdapter.findItem(propertyName);if(property)
$('#smsdetailactionform_smssender').val(property.dataBean.propertyvalue);propertyName='sms.smslogin'
property=smsPropertiesDataTableAdapter.findItem(propertyName);if(property)
$('#smsdetailactionform_smslogin').val(property.dataBean.propertyvalue);propertyName='sms.smspasswd'
property=smsPropertiesDataTableAdapter.findItem(propertyName);if(property)
$('#smsdetailactionform_smspasswd').val(property.dataBean.propertyvalue);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_ActorGroups'),"selectWidget":$('#smsdetailactionform_gruppi_actorgroup'),"onComplete":function(){$('#smsdetailactionform_gruppi_actorgroup').multiselect();}});var checkContainer=$('#smsdetailactionform_smsopts_cnt');if(checkContainer.length>0)
{resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_smsoptions');org.r3.PageManager.lutManager.populateCheckBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#smsdetailactionform_smsopts_cnt'),"groupId":"smsdetailactionform_smsopts_","groupName":"smsopts","value":null});}}});$.r3Utils.namespace("org.r3.console.contacts",window,function(aNamespace)
{aNamespace.smsdetailactionform_form_validationRules={actorgroup:{required:function(){return($('#smsdetailactionform_smsopts_send2all').prop('checked'))?false:true;}},smslogin:{required:true,maxlength:15},smspasswd:{required:true,maxlength:15},smssender:{required:true,maxlength:11},smstext:{required:true,maxlength:function(){return($('#smsdetailactionform_smsopts_charlimit').prop('checked'))?160:512;}}};aNamespace.smsdetailactionform_form_validationMessages={actorgroup:{required:org.r3.message.field_required},smslogin:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},smspasswd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},smssender:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},smstext:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.contacts");org.r3.console.contacts.SMSQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.system.smsqueue.SMSQueueQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'SMSQueueQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.system.smsqueue.message.queryactionformview_legend,iDisplayLength:25,dataTableSource:'GET_SMSes',layout:'fullWidth',sortable:true,dataTableColumns:"smsid;sort,numberoftargets,numberofsentitems,smsinfo,recstatus,rectimestamp",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:null,onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_sms_action_refresh',label:org.r3.message.action_refresh,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();}});$.r3Utils.namespace("org.r3.console.home");org.r3.console.home.PageManager={init:function(aChildrenSiteFlag)
{this.childrenSiteFlag=aChildrenSiteFlag;if(this.childrenSiteFlag)
{this.regattasQueryActionForm=new org.r3.console.regattas.RegattasQueryActionForm(this,"#regattasQueryActionForm");this.regattaDetailActionForm=new org.r3.console.regattas.RegattaDetailActionForm(this,"#regattaDetailActionForm");}
org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createConsoleGMenuBar($.r3Utils.hitch(this,this._onGMenuBarClick),$.r3Utils.hitch(this,this._onGMenuBarSiteClick));},createConsoleGMenuBar:function(onClickCallBack,onClickSiteCallBack)
{var gsidebarCfg={};gsidebarCfg.sections=[];var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_ConsolePages'));if(this.childrenSiteFlag)
{networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Site_GSideBarChildren'));}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var lutPageResolvedUrl=org.r3.PageManager.getRESTUrl('LUT_CMS_ConsolePages');var firstSelectedSideBarItem=null;var firstEnabledSideBarItem=null;var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);if(this.childrenSiteFlag)
{var sideBarItem={id:'gmenubar_act_newsite',title:org.r3.console.home.message.gmenubar_act_newsite,onClick:onClickCallBack,deletable:false,selected:false,icon:'plus'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var sideBarItem={id:'act_queryregattas',title:org.r3.console.home.message.gmenubar_act_queryregattas,onClick:onClickCallBack,deletable:false,selected:true,icon:'table'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_applications");if(lutPageItem)
{var sideBarItem={id:'act_sevapp',title:org.r3.console.home.message.gmenubar_act_sevapp,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_contacts");if(lutPageItem)
{var sideBarItem={id:'act_contacts',title:org.r3.console.home.message.gmenubar_act_contacts,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_rankings");if(lutPageItem)
{var sideBarItem={id:'act_sevrank',title:org.r3.console.home.message.gmenubar_act_sevrank,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_cms");if(lutPageItem)
{var sideBarItem={id:'act_cms',title:org.r3.console.home.message.gmenubar_act_cms,onClick:onClickCallBack,deletable:false,selected:false,icon:'edit'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_bbs");if(lutPageItem)
{var sideBarItem={id:'act_bbs',title:org.r3.console.home.message.gmenubar_act_bbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'comment-o'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_wbs");if(lutPageItem)
{var sideBarItem={id:'act_wbs',title:org.r3.console.home.message.gmenubar_act_wbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'list-ul'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_tow");if(lutPageItem)
{var sideBarItem={id:'act_tow',title:"Amministrazione TOW...",onClick:onClickCallBack,deletable:false,selected:false,icon:'tasks'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_resource");if(lutPageItem)
{var sideBarItem={id:'act_resource',title:"Risorse...",onClick:onClickCallBack,deletable:false,selected:false,icon:'user-times'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_siteconfig");if(lutPageItem)
{var sideBarItem={id:'act_config',title:org.r3.console.home.message.gmenubar_act_config,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_users");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_users',title:org.r3.console.home.message.gmenubar_act_users,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_rest");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_resturls',title:org.r3.console.home.message.gmenubar_act_resturls,onClick:onClickCallBack,deletable:false,selected:false,icon:'wrench'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
var sideBarItem={id:'act_tutorials',title:org.r3.console.home.message.gmenubar_act_tutorials,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);if(this.childrenSiteFlag)
{var sect_childrensites={type:'section',id:'gmenubar_sect_childrensites',title:org.r3.console.home.message.gmenubar_act_childrensite,bottom_border:true,items:[],icon:'bars',grouped:true};gsidebarCfg.sections.push(sect_childrensites);}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);if(this.childrenSiteFlag)
{var resolvedUrl=org.r3.PageManager.getRESTUrl('LUT_Site_GSideBarChildren');var lutChildrenSite=org.r3.PageManager.lutManager.getLUT(resolvedUrl);if(lutChildrenSite&&lutChildrenSite.aaData.length)
{var siteItems=[];for(var i=0;i<lutChildrenSite.aaData.length;i++)
{siteItems.push({id:lutChildrenSite.aaData[i].site,title:lutChildrenSite.aaData[i].sitedescr,onClick:onClickSiteCallBack,deletable:false});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_childrensites',siteItems);}}
if(firstSelectedSideBarItem)
onClickCallBack(firstSelectedSideBarItem,'gsidebar_init');}));},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/console/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{if(!actionTriggered)
{if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{this.activateItem(e);}}
else
{switch(actionTriggered)
{case'delete':break;case'gsidebar_init':this.activateItem(e);break;}}},activateItem:function(e)
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'gmenubar_act_newsite':this.openNewSitePanel();break;case'act_queryregattas':this.openQueryRegattasPanel();break;case'act_contacts':this.openContactsPanel();break;case'act_sevapp':this.openSEVAppPanel();break;case'act_sevrank':this.openSEVRankPanel();break;case'act_cms':this.openCMSPanel();break;case'act_config':this.openConfigPanel();break;case'act_bbs':this.openBBSPanel();break;case'act_wbs':this.openWBSPanel();break;case'act_tow':this.openTOWPanel();break;case'act_resource':this.openResourcePanel();break;case'act_users':this.openUsersPanel();break;case'act_resturls':this.openRestUrlsPanel();break;case'act_tutorials':this.openVideoTutorialsPanel();break;default:break;}},openNewSitePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.message.breadcrumb_newsite,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open();},closeNewSitePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openQueryRegattasPanel();},openQueryRegattasPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.message.breadcrumb_querysites,"actionForm":this.regattasQueryActionForm});$('#gsidebar-navanchor').gsidebar('select','act_queryregattas');this.regattasQueryActionForm.open();},openRegattaDetailPanel:function(regattaDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.message.breadcrumb_sitedeatil,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open(regattaDataBean);},openSEVAppPanel:function()
{org.r3.PageManager.gotoPage('sev/applications.do');},openSEVRankPanel:function()
{org.r3.PageManager.gotoPage('sev/ranking.do');},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms/cards.do');},openConfigPanel:function()
{org.r3.PageManager.gotoPage('siteconfig.do');},openUsersPanel:function()
{org.r3.PageManager.gotoPage('users.do');},openBBSPanel:function()
{org.r3.PageManager.gotoPage('bbs.do');},openWBSPanel:function()
{org.r3.PageManager.gotoPage('wbs.do');},openTOWPanel:function()
{org.r3.PageManager.gotoPage('tow.do');},openResourcePanel:function()
{org.r3.PageManager.gotoPage('resources.do');},openRestUrlsPanel:function()
{org.r3.PageManager.gotoPage('system/resturls.do');},openVideoTutorialsPanel:function()
{org.r3.PageManager.gotoPage('system/tutorials.do');}};$.r3Utils.namespace("org.r3.console.home.defaultsite");org.r3.console.home.defaultsite.PageManager={init:function()
{this.regattasQueryActionForm=new org.r3.console.regattas.RegattasQueryActionForm(this,"#regattasQueryActionForm");this.regattaDetailActionForm=new org.r3.console.regattas.RegattaDetailActionForm(this,"#regattaDetailActionForm");org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createConsoleGMenuBar($.r3Utils.hitch(this,this._onGMenuBarClick),$.r3Utils.hitch(this,this._onGMenuBarSiteClick));},createConsoleGMenuBar:function(onClickCallBack,onClickSiteCallBack)
{var gsidebarCfg={};gsidebarCfg.sections=[];var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_ConsolePages'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Site_GSideBarChildren'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var lutPageResolvedUrl=org.r3.PageManager.getRESTUrl('LUT_CMS_ConsolePages');var firstSelectedSideBarItem=null;var firstEnabledSideBarItem=null;var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);var sideBarItem={id:'gmenubar_act_newsite',title:org.r3.message.gmenubar_act_newsite,onClick:onClickCallBack,deletable:false,selected:false,icon:'plus'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var sideBarItem={id:'act_queryregattas',title:org.r3.message.gmenubar_act_queryregattas,onClick:onClickCallBack,deletable:false,selected:true,icon:'table'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_contacts");if(lutPageItem)
{var sideBarItem={id:'act_contacts',title:org.r3.message.gmenubar_act_contacts,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_cms");if(lutPageItem)
{var sideBarItem={id:'act_cms',title:org.r3.message.gmenubar_act_cms,onClick:onClickCallBack,deletable:false,selected:false,icon:'edit'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_bbs");if(lutPageItem)
{var sideBarItem={id:'act_bbs',title:org.r3.message.gmenubar_act_bbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'comment-o'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_wbs");if(lutPageItem)
{var sideBarItem={id:'act_wbs',title:org.r3.message.gmenubar_act_wbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'list-ul'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_tow");if(lutPageItem)
{var sideBarItem={id:'act_tow',title:"Amministrazione TOW...",onClick:onClickCallBack,deletable:false,selected:false,icon:'tasks'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_resource");if(lutPageItem)
{var sideBarItem={id:'act_resource',title:"Risorse...",onClick:onClickCallBack,deletable:false,selected:false,icon:'user-times'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_siteconfig");if(lutPageItem)
{var sideBarItem={id:'act_config',title:org.r3.message.gmenubar_act_config,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var sect_childrensites={type:'section',id:'gmenubar_sect_childrensites',title:org.r3.message.gmenubar_act_childrensite,bottom_border:true,items:[],icon:'bars',grouped:true};gsidebarCfg.sections.push(sect_childrensites);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_users");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_users',title:org.r3.message.gmenubar_act_users,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_rest");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_resturls',title:org.r3.message.gmenubar_act_resturls,onClick:onClickCallBack,deletable:false,selected:false,icon:'wrench'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var resolvedUrl=org.r3.PageManager.getRESTUrl('LUT_Site_GSideBarChildren');var lutChildrenSite=org.r3.PageManager.lutManager.getLUT(resolvedUrl);if(lutChildrenSite&&lutChildrenSite.aaData.length)
{var siteItems=[];for(var i=0;i<lutChildrenSite.aaData.length;i++)
{siteItems.push({id:lutChildrenSite.aaData[i].site,title:lutChildrenSite.aaData[i].sitedescr,onClick:onClickSiteCallBack,deletable:false});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_childrensites',siteItems);}
if(firstSelectedSideBarItem)
onClickCallBack(firstSelectedSideBarItem,'gsidebar_init');else if(firstEnabledSideBarItem)
onClickCallBack(firstEnabledSideBarItem,'gsidebar_init');}));},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/console/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{if(!actionTriggered)
{if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{this.activateItem(e);}}
else
{switch(actionTriggered)
{case'delete':break;case'gsidebar_init':this.activateItem(e);break;}}},activateItem:function(e)
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'gmenubar_act_newsite':this.openNewSitePanel();break;case'act_queryregattas':this.openQueryRegattasPanel();break;case'act_contacts':this.openContactsPanel();break;case'act_cms':this.openCMSPanel();break;case'act_config':this.openConfigPanel();break;case'act_bbs':this.openBBSPanel();break;case'act_wbs':this.openWBSPanel();break;case'act_tow':this.openTOWPanel();break;case'act_resource':this.openResourcePanel();break;case'act_users':this.openUsersPanel();break;case'act_resturls':this.openRestUrlsPanel();break;default:break;}},openNewSitePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuova Regata","actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open();},closeNewSitePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openQueryRegattasPanel();},openQueryRegattasPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Elenco Regate","actionForm":this.regattasQueryActionForm});this.regattasQueryActionForm.open();},openRegattaDetailPanel:function(regattaDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":"Det. Regata","actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open(regattaDataBean);},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms/cards.do');},openConfigPanel:function()
{org.r3.PageManager.gotoPage('siteconfig.do');},openUsersPanel:function()
{org.r3.PageManager.gotoPage('users.do');},openWBSPanel:function()
{org.r3.PageManager.gotoPage('wbs.do');},openTOWPanel:function()
{org.r3.PageManager.gotoPage('tow.do');},openResourcePanel:function()
{org.r3.PageManager.gotoPage('resources.do');},openBBSPanel:function()
{org.r3.PageManager.gotoPage('bbs.do');},openRestUrlsPanel:function()
{org.r3.PageManager.gotoPage('system/resturls.do');}};$.r3Utils.namespace("org.r3.console.home.itilsite");org.r3.console.home.itilsite.PageManager={init:function()
{this.regattasQueryActionForm=new org.r3.console.regattas.RegattasQueryActionForm(this,"#regattasQueryActionForm");this.regattaDetailActionForm=new org.r3.console.regattas.RegattaDetailActionForm(this,"#regattaDetailActionForm");org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createConsoleGMenuBar($.r3Utils.hitch(this,this._onGMenuBarClick),$.r3Utils.hitch(this,this._onGMenuBarSiteClick));},createConsoleGMenuBar:function(onClickCallBack,onClickSiteCallBack)
{var gsidebarCfg={};gsidebarCfg.sections=[];var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_ConsolePages'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Site_GSideBarChildren'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var lutPageResolvedUrl=org.r3.PageManager.getRESTUrl('LUT_CMS_ConsolePages');var firstSelectedSideBarItem=null;var firstEnabledSideBarItem=null;var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);var sideBarItem={id:'gmenubar_act_newsite',title:org.r3.message.gmenubar_act_newsite,onClick:onClickCallBack,deletable:false,selected:false,icon:'plus'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var sideBarItem={id:'act_queryregattas',title:org.r3.message.gmenubar_act_queryregattas,onClick:onClickCallBack,deletable:false,selected:true,icon:'table'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_contacts");if(lutPageItem)
{var sideBarItem={id:'act_contacts',title:org.r3.message.gmenubar_act_contacts,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_cms");if(lutPageItem)
{var sideBarItem={id:'act_cms',title:org.r3.message.gmenubar_act_cms,onClick:onClickCallBack,deletable:false,selected:false,icon:'edit'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_bbs");if(lutPageItem)
{var sideBarItem={id:'act_bbs',title:org.r3.message.gmenubar_act_bbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'comment-o'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_wbs");if(lutPageItem)
{var sideBarItem={id:'act_wbs',title:org.r3.message.gmenubar_act_wbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'list-ul'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_tow");if(lutPageItem)
{var sideBarItem={id:'act_tow',title:"Amministrazione TOW...",onClick:onClickCallBack,deletable:false,selected:false,icon:'tasks'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_resource");if(lutPageItem)
{var sideBarItem={id:'act_resource',title:"Risorse...",onClick:onClickCallBack,deletable:false,selected:false,icon:'user-times'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_siteconfig");if(lutPageItem)
{var sideBarItem={id:'act_config',title:org.r3.message.gmenubar_act_config,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var sect_childrensites={type:'section',id:'gmenubar_sect_childrensites',title:org.r3.message.gmenubar_act_childrensite,bottom_border:true,items:[],icon:'bars',grouped:true};gsidebarCfg.sections.push(sect_childrensites);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_users");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_users',title:org.r3.message.gmenubar_act_users,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_rest");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_resturls',title:org.r3.message.gmenubar_act_resturls,onClick:onClickCallBack,deletable:false,selected:false,icon:'wrench'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var resolvedUrl=org.r3.PageManager.getRESTUrl('LUT_Site_GSideBarChildren');var lutChildrenSite=org.r3.PageManager.lutManager.getLUT(resolvedUrl);if(lutChildrenSite&&lutChildrenSite.aaData.length)
{var siteItems=[];for(var i=0;i<lutChildrenSite.aaData.length;i++)
{siteItems.push({id:lutChildrenSite.aaData[i].site,title:lutChildrenSite.aaData[i].sitedescr,onClick:onClickSiteCallBack,deletable:false});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_childrensites',siteItems);}
if(firstSelectedSideBarItem)
onClickCallBack(firstSelectedSideBarItem,'gsidebar_init');else if(firstEnabledSideBarItem)
onClickCallBack(firstEnabledSideBarItem,'gsidebar_init');}));},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/console/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{if(!actionTriggered)
{if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{this.activateItem(e);}}
else
{switch(actionTriggered)
{case'delete':break;case'gsidebar_init':this.activateItem(e);break;}}},activateItem:function(e)
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'gmenubar_act_newsite':this.openNewSitePanel();break;case'act_queryregattas':this.openQueryRegattasPanel();break;case'act_contacts':this.openContactsPanel();break;case'act_cms':this.openCMSPanel();break;case'act_config':this.openConfigPanel();break;case'act_bbs':this.openBBSPanel();break;case'act_wbs':this.openWBSPanel();break;case'act_tow':this.openTOWPanel();break;case'act_resource':this.openResourcePanel();break;case'act_users':this.openUsersPanel();break;case'act_resturls':this.openRestUrlsPanel();break;default:break;}},openNewSitePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.message.breadcrumb_newsite,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open();},closeNewSitePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openQueryRegattasPanel();},openQueryRegattasPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.message.breadcrumb_querysites,"actionForm":this.regattasQueryActionForm});this.regattasQueryActionForm.open();},openRegattaDetailPanel:function(regattaDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.message.breadcrumb_sitedeatil,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open(regattaDataBean);},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms/cards.do');},openConfigPanel:function()
{org.r3.PageManager.gotoPage('siteconfig.do');},openUsersPanel:function()
{org.r3.PageManager.gotoPage('users.do');},openBBSPanel:function()
{org.r3.PageManager.gotoPage('bbs.do');},openWBSPanel:function()
{org.r3.PageManager.gotoPage('wbs.do');},openTOWPanel:function()
{org.r3.PageManager.gotoPage('tow.do');},openResourcePanel:function()
{org.r3.PageManager.gotoPage('resources.do');},openRestUrlsPanel:function()
{org.r3.PageManager.gotoPage('system/resturls.do');}};$.r3Utils.namespace("org.r3.console.home.mastersite");org.r3.console.home.mastersite.PageManager={init:function()
{this.regattasQueryActionForm=new org.r3.console.regattas.RegattasQueryActionForm(this,"#regattasQueryActionForm");this.regattaDetailActionForm=new org.r3.console.regattas.RegattaDetailActionForm(this,"#regattaDetailActionForm");org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createConsoleGMenuBar($.r3Utils.hitch(this,this._onGMenuBarClick),$.r3Utils.hitch(this,this._onGMenuBarSiteClick));},createConsoleGMenuBar:function(onClickCallBack,onClickSiteCallBack)
{var gsidebarCfg={};gsidebarCfg.sections=[];var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_ConsolePages'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Site_GSideBarChildren'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var lutPageResolvedUrl=org.r3.PageManager.getRESTUrl('LUT_CMS_ConsolePages');var firstSelectedSideBarItem=null;var firstEnabledSideBarItem=null;var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);var sideBarItem={id:'gmenubar_act_newsite',title:org.r3.message.gmenubar_act_newsite,onClick:onClickCallBack,deletable:false,selected:false,icon:'plus'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var sideBarItem={id:'act_queryregattas',title:org.r3.message.gmenubar_act_queryregattas,onClick:onClickCallBack,deletable:false,selected:true,icon:'table'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_contacts");if(lutPageItem)
{var sideBarItem={id:'act_contacts',title:org.r3.message.gmenubar_act_contacts,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_cms");if(lutPageItem)
{var sideBarItem={id:'act_cms',title:org.r3.message.gmenubar_act_cms,onClick:onClickCallBack,deletable:false,selected:false,icon:'edit'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_bbs");if(lutPageItem)
{var sideBarItem={id:'act_bbs',title:org.r3.message.gmenubar_act_bbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'comment-o'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_wbs");if(lutPageItem)
{var sideBarItem={id:'act_wbs',title:org.r3.message.gmenubar_act_wbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'list-ul'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_tow");if(lutPageItem)
{var sideBarItem={id:'act_tow',title:"Amministrazione TOW...",onClick:onClickCallBack,deletable:false,selected:false,icon:'tasks'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_resource");if(lutPageItem)
{var sideBarItem={id:'act_resource',title:"Risorse...",onClick:onClickCallBack,deletable:false,selected:false,icon:'user-times'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_siteconfig");if(lutPageItem)
{var sideBarItem={id:'act_config',title:org.r3.message.gmenubar_act_config,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var sect_childrensites={type:'section',id:'gmenubar_sect_childrensites',title:org.r3.message.gmenubar_act_childrensite,bottom_border:true,items:[],icon:'bars',grouped:true};gsidebarCfg.sections.push(sect_childrensites);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_users");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_users',title:org.r3.message.gmenubar_act_users,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_rest");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_resturls',title:org.r3.message.gmenubar_act_resturls,onClick:onClickCallBack,deletable:false,selected:false,icon:'wrench'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var resolvedUrl=org.r3.PageManager.getRESTUrl('LUT_Site_GSideBarChildren');var lutChildrenSite=org.r3.PageManager.lutManager.getLUT(resolvedUrl);if(lutChildrenSite&&lutChildrenSite.aaData.length)
{var siteItems=[];for(var i=0;i<lutChildrenSite.aaData.length;i++)
{siteItems.push({id:lutChildrenSite.aaData[i].site,title:lutChildrenSite.aaData[i].sitedescr,onClick:onClickSiteCallBack,deletable:false});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_childrensites',siteItems);}
if(firstSelectedSideBarItem)
onClickCallBack(firstSelectedSideBarItem,'gsidebar_init');else if(firstEnabledSideBarItem)
onClickCallBack(firstEnabledSideBarItem,'gsidebar_init');}));},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/console/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{if(!actionTriggered)
{if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{this.activateItem(e);}}
else
{switch(actionTriggered)
{case'delete':break;case'gsidebar_init':this.activateItem(e);break;}}},activateItem:function(e)
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'gmenubar_act_newsite':this.openNewSitePanel();break;case'act_queryregattas':this.openQueryRegattasPanel();break;case'act_contacts':this.openContactsPanel();break;case'act_cms':this.openCMSPanel();break;case'act_config':this.openConfigPanel();break;case'act_bbs':this.openBBSPanel();break;case'act_wbs':this.openWBSPanel();break;case'act_tow':this.openTOWPanel();break;case'act_resource':this.openResourcePanel();break;case'act_users':this.openUsersPanel();break;case'act_resturls':this.openRestUrlsPanel();break;default:break;}},openNewSitePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_newsite,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open();},closeNewSitePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openQueryRegattasPanel();},openQueryRegattasPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_querysites,"actionForm":this.regattasQueryActionForm});this.regattasQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_queryregattas');},openRegattaDetailPanel:function(regattaDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_sitedeatil,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open(regattaDataBean);},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms/cards.do');},openConfigPanel:function()
{org.r3.PageManager.gotoPage('siteconfig.do');},openUsersPanel:function()
{org.r3.PageManager.gotoPage('users.do');},openBBSPanel:function()
{org.r3.PageManager.gotoPage('bbs.do');},openWBSPanel:function()
{org.r3.PageManager.gotoPage('wbs.do');},openTOWPanel:function()
{org.r3.PageManager.gotoPage('tow.do');},openResourcePanel:function()
{org.r3.PageManager.gotoPage('resources.do');},openRestUrlsPanel:function()
{org.r3.PageManager.gotoPage('system/resturls.do');}};$.r3Utils.namespace("org.r3.console.home.shakeus");org.r3.console.home.shakeus.PageManager={init:function()
{org.r3.PageManager.pushHomeConsoleBreadCrumb();this.regattasQueryActionForm=new org.r3.console.regattas.RegattasQueryActionForm(this,"#regattasQueryActionForm");this.regattaDetailActionForm=new org.r3.console.regattas.RegattaDetailActionForm(this,"#regattaDetailActionForm");this.createConsoleGMenuBar($.r3Utils.hitch(this,this._onGMenuBarClick),$.r3Utils.hitch(this,this._onGMenuBarSiteClick));},createConsoleGMenuBar:function(onClickCallBack,onClickSiteCallBack)
{var gsidebarCfg={};gsidebarCfg.sections=[];var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_ConsolePages'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Site_GSideBarChildren'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var lutPageResolvedUrl=org.r3.PageManager.getRESTUrl('LUT_CMS_ConsolePages');var firstSelectedSideBarItem=null;var firstEnabledSideBarItem=null;var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);var sideBarItem={id:'gmenubar_act_newsite',title:org.r3.message.gmenubar_act_newsite,onClick:onClickCallBack,deletable:false,selected:false,icon:'plus'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var sideBarItem={id:'act_queryregattas',title:org.r3.message.gmenubar_act_queryregattas,onClick:onClickCallBack,deletable:false,selected:true,icon:'table'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_applications");if(lutPageItem)
{var sideBarItem={id:'act_sevapp',title:org.r3.message.gmenubar_act_sevapp,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_contacts");if(lutPageItem)
{var sideBarItem={id:'act_contacts',title:org.r3.message.gmenubar_act_contacts,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_rankings");if(lutPageItem)
{var sideBarItem={id:'act_sevrank',title:org.r3.message.gmenubar_act_sevrank,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_cms");if(lutPageItem)
{var sideBarItem={id:'act_cms',title:org.r3.message.gmenubar_act_cms,onClick:onClickCallBack,deletable:false,selected:false,icon:'edit'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_bbs");if(lutPageItem)
{var sideBarItem={id:'act_bbs',title:org.r3.message.gmenubar_act_bbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'comment-o'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_wbs");if(lutPageItem)
{var sideBarItem={id:'act_wbs',title:org.r3.message.gmenubar_act_wbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'list-ul'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_tow");if(lutPageItem)
{var sideBarItem={id:'act_tow',title:"Amministrazione TOW...",onClick:onClickCallBack,deletable:false,selected:false,icon:'tasks'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_resource");if(lutPageItem)
{var sideBarItem={id:'act_resource',title:"Risorse...",onClick:onClickCallBack,deletable:false,selected:false,icon:'user-times'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_siteconfig");if(lutPageItem)
{var sideBarItem={id:'act_config',title:org.r3.message.gmenubar_act_config,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var sect_childrensites={type:'section',id:'gmenubar_sect_childrensites',title:org.r3.message.gmenubar_act_childrensite,bottom_border:true,items:[],icon:'bars',grouped:true};gsidebarCfg.sections.push(sect_childrensites);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_users");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_users',title:org.r3.message.gmenubar_act_users,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_rest");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_resturls',title:org.r3.message.gmenubar_act_resturls,onClick:onClickCallBack,deletable:false,selected:false,icon:'wrench'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var resolvedUrl=org.r3.PageManager.getRESTUrl('LUT_Site_GSideBarChildren');var lutChildrenSite=org.r3.PageManager.lutManager.getLUT(resolvedUrl);if(lutChildrenSite&&lutChildrenSite.aaData.length)
{var siteItems=[];for(var i=0;i<lutChildrenSite.aaData.length;i++)
{siteItems.push({id:lutChildrenSite.aaData[i].site,title:lutChildrenSite.aaData[i].sitedescr,onClick:onClickSiteCallBack,deletable:false});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_childrensites',siteItems);}
if(firstSelectedSideBarItem)
onClickCallBack(firstSelectedSideBarItem,'gsidebar_init');else if(firstEnabledSideBarItem)
onClickCallBack(firstEnabledSideBarItem,'gsidebar_init');}));},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/console/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{if(!actionTriggered)
{if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{this.activateItem(e);}}
else
{switch(actionTriggered)
{case'delete':break;case'gsidebar_init':this.activateItem(e);break;}}},activateItem:function(e)
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'gmenubar_act_newsite':this.openNewSitePanel();break;case'act_queryregattas':this.openQueryRegattasPanel();break;case'act_contacts':this.openContactsPanel();break;case'act_sevapp':this.openSEVAppPanel();break;case'act_sevrank':this.openSEVRankPanel();break;case'act_cms':this.openCMSPanel();break;case'act_config':this.openConfigPanel();break;case'act_bbs':this.openBBSPanel();break;case'act_wbs':this.openWBSPanel();break;case'act_tow':this.openTOWPanel();break;case'act_resource':this.openResourcePanel();break;case'act_users':this.openUsersPanel();break;case'act_resturls':this.openRestUrlsPanel();break;default:break;}},openNewSitePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_newsite,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open();},closeNewSitePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openQueryRegattasPanel();},openQueryRegattasPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_querysites,"actionForm":this.regattasQueryActionForm});this.regattasQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_queryregattas');},openRegattaDetailPanel:function(regattaDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_sitedeatil,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open(regattaDataBean);},openSEVAppPanel:function()
{org.r3.PageManager.gotoPage('sev/applications.do');},openSEVRankPanel:function()
{org.r3.PageManager.gotoPage('sev/ranking.do');},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms/cards.do');},openConfigPanel:function()
{org.r3.PageManager.gotoPage('siteconfig.do');},openUsersPanel:function()
{org.r3.PageManager.gotoPage('users.do');},openBBSPanel:function()
{org.r3.PageManager.gotoPage('bbs.do');},openWBSPanel:function()
{org.r3.PageManager.gotoPage('wbs.do');},openTOWPanel:function()
{org.r3.PageManager.gotoPage('tow.do');},openResourcePanel:function()
{org.r3.PageManager.gotoPage('resources.do');},openRestUrlsPanel:function()
{org.r3.PageManager.gotoPage('system/resturls.do');}};$.r3Utils.namespace("org.r3.console.home.site");org.r3.console.home.site.PageManager={init:function()
{org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createConsoleGMenuBar($.r3Utils.hitch(this,this._onGMenuBarClick),$.r3Utils.hitch(this,this._onGMenuBarSiteClick));},createConsoleGMenuBar:function(onClickCallBack,onClickSiteCallBack)
{var gsidebarCfg={};gsidebarCfg.sections=[];var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_ConsolePages'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Site_GSideBarChildren'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var lutPageResolvedUrl=org.r3.PageManager.getRESTUrl('LUT_CMS_ConsolePages');var firstSelectedSideBarItem=null;var firstEnabledSideBarItem=null;var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);var sideBarItem={id:'gmenubar_act_newsite',title:org.r3.message.gmenubar_act_newsite,onClick:onClickCallBack,deletable:false,selected:false,icon:'plus'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var sideBarItem={id:'act_queryregattas',title:org.r3.message.gmenubar_act_queryregattas,onClick:onClickCallBack,deletable:false,selected:true,icon:'table'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_applications");if(lutPageItem)
{var sideBarItem={id:'act_sevapp',title:org.r3.message.gmenubar_act_sevapp,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_contacts");if(lutPageItem)
{var sideBarItem={id:'act_contacts',title:org.r3.message.gmenubar_act_contacts,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_rankings");if(lutPageItem)
{var sideBarItem={id:'act_sevrank',title:org.r3.message.gmenubar_act_sevrank,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_cms");if(lutPageItem)
{var sideBarItem={id:'act_cms',title:org.r3.message.gmenubar_act_cms,onClick:onClickCallBack,deletable:false,selected:false,icon:'edit'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_bbs");if(lutPageItem)
{var sideBarItem={id:'act_bbs',title:org.r3.message.gmenubar_act_bbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'comment-o'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_wbs");if(lutPageItem)
{var sideBarItem={id:'act_wbs',title:org.r3.message.gmenubar_act_wbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'list-ul'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_tow");if(lutPageItem)
{var sideBarItem={id:'act_tow',title:"Amministrazione TOW...",onClick:onClickCallBack,deletable:false,selected:false,icon:'tasks'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_resource");if(lutPageItem)
{var sideBarItem={id:'act_resource',title:"Risorse...",onClick:onClickCallBack,deletable:false,selected:false,icon:'user-times'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_siteconfig");if(lutPageItem)
{var sideBarItem={id:'act_config',title:org.r3.message.gmenubar_act_config,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var sect_childrensites={type:'section',id:'gmenubar_sect_childrensites',title:org.r3.message.gmenubar_act_childrensite,bottom_border:true,items:[],icon:'bars',grouped:true};gsidebarCfg.sections.push(sect_childrensites);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_users");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_users',title:org.r3.message.gmenubar_act_users,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_rest");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_resturls',title:org.r3.message.gmenubar_act_resturls,onClick:onClickCallBack,deletable:false,selected:false,icon:'wrench'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var resolvedUrl=org.r3.PageManager.getRESTUrl('LUT_Site_GSideBarChildren');var lutChildrenSite=org.r3.PageManager.lutManager.getLUT(resolvedUrl);if(lutChildrenSite&&lutChildrenSite.aaData.length)
{var siteItems=[];for(var i=0;i<lutChildrenSite.aaData.length;i++)
{siteItems.push({id:lutChildrenSite.aaData[i].site,title:lutChildrenSite.aaData[i].sitedescr,onClick:onClickSiteCallBack,deletable:false});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_childrensites',siteItems);}
if(firstSelectedSideBarItem)
onClickCallBack(firstSelectedSideBarItem,'gsidebar_init');else if(firstEnabledSideBarItem)
onClickCallBack(firstEnabledSideBarItem,'gsidebar_init');}));},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/console/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{if(!actionTriggered)
{if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{this.activateItem(e);}}
else
{switch(actionTriggered)
{case'delete':break;case'gsidebar_init':this.activateItem(e);break;}}},activateItem:function(e)
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'gmenubar_act_newsite':this.openNewSitePanel();break;case'act_queryregattas':this.openQueryRegattasPanel();break;case'act_contacts':this.openContactsPanel();break;case'act_sevapp':this.openSEVAppPanel();break;case'act_sevrank':this.openSEVRankPanel();break;case'act_cms':this.openCMSPanel();break;case'act_config':this.openConfigPanel();break;case'act_bbs':this.openBBSPanel();break;case'act_wbs':this.openWBSPanel();break;case'act_tow':this.openTOWPanel();break;case'act_resource':this.openResourcePanel();break;case'act_users':this.openUsersPanel();break;case'act_resturls':this.openRestUrlsPanel();break;default:break;}},openNewSitePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_newsite,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open();},closeNewSitePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openQueryRegattasPanel();},openQueryRegattasPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_querysites,"actionForm":this.regattasQueryActionForm});this.regattasQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_queryregattas');},openRegattaDetailPanel:function(regattaDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_sitedeatil,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open(regattaDataBean);},openSEVAppPanel:function()
{org.r3.PageManager.gotoPage('sev/applications.do');},openSEVRankPanel:function()
{org.r3.PageManager.gotoPage('sev/ranking.do');},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms/cards.do');},openConfigPanel:function()
{org.r3.PageManager.gotoPage('siteconfig.do');},openUsersPanel:function()
{org.r3.PageManager.gotoPage('users.do');},openBBSPanel:function()
{org.r3.PageManager.gotoPage('bbs.do');},openWBSPanel:function()
{org.r3.PageManager.gotoPage('wbs.do');},openTOWPanel:function()
{org.r3.PageManager.gotoPage('tow.do');},openResourcePanel:function()
{org.r3.PageManager.gotoPage('resources.do');},openRestUrlsPanel:function()
{org.r3.PageManager.gotoPage('system/resturls.do');}};$.r3Utils.namespace("org.r3.console.home.site");org.r3.console.home.site.SailApplicationEventLogViewQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.sailevent.appeventlogview.SailApplicationEventLogViewQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'SailApplicationEventLogViewQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:'Ultimi Aggiornamenti',iDisplayLength:25,dataTableSource:'GET_SEV_ConsoleApplicationEventLogView',layout:'fullWidth',sortable:true,dataTableColumns:"applicationid;sort,sailnumber;sort,yachtname,ownername,ev_general,ev_document,ev_crew,ev_commit,latest_ts",requiredLUTs:["GET_classifier_sys_recstatus","GET_classifier_r3ea_raceclass","GET_classifier_r3ea_boatgroup"],onSelected:$.r3Utils.hitch(this,this.adminApplication),onDblClick:null,onClearSelection:null,actionBarOnTop:true,buttons:[{id:'consolehome_action_refresheventlog',label:'Aggiorna',disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},adminApplication:function(aDTOAdapter)
{var targetUrl=org.r3.Constants.getStrutsActionContext()+'/org/r3/console/sev/application/adminApplication.do?objid='+aDTOAdapter.dataBean.applicationid;org.r3.PageManager.gotoPage(targetUrl);}});$.r3Utils.namespace("org.r3.console.home.speedsails");org.r3.console.home.speedsails.PageManager={init:function()
{this.openPanel();},openPanel:function()
{org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createGMenuBar();},createGMenuBar:function()
{var gsidebarCfg={};gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'act_contacts',title:"Contatti...",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'users'});sect1.items.push({id:'act_cms',title:"Contenuti CMS...",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'edit'});var sect_childrensites={type:'section',id:'gmenubar_sect_childrensites',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect_childrensites);if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'consoleext'))
{var sect_consoleext={type:'section',id:'gmenubar_sect_2',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect_consoleext);sect_consoleext.items.push({id:'act_users',title:"Gestione Utenti...",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'users'});sect_consoleext.items.push({id:'act_resturls',title:"Rest...",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'wrench'});}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var _self=this;$.ajax({"dataType":'json',"type":"GET","url":org.r3.PageManager.getRESTUrl('LUT_Site_GSideBarChildren'),"success":function(data,textStatus,jqXHR)
{if(data.aaData&&data.aaData.length)
{var siteItems=[];for(var i=0;i<data.aaData.length;i++)
{siteItems.push({id:data.aaData[i].site,title:data.aaData[i].sitedescr,onClick:$.r3Utils.hitch(_self,_self._onGMenuBarSiteClick),deletable:false});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_childrensites',siteItems);}},"error":function(xhr,error,thrown)
{if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. "+"This is caused by a JSON formatting error.");}}});},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/console/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newsite')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openNewSitePanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_querysites':this.openQuerySitesPanel();break;case'act_contacts':this.openContactsPanel();break;case'act_cms':this.openCMSPanel();break;case'act_users':this.openUsersPanel();break;case'act_resturls':this.openRestUrlsPanel();break;default:break;}}}},openNewSitePanel:function()
{},openQuerySitesPanel:function()
{},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms/cards.do');},openUsersPanel:function()
{org.r3.PageManager.gotoPage('users.do');},openRestUrlsPanel:function()
{org.r3.PageManager.gotoPage('system/resturls.do');}};$.r3Utils.namespace("org.r3.console.home.workshop");org.r3.console.home.workshop.PageManager={init:function()
{org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createConsoleGMenuBar($.r3Utils.hitch(this,this._onGMenuBarClick),$.r3Utils.hitch(this,this._onGMenuBarSiteClick));},createConsoleGMenuBar:function(onClickCallBack,onClickSiteCallBack)
{var gsidebarCfg={};gsidebarCfg.sections=[];var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_ConsolePages'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Site_GSideBarChildren'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var lutPageResolvedUrl=org.r3.PageManager.getRESTUrl('LUT_CMS_ConsolePages');var firstSelectedSideBarItem=null;var firstEnabledSideBarItem=null;var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);var sideBarItem={id:'gmenubar_act_newsite',title:org.r3.message.gmenubar_act_newsite,onClick:onClickCallBack,deletable:false,selected:false,icon:'plus'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var sideBarItem={id:'act_queryregattas',title:org.r3.message.gmenubar_act_queryregattas,onClick:onClickCallBack,deletable:false,selected:true,icon:'table'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_applications");if(lutPageItem)
{var sideBarItem={id:'act_sevapp',title:org.r3.message.gmenubar_act_sevapp,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_contacts");if(lutPageItem)
{var sideBarItem={id:'act_contacts',title:org.r3.message.gmenubar_act_contacts,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_rankings");if(lutPageItem)
{var sideBarItem={id:'act_sevrank',title:org.r3.message.gmenubar_act_sevrank,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_cms");if(lutPageItem)
{var sideBarItem={id:'act_cms',title:org.r3.message.gmenubar_act_cms,onClick:onClickCallBack,deletable:false,selected:false,icon:'edit'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_bbs");if(lutPageItem)
{var sideBarItem={id:'act_bbs',title:org.r3.message.gmenubar_act_bbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'comment-o'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_wbs");if(lutPageItem)
{var sideBarItem={id:'act_wbs',title:org.r3.message.gmenubar_act_wbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'list-ul'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_tow");if(lutPageItem)
{var sideBarItem={id:'act_tow',title:"Amministrazione TOW...",onClick:onClickCallBack,deletable:false,selected:false,icon:'tasks'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_resource");if(lutPageItem)
{var sideBarItem={id:'act_resource',title:"Risorse...",onClick:onClickCallBack,deletable:false,selected:false,icon:'user-times'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_siteconfig");if(lutPageItem)
{var sideBarItem={id:'act_config',title:org.r3.message.gmenubar_act_config,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var sect_childrensites={type:'section',id:'gmenubar_sect_childrensites',title:org.r3.message.gmenubar_act_childrensite,bottom_border:true,items:[],icon:'bars',grouped:true};gsidebarCfg.sections.push(sect_childrensites);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_users");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_users',title:org.r3.message.gmenubar_act_users,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_rest");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_resturls',title:org.r3.message.gmenubar_act_resturls,onClick:onClickCallBack,deletable:false,selected:false,icon:'wrench'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var resolvedUrl=org.r3.PageManager.getRESTUrl('LUT_Site_GSideBarChildren');var lutChildrenSite=org.r3.PageManager.lutManager.getLUT(resolvedUrl);if(lutChildrenSite&&lutChildrenSite.aaData.length)
{var siteItems=[];for(var i=0;i<lutChildrenSite.aaData.length;i++)
{siteItems.push({id:lutChildrenSite.aaData[i].site,title:lutChildrenSite.aaData[i].sitedescr,onClick:onClickSiteCallBack,deletable:false});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_childrensites',siteItems);}
if(firstSelectedSideBarItem)
onClickCallBack(firstSelectedSideBarItem,'gsidebar_init');else if(firstEnabledSideBarItem)
onClickCallBack(firstEnabledSideBarItem,'gsidebar_init');}));},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/console/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{if(!actionTriggered)
{if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{this.activateItem(e);}}
else
{switch(actionTriggered)
{case'delete':break;case'gsidebar_init':this.activateItem(e);break;}}},activateItem:function(e)
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'gmenubar_act_newsite':this.openNewSitePanel();break;case'act_queryregattas':this.openQueryRegattasPanel();break;case'act_contacts':this.openContactsPanel();break;case'act_sevapp':this.openSEVAppPanel();break;case'act_sevrank':this.openSEVRankPanel();break;case'act_cms':this.openCMSPanel();break;case'act_config':this.openConfigPanel();break;case'act_bbs':this.openBBSPanel();break;case'act_wbs':this.openWBSPanel();break;case'act_tow':this.openTOWPanel();break;case'act_resource':this.openResourcePanel();break;case'act_users':this.openUsersPanel();break;case'act_resturls':this.openRestUrlsPanel();break;default:break;}},openNewSitePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_newsite,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open();},closeNewSitePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openQueryRegattasPanel();},openQueryRegattasPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_querysites,"actionForm":this.regattasQueryActionForm});this.regattasQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_queryregattas');},openRegattaDetailPanel:function(regattaDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.home.mastersite.message.breadcrumb_sitedeatil,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open(regattaDataBean);},openSEVAppPanel:function()
{org.r3.PageManager.gotoPage('sev/applications.do');},openSEVRankPanel:function()
{org.r3.PageManager.gotoPage('sev/ranking.do');},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms/cards.do');},openConfigPanel:function()
{org.r3.PageManager.gotoPage('siteconfig.do');},openUsersPanel:function()
{org.r3.PageManager.gotoPage('users.do');},openBBSPanel:function()
{org.r3.PageManager.gotoPage('bbs.do');},openWBSPanel:function()
{org.r3.PageManager.gotoPage('wbs.do');},openTOWPanel:function()
{org.r3.PageManager.gotoPage('tow.do');},openResourcePanel:function()
{org.r3.PageManager.gotoPage('resources.do');},openRestUrlsPanel:function()
{org.r3.PageManager.gotoPage('system/resturls.do');}};$.r3Utils.namespace("org.r3.console.home.yachtclubsite");org.r3.console.home.yachtclubsite.PageManager={init:function()
{this.regattasQueryActionForm=new org.r3.console.regattas.RegattasQueryActionForm(this,"#regattasQueryActionForm");this.regattaDetailActionForm=new org.r3.console.regattas.RegattaDetailActionForm(this,"#regattaDetailActionForm");org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createConsoleGMenuBar($.r3Utils.hitch(this,this._onGMenuBarClick),$.r3Utils.hitch(this,this._onGMenuBarSiteClick));},createConsoleGMenuBar:function(onClickCallBack,onClickSiteCallBack)
{var gsidebarCfg={};gsidebarCfg.sections=[];var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_ConsolePages'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Site_GSideBarChildren'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var lutPageResolvedUrl=org.r3.PageManager.getRESTUrl('LUT_CMS_ConsolePages');var firstSelectedSideBarItem=null;var firstEnabledSideBarItem=null;var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);var sideBarItem={id:'gmenubar_act_newsite',title:org.r3.message.gmenubar_act_newsite,onClick:onClickCallBack,deletable:false,selected:false,icon:'plus'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var sideBarItem={id:'act_queryregattas',title:org.r3.message.gmenubar_act_queryregattas,onClick:onClickCallBack,deletable:false,selected:true,icon:'table'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_contacts");if(lutPageItem)
{var sideBarItem={id:'act_contacts',title:org.r3.message.gmenubar_act_contacts,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_cms");if(lutPageItem)
{var sideBarItem={id:'act_cms',title:org.r3.message.gmenubar_act_cms,onClick:onClickCallBack,deletable:false,selected:false,icon:'edit'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_bbs");if(lutPageItem)
{var sideBarItem={id:'act_bbs',title:org.r3.message.gmenubar_act_bbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'comment-o'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_wbs");if(lutPageItem)
{var sideBarItem={id:'act_wbs',title:org.r3.message.gmenubar_act_wbs,onClick:onClickCallBack,deletable:false,selected:false,icon:'list-ul'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_tow");if(lutPageItem)
{var sideBarItem={id:'act_tow',title:"Amministrazione TOW...",onClick:onClickCallBack,deletable:false,selected:false,icon:'tasks'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_resource");if(lutPageItem)
{var sideBarItem={id:'act_resource',title:"Risorse...",onClick:onClickCallBack,deletable:false,selected:false,icon:'user-times'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_siteconfig");if(lutPageItem)
{var sideBarItem={id:'act_config',title:org.r3.message.gmenubar_act_config,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
var sideBarItem={id:'act_tutorials',title:org.r3.message.gmenubar_act_tutorials,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);var sect_childrensites={type:'section',id:'gmenubar_sect_childrensites',title:org.r3.message.gmenubar_act_childrensite,bottom_border:true,items:[],icon:'bars',grouped:true};gsidebarCfg.sections.push(sect_childrensites);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_users");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_users',title:org.r3.message.gmenubar_act_users,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_manage_rest");if(lutPageItem)
{var p=new org.r3.db.cms.page.PageDTOAdapter(lutPageItem);if(p.isInRole())
{var sideBarItem={id:'act_resturls',title:org.r3.message.gmenubar_act_resturls,onClick:onClickCallBack,deletable:false,selected:false,icon:'wrench'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var resolvedUrl=org.r3.PageManager.getRESTUrl('LUT_Site_GSideBarChildren');var lutChildrenSite=org.r3.PageManager.lutManager.getLUT(resolvedUrl);if(lutChildrenSite&&lutChildrenSite.aaData.length)
{var siteItems=[];for(var i=0;i<lutChildrenSite.aaData.length;i++)
{siteItems.push({id:lutChildrenSite.aaData[i].site,title:lutChildrenSite.aaData[i].sitedescr,onClick:onClickSiteCallBack,deletable:false});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_childrensites',siteItems);}
if(firstSelectedSideBarItem)
onClickCallBack(firstSelectedSideBarItem,'gsidebar_init');else if(firstEnabledSideBarItem)
onClickCallBack(firstEnabledSideBarItem,'gsidebar_init');}));},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/console/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{if(!actionTriggered)
{if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{this.activateItem(e);}}
else
{switch(actionTriggered)
{case'delete':break;case'gsidebar_init':this.activateItem(e);break;}}},activateItem:function(e)
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'gmenubar_act_newsite':this.openNewSitePanel();break;case'act_queryregattas':this.openQueryRegattasPanel();break;case'act_contacts':this.openContactsPanel();break;case'act_cms':this.openCMSPanel();break;case'act_config':this.openConfigPanel();break;case'act_bbs':this.openBBSPanel();break;case'act_wbs':this.openWBSPanel();break;case'act_tow':this.openTOWPanel();break;case'act_resource':this.openResourcePanel();break;case'act_users':this.openUsersPanel();break;case'act_resturls':this.openRestUrlsPanel();break;case'act_tutorials':this.openVideoTutorialsPanel();default:break;}},openNewSitePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.message.breadcrumb_newsite,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open();},closeNewSitePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openQueryRegattasPanel();},openQueryRegattasPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.message.breadcrumb_querysites,"actionForm":this.regattasQueryActionForm});this.regattasQueryActionForm.open();},openRegattaDetailPanel:function(regattaDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.message.breadcrumb_sitedeatil,"actionForm":this.regattaDetailActionForm});this.regattaDetailActionForm.open(regattaDataBean);},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms/cards.do');},openConfigPanel:function()
{org.r3.PageManager.gotoPage('siteconfig.do');},openUsersPanel:function()
{org.r3.PageManager.gotoPage('users.do');},openBBSPanel:function()
{org.r3.PageManager.gotoPage('bbs.do');},openWBSPanel:function()
{org.r3.PageManager.gotoPage('wbs.do');},openTOWPanel:function()
{org.r3.PageManager.gotoPage('tow.do');},openResourcePanel:function()
{org.r3.PageManager.gotoPage('resources.do');},openRestUrlsPanel:function()
{org.r3.PageManager.gotoPage('system/resturls.do');},openVideoTutorialsPanel:function()
{org.r3.PageManager.gotoPage('system/tutorials.do');}};$.r3Utils.namespace("org.r3.console.login");org.r3.console.login.PageManager={init:function()
{this.loginActionForm=new org.r3.jsportlet.login.LoginActionForm(this,'#JSPortlet_LoginActionForm',{"onLoginRedirect":org.r3.Constants.getStrutsActionContext()+"/org/r3/console/home.do"});org.r3.PageManager.pushBreadCrumb({"title":"Log-In","actionForm":this.loginActionForm});this.loginActionForm.open();}};$.r3Utils.namespace("org.r3.console.regattas");org.r3.console.regattas.RegattaDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.regattas.RegattaDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(aDataBeanInfo)
{this.setDataBeanInfo(aDataBeanInfo);this.detailView.open(aDataBeanInfo);},updateItem:function(onSuccessResponse,onFailResponse,onRestDTOResponse)
{this._saveItem(true,onSuccessResponse,onFailResponse,onRestDTOResponse);},createItem:function(onSuccessResponse,onFailResponse,onRestDTOResponse)
{this._saveItem(false,onSuccessResponse,onFailResponse,onRestDTOResponse);},_saveItem:function(isUpdate,onSuccessResponse,onErrorResponse,onRestDTOResponse)
{var _self=this;var theForm=$('#regattadetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_Site');if(isUpdate)
{var regattaId=this.dataBeanInfo.dataBean.site;restUrl=org.r3.PageManager.getRESTUrl('PUT_Site',[regattaId]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData)&&onRestDTOResponse)
{var restDto=new org.r3.RestDTOAdapter(responseData);onRestDTOResponse(restDto);}
else
{if(onSuccessResponse)
onSuccessResponse(responseData);if(method=='put')
_self.listaRegate();else _self.pageManager.closeNewSitePanel();}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},deleteItem:function(onSuccessResponse,onErrorResponse)
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var method="DELETE";var restUrl=null;var regattaId=this.dataBeanInfo.dataBean.site;restUrl=org.r3.PageManager.getRESTUrl('DELETE_Site',[regattaId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);_self.pageManager.closeNewSitePanel();},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},listaRegate:function()
{org.r3.PageManager.back();}});$.r3Utils.namespace("org.r3.console.regattas");org.r3.console.regattas.RegattaDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aDataBeanInfo)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/regattas/RegattaDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(aDataBeanInfo)
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SiteDetail',[aDataBeanInfo.dataBean.site]),dataType:"json"});networkRequestsQueue.push({id:"content_sail_event",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SailEventDetail',[aDataBeanInfo.dataBean.site]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var siteDataBean=responseData['content'];if(siteDataBean)
{siteDataBean=new org.r3.db.system.site.SiteDTOAdapter(siteDataBean);}
var sailEventDataBean=responseData['content_sail_event'];if(sailEventDataBean)
{sailEventDataBean=new org.r3.db.sailevent.event.SailEventDTOAdapter(sailEventDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#regattadetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.regattas.regattadetailactionform_form_validationRules,messages:org.r3.console.regattas.regattadetailactionform_form_validationMessages});$('#regattadetailactionform_form_refsitetype_site_none, #regattadetailactionform_form_refsitetype_site_internal, #regattadetailactionform_form_refsitetype_site_external').click(function(e)
{var currentTarget=$(e.currentTarget);var currentTargetId=currentTarget.attr('id');if(currentTarget.prop('checked'))
{switch(currentTargetId)
{case'regattadetailactionform_form_refsitetype_site_none':_self._initializeRefSiteInfo('site_none',null,null);break;case'regattadetailactionform_form_refsitetype_site_internal':_self._initializeRefSiteInfo('site_internal',null,null);break;case'regattadetailactionform_form_refsitetype_site_external':_self._initializeRefSiteInfo('site_external',null,null);break;}}});$('#regattadetailactionform_form_admrefsitetype_site_none, #regattadetailactionform_form_admrefsitetype_site_internal, #regattadetailactionform_form_admrefsitetype_site_external').click(function(e)
{var currentTarget=$(e.currentTarget);var currentTargetId=currentTarget.attr('id');if(currentTarget.prop('checked'))
{switch(currentTargetId)
{case'regattadetailactionform_form_admrefsitetype_site_none':_self._initializeRefSiteConsoleInfo('site_none',null,null);break;case'regattadetailactionform_form_admrefsitetype_site_internal':_self._initializeRefSiteConsoleInfo('site_internal',null,null);break;case'regattadetailactionform_form_admrefsitetype_site_external':_self._initializeRefSiteConsoleInfo('site_external',null,null);break;}}});$('#regattadetailactionform_fieldset_message').formmessage({});$('#regattadetailactionform_form_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.listaRegate));this._initializeFormFields(siteDataBean,sailEventDataBean);if(siteDataBean==null)
{$('#regattadetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));$('#regattadetailactionform_form_action_cancel').hide();$('#regattadetailactionform_action_delete').hide();$('.hide_on_create').hide();}
else
{$('#regattadetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));$('#regattadetailactionform_form_action_cancel').show();$('#regattadetailactionform_action_delete').unbind().click($.r3Utils.hitch(this,this._onDeleteItem));$('#regattadetailactionform_action_delete').show();}
this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{this.actionFormManager.createItem(function(responseData){},function(jqXHR,timeout,message){$('#regattadetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},function(restDto){restDto.showMessage('regattadetailactionform_fieldset_message');});},_onUpdateItem:function()
{this.actionFormManager.updateItem(function(responseData){},function(jqXHR,timeout,message){$('#regattadetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},function(restDto){restDto.showMessage('regattadetailactionform_fieldset_message');});},_onDeleteItem:function()
{this.actionFormManager.deleteItem(function(responseData){},function(jqXHR,timeout,message){$('#regattadetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function(aSiteDTOAdapter,aSailEventDTOAdapter)
{if(aSiteDTOAdapter)
{var urlHome="/r3ng/"+aSiteDTOAdapter.dataBean.site+"/"+org.r3.Constants.language+"/org/r3/home.do";$('#regattadetailactionform_form_urlhome').html(urlHome);$('#regattadetailactionform_form_urlhome').unbind().click(function(e){var w=window.open(urlHome,"Site_Window_"+aSiteDTOAdapter.dataBean.site);w.focus();});var urlConsoleHome="/r3ng/"+aSiteDTOAdapter.dataBean.site+"/"+org.r3.Constants.language+"/org/r3/console/home.do";$('#regattadetailactionform_form_urlhomeconsole').html(urlConsoleHome);$('#regattadetailactionform_form_urlhomeconsole').unbind().click(function(e){var w=window.open(urlConsoleHome,"Site_Window_Console_"+aSiteDTOAdapter.dataBean.site);w.focus();});if(aSiteDTOAdapter.isDomainController())
{$('#regattadetailactionform_sitedomain_primary').prop('checked',true);}
else $('#regattadetailactionform_sitedomain_primary').prop('checked',false);$('#regattadetailactionform_sitedomain_primary').prop('disabled',true);$('#regattadetailactionform_sitetheme').val(aSiteDTOAdapter.dataBean.sitetheme);$('#regattadetailactionform_sitetype').val(aSiteDTOAdapter.dataBean.sitetype);$('#regattadetailactionform_sitetype').prop('disabled',true);$('#regattadetailactionform_site').val(aSiteDTOAdapter.dataBean.site);$('#regattadetailactionform_site').prop('disabled',true);$('#regattadetailactionform_sitedescr').val(aSiteDTOAdapter.dataBean.sitedescr);if(aSiteDTOAdapter.dataBean.siteresourcepath&&aSiteDTOAdapter.dataBean.siteresourcepath!='default')
{var selectOptions=$('#regattadetailactionform_siteresourcepath').prop('options');selectOptions[selectOptions.length]=new Option(aSiteDTOAdapter.dataBean.siteresourcepath,aSiteDTOAdapter.dataBean.siteresourcepath,true,true);}
$('#regattadetailactionform_form_refsitevisible_'+aSiteDTOAdapter.dataBean.refsitevisible).prop('checked',true);$('#regattadetailactionform_form_admrefsitevisible_'+aSiteDTOAdapter.dataBean.admrefsitevisible).prop('checked',true);$('#regattadetailactionform_form_refsitetype_'+aSiteDTOAdapter.dataBean.refsitetype).prop('checked',true);this._initializeRefSiteInfo(aSiteDTOAdapter.dataBean.refsitetype,aSiteDTOAdapter.dataBean.refsite,aSiteDTOAdapter.dataBean.refsitedescr);$('#regattadetailactionform_form_admrefsitetype_'+aSiteDTOAdapter.dataBean.admrefsitetype).prop('checked',true);this._initializeRefSiteConsoleInfo(aSiteDTOAdapter.dataBean.admrefsitetype,aSiteDTOAdapter.dataBean.admrefsite,aSiteDTOAdapter.dataBean.admrefsitedescr);var siteOptions=aSiteDTOAdapter.getOptions();if(siteOptions&&siteOptions.length>0)
{for(var i=0;i<siteOptions.length;i++)
{$('#regattadetailactionform_options_'+siteOptions[i]).prop('checked',true);}}
else $("#regattadetailactionform_form input[name='options']").prop('checked',false);}
else
{$('#regattadetailactionform_sitedomain_primary').prop('checked',false);$('#regattadetailactionform_form_refsitevisible_bfalse').prop('checked',true);$('#regattadetailactionform_form_admrefsitevisible_bfalse').prop('checked',true);$('#regattadetailactionform_form_refsitetype_site_none').prop('checked',true);this._initializeRefSiteInfo('site_none',null,null);$('#regattadetailactionform_form_admrefsitetype_site_none').prop('checked',true);this._initializeRefSiteConsoleInfo('site_none',null,null);$("#regattadetailactionform_form input[name='options']").prop('checked',false);}
var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_classifier_childrensite",[org.r3.SiteConstants.targetSiteType]);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#regattadetailactionform_sitetype'),"selectedValue":aSiteDTOAdapter&&aSiteDTOAdapter.dataBean.sitetype,"useBusinessKey":true});var summary=(aSiteDTOAdapter)?aSiteDTOAdapter.dataBean.sitesummary:null;if(aSailEventDTOAdapter)
{summary=aSailEventDTOAdapter.dataBean.eventdescr;}
$('#regattadetailactionform_eventdescr').val(summary);},_initializeRefSiteInfo:function(aRefSiteType,aRefSite,aRefSiteDescr)
{switch(aRefSiteType)
{case'site_none':$('#regattadetailactionform_form_refsite').val('');$('#regattadetailactionform_form_refsite').prop('disabled',true);$('#regattadetailactionform_form_refsitedescr').val('');$('#regattadetailactionform_form_refsitedescr').prop('disabled',true);break;case'site_external':$('#regattadetailactionform_form_refsite').val(aRefSite);$('#regattadetailactionform_form_refsite').prop('disabled',false);$('#regattadetailactionform_form_refsitedescr').val(aRefSiteDescr);$('#regattadetailactionform_form_refsitedescr').prop('disabled',false);break;case'site_internal':$('#regattadetailactionform_form_refsite').val(aRefSite);$('#regattadetailactionform_form_refsite').prop('disabled',true);$('#regattadetailactionform_form_refsitedescr').val(aRefSiteDescr);$('#regattadetailactionform_form_refsitedescr').prop('disabled',false);break;}},_initializeRefSiteConsoleInfo:function(aRefSiteType,aRefSite,aRefSiteDescr)
{switch(aRefSiteType)
{case'site_none':$('#regattadetailactionform_form_admrefsite').val('');$('#regattadetailactionform_form_admrefsite').prop('disabled',true);$('#regattadetailactionform_form_admrefsitedescr').val('');$('#regattadetailactionform_form_admrefsitedescr').prop('disabled',true);break;case'site_external':$('#regattadetailactionform_form_admrefsite').val(aRefSite);$('#regattadetailactionform_form_admrefsite').prop('disabled',false);$('#regattadetailactionform_form_admrefsitedescr').val(aRefSiteDescr);$('#regattadetailactionform_form_admrefsitedescr').prop('disabled',false);break;case'site_internal':$('#regattadetailactionform_form_admrefsite').val(aRefSite);$('#regattadetailactionform_form_admrefsite').prop('disabled',true);$('#regattadetailactionform_form_admrefsitedescr').val(aRefSiteDescr);$('#regattadetailactionform_form_admrefsitedescr').prop('disabled',false);break;}}});$.r3Utils.namespace("org.r3.console.regattas",window,function(aNamespace)
{aNamespace.regattadetailactionform_form_validationRules={sitetype:{required:true},site:{required:true,maxlength:15,identifier:true,texttransform:'lowercase'},sitedescr:{required:true,maxlength:40},siteresourcepath:{required:true},sitetheme:{required:true},refsitetype:{required:true},refsite:{required:true,maxlength:128},refsitedescr:{required:true,maxlength:128},admrefsitetype:{required:true},admrefsite:{required:true,maxlength:128},admrefsitedescr:{required:true,maxlength:128},eventdescr:{required:true,maxlength:128}};aNamespace.regattadetailactionform_form_validationMessages={sitetype:{required:org.r3.message.field_required},site:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},sitedescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},siteresourcepath:{required:org.r3.message.field_required},sitetheme:{required:org.r3.message.field_required},refsitetype:{required:org.r3.message.field_required},refsite:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},refsitedescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},admrefsitetype:{required:org.r3.message.field_required},admrefsite:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},admrefsitedescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},eventdescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.regattas");org.r3.console.regattas.RegattasQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.system.site.SiteQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'SiteQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.system.site.message.queryactionformview_legend,iDisplayLength:25,dataTableSource:'GET_Sites',layout:'fullWidth',sortable:true,dataTableColumns:"site;sort,sitedescr,sitesummary",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.regattaDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_regatta_action_refresh',label:org.r3.message.action_refresh,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},regattaDetail:function(aDTOAdapter)
{this.listView.hide();this.pageManager.openRegattaDetailPanel(aDTOAdapter);}});$.r3Utils.namespace("org.r3.console.resources");org.r3.console.resources.PageManager={init:function()
{this.teamQueryActionForm=new org.r3.jsportlet.project.team.TeamQueryActionForm(this,"#teamQueryActionForm");this.teamDetailActionForm=new org.r3.jsportlet.project.team.TeamDetailActionForm(this,"#teamDetailActionForm","#teamDetailActionFormView_tab_generale");this.resourceQueryActionForm=new org.r3.jsportlet.project.resource.ResourceQueryActionForm(this,"#resourceQueryActionForm");this.resourceDetailActionForm=new org.r3.jsportlet.project.resource.ResourceDetailActionForm(this,"#resourceDetailActionForm","#resourceDetailActionFormView_tab_generale");this.userPickerActionForm=new org.r3.jsportlet.user.UserPickerActionForm(this,'#userPickerActionForm','#userPickerAdvancedSearchActionForm');this.userDetailActionForm=new org.r3.jsportlet.user.UserDetailActionForm(this,'#userDetailActionForm');this.teamMembersActionForm=new org.r3.jsportlet.teammemberprofile.TeamMemberProfileActionForm(this,'#teamMemberProfileDetailActionForm','#teamMemberProfileQueryActionForm');this.classifierActionForm=new org.r3.jsportlet.classifier.ClassifierActionForm(this,'#classifierActionForm','#classifierItemActionForm','#classifierItemDetailActionForm','#classifierItemListActionForm');this.teamtimesheetQueryActionForm=new org.r3.jsportlet.project.teamtimesheet.TeamTimesheetActionForm(this,"#teamtmesheetQueryActionForm");this.teamtimesheetReportActionForm=new org.r3.jsportlet.project.teamtimesheetreport.TeamTimesheetReportActionForm(this,"#teamtmesheetReportActionForm","#teamTimesheetReportDatatableActionForm");this.teamtimesheetPrintableReportActionForm=new org.r3.jsportlet.project.teamtimesheetreport.TeamTimesheetPrintableReportActionForm(this,"#canvas_report_content");this.createGSideBar();org.r3.PageManager.pushHomeConsoleBreadCrumb();this.openResourceQueryActionFormPanel();},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.csshoverenabled=false;gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'act_queryresources',title:org.r3.console.resources.message.gmenubar_act_querycontacts_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'users'});sect1.items.push({id:'act_queryteams',title:org.r3.console.resources.message.gmenubar_act_queryteams_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'users'});sect1.items.push({id:'act_teamtimesheet',title:org.r3.console.resources.message.gmenubar_act_teamtimesheet_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'users'});sect1.items.push({id:'act_teamtimesheetreport',title:org.r3.console.resources.message.gmenubar_act_teamtimesheetreport_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'users'});sect1.items.push({id:'act_query_teammembers',title:org.r3.console.resources.message.act_query_teammembers,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'users'});sect1.items.push({id:'skillprofile',title:"Profili Professionali",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'circle-o'});sect1.items.push({id:'skillambit',title:"Figure Professionali",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'circle-o'});$('#gsidebar-navanchor').gsidebar(gsidebarCfg);},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newresource')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_queryresources':this.openResourceQueryActionFormPanel();break;case'act_queryteams':this.openTeamQueryActionFormPanel();break;case'act_filecontacts':this.openUploadFilesPanel();break;case'act_importcontacts':this.openFileImportQueryActionFormPanel();break;case'act_exportcontacts':this.openExportContactsPanel();break;case'act_importchildsitecontacts':this.openImportContactsFromChildSitePanel();break;case'act_query_groups':this.openActorGroupQueryPanel();break;case'act_newgroup':this.openNewActorGroupPanel();break;case'act_newsms':this.openNewSMSPanel();break;case'act_querysms':this.openSMSQueryActionFormPanel();break;case'act_newoutmail':this.openNewBulkMailPanel();break;case'skillprofile':this.openClassifierActionForm(e.id,'skillprofile');break;case'skillambit':this.openClassifierActionForm(e.id,'skillambit');break;case'act_query_teammembers':this.openTeamMemberQueryActionFormPanel();break;case'act_teamtimesheet':this.openTeamTimesheetQueryActionFormPanel();break;case'act_teamtimesheetreport':this.openTeamTimesheetReportActionFormPanel();break;default:this.openActorGroupDetailPanel(e.id);break;}}}},openResourceQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Elenco Risorse","actionForm":this.resourceQueryActionForm});this.resourceQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_queryresources');},openResourceDetailPanel:function(aResourceSiteViewDTOAdapter,anOpenOptionsHash)
{var openOptions=$.extend({"traverseRelationship":true,"actions":'all'},anOpenOptionsHash);org.r3.PageManager.pushBreadCrumb({"title":"Det. Risorsa","actionForm":this.resourceDetailActionForm});this.resourceDetailActionForm.open(aResourceSiteViewDTOAdapter,openOptions);},openNewResourcePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuova Risorsa","actionForm":this.resourceDetailActionForm});this.resourceDetailActionForm.open();},closeNewResourcePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openResourceQueryActionFormPanel();},openTeamQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Elenco Team","actionForm":this.teamQueryActionForm});this.teamQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_queryteams');},openNewTeamPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuovo Team","actionForm":this.teamDetailActionForm});this.teamDetailActionForm.open();},closeNewTeamPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openTeamQueryActionFormPanel();},openTeamDetailPanel:function(aTeamDTOAdapter,anOpenOptionsHash)
{var openOptions=$.extend({"traverseRelationship":true,"actions":'all'},anOpenOptionsHash);org.r3.PageManager.pushBreadCrumb({"title":"Det. Team","actionForm":this.teamDetailActionForm});this.teamDetailActionForm.open(aTeamDTOAdapter,openOptions);},openClassifierActionForm:function(manubarid,clsId)
{org.r3.PageManager.pushBreadCrumb({"title":"Classificatori","actionForm":this.classifierActionForm});this.classifierActionForm.open(clsId);$('#gsidebar-navanchor').gsidebar('select',manubarid);},openTeamTimesheetQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Consuntivazione","actionForm":this.teamtimesheetQueryActionForm});this.teamtimesheetQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_teamtimesheet');},openTeamTimesheetReportActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Report Consuntivazione","actionForm":this.teamtimesheetReportActionForm});this.teamtimesheetReportActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_teamtimesheetreport');},openTeamTimesheetReportPrintableActionFormPanel:function(aReportType,queryParameters)
{org.r3.PageManager.openFullScreenLayout(this.teamtimesheetPrintableReportActionForm);this.teamtimesheetPrintableReportActionForm.open(aReportType,queryParameters);},openLogInUserPicker:function(srcPickerWidget)
{org.r3.PageManager.pushBreadCrumb({"title":"Selezione Log-In","actionForm":this.userPickerActionForm});this.userPickerActionForm.open({pickerWidget:srcPickerWidget,queryUrl:"GET_Users_WithoutLoginContact"});},openUserDetailPanel:function(userDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":"Det. Utenza","actionForm":this.userDetailActionForm});var dataBeanInfo={"userDataBean":userDataBean};this.userDetailActionForm.open(dataBeanInfo);},openTeamMemberQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.resources.message.list_of_teammembers_breadcrumb,"actionForm":this.teamMembersActionForm});this.teamMembersActionForm.open(org.r3.Constants.site);$('#gsidebar-navanchor').gsidebar('select','act_query_teammembers');}};$.r3Utils.namespace("org.r3.console.sev.application");org.r3.console.sev.application.AdminApplicationActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anActionFormContainerId,adminActionFormViewId,aSidePortletContainerId)
{this.setPageManager(aPageManager);this.actionFormContainer=$(anActionFormContainerId);this.randomPhotoSideBarActionForm=new org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionForm(this,aSidePortletContainerId);this.adminActionFormView=new org.r3.console.sev.application.AdminApplicationActionFormView(adminActionFormViewId,this);this.applicationDTOAdapter=null;},close:function()
{this.randomPhotoSideBarActionForm.close();this.adminActionFormView.close();this.hide();},hide:function()
{this.actionFormContainer.hide();},show:function()
{this.actionFormContainer.show();},refresh:function()
{this.adminActionFormView.refresh();},open:function(anApplicationId)
{this.dataBeanInfo={"applicationid":anApplicationId};this.randomPhotoSideBarActionForm.open();this.adminActionFormView.open(anApplicationId);this.actionFormContainer.show();},viewApplication:function()
{this.pageManager.viewApplication(this.dataBeanInfo.applicationid);},editApplication:function()
{this.hide();this.pageManager.openApplicationPortlet(this.applicationDTOAdapter);},deleteApplication:function(aMethod,dictionaryUrl,onSuccess,onError)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var method=aMethod;var restUrl=org.r3.PageManager.getRESTUrl(dictionaryUrl,[this.dataBeanInfo.applicationid]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});},doProcessApplicationInput:function(aMethod,dictionaryUrl,theForm,onSuccess,onError)
{var _self=this;if(theForm.valid())
{org.r3.PageManager.wait("org.r3.message.waiting");var method=aMethod;var restUrl=org.r3.PageManager.getRESTUrl(dictionaryUrl,[this.dataBeanInfo.applicationid]);theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});}}});$.r3Utils.namespace("org.r3.console.sev.application");org.r3.console.sev.application.AdminApplicationActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.tabAdminInfo=null;this.tabTechInfo=null;this.tabCrewInfo=null;},close:function()
{$('#infoLine_page').infoLine('destroy');this.hide();},refresh:function()
{console.info("Option to refresh!");},open:function(anApplicationId)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/sev/application/AdminApplicationActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"application_content","type":"get","url":org.r3.PageManager.getRESTUrl('GET_SEV_Application_Detail',[anApplicationId]),"dataType":"json"});networkRequestsQueue.push({id:"view_tabadmininfo",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/sev/application/AdminApplicationActionFormView_TabAdminInfo.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_tabtechinfo",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/sev/application/AdminApplicationActionFormView_TabTechInfo.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"pkg_fiv_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_FIV_SiteProperties'),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);var applicationDTOAdapter=responseData['application_content'];if(applicationDTOAdapter)
{applicationDTOAdapter=new org.r3.db.sailevent.application.SailApplicationDTOAdapter(applicationDTOAdapter);this.actionFormManager.applicationDTOAdapter=applicationDTOAdapter;}
else this.actionFormManager.applicationDTOAdapter=null;$('#adminApplicationActionForm_tab_admininfo').html(responseData['view_tabadmininfo']);this.tabAdminInfo=new org.r3.console.sev.application.AdminApplicationActionFormView_TabAdminInfo('UNUSED',this.actionFormManager,applicationDTOAdapter);$('#adminApplicationActionForm_tab_techinfo').html(responseData['view_tabtechinfo']);this.tabTechInfo=new org.r3.console.sev.application.AdminApplicationActionFormView_TabTechInfo('UNUSED',this.actionFormManager,applicationDTOAdapter);this.tabCrewInfo=new org.r3.console.sev.application.AdminApplicationActionFormView_TabCrewInfo('UNUSED',this.actionFormManager,applicationDTOAdapter,responseData['pkg_fiv_properties']);$('#infoLine_page').infoLine({groupId:"sailapplication",items:[{id:"infoline_applicationid",label:"Id.",value:applicationDTOAdapter.dataBean.applicationid},{id:"infoline_userid",label:"User Id.",value:applicationDTOAdapter.dataBean.userid},{id:"infoline_nickname",label:"Nickname.",value:applicationDTOAdapter.dataBean.nickname||'n.d.'},{id:"infoline_createtimestamp",label:"Creata il",value:applicationDTOAdapter.getCreatetimestamp()||'n.d.'},{id:"infoline_committimestamp",label:"Chiusa il",value:applicationDTOAdapter.getCommittimestamp()||'n.d.'},{id:"infoline_sailnumber",label:"No.Velico",value:applicationDTOAdapter.dataBean.sailnumber},{id:"infoline_yachtname",label:"Barca",value:applicationDTOAdapter.dataBean.yachtname},{id:"infoline_owner",label:"Armatore",value:applicationDTOAdapter.getOwnerlastname()},{id:"infoline_owneremail",label:"Mail.",value:applicationDTOAdapter.getOwneremail()},{id:"infoline_ownercell",label:"Tel.",value:applicationDTOAdapter.getOwnercellphone()}]});this.show();}),function(d)
{console.error("controller did not load");});},});$.r3Utils.namespace("org.r3.console.sev.application");org.r3.console.sev.application.AdminApplicationActionFormView_TabAdminInfo=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,applicationDTOAdapter)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$("#adminapplicationactionform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.sev.application.adminapplicationform_form_validationRules,messages:org.r3.console.sev.application.adminapplicationform_form_validationMessages});this._initializeFormFields(applicationDTOAdapter);$('#adminapplicationactionform_fieldset_message').formmessage({});$("#adminapp_cloneform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.sev.application.adminapp_cloneform_validationRules,messages:org.r3.console.sev.application.adminapp_cloneform_validationMessages});$('#adminapp_cloneform_fieldset_message').formmessage({});$('#adminapplicationactionform_action_clone').unbind().click($.r3Utils.hitch(this,this.onCloneApplicationClick));$('#adminapp_cloneform_action_cancelsubmit').unbind().click($.r3Utils.hitch(this,this.onCloneApplicationFormCancelActionClick));$('#adminapp_cloneform_action_submit').unbind().click($.r3Utils.hitch(this,this.onCloneApplicationFormSubmitActionClick));$('#adminapplicationactionform_action_view').unbind().click($.r3Utils.hitch(this,this.onViewApplicationClick));$('#adminapplicationactionform_action_edit').unbind().click($.r3Utils.hitch(this,this.onEditApplicationClick));$('#adminapplicationactionform_action_delete').unbind().click($.r3Utils.hitch(this,this.onDeleteApplicationClick));$('#adminapplicationactionform_action_saveadminchecks').unbind().click($.r3Utils.hitch(this,this.onSaveAdminChecksClick));},_initializeFormFields:function(anApplicationDTOAdapter)
{var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_admincks');org.r3.PageManager.lutManager.populateCheckBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#adminapplicationactionform_adminchecks_cnt'),"groupId":"adminapplicationactionform_adminchecks","groupName":"adminchecks","value":anApplicationDTOAdapter&&anApplicationDTOAdapter.dataBean.adminchecks,"labelSize":220});$('#adminapplicationactionform_completionstatus').val(anApplicationDTOAdapter&&anApplicationDTOAdapter.dataBean.completionstatus);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_verificat'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#adminapplicationactionform_verificationstatus'),"selectedValue":anApplicationDTOAdapter&&anApplicationDTOAdapter.dataBean.verificationstatus});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_SiblingSailEvent',['cvfonline']),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#adminapp_cloneform_cloneeventid'),"selectedValue":null});if(anApplicationDTOAdapter)
$('#adminapplicationactionform_annotation').val(anApplicationDTOAdapter.dataBean.annotation);},onViewApplicationClick:function()
{this.actionFormManager.viewApplication();},onEditApplicationClick:function()
{this.actionFormManager.editApplication();},onCloneApplicationClick:function()
{$('#adminapp_cloneform_actionform').show();$('#adminapplicationactionform_action_clone').hide();},onCloneApplicationFormSubmitActionClick:function(event)
{var _self=this;var urlRequested='POST_SEV_ConsoleApplication_CloneApplication';this.actionFormManager.doProcessApplicationInput('post',urlRequested,$("#adminapp_cloneform_form"),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('adminapp_cloneform_fieldset_message');}
else
{$('#adminapp_cloneform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#adminapp_cloneform_fieldset_message').formmessage('setText',{text:message,category:'error'});});event.preventDefault();},onCloneApplicationFormCancelActionClick:function()
{$('#adminapp_cloneform_actionform').hide();$('#adminapplicationactionform_action_clone').show();},onDeleteApplicationClick:function()
{if(!org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
return;this.actionFormManager.deleteApplication('delete','DELETE_SEV_Application',function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('adminapplicationactionform_fieldset_message');}
else
{$('#adminapplicationactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#adminapplicationactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});event.preventDefault();},onSaveAdminChecksClick:function(event)
{this.actionFormManager.doProcessApplicationInput('put','PUT_SEV_Application_AdminChecksInfo',$('#adminapplicationactionform_form'),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('adminapplicationactionform_fieldset_message');}
else
{$('#adminapplicationactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#adminapplicationactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});event.preventDefault();}});$.r3Utils.namespace("org.r3.console.sev.application",window,function(aNamespace){aNamespace.adminapp_cloneform_validationRules={cloneeventid:{required:true}};aNamespace.adminapp_cloneform_validationMessages={cloneeventid:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.sev.application",window,function(aNamespace)
{aNamespace.adminapplicationform_form_validationRules={completionstatus:{required:true},verificationstatus:{required:true},annotation:{required:false,maxlength:80},adminchecks:{required:false}};aNamespace.adminapplicationform_form_validationMessages={completionstatus:{required:org.r3.message.field_required},verificationstatus:{required:org.r3.message.field_required},annotation:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},adminchecks:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.sev.application");org.r3.console.sev.application.AdminApplicationActionFormView_TabCrewInfo=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,applicationDTOAdapter,pkg_fiv_properties)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.crewReportView=new org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewQueryActionFormView('#sailApplicationCrewMemberViewQueryActionFormView',this.actionFormManager,{dataTableId:'SailApplicationCrewMemberViewQueryActionFormView',showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/console/sev/application/AdminApplicationActionFormView_TabCrewInfo.html.jsp",layout:'fullWidth',gradeLevel:'grade_level1',legend:'Situazione Equipaggio',dataTableSource:org.r3.PageManager.getRESTUrl('GET_SEV_ConsoleApplication_CrewReport',[applicationDTOAdapter.dataBean.applicationid]),dataTableColumns:"cardnumberstatuscode,checkcardnumber_ts,cardnumber,memberinfo,renewaldate,medexamexpirationdate,rectimestamp,memberstatuscode,checkcardnumber",requiredLUTs:["GET_classifier_sys_recstatus","GET_classifier_r3ea_crewstatus"],onSelected:null,onDblClick:null,onInitializationComplete:$.r3Utils.hitch(this,function()
{if(pkg_fiv_properties)
{pkg_fiv_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_fiv_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});var property=pkg_fiv_properties.getPropertyByPropertyscopePropertykey("fiv","fivclubid");if(property)
{$('#adminapp_submitcrewcheckform_yachtclubcode').val(property.dataBean.propertyvalue);}
var property=pkg_fiv_properties.getPropertyByPropertyscopePropertykey("fiv","fivpasswd");if(property)
{$('#adminapp_submitcrewcheckform_yachtclubpwd').val(property.dataBean.propertyvalue);$('#adminapp_submitcrewcheckform_confirm_yachtclubpwd').val(property.dataBean.propertyvalue);}}
$("#adminapp_submitcrewcheckform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.sev.application.adminapp_submitcrewcheckform_form_validationRules,messages:org.r3.console.sev.application.adminapp_submitcrewcheckform_form_validationMessages});$('#adminapp_submitcrewcheckform_fieldset_message').formmessage({});$('#adminapp_submitcrewcheckform_action_submit').unbind().click($.r3Utils.hitch(this,this.onSubmitClick));$('#adminapp_submitcrewcheckform_action_cancelsubmit').unbind().click($.r3Utils.hitch(this,this.onCancelSubmitClick));}),actionBarOnTop:true,buttons:[{id:'crewReportView_action_refresheventlog',label:'Aggiorna',disabled:false,onClick:$.r3Utils.hitch(this,function(){this.crewReportView.refresh();})},{id:'crewReportView_action_newcheck',label:'Richiedi verifica',disabled:false,onClick:$.r3Utils.hitch(this,function(){$('#adminapp_submitcrewcheckform_actionform').show();$('#crewReportView_action_newcheck').hide();})}]});this.crewReportView.open();},onSubmitClick:function(event)
{var _self=this;var urlRequested='POST_SEV_ConsoleApplication_CrewCheck';if($('#adminapp_submitcrewcheckform_entirefleet_btrue').prop('checked'))
urlRequested='POST_SEV_ConsoleFleet_CrewCheck';this.actionFormManager.doProcessApplicationInput('post',urlRequested,$("#adminapp_submitcrewcheckform_form"),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('adminapp_submitcrewcheckform_fieldset_message');_self.crewReportView.refresh();}
else
{$('#adminapp_submitcrewcheckform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#adminapp_submitcrewcheckform_fieldset_message').formmessage('setText',{text:message,category:'error'});});event.preventDefault();},onCancelSubmitClick:function()
{$('#adminapp_submitcrewcheckform_actionform').hide();$('#crewReportView_action_newcheck').show();}});$.r3Utils.namespace("org.r3.console.sev.application",window,function(aNamespace)
{aNamespace.adminapp_submitcrewcheckform_form_validationRules={yachtclubcode:{required:true,maxlength:15},yachtclubpwd:{required:true,maxlength:15},confirm_yachtclubpwd:{required:true,maxlength:15,equalTo:'#adminapp_submitcrewcheckform_yachtclubpwd'}};aNamespace.adminapp_submitcrewcheckform_form_validationMessages={yachtclubcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtclubpwd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},confirm_yachtclubpwd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,equalTo:'La parola chiave inserita non corrisponde alla conferma!'}};});$.r3Utils.namespace("org.r3.console.sev.application");org.r3.console.sev.application.AdminApplicationActionFormView_TabTechInfo=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,applicationDTOAdapter)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$("#adminraceinfoapplicationactionform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.sev.application.adminraceinfoapplicationactionform_form_validationRules,messages:org.r3.console.sev.application.adminraceinfoapplicationactionform_form_validationMessages});this._initializeFormFields(applicationDTOAdapter);$('#adminraceinfoapplicationactionform_fieldset_message').formmessage({});$('#adminapplicationactionform_action_saveadminraceinfo').unbind().click($.r3Utils.hitch(this,this.onSaveAdminRaceInfoClick));},_initializeFormFields:function(anApplicationDTOAdapter)
{$('#adminapplicationactionform_yachtbsf').val(anApplicationDTOAdapter&&anApplicationDTOAdapter.dataBean.yachtbsf);$('#adminapplicationactionform_yachtgph').val(anApplicationDTOAdapter&&anApplicationDTOAdapter.dataBean.yachtgph);$('#adminapplicationactionform_adminracegrooup_cascade select').cascadingSelect({lutManager:org.r3.PageManager.lutManager,ajaxUrlMode:'restful',withNullOption:true,widgetConfig:[{'widgetId':'adminapplicationactionform_adminracegroup','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_boatgroup'),'value':anApplicationDTOAdapter&&(anApplicationDTOAdapter.dataBean.adminracegroup||anApplicationDTOAdapter.dataBean.racegroup)},{'widgetId':'adminapplicationactionform_adminraceclass','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_racegroup_raceclass'),'value':anApplicationDTOAdapter&&(anApplicationDTOAdapter.dataBean.adminraceclass||anApplicationDTOAdapter.dataBean.raceclass)}]});},onSaveAdminRaceInfoClick:function(event)
{this.actionFormManager.doProcessApplicationInput('put','PUT_SEV_Application_AdminRaceInfo',$('#adminraceinfoapplicationactionform_form'),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('adminraceinfoapplicationactionform_fieldset_message');}
else
{$('#adminraceinfoapplicationactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#adminraceinfoapplicationactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});event.preventDefault();}});$.r3Utils.namespace("org.r3.console.sev.application",window,function(aNamespace)
{aNamespace.adminraceinfoapplicationactionform_form_validationRules={adminracegroup:{required:true},adminraceclass:{required:false},yachtbsf:{required:false,maxlength:10,number:true},yachtgph:{required:false,maxlength:10,number:true}};aNamespace.adminraceinfoapplicationactionform_form_validationMessages={adminracegroup:{required:org.r3.message.field_required},adminraceclass:{required:org.r3.message.field_required},yachtbsf:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number},yachtgph:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number}};});$.r3Utils.namespace("org.r3.console.sev.application");org.r3.console.sev.application.CrewVerificationActionsActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function()
{console.info("Option to refresh!");},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/sev/application/CrewVerificationActionsActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"pkg_fiv_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_FIV_SiteProperties'),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);var pkg_fiv_properties=responseData['pkg_fiv_properties'];if(pkg_fiv_properties)
{pkg_fiv_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_fiv_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});var property=pkg_fiv_properties.getPropertyByPropertyscopePropertykey("fiv","fivclubid");if(property)
{$('#submitcrewcheckform_yachtclubcode').val(property.dataBean.propertyvalue);}
var property=pkg_fiv_properties.getPropertyByPropertyscopePropertykey("fiv","fivpasswd");if(property)
{$('#submitcrewcheckform_yachtclubpwd').val(property.dataBean.propertyvalue);$('#submitcrewcheckform_confirm_yachtclubpwd').val(property.dataBean.propertyvalue);}}
$("#submitcrewcheckform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.sev.application.submitcrewcheckform_form_validationRules,messages:org.r3.console.sev.application.submitcrewcheckform_form_validationMessages});$('#submitcrewcheckform_fieldset_message').formmessage({});$('#submitcrewcheckform_action_submit').unbind().click($.r3Utils.hitch(this,this.onSubmitClick));$('#submitcrewcheckform_action_cancelsubmit').unbind().click($.r3Utils.hitch(this,this.onCancelSubmitClick));$('#submitcrewcheckform_action_newcheck').unbind().click(function(e){$('#submitcrewcheckform_actionform').show();$('#submitcrewcheckform_action_newcheck').hide();});$('#submitcrewcheckform_action_fleetreport').unbind().click($.r3Utils.hitch(this,this.onFleetReport));$('#submitcrewcheckform_action_athletesreport').unbind().click($.r3Utils.hitch(this,this.onAthletesReport));this.show();}),function(d)
{console.error("controller did not load");});},onFleetReport:function()
{this.actionFormManager.viewFleetReport();},onAthletesReport:function()
{this.actionFormManager.athletesReport();},onSubmitClick:function(event)
{var _self=this;var urlRequested='POST_SEV_ConsoleFleet_CrewCheck';this.actionFormManager.doProcessUserForm('post',urlRequested,$("#submitcrewcheckform_form"),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('submitcrewcheckform_fieldset_message');}
else
{$('#submitcrewcheckform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#submitcrewcheckform_fieldset_message').formmessage('setText',{text:message,category:'error'});});event.preventDefault();},onCancelSubmitClick:function()
{$('#submitcrewcheckform_actionform').hide();$('#submitcrewcheckform_action_newcheck').show();}});$.r3Utils.namespace("org.r3.console.sev.application",window,function(aNamespace)
{aNamespace.submitcrewcheckform_form_validationRules={yachtclubcode:{required:true,maxlength:15},yachtclubpwd:{required:true,maxlength:15},confirm_yachtclubpwd:{required:true,maxlength:15,equalTo:'#submitcrewcheckform_yachtclubpwd'}};aNamespace.submitcrewcheckform_form_validationMessages={yachtclubcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtclubpwd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},confirm_yachtclubpwd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,equalTo:'La parola chiave inserita non corrisponde alla conferma!'}};});$.r3Utils.namespace("org.r3.console.sev.application");org.r3.console.sev.application.PageManager={init:function(applicationId)
{this.applicationActionForm=new org.r3.jsportlet.sev.application.ApplicationActionForm(this,'#JSPortlet_SEVApplicationActionForm',true);this.adminApplicationActionForm=new org.r3.console.sev.application.AdminApplicationActionForm(this,"#adminApplicationActionForm_Container","#adminApplicationActionForm","#adminApplicationActionForm_SideBar");this.entryListActionForm=new org.r3.console.sev.application.SailApplicationViewQueryActionForm(this,"#entrylist-actionform-canvas","#sailApplicationViewQueryActionForm",null,'#sailEventCrewVerificationActionsActionForm');this.appViewer=new org.r3.jsportlet.sev.appviewer.AppViewerActionForm(this,"#canvas_report_content");this.crewReportViewer=new org.r3.jsportlet.sev.crewreportviewer.CrewReportViewerActionForm(this,"#canvas_report_content");org.r3.PageManager.pushHomeConsoleBreadCrumb();if(applicationId)
{this.openAdminApplicationPanel(applicationId);}
else
{this.openQueryActionForm();}},_retrieveApplication:function(applicationId,onComplete)
{org.r3.PageManager.wait("org.r3.message.waiting");var _self=this;$.ajax({"type":"get","url":org.r3.PageManager.getRESTUrl('GET_SEV_Application_Detail',[applicationId]),"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);console.error("Whatta...");}
else
{var applicationDTOAdapter=new org.r3.db.sailevent.application.SailApplicationDTOAdapter(responseData);if(onComplete)
onComplete(applicationDTOAdapter);}},"error":function(jqXHR,timeout,message)
{console.error("...> error");org.r3.PageManager.closeNotifier();}});},openQueryActionForm:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Lista Iscritti","actionForm":this.entryListActionForm});this.entryListActionForm.open();},openAdminApplicationPanel:function(anApplicationId)
{org.r3.PageManager.pushBreadCrumb({"title":"Amministrazione Modulo Iscrizione","actionForm":this.adminApplicationActionForm});this.adminApplicationActionForm.open(anApplicationId);},viewApplication:function(applicationId)
{org.r3.PageManager.openFullScreenLayout(this.appViewer);this.appViewer.open(applicationId);},viewFleetReport:function()
{org.r3.PageManager.openFullScreenLayout(this.crewReportViewer);this.crewReportViewer.open();},athletesReport:function()
{var restUrl=org.r3.PageManager.getRESTUrl('GET_SEV_ConsoleAthletesReport');window.location.href=restUrl;},openApplicationPortlet:function(anApplicationDTOAdapter)
{var _self=this;this._retrieveApplication(anApplicationDTOAdapter.dataBean.applicationid,function(retrievedaApplicationDTOAdapter){org.r3.PageManager.pushBreadCrumb({"title":"Modulo Iscrizione","actionForm":_self.applicationActionForm});_self.applicationActionForm.open(retrievedaApplicationDTOAdapter);});},};$.r3Utils.namespace("org.r3.console.sev.application");org.r3.console.sev.application.SailApplicationViewQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anActionFormCanvasId,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId,crewVerificationContainerId)
{this.setPageManager(aPageManager);this.setCanvas(anActionFormCanvasId);this.crewVerificationView=new org.r3.console.sev.application.CrewVerificationActionsActionFormView(crewVerificationContainerId,this);this.listView=new org.r3.db.sailevent.applicationview.SailApplicationViewQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'SailApplicationViewQueryActionFormView',gradeLevel:'grade_level2 grade_clickable',legend:'Elenco Iscritti',dataTableSource:'GET_SEV_ConsoleApplicationView',layout:'fullWidth',canvasType:'list-group',iDisplayLength:-1,sortable:true,dataTableColumns:"completionstatus,applicationid;sort,userid,sailnumber;sort,yachtname;sort,yachttype,yachtclub,ownername,racegroup_raceclass,adminchecks,accepted,rectimestamp",requiredLUTs:["GET_classifier_sys_recstatus","GET_classifier_r3ea_raceclass","GET_classifier_r3ea_boatgroup","GET_classifier_r3ea_admincks"],onSelected:$.r3Utils.hitch(this,this.viewApplication),onDblClick:null,onClearSelection:null,searchInfo:{widget:'select',widgetInitialization:{url:org.r3.PageManager.getRESTUrl('LUT_SailEventRaceGroups'),blankOptionText:org.r3.PageManager.getMessageFromDict("org.r3.console.sev.application.message.any")},label:org.r3.console.sev.application.message.search_racegroup,validationRules:org.r3.console.sev.application.SailApplicationViewQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.console.sev.application.SailApplicationViewQueryActionFormView_filter_searchform_validationMessages,autoStart:true}});},open:function()
{this.listView.open();this.crewVerificationView.open();this.showCanvas();},close:function()
{this.listView.close();this.crewVerificationView.close();this.hideCanvas();},hide:function()
{this.listView.hide();this.crewVerificationView.hide();this.hideCanvas();},show:function()
{this.listView.show();this.crewVerificationView.show();this.showCanvas();},refresh:function()
{this.listView.refresh();},viewApplication:function(aDTOAdapter)
{this.hide();this.pageManager.openAdminApplicationPanel(aDTOAdapter.dataBean.applicationid);},viewFleetReport:function()
{this.pageManager.viewFleetReport();},athletesReport:function()
{this.pageManager.athletesReport();},doProcessUserForm:function(aMethod,dictionaryUrl,theForm,onSuccess,onError)
{var _self=this;if(theForm.valid())
{org.r3.PageManager.wait("org.r3.message.waiting");var method=aMethod;var restUrl=org.r3.PageManager.getRESTUrl(dictionaryUrl);theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});}}});$.r3Utils.namespace("org.r3.console.sev.application",window,function(aNamespace)
{aNamespace.SailApplicationViewQueryActionFormView_filter_searchform_validationRules={filter_item:{required:false}};aNamespace.SailApplicationViewQueryActionFormView_filter_searchform_validationMessages={filter_item:{required:"Inserire un valore per la ricerca"}};});$.r3Utils.namespace("org.r3.console.sev.ranking");org.r3.console.sev.ranking.PageManager={init:function()
{this.rankingQueryActionForm=new org.r3.console.sev.ranking.RankingQueryActionForm(this,"#rankingQueryActionForm");this.rankingDetailActionForm=new org.r3.console.sev.ranking.RankingDetailActionForm(this,"#ranking-detail-canvas","#rankingDetailActionForm","#rankingInstancesQueryActionForm");this.rankingInstanceDetailActionForm=new org.r3.console.sev.ranking.RankingInstanceDetailActionForm(this,"#rankingInstanceDetailActionForm");this.rankingSynopticActionForm=new org.r3.jsportlet.sev.rankingview.RankingSynopticActionForm(this,"#rankingSynopticActionForm");this.rankingInstanceViewerCyFileActionForm=new org.r3.jsportlet.sev.rankingview.RankingInstanceViewerCyFileActionForm(this,'#rankingInstanceViewerActionForm');this.rankingInstanceViewerActionForm=new org.r3.jsportlet.sev.rankingview.RankingInstanceViewerActionForm(this,'#rankingInstanceViewerActionForm','#rankingInstanceViewerActionForm_Entries',true);this.classifierActionForm=new org.r3.jsportlet.classifier.ClassifierActionForm(this,'#classifierActionForm','#classifierItemActionForm','#classifierItemDetailActionForm','#classifierItemListActionForm');this.uploadFileActionForm=new org.r3.jsportlet.fileupload.UploadFileActionForm(this,"#uploadFileActionForm");this.createGSideBar();org.r3.PageManager.pushHomeConsoleBreadCrumb();this.openRankingsQueryActionFormPanel();},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'gmenubar_act_uploadfiles',title:"Carica File",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true});sect1.items.push({id:'act_queryrankings',title:"Lista Classifiche...",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true});sect1.items.push({id:'act_newranking',title:"Nuova Classifica...",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false});sect1.items.push({id:'act_synoptic',title:"Quadro Riassuntivo...",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false});sect1.items.push({id:'r3ea_sinott',title:"Gruppi Quadro Sinottico",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false});$('#gsidebar-navanchor').gsidebar(gsidebarCfg);},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_uploadfiles')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openUploadFilesPanel();return;}
if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_queryrankings':this.openRankingsQueryActionFormPanel();break;case'act_newranking':this.openNewRankingPanel();break;case'act_synoptic':this.openSynopticPanel();break;case'r3ea_sinott':this.openClassifierActionForm(e.id,'r3ea_sinott');break;default:break;}}},openUploadFilesPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Caricamento File Classifiche","actionForm":this.uploadFileActionForm});this.uploadFileActionForm.open({"uploadfile_resturl":org.r3.PageManager.getRESTUrl('POST_Upload_CyberAltura_Files'),"uploadfile_resturl_ie":org.r3.PageManager.getRESTUrl('POST_Upload_CyberAltura_Files_IE'),"fileTypes":["html","htm"]});},openRankingsQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Elenco Classifiche","actionForm":this.rankingQueryActionForm});this.rankingQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_queryrankings');},openRankingDetailPanel:function(rankingDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":"Det. Classifica","actionForm":this.rankingDetailActionForm});this.rankingDetailActionForm.open(rankingDataBean.dataBean.rankid);},openSynopticPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Quadro Sinottico","actionForm":this.rankingSynopticActionForm});this.rankingSynopticActionForm.open();},openRankingInstanceViewer:function(aRankingInstanceViewDTOAdapter)
{var act=this.rankingInstanceViewerCyFileActionForm;var title="Dettaglio Classifica Prova";if(aRankingInstanceViewDTOAdapter.isRankType('rank_filedet'))
{act=this.rankingInstanceViewerActionForm;title="Dettaglio Classifica Prova (FD)";}
org.r3.PageManager.pushBreadCrumb({"title":title,"actionForm":act});act.open(aRankingInstanceViewDTOAdapter);},openNewRankingPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuova Classifica","actionForm":this.rankingDetailActionForm});this.rankingDetailActionForm.open();},closeNewRankingPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openRankingsQueryActionFormPanel();},onRankingUpdate:function(aRankingDTOAdapter)
{},onRankingCreate:function(aRankingDTOAdapter)
{this.closeNewRankingPanel(aRankingDTOAdapter);},instanceDetail:function(aRankingInstanceDTOAdapter)
{this.openRankingInstanceViewer(aRankingInstanceDTOAdapter);},openClassifierActionForm:function(manubarid,clsId)
{org.r3.PageManager.pushBreadCrumb({"title":"Classificatori","actionForm":this.classifierActionForm});this.classifierActionForm.open(clsId);$('#gsidebar-navanchor').gsidebar('select',manubarid);}};$.r3Utils.namespace("org.r3.console.sev.ranking");org.r3.console.sev.ranking.RankingDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anOuterCanvasContainerId,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailActionFormCanvas=anOuterCanvasContainerId;this.detailView=new org.r3.console.sev.ranking.RankingDetailActionFormView(aDetailViewContainerId,this);this.listView=new org.r3.db.sailevent.rankinginstanceview.RankingInstanceViewQueryActionFormView
(aChildEntityListViewContainerId,this,{dataTableId:'RankingInstanceQueryActionFormView',gradeLevel:'grade_level5 grade_clickable',legend:'Elenco Classifiche Prove/Classifiche Generali',iDisplayLength:25,layout:'fullWidth',canvasType:'list-group',sortable:false,dataTableColumns:"multiselector,instanceid,racenumber,racedate,racetime,racedistance,racerating,rectimestamp",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.instanceDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_ranking_action_deleteinstance',label:'Elimina risultati prove',disabled:true,onClick:$.r3Utils.hitch(this,function(){this.removeInstances();})}],onInitializationComplete:function()
{$('#RankingInstanceQueryActionFormView_all_instanceid').unbind().click(function(e)
{var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$('#console_ranking_action_deleteinstance').prop('disabled',false);$("#RankingInstanceQueryActionFormView_tableform input[type='checkbox'][name='instanceid']").prop('checked',true);}
else
{$('#console_ranking_action_deleteinstance').prop('disabled',true);$("#RankingInstanceQueryActionFormView_tableform input[type='checkbox'][name='instanceid']").prop('checked',false);}});$('#RankingInstanceQueryActionFormView').bind('page',function(){$('#RankingInstanceQueryActionFormView_all_instanceid').prop('checked',false);$('#console_ranking_action_deleteinstance').prop('disabled',true);});var matchExpr="#RankingInstanceQueryActionFormView_tableform input[type='checkbox'][name='instanceid']";$(document).off('click',matchExpr).on('click',matchExpr,function(e){$('#RankingInstanceQueryActionFormView_all_instanceid').prop('checked',false);var numberOfSelected=0;$.each($("#RankingInstanceQueryActionFormView_tableform input[type='checkbox'][name='instanceid']"),function(index,item)
{if($(item).prop('checked'))
numberOfSelected++;});if(numberOfSelected)
{$('#console_ranking_action_deleteinstance').prop('disabled',false);}
else
{$('#console_ranking_action_deleteinstance').prop('disabled',true);}
e.stopPropagation();});}});},close:function()
{this.hide();},hide:function()
{this.detailView.hide();this.listView.hide();$(this.detailActionFormCanvas).hide();},show:function()
{this.detailView.show();this.listView.show();$(this.detailActionFormCanvas).show();},refresh:function()
{this.listView.refresh();},open:function(aRankId)
{this.setDataBeanInfo(aRankId);this.detailView.open(aRankId);if(aRankId)
{this._openListOfRaces(aRankId);}
$(this.detailActionFormCanvas).show();},_openListOfRaces:function(aRankId)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Ranking_Instances',[aRankId]);this.listView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});},updateItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(true,onSuccessResponse,onFailResponse);},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(false,onSuccessResponse,onFailResponse);},_saveItem:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#rankingdetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_Ranking');if(isUpdate)
{var rankId=this.dataBeanInfo;restUrl=org.r3.PageManager.getRESTUrl('PUT_Ranking',[rankId]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);var rankingDataBean=new org.r3.db.sailevent.ranking.RankingDTOAdapter(responseData);if(method=='put')
{_self.pageManager.onRankingUpdate(rankingDataBean);}
else
{_self.pageManager.onRankingCreate(rankingDataBean);}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},deleteItem:function(onSuccessResponse,onErrorResponse)
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var method="delete";var rankId=this.dataBeanInfo;var restUrl=org.r3.PageManager.getRESTUrl('DELETE_Ranking',[rankId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},removeInstances:function()
{var _self=this;var theForm=$('#RankingInstanceQueryActionFormView_tableform');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.deletemulticonfirm"))
{var rankId=this.dataBeanInfo;restUrl=org.r3.PageManager.getRESTUrl('DELETE_Ranking_Instances',[rankId]);method="put";org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();$('#console_ranking_action_deleteinstance').prop('disabled',true);_self.listView.refresh();},"error":function(jqXHR,timeout,message)
{console.error(message);org.r3.PageManager.closeNotifier();}});}},instanceDetail:function(aRankingInstanceDTOAdapter)
{this.hide();this.pageManager.instanceDetail(aRankingInstanceDTOAdapter);}});$.r3Utils.namespace("org.r3.console.sev.ranking");org.r3.console.sev.ranking.RankingDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aRankId)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/sev/ranking/RankingDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(aRankId)
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_Ranking_Detail',[aRankId]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var rankingDataBean=responseData['content'];if(rankingDataBean)
{rankingDataBean=new org.r3.db.sailevent.ranking.RankingDTOAdapter(rankingDataBean);}
$(this.htmlContainerId).html(responseData['view']);$('#rankingdetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.sev.ranking.rankingdetailactionform_form_validationRules,messages:org.r3.console.sev.ranking.rankingdetailactionform_form_validationMessages});this._initializeFormFields(rankingDataBean);if(rankingDataBean==null)
{$('#rankingdetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));$('#rankingdetailactionform_action_deleteitem').hide();}
else
{$('#rankingdetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));$('#rankingdetailactionform_action_deleteitem').unbind().click($.r3Utils.hitch(this,this._onDeleteItem));$('#rankingdetailactionform_action_deleteitem').show();}
$('#rankingdetailactionform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{var _self=this;this.actionFormManager.createItem(function(responseData){$('#rankingdetailactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#rankingdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onDeleteItem:function()
{var _self=this;this.actionFormManager.deleteItem(function(responseData){},function(jqXHR,timeout,message){$('#rankingdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{this.actionFormManager.updateItem(function(responseData){$('#rankingdetailactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#rankingdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function(anRankingDTOAdapter)
{if(anRankingDTOAdapter)
{$('#rankingdetailactionform_rankid').html(anRankingDTOAdapter.dataBean.rankid+' - ');$('#rankingdetailactionform_ranktitle').val(anRankingDTOAdapter.dataBean.ranktitle);$('#rankingdetailactionform_rankordering').val(anRankingDTOAdapter.dataBean.rankordering);$('#rankingdetailactionform_racefilepattern').val(anRankingDTOAdapter.dataBean.racefilepattern);$('#rankingdetailactionform_overallfilepattern').val(anRankingDTOAdapter.dataBean.overallfilepattern);$('#rankingdetailactionform_championship_'+anRankingDTOAdapter.dataBean.championship).prop('checked',true);$('#rankingdetailactionform_rating_'+anRankingDTOAdapter.dataBean.rating).prop('checked',true);}
else
{$('#rankingdetailactionform_championship_bfalse').prop('checked',true);$('#rankingdetailactionform_rating_rank_orc').prop('checked',true);}
var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_classifier_r3ea_sinott");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#rankingdetailactionform_rankinggroup'),"selectedValue":anRankingDTOAdapter&&(anRankingDTOAdapter.dataBean.rankinggroup)});$('#rankingdetailactionform_racegrooup_cascade select').cascadingSelect({lutManager:org.r3.PageManager.lutManager,ajaxUrlMode:'restful',withNullOption:true,widgetConfig:[{'widgetId':'rankingdetailactionform_racegroup','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_boatgroup'),'value':anRankingDTOAdapter&&(anRankingDTOAdapter.dataBean.racegroup)},{'widgetId':'rankingdetailactionform_raceclass','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_racegroup_raceclass'),'value':anRankingDTOAdapter&&(anRankingDTOAdapter.dataBean.raceclass)}]});}});$.r3Utils.namespace("org.r3.console.sev.ranking",window,function(aNamespace)
{aNamespace.rankingdetailactionform_form_validationRules={rankordering:{required:true,maxlength:10,digits:true},rankinggroup:{required:true},ranktitle:{required:true,maxlength:40,texttransform:'uppercase'},racefilepattern:{required:true,maxlength:60},overallfilepattern:{required:true,maxlength:60},championship:{required:true},rating:{required:true}};aNamespace.rankingdetailactionform_form_validationMessages={rankordering:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},rankinggroup:{required:org.r3.message.field_required},ranktitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},racefilepattern:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},overallfilepattern:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},championship:{required:org.r3.message.field_required},rating:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.sev.ranking");org.r3.console.sev.ranking.RankingInstanceDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.sev.ranking.RankingInstanceDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(aRankInstanceDTOAdapter)
{this.setDataBeanInfo(aRankInstanceDTOAdapter);this.detailView.open(aRankInstanceDTOAdapter);}});$.r3Utils.namespace("org.r3.console.sev.ranking");org.r3.console.sev.ranking.RankingInstanceDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aRankInstanceDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:$.r3Utils.formatDMSUrl4ClientAccess(aRankInstanceDTOAdapter.dataBean.racefiledmsurl),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.console.sev.ranking");org.r3.console.sev.ranking.RankingQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.sailevent.ranking.RankingQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'RankingQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:'Contatti',iDisplayLength:25,dataTableSource:'GET_Rankings',layout:'fullWidth',sortable:true,dataTableColumns:"rankordering,rankid,rankinggroup,ranktitle,rating,racefilepattern,overallfilepattern",requiredLUTs:["GET_classifier_sys_recstatus","GET_classifier_r3ea_sinott","GET_classifier_rank_rating"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.onRankingSelected),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_ranking_action_refresh',label:'Aggiorna',disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},onRankingSelected:function(aDTOAdapter)
{this.listView.hide();org.r3.console.sev.ranking.PageManager.openRankingDetailPanel(aDTOAdapter);}});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.HomePortletCfgActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.siteconfig.HomePortletCfgActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},saveForm:function(onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#homeportletcfgactionform_form');var positionId=$('#homeportletcfgactionform_positionid').val();if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="put";var restUrl=org.r3.PageManager.getRESTUrl('PUT_Site_PortletConfig',['home',positionId]);org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},openCardPicker:function(srcPickerWidget)
{console.info("Opening The Picker",srcPickerWidget);this.hide();this.pageManager.openCardPicker(srcPickerWidget);}});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.HomePortletCfgActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.portletConfig=null;},close:function()
{this.hide();},open:function()
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/HomePortletCfgActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"portletconfig",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_Site_PortletConfig',['home']),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();this.portletConfig={};var pcfg=responseData["portletconfig"];if(pcfg&&pcfg.aaData&&pcfg.iTotalRecords>0)
{for(var i=0;i<pcfg.aaData.length;i++)
{this.portletConfig[pcfg.aaData[i].positionid]=new org.r3.db.system.siteportletcfg.SitePortletConfigDTOAdapter(pcfg.aaData[i]);}}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#homeportletcfgactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.homeportletcfgactionform_form_validationRules,messages:org.r3.console.siteconfig.homeportletcfgactionform_form_validationMessages});this._initializeFormFields(this.portletConfig);$(".homeportletslot").unbind().click(function(e)
{var current=$(e.currentTarget);if(!current.hasClass("layout1-homeportlet-selected"))
{$("div .homeportletslot").removeClass("layout1-homeportlet-selected");current.addClass("layout1-homeportlet-selected");}
var slotId=current.attr('id');if(slotId.indexOf('layout1-homeportlet-')==0)
{slotId=slotId.substr(20);}
_self._setFormFields(slotId,_self.portletConfig[slotId]);});$('#homeportletcfgactionform_action_saveitem').click($.r3Utils.hitch(this,this._onSaveForm));$('#homeportletcfgactionform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},_onSaveForm:function()
{var _self=this;this.actionFormManager.saveForm(function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('homeportletcfgactionform_fieldset_message');}
else
{var dtoAdapter=new org.r3.db.system.siteportletcfg.SitePortletConfigDTOAdapter(responseData);_self.portletConfig[dtoAdapter.dataBean.positionid]=dtoAdapter;_self._updateGraphicSlot(dtoAdapter);}},function(jqXHR,timeout,message){$('#homeportletcfgactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function(portletConfig)
{var configPosition_00=null;if(portletConfig)
{for(var propertyName in portletConfig)
{var item=portletConfig[propertyName];var positionId=item.dataBean.positionid;var portletSlot=$("#layout1-homeportlet-"+positionId);portletSlot.addClass("layout1-homeportlet-configured");portletSlot.addClass(item.dataBean.jsclassname);if(positionId=='00')
{configPosition_00=item;}}}
$(".homeportletslot:not(.layout1-homeportlet-configured)").each(function(index,element){$(element).addClass("layout1-homeportlet-empty");});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_classifier_portlets");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#homeportletcfgactionform_jsclassname'),"selectedValue":configPosition_00&&configPosition_00.dataBean.jsclassname});var cardPickerValue=null;if(configPosition_00)
{$('#homeportletcfgactionform_positionid').val(configPosition_00.dataBean.positionid);$('#homeportletcfgactionform_cssclassname').val(configPosition_00.dataBean.cssclassname);$('#homeportletcfgactionform_datacardid').val(configPosition_00.dataBean.datacardid);$('#homeportletcfgactionform_dataoptions').val(configPosition_00.dataBean.dataoptions);$('#homeportletcfgactionform_dataonuserstatus_'+configPosition_00.dataBean.dataonuserstatus).prop('checked',true);if(configPosition_00.dataBean.datacardid)
cardPickerValue={dtokey:configPosition_00.dataBean.datacardid,dtodescr:configPosition_00.dataBean.datacardid};}
else $('#homeportletcfgactionform_positionid').val('00');$('#homeportletcfgactionform_pickerdatacardid_cnt').picker({multiple:false,fieldName:"datacardid",openPicker:$.r3Utils.hitch(this.actionFormManager,this.actionFormManager.openCardPicker),fieldId:"homeportletcfgactionform_pickerdatacardid",pickerValue:cardPickerValue});$("#layout1-homeportlet-00").addClass("layout1-homeportlet-selected");},_setFormFields:function(aPositionId,aPortletConfigDTOAdapter)
{if(!aPortletConfigDTOAdapter)
{$('#homeportletcfgactionform_form').resetForm();$('#homeportletcfgactionform_jsclassname').val('');$('#homeportletcfgactionform_pickerdatacardid').val('');$('#homeportletcfgactionform_positionid').val(aPositionId);}
else
{$('#homeportletcfgactionform_positionid').val(aPortletConfigDTOAdapter.dataBean.positionid);$('#homeportletcfgactionform_jsclassname').val(aPortletConfigDTOAdapter.dataBean.jsclassname);$('#homeportletcfgactionform_cssclassname').val(aPortletConfigDTOAdapter.dataBean.cssclassname);$('#homeportletcfgactionform_dataoptions').val(aPortletConfigDTOAdapter.dataBean.dataoptions);$('#homeportletcfgactionform_dataonuserstatus_'+aPortletConfigDTOAdapter.dataBean.dataonuserstatus).prop('checked',true);if(aPortletConfigDTOAdapter.dataBean.datacardid)
{var cardPickerValue={dtokey:aPortletConfigDTOAdapter.dataBean.datacardid,dtodescr:aPortletConfigDTOAdapter.dataBean.datacardid};$('#homeportletcfgactionform_pickerdatacardid_cnt').picker('setVal',cardPickerValue);}}},_updateGraphicSlot:function(aDtoadapter)
{console.log("A Dto Adapter",aDtoadapter);var portletSlot=$("#layout1-homeportlet-"+aDtoadapter.dataBean.positionid);if(aDtoadapter&&aDtoadapter.dataBean.jsclassname&&aDtoadapter.dataBean.jsclassname.length>0)
{if(portletSlot.hasClass("layout1-homeportlet-empty"))
{portletSlot.removeClass("layout1-homeportlet-empty");portletSlot.addClass("layout1-homeportlet-configured");this._updateSlotCSSClass(portletSlot,aDtoadapter.dataBean.jsclassname);}
else
{if(portletSlot.hasClass("layout1-homeportlet-configured"))
{this._updateSlotCSSClass(portletSlot,aDtoadapter.dataBean.jsclassname);}}}
else
{if(portletSlot.hasClass("layout1-homeportlet-configured"))
{portletSlot.addClass("layout1-homeportlet-empty");this._updateSlotCSSClass(portletSlot,null);}}},_updateSlotCSSClass:function(aPortletSlotJQObject,newJsClassName)
{var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_classifier_portlets");org.r3.PageManager.lutManager.getLUT(resolvedUrl,function(theLUT)
{$.each(theLUT.aaData,function(index,item)
{aPortletSlotJQObject.removeClass(item.dtokey);});if(newJsClassName)
{aPortletSlotJQObject.addClass(newJsClassName);}});}});$.r3Utils.namespace("org.r3.console.siteconfig",window,function(aNamespace)
{aNamespace.homeportletcfgactionform_form_validationRules={jsclassname:{required:false}};aNamespace.homeportletcfgactionform_form_validationMessages={jsclassname:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.PageManager={init:function()
{this.homePortletCfgActionForm=new org.r3.console.siteconfig.HomePortletCfgActionForm(this,'#homePortletCfgActionForm');this.sitePropertyConfigActionForm=new org.r3.console.siteconfig.SitePropertyActionForm(this,'#sitePropertiesActionForm');this.classifierActionForm=new org.r3.jsportlet.classifier.ClassifierActionForm(this,'#classifierActionForm','#classifierItemActionForm','#classifierItemDetailActionForm','#classifierItemListActionForm');this.calendarActionForm=new org.r3.console.siteconfig.calendar.CalendarActionForm(this,'#calendarDetailActionForm','#calendarListActionForm');this.siteDetailActionForm=new org.r3.console.siteconfig.site.SiteDetailActionForm(this,'#siteDetailActionForm');this.uploadAssetFileActionForm=new org.r3.console.siteconfig.site.UploadFileActionForm(this,'#uploadFileActionForm');this.pageQueryActionForm=new org.r3.console.siteconfig.page.PageQueryActionForm(this,'#pageQueryActionForm','#pageQueryAdvancedSearchActionForm');this.pageDetailActionForm=new org.r3.console.siteconfig.page.PageDetailActionForm(this,'#pageDetailActionForm');this.cardDetailActionForm=new org.r3.jsportlet.cmsconsole.CardDetailActionForm(this,'#cardDetailActionForm');this.uploadFileActionForm=new org.r3.jsportlet.cmsconsole.UploadFileActionForm(this,'#uploadFileActionForm');this.cardPickerActionForm=new org.r3.jsportlet.cmsconsole.CardPickerActionForm(this,'#cardQueryActionForm','#cardQueryAdvancedSearchActionForm');this.createGSideBar();org.r3.PageManager.pushHomeConsoleBreadCrumb();this.openSitePropertiesConfigPanel();},createGSideBar:function()
{var targetSiteType=org.r3.SiteConstants.targetSiteType;var gsidebarCfg={};gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'gmenubar_act_site',title:org.r3.console.siteconfig.message.gmenubar_act_site,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'building'});sect1.items.push({id:'act_properties',title:org.r3.console.siteconfig.message.gmenubar_act_properties,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'cog'});if(targetSiteType=='regatta'||targetSiteType=='workshop')
{sect1.items.push({id:'act_homeportlets',title:org.r3.console.siteconfig.message.gmenubar_act_homeportlets,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'desktop'});}
var sectpages={type:'section',id:'gmenubar_sect_pages',bottom_border:true,items:[]};gsidebarCfg.sections.push(sectpages);sectpages.items.push({id:'act_newpage',title:org.r3.console.siteconfig.message.gmenubar_act_newpage,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'file'});sectpages.items.push({id:'act_querypages',title:org.r3.console.siteconfig.message.gmenubar_act_querypages,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'table'});var sect3={type:'section',id:'gmenubar_sect_3',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect3);if(targetSiteType=='regatta')
{sect3.items.push({id:'act_calendar',title:org.r3.console.siteconfig.message.gmenubar_act_calendar,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false,icon:'calendar'});}
var sect2={type:'section',title:org.r3.console.siteconfig.message.gmenubar_act_classifiers,id:'gmenubar_sect_classifiers',bottom_border:true,items:[],grouped:true,icon:'bars'};gsidebarCfg.sections.push(sect2);$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var _self=this;$.ajax({"dataType":'json',"type":"GET","url":org.r3.PageManager.getRESTUrl('LUT_classifiers'),"success":function(data,textStatus,jqXHR)
{if(data.aaData&&data.aaData.length)
{var classifierItems=[];for(var i=0;i<data.aaData.length;i++)
{classifierItems.push({id:data.aaData[i].clsid,title:data.aaData[i].clsdescr,onClick:$.r3Utils.hitch(_self,_self._onGMenuBarClick),deletable:true});}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_classifiers',classifierItems);}},"error":function(xhr,error,thrown)
{if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. "+"This is caused by a JSON formatting error.");}}});},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_site')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openSiteConfigPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_properties':this.openSitePropertiesConfigPanel();break;case'act_homeportlets':this.openHomePortletConfigPanel();break;case'act_calendar':this.openCalendarPanel();break;case'act_newpage':this.openNewPagePanel();break;case'act_querypages':this.openPageQueryActionFormPanel();break;default:this.openClassifierActionForm(e.id,e.id);break;}}}},openSiteConfigPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.siteconfig.message.breadcrumb_general,"actionForm":this.siteDetailActionForm});this.siteDetailActionForm.open();},openSitePropertiesConfigPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.siteconfig.message.breadcrumb_properties,"actionForm":this.sitePropertyConfigActionForm});this.sitePropertyConfigActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_properties');},openHomePortletConfigPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.siteconfig.message.breadcrumb_homeportlet,"actionForm":this.homePortletCfgActionForm});this.homePortletCfgActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_homeportlets');},openCalendarPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.siteconfig.message.breadcrumb_calendar,"actionForm":this.calendarActionForm});this.calendarActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_calendar');},openCardPicker:function(srcPickerWidget)
{org.r3.PageManager.pushBreadCrumb({"title":"Selezione Card","actionForm":this.cardPickerActionForm});this.cardPickerActionForm.open({pickerWidget:srcPickerWidget});},openClassifierActionForm:function(manubarid,clsId)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.siteconfig.message.breadcrumb_classifiers,"actionForm":this.classifierActionForm});this.classifierActionForm.open(clsId);$('#gsidebar-navanchor').gsidebar('select',manubarid);},uploadSiteAssetFile:function(aCardId)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.siteconfig.message.breadcrumb_fileupload,"actionForm":this.uploadAssetFileActionForm});this.uploadAssetFileActionForm.open(aCardId);},openPageQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.siteconfig.message.breadcrumb_pages,"actionForm":this.pageQueryActionForm});this.pageQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_querypages');},openNewPagePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.siteconfig.message.breadcrumb_newpage,"actionForm":this.pageDetailActionForm});this.pageDetailActionForm.open(null);},closeNewPagePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openPageQueryActionFormPanel();},openDetailPagePanel:function(pageDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.siteconfig.message.breadcrumb_pagedetail,"actionForm":this.pageDetailActionForm});var dataBeanInfo={"pageDataBean":pageDataBean};this.pageDetailActionForm.open(pageDataBean);},openCardDetailPanel:function(cardDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.jsportlet.cmsconsole.message.breadcrumb_carddetail,"actionForm":this.cardDetailActionForm});var dataBeanInfo={"cardDataBean":cardDataBean};this.cardDetailActionForm.open(cardDataBean);},uploadFile:function(cardDTOAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.jsportlet.cmsconsole.message.breadcrumb_fileupload,"actionForm":this.uploadFileActionForm});this.uploadFileActionForm.open(cardDTOAdapter);}};$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.siteconfig.SitePropertyActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{this.detailView.refresh();},open:function()
{this.detailView.open();},saveForm:function(restUrl,theForm,onSuccessResponse,onErrorResponse)
{var _self=this;if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}}});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.pkgUicfg=null;this.pkgGoogleAnalytics=null;this.pkgSevApp=null;this.pkgSevRanking=null;this.pkgSms=null;this.pkgFiv=null;this.pkgMail=null;this.address=null;},close:function()
{this.hide();},refresh:function()
{if(this.pkgUicfg)
this.pkgUicfg.refresh();},open:function()
{var _self=this;var targetSiteType=org.r3.SiteConstants.targetSiteType;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];var actionFormView=org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView.html.jsp';if(org.r3.SiteConstants.is10Gen())
{actionFormView=org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_10Gen.html.jsp';}
else if(targetSiteType=='regatta'||targetSiteType=='workshop')
{actionFormView=org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_'+targetSiteType+'.html.jsp';}
networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(actionFormView),dataType:"html"});if(targetSiteType=='workshop')
{networkRequestsQueue.push({id:"pkg_uicfg_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_UiCfg_SiteProperties'),dataType:"json"});networkRequestsQueue.push({id:"pkg_uicfg_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_PkgUiCfg.html'),dataType:"html"});}
if(targetSiteType=='regatta')
{networkRequestsQueue.push({id:"pkg_uicfg_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_UiCfg_SiteProperties'),dataType:"json"});networkRequestsQueue.push({id:"pkg_sevapp_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SevApp_SiteProperties'),dataType:"json"});networkRequestsQueue.push({id:"pkg_sevranking_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SevRanking_SiteProperties'),dataType:"json"});networkRequestsQueue.push({id:"pkg_fiv_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_FIV_SiteProperties'),dataType:"json"});networkRequestsQueue.push({id:"pkg_uicfg_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_PkgUiCfg.html'),dataType:"html"});networkRequestsQueue.push({id:"pkg_sevapp_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_PkgSevApp.html'),dataType:"html"});networkRequestsQueue.push({id:"pkg_sevranking_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_PkgSevRanking.html'),dataType:"html"});networkRequestsQueue.push({id:"pkg_fiv_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_PkgFiv.html'),dataType:"html"});}
networkRequestsQueue.push({id:"pkg_googleanalytics_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_GoogleAnalytics_SiteProperties'),dataType:"json"});networkRequestsQueue.push({id:"pkg_sms_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SMS_SiteProperties'),dataType:"json"});networkRequestsQueue.push({id:"pkg_mail_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_MAIL_SiteProperties'),dataType:"json"});networkRequestsQueue.push({id:"pkg_google_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_PkgGoogle.html'),dataType:"html"});networkRequestsQueue.push({id:"pkg_sms_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_PkgSms.html'),dataType:"html"});networkRequestsQueue.push({id:"pkg_mail_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_PkgMail.html'),dataType:"html"});if(org.r3.SiteConstants.is10Gen())
{networkRequestsQueue.push({id:"sitecollection",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SiteCollection_Detail',[org.r3.Constants.site]),dataType:"json"});networkRequestsQueue.push({id:"address_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/SitePropertyActionFormView_Address.html.jsp'),dataType:"html"});}
networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_Page'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var pkg_uicfg_properties=responseData['pkg_uicfg_properties'];if(pkg_uicfg_properties)
{pkg_uicfg_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_uicfg_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
var pkg_googleanalytics_properties=responseData['pkg_googleanalytics_properties'];if(pkg_googleanalytics_properties)
{pkg_googleanalytics_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_googleanalytics_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
var pkg_sevapp_properties=responseData['pkg_sevapp_properties'];if(pkg_sevapp_properties)
{pkg_sevapp_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_sevapp_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
var pkg_sevranking_properties=responseData['pkg_sevranking_properties'];if(pkg_sevranking_properties)
{pkg_sevranking_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_sevranking_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
var pkg_sms_properties=responseData['pkg_sms_properties'];if(pkg_sms_properties)
{pkg_sms_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_sms_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
var pkg_fiv_properties=responseData['pkg_fiv_properties'];if(pkg_fiv_properties)
{pkg_fiv_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_fiv_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
var pkg_mail_properties=responseData['pkg_mail_properties'];if(pkg_mail_properties)
{pkg_mail_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_mail_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));if(targetSiteType=='workshop')
{$('#sitePropertiesActionForm_tab_pkg_uicfg').html(tmpl(responseData['pkg_uicfg_view'],{}));this.pkgUicfg=new org.r3.console.siteconfig.SitePropertyActionFormView_PkgUiCfg('__UNUSED__',this.actionFormManager,pkg_uicfg_properties);}
if(targetSiteType=='regatta')
{$('#sitePropertiesActionForm_tab_pkg_uicfg').html(tmpl(responseData['pkg_uicfg_view'],{}));this.pkgUicfg=new org.r3.console.siteconfig.SitePropertyActionFormView_PkgUiCfg('__UNUSED__',this.actionFormManager,pkg_uicfg_properties);$('#sitePropertiesActionForm_tab_pkg_sevapp').html(tmpl(responseData['pkg_sevapp_view'],{}));this.pkgSevApp=new org.r3.console.siteconfig.SitePropertyActionFormView_PkgSevApp('__UNUSED__',this.actionFormManager,pkg_sevapp_properties);$('#sitePropertiesActionForm_tab_pkg_sevranking').html(tmpl(responseData['pkg_sevranking_view'],{}));this.pkgSevApp=new org.r3.console.siteconfig.SitePropertyActionFormView_PkgSevRanking('__UNUSED__',this.actionFormManager,pkg_sevranking_properties);$('#sitePropertiesActionForm_tab_pkg_fiv').html(tmpl(responseData['pkg_fiv_view'],{}));this.pkgFiv=new org.r3.console.siteconfig.SitePropertyActionFormView_PkgFiv('__UNUSED__',this.actionFormManager,pkg_fiv_properties);}
$('#sitePropertiesActionForm_tab_pkg_google').html(tmpl(responseData['pkg_google_view'],{}));this.pkgGoogleAnalytics=new org.r3.console.siteconfig.SitePropertyActionFormView_PkgGoogle('__UNUSED__',this.actionFormManager,pkg_googleanalytics_properties);$('#sitePropertiesActionForm_tab_pkg_sms').html(tmpl(responseData['pkg_sms_view'],{}));this.pkgSms=new org.r3.console.siteconfig.SitePropertyActionFormView_PkgSms('__UNUSED__',this.actionFormManager,pkg_sms_properties);$('#sitePropertiesActionForm_tab_pkg_mail').html(tmpl(responseData['pkg_mail_view'],{}));this.pkgMail=new org.r3.console.siteconfig.SitePropertyActionFormView_PkgMail('__UNUSED__',this.actionFormManager,pkg_mail_properties);if(org.r3.SiteConstants.is10Gen())
{$('#sitePropertiesActionForm_tab_address').html(tmpl(responseData['address_view'],{}));var siteAddressDTOAdapter=null;var siteCollectionDTOAdapter=responseData['sitecollection'];if(siteCollectionDTOAdapter)
{siteCollectionDTOAdapter=new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(siteCollectionDTOAdapter);siteAddressDTOAdapter=siteCollectionDTOAdapter.getAddressDTOAdapter();}
this.address=new org.r3.console.siteconfig.SitePropertyActionFormView_Address('__UNUSED__',this.actionFormManager,siteAddressDTOAdapter);$('#sitePropertiesActionFormTabs a[data-toggle="tab"]').on('shown.bs.tab',function(e)
{var activated=e.target;var prevActivated=e.relatedTarget;console.log(activated,prevActivated);_self.address.map.invalidateSize();});}
this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionFormView_Address=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,anAddressDTOAdapter)
{var _self=this;$("#addressform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.addressform_form_validationRules,messages:org.r3.console.siteconfig.addressform_form_validationMessages});$('#addressform_action_save').unbind().click($.r3Utils.hitch(this,this.onAddressFormSave));$('#addressform_fieldset_message').formmessage({});$("#addressform_address").unbind().blur(function(e){if($("#addressform_form").valid()){org.r3.GoogleMapsUtils.geoCodeAddress($("#addressform_address").val(),null,$('#addressform_zipcode').val(),$("#addressform_administrative_area_level_1_id option:selected").text(),$("#addressform_administrative_area_level_2_id option:selected").text().substring(0,2),$("#addressform_administrative_area_level_3_id option:selected").text(),"Italia",$.r3Utils.hitch(_self,_self.onGeoCodeAddress));}});$('#addressform_form select').cascadingSelect({lutManager:org.r3.PageManager.lutManager,withNullOption:true,ajaxUrlMode:'restful',widgetConfig:[{'widgetId':'addressform_administrative_area_level_1_id','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_ita_regione'),'value':anAddressDTOAdapter&&anAddressDTOAdapter.getAdministrative_area_level_1_id()},{'widgetId':'addressform_administrative_area_level_2_id','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_ita_regione_provincia'),'value':anAddressDTOAdapter&&anAddressDTOAdapter.getAdministrative_area_level_2_id()},{'widgetId':'addressform_administrative_area_level_3_id','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_ita_regione_provincia_localita'),'value':anAddressDTOAdapter&&anAddressDTOAdapter.getAdministrative_area_level_3_id(),'onChange':function(itemVal)
{var widgetData=$('#addressform_administrative_area_level_3_id').data('cascadingSelect');var selectInfo=widgetData.cascadingInfo.selectInfo[widgetData.widgetIndex];if(selectInfo.resolvedAjaxSource)
{var theLUTItem=org.r3.PageManager.getLUTItem(selectInfo.resolvedAjaxSource,itemVal);if(theLUTItem)
$('#addressform_zipcode').val(theLUTItem.classifieritemsattr);$('#addressform_address').focus();}}}]});this.initializeFormFields(anAddressDTOAdapter);this.initializeMap(anAddressDTOAdapter&&anAddressDTOAdapter.getLocationAsCoordsArray());},refresh:function()
{},initializeMap:function(anAddressLocation)
{var geoLoc=org.r3.PageManager.clientGeoLocation;if(anAddressLocation)
geoLoc=anAddressLocation;this.map=L.map('addressform_leafletmap').setView(geoLoc,13);L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map);if(anAddressLocation)
{this.marker=L.marker(anAddressLocation);this.marker.addTo(this.map);}
else this.marker=null;},initializeFormFields:function(anAddressDTOAdapter)
{if(!anAddressDTOAdapter)
return;$('#addressform_street_number').val(anAddressDTOAdapter.dataBean.snumber);$('#addressform_locality').val(anAddressDTOAdapter.dataBean.locality);$('#addressform_route').val(anAddressDTOAdapter.dataBean.route);$('#addressform_administrative_area_level_3').val(anAddressDTOAdapter.getSerializedAdminarea_l3());$('#addressform_administrative_area_level_2').val(anAddressDTOAdapter.getSerializedAdminarea_l2());$('#addressform_administrative_area_level_1').val(anAddressDTOAdapter.getSerializedAdminarea_l1());$('#addressform_country').val(anAddressDTOAdapter.getSerializedCountry());$('#addressform_postal_code').val(anAddressDTOAdapter.dataBean.postcode);$('#addressform_zipcode').val(anAddressDTOAdapter.dataBean.postcode);$('#addressform_location').val(anAddressDTOAdapter.getSerializedLocation());$('#addressform_northeast').val(anAddressDTOAdapter.getSerializedNortheast());$('#addressform_southwest').val(anAddressDTOAdapter.getSerializedSouthwest());$('#addressform_place_id').val(anAddressDTOAdapter.dataBean.gmapplaceid);$('#addressform_formatted_address').val(anAddressDTOAdapter.dataBean.formatted);$('#addressform_address').val(anAddressDTOAdapter.getRouteStreetNumber());},onAddressFormSave:function(event)
{console.log("I'm clicked3.... ",this,event);org.r3.AjaxUtils.submitForm("put",org.r3.PageManager.getRESTUrl('PUT_SiteCollection_Address',[org.r3.Constants.site]),$("#addressform_form"),function(responseData){$('#addressform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'})},function(jqXHR,timeout,message){console.error(message);},"org.r3.message.saveconfirm",true);event.preventDefault();},onGeoCodeAddress:function(geoInfo)
{console.log("org.r3.GoogleMapsUtils::geoCodeAddress",geoInfo);var ndx=org.r3.GoogleMapsUtils.getGeoCodeStreetAddressResultIndex(geoInfo);if(ndx!=-1)
{var c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'street_number');var w=$('#addressform_street_number');if(c)
w.val(c.long_name);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'locality');w=$('#addressform_locality');if(c)
w.val(c.long_name);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'route');w=$('#addressform_route');if(c)
w.val(c.long_name);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'administrative_area_level_3');w=$('#addressform_administrative_area_level_3');if(c)
{if(c.long_name!=c.short_name)
w.val(c.short_name+'#'+c.long_name);else w.val(c.long_name);}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'administrative_area_level_2');w=$('#addressform_administrative_area_level_2');if(c)
{if(c.long_name!=c.short_name)
w.val(c.short_name+'#'+c.long_name);else w.val(c.long_name);}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'administrative_area_level_1');w=$('#addressform_administrative_area_level_1');if(c)
{if(c.long_name!=c.short_name)
w.val(c.short_name+'#'+c.long_name);else w.val(c.long_name);}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'country');w=$('#addressform_country');if(c)
{if(c.long_name!=c.short_name)
w.val(c.short_name+'#'+c.long_name);else w.val(c.long_name);}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'postal_code');w=$('#addressform_postal_code');if(c)
w.val(c.long_name);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'location');w=$('#addressform_location');if(c)
{w.val(c.lat+'#'+c.lng);var aLatLng=new L.LatLng(c.lat,c.lng);this.map.setView(aLatLng,13);if(this.marker)
{this.marker.setLatLng(aLatLng);}
else
{this.marker=L.marker(aLatLng);this.marker.addTo(this.map);}}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'northeast');w=$('#addressform_northeast');if(c)
w.val(c.lat+'#'+c.lng);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'southwest');w=$('#addressform_southwest');if(c)
w.val(c.lat+'#'+c.lng);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'place_id');w=$('#addressform_place_id');if(c)
w.val(c);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'formatted_address');w=$('#addressform_formatted_address');if(c)
w.val(c);else w.val(null);}}});$.r3Utils.namespace("org.r3.console.siteconfig",window,function(aNamespace)
{aNamespace.addressform_form_validationRules={administrative_area_level_1_id:{required:true},administrative_area_level_2_id:{required:true},administrative_area_level_3_id:{required:true},zipcode:{required:true,maxlength:5},address:{required:true,maxlength:40}};aNamespace.addressform_form_validationMessages={administrative_area_level_1_id:{required:org.r3.message.field_required},administrative_area_level_2_id:{required:org.r3.message.field_required},administrative_area_level_3_id:{required:org.r3.message.field_required},address:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},zipcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionFormView_PkgFiv=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,siteProperties)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#pkg_fiv_form_property_package').val("fiv");$('#pkg_fiv_action_save').click($.r3Utils.hitch(this,this._onSaveForm));$('#pkg_fiv_fieldset_message').formmessage({});$('#pkg_fiv_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.pkg_fiv_form_validationRules,messages:org.r3.console.siteconfig.pkg_fiv_form_validationMessages});var property=siteProperties.getPropertyByPropertyscopePropertykey("fiv","fivclubid");if(property)
{$('#pkg_fiv_fivclubid').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("fiv","fivpasswd");if(property)
{$('#pkg_fiv_fivpasswd').val(property.dataBean.propertyvalue);}},refresh:function()
{},_onSaveForm:function()
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl("POST_SiteProperties_Invalidate",["fiv"]);this.actionFormManager.saveForm(restUrl,$('#pkg_fiv_form'),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('pkg_fiv_fieldset_message');}},function(jqXHR,timeout,message){$('#pkg_fiv_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.console.siteconfig",window,function(aNamespace)
{aNamespace.pkg_fiv_form_validationRules={prop_fivclubid:{required:true,maxlength:15},prop_fivpasswd:{required:true,maxlength:15}};aNamespace.pkg_fiv_form_validationMessages={prop_prop_fivclubid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_fivpasswd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionFormView_PkgGoogle=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,siteProperties)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#pkg_googleanalytics_form_property_package').val("google.analytics");$('#pkg_googleanalytics_action_save').click($.r3Utils.hitch(this,this._onSaveForm));$('#pkg_googleanalytics_fieldset_message').formmessage({});$('#pkg_googleanalytics_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.pkg_googleanalytics_form_validationRules,messages:org.r3.console.siteconfig.pkg_googleanalytics_form_validationMessages});var property=siteProperties.getPropertyByPropertyscopePropertykey("google.analytics","domain");if(property)
{$('#pkg_googleanalytics_domain').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("google.analytics","trackerid");if(property)
{$('#pkg_googleanalytics_trackerid').val(property.dataBean.propertyvalue);}},refresh:function()
{},_onSaveForm:function()
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl("POST_SiteProperties_Invalidate",["google.analytics"]);this.actionFormManager.saveForm(restUrl,$('#pkg_googleanalytics_form'),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('pkg_googleanalytics_fieldset_message');}},function(jqXHR,timeout,message){$('#pkg_googleanalytics_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.console.siteconfig",window,function(aNamespace)
{aNamespace.pkg_googleanalytics_form_validationRules={prop_domain:{required:true},prop_trackerid:{required:true}};aNamespace.pkg_googleanalytics_form_validationMessages={prop_domain:{required:org.r3.message.field_required},prop_trackerid:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionFormView_PkgMail=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,siteProperties)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#pkg_mail_form_property_package').val("mail");$('#pkg_mail_action_save').click($.r3Utils.hitch(this,this._onSaveForm));$('#pkg_mail_fieldset_message').formmessage({});$('#pkg_mail_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.pkg_mail_form_validationRules,messages:org.r3.console.siteconfig.pkg_mail_form_validationMessages});var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","smtp_auth");if(property)
{$('#pkg_mail_smtp_auth').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","smtp_port");if(property)
{$('#pkg_mail_smtp_port').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","smtp_quitwait");if(property)
{$('#pkg_mail_smtp_quitwait').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","smtp_socketFactory_class");if(property)
{$('#pkg_mail_smtp_socketFactory_class').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","smtp_socketFactory_fallback");if(property)
{$('#pkg_mail_smtp_socketFactory_fallback').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","smtp_socketFactory_port");if(property)
{$('#pkg_mail_smtp_socketFactory_port').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","smtp_sysfrom");if(property)
{$('#pkg_mail_smtp_sysfrom').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","smtp_systitle");if(property)
{$('#pkg_mail_smtp_systitle').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","mail_host");if(property)
{$('#pkg_mail_mail_host').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","mail_auth_account");if(property)
{$('#pkg_mail_mail_auth_account').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","mail_auth_passwd");if(property)
{$('#pkg_mail_mail_auth_passwd').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","mail_profile");if(property)
{$('#pkg_mail_mail_profile_'+property.dataBean.propertyvalue).prop('checked',true);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("mail","mail_sevcrewchange");if(property)
{$('#pkg_mail_mail_sevcrewchange').val(property.dataBean.propertyvalue);}},refresh:function()
{},_onSaveForm:function()
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl("POST_SiteProperties_Invalidate",["mail"]);this.actionFormManager.saveForm(restUrl,$('#pkg_mail_form'),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('pkg_sms_fieldset_message');}},function(jqXHR,timeout,message){$('#pkg_mail_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.console.siteconfig",window,function(aNamespace)
{aNamespace.pkg_mail_form_validationRules={prop_mail_host:{required:true,maxlength:40},prop_mail_auth_account:{required:true,maxlength:50},prop_mail_auth_passwd:{required:true,maxlength:20},prop_mail_sevcrewchange:{required:false,maxlength:200}};aNamespace.pkg_mail_form_validationMessages={prop_mail_host:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_mail_auth_account:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_mail_auth_passwd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_mail_sevcrewchange:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionFormView_PkgSevApp=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,siteProperties)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#pkg_sevapp_form_property_package').val("sev.app");$('#pkg_sevapp_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.pkg_sevapp_form_validationRules,messages:org.r3.console.siteconfig.pkg_sevapp_form_validationMessages});var property=siteProperties.getPropertyByPropertyscopePropertykey("sev.app","boatinfoform_otherinfo");var pvalue=(property&&property.dataBean.propertyvalue)||'bfalse';$('#boatinfoform_otherinfo_'+pvalue).prop('checked',true);var property=siteProperties.getPropertyByPropertyscopePropertykey("sev.app","boatinfoform_sailcloth");var pvalue=(property&&property.dataBean.propertyvalue)||'bfalse';$('#boatinfoform_sailcloth_'+pvalue).prop('checked',true);var property=siteProperties.getPropertyByPropertyscopePropertykey("sev.app","classinfoform_apptype");var pvalue=(property&&property.dataBean.propertyvalue)||'bfalse';$('#classinfoform_apptype_'+pvalue).prop('checked',true);var property=siteProperties.getPropertyByPropertyscopePropertykey("sev.app","classinfoform_grancrocieraorc");var pvalue=(property&&property.dataBean.propertyvalue)||'bfalse';$('#classinfoform_grancrocieraorc_'+pvalue).prop('checked',true);var property=siteProperties.getPropertyByPropertyscopePropertykey("sev.app","classinfoform_racegroupdecl");var pvalue=(property&&property.dataBean.propertyvalue)||'bfalse';$('#classinfoform_racegroupdecl_'+pvalue).prop('checked',true);$('#pkg_sevapp_action_save').click($.r3Utils.hitch(this,this._onSaveForm));$('#pkg_sevapp_fieldset_message').formmessage({});},refresh:function()
{},_onSaveForm:function()
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl("POST_SiteProperties_Invalidate",["sev.app"]);this.actionFormManager.saveForm(restUrl,$('#pkg_sevapp_form'),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('pkg_sevapp_fieldset_message');}},function(jqXHR,timeout,message){$('#pkg_sevapp_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.console.siteconfig",window,function(aNamespace)
{aNamespace.pkg_sevapp_form_validationRules={};aNamespace.pkg_sevapp_form_validationMessages={};});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionFormView_PkgSevRanking=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,siteProperties)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#pkg_sevranking_form_property_package').val("sev.ranking");$('#pkg_sevranking_action_save').click($.r3Utils.hitch(this,this._onSaveForm));$('#pkg_sevranking_fieldset_message').formmessage({});$('#pkg_sevranking_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.pkg_sevranking_form_validationRules,messages:org.r3.console.siteconfig.pkg_sevranking_form_validationMessages});var property=siteProperties.getPropertyByPropertyscopePropertykey("sev.ranking","maxraces");if(property)
{$('#pkg_sevranking_maxraces').val(property.dataBean.propertyvalue);}},refresh:function()
{},_onSaveForm:function()
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl("POST_SiteProperties_Invalidate",["sev.ranking"]);this.actionFormManager.saveForm(restUrl,$('#pkg_sevranking_form'),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('pkg_sevranking_fieldset_message');}},function(jqXHR,timeout,message){$('#pkg_sevranking_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.console.siteconfig",window,function(aNamespace)
{aNamespace.pkg_sevranking_form_validationRules={prop_maxraces:{required:true}};aNamespace.pkg_sevranking_form_validationMessages={prop_maxraces:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionFormView_PkgSms=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,siteProperties)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#pkg_sms_form_property_package').val("sms");$('#pkg_sms_action_save').click($.r3Utils.hitch(this,this._onSaveForm));$('#pkg_sms_fieldset_message').formmessage({});$('#pkg_sms_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.pkg_sms_form_validationRules,messages:org.r3.console.siteconfig.pkg_sms_form_validationMessages});var property=siteProperties.getPropertyByPropertyscopePropertykey("sms","smslogin");if(property)
{$('#pkg_sms_smslogin').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("sms","smspasswd");if(property)
{$('#pkg_sms_smspasswd').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("sms","smssender");if(property)
{$('#pkg_sms_smssender').val(property.dataBean.propertyvalue);}},refresh:function()
{},_onSaveForm:function()
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl("POST_SiteProperties_Invalidate",["sms"]);this.actionFormManager.saveForm(restUrl,$('#pkg_sms_form'),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('pkg_sms_fieldset_message');}},function(jqXHR,timeout,message){$('#pkg_sms_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.console.siteconfig",window,function(aNamespace)
{aNamespace.pkg_sms_form_validationRules={prop_smslogin:{required:true,maxlength:15},prop_smspasswd:{required:true,maxlength:15},prop_smssender:{required:true,maxlength:11}};aNamespace.pkg_sms_form_validationMessages={prop_smslogin:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_smspasswd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_smssender:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.siteconfig");org.r3.console.siteconfig.SitePropertyActionFormView_PkgUiCfg=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,siteProperties)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#pkg_uicfg_form_property_package').val("ui.cfg");var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_uicfgmenus');var property=siteProperties.getPropertyByPropertyscopePropertykey("ui.cfg","menus");org.r3.PageManager.lutManager.populateCheckBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#pkg_uicfg_form_menus_cnt'),"groupId":"pkg_uicfg_form_menus_","groupName":"prop_menus","value":property&&property.dataBean.propertyvalue,"labelSize":200});$('#pkg_uicfg_action_save').click($.r3Utils.hitch(this,this._onSaveForm));$('#pkg_uicfg_fieldset_message').formmessage({});},refresh:function()
{},_onSaveForm:function()
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl("POST_SiteProperties_Invalidate",["ui.cfg"]);this.actionFormManager.saveForm(restUrl,$('#pkg_uicfg_form'),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('pkg_uicfg_fieldset_message');}},function(jqXHR,timeout,message){$('#pkg_uicfg_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.console.siteconfig",window,function(aNamespace)
{aNamespace.pkg_uicfg_form_validationRules={};aNamespace.pkg_uicfg_form_validationMessages={};});$.r3Utils.namespace("org.r3.console.siteconfig.calendar");org.r3.console.siteconfig.calendar.CalendarActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aItemDetailViewContainerId,aCalendarEventHtmlActionFormContainerId)
{var _self=this;this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.calendar.CalendarActionFormView(aItemDetailViewContainerId,aCalendarEventHtmlActionFormContainerId,this,{calendarCanvasId:'calendar_canvas',editable:true,urls:{queryevents:org.r3.PageManager.getRESTUrl('GET_AgendaEntries_AsCalendarEvents',[org.r3.Constants.site])}});},close:function()
{this.detailView.close();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{this.detailView.refresh();},open:function()
{this.detailView.open();},deleteItem:function(method,restUrl,onSuccess,onError)
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.calendar_confirmdelete"))
{org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.refresh();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onError)
onError(message);}});}},submitForm:function(method,restUrl,theForm,doValidation,onSuccess,onError)
{var _self=this;if(!doValidation||(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm")))
{org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.refresh();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onError)
onError(message);}});}}});$.r3Utils.namespace("org.r3.console.siteconfig.page");org.r3.console.siteconfig.page.PageDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.siteconfig.page.PageDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{this.detailView.refresh();},open:function(aPageDTOAdapter)
{console.log("PageDetailActionForm::open",aPageDTOAdapter);this.setDataBeanInfo(aPageDTOAdapter);this.detailView.open(aPageDTOAdapter);},updateItem:function()
{this._saveItem(true);},createItem:function()
{this._saveItem(false);},_saveItem:function(isUpdate)
{var _self=this;var theForm=$('#pagedetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_Page');if(isUpdate)
{var pageId=this.dataBeanInfo.dataBean.pageid;restUrl=org.r3.PageManager.getRESTUrl('PUT_Page',[pageId]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('pagedetailactionform_fieldset_message');}
else
{if(isUpdate)
{$('#pagedetailactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}
else
_self.closeNewPagePanel();}},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();$('#pagedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},deleteItem:function()
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var method="DELETE";var restUrl=null;var pageid=this.dataBeanInfo.dataBean.pageid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_Page',[pageid]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{$('#pagedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},closeNewPagePanel:function()
{this.pageManager.closeNewPagePanel();},listaPages:function()
{org.r3.PageManager.back();},updatePageDescr4Language:function(aLanguageCode)
{var theForm=$('#pagetextactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="put";var pageid=this.dataBeanInfo.dataBean.pageid;var restUrl=org.r3.PageManager.getRESTUrl('PUT_PageDescr_Detail',[pageid,aLanguageCode]);org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('pagetextactionform_fieldset_message');}
else
{$('#pagetextactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();$('#pagetextactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},retrievePageDescr:function(aLanguageCode,onComplete,onError)
{var method="GET";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('GET_PageDescr_Detail',[this.dataBeanInfo.dataBean.pageid,aLanguageCode]),org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var pageDescrDataBean=null;if(responseData)
{pageDescrDataBean=new org.r3.db.cms.pagedescr.PageDescrDTOAdapter(responseData);}
if(onComplete)
onComplete(pageDescrDataBean);},"error":function(jqXHR,timeout,message)
{console.error("org.r3.console.cms.cards.CardDetailActionForm: ",message);if(onError)
onError(message);}});}});$.r3Utils.namespace("org.r3.console.siteconfig.page");org.r3.console.siteconfig.page.PageDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.tabGenerale=null;this.tabCardText=null;},close:function()
{this.hide();},refresh:function()
{if(this.tabCardFile)
this.tabCardFile.refresh();if(this.tabGenerale)
this.tabGenerale.refresh();},open:function(aPageDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];if(aPageDTOAdapter)
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/page/PageDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_Page_Detail',[aPageDTOAdapter.dataBean.pageid]),dataType:"json"});networkRequestsQueue.push({id:"view_tabpagetext",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/page/PageDetailActionFormView_TabPageText.html'),dataType:"html"});networkRequestsQueue.push({id:"content_descr",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_PageDescr_Detail',[aPageDTOAdapter.dataBean.pageid,org.r3.Constants.language]),dataType:"json"});}
else
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/page/PageDetailActionFormView.html.jsp?mode=create'),dataType:"html"});}
networkRequestsQueue.push({id:"view_tabgenerale",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/page/PageDetailActionFormView_TabGenerale.html'),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_sys_recstatus'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_locale'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var pageDataBean=responseData['content'];if(pageDataBean)
{pageDataBean=new org.r3.db.cms.page.PageDTOAdapter(pageDataBean);}
var pageDescrDataBean=responseData['content_descr'];if(pageDescrDataBean)
{pageDescrDataBean=new org.r3.db.cms.pagedescr.PageDescrDTOAdapter(pageDescrDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#pageDetailActionForm_tab_generale').html(tmpl(responseData['view_tabgenerale'],{}));this.tabGenerale=new org.r3.console.siteconfig.page.PageDetailActionFormView_TabGenerale('__UNUSED__',this.actionFormManager,pageDataBean);if(pageDataBean)
{$('#pageDetailActionForm_tab_pagetext').html(tmpl(responseData['view_tabpagetext'],{}));this.tabPageText=new org.r3.console.siteconfig.page.PageDetailActionFormView_TabPageText('__UNUSED__',this.actionFormManager,pageDataBean,pageDescrDataBean);}
this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.console.siteconfig.page");org.r3.console.siteconfig.page.PageDetailActionFormView_TabGenerale=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aPageDataBean)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#pagedetailactionform_form .date_picker').datepicker({showOn:"button",buttonImage:org.r3.Constants.applicationContext+"/resources/img/calendar.gif",buttonImageOnly:true,dateFormat:"dd/mm/yy"});if(aPageDataBean==null)
{$('#pagedetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.createItem));$('.hideOnNewItem').hide();$('#pagedetailactionform_action_delete').hide();}
else
{var resolvedUrl=null;$('.hideOnNewItem').show();this._initializeFormFields(aPageDataBean);$('#pagedetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.updateItem));$('#pagedetailactionform_action_delete').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.deleteItem));$('#pagedetailactionform_action_delete').show();}
$('#pagedetailactionform_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.closeNewPagePanel));$('#pagedetailactionform_fieldset_message').formmessage({});$('#pagedetailactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.page.pagedetailactionform_form_validationRules,messages:org.r3.console.siteconfig.page.pagedetailactionform_form_validationMessages});},refresh:function()
{},_initializeFormFields:function(aPageDTOAdapter)
{$('#pagedetailactionform_pageid_label').html('['+aPageDTOAdapter.dataBean.pageid+']');$('#pagedetailactionform_pageid').val(aPageDTOAdapter.dataBean.pageid);$('#pagedetailactionform_pageid').prop('disabled',true);$('#pagedetailactionform_pagelink').val(aPageDTOAdapter.dataBean.pagelink);$('#pagedetailactionform_pageicon1').val(aPageDTOAdapter.dataBean.pageicon1);$('#pagedetailactionform_pageicon2').val(aPageDTOAdapter.dataBean.pageicon2);$('#pagedetailactionform_permissions').val(aPageDTOAdapter.dataBean.permissions);$('#pagedetailactionform_pageorder').val(aPageDTOAdapter.dataBean.pageorder);$('#pagedetailactionform_pagetitle').val(aPageDTOAdapter.dataBean.pagetitle);$('#pagedetailactionform_pagestyle').val(aPageDTOAdapter.dataBean.pagestyle);$('#pagedetailactionform_forwardview').val(aPageDTOAdapter.dataBean.forwardview);$('#pagedetailactionform_pagetype_'+aPageDTOAdapter.dataBean.pagetype).prop('checked',true);$('#pagedetailactionform_onuserstatus_'+aPageDTOAdapter.dataBean.onuserstatus).prop('checked',true);$('#pagedetailactionform_viewoptions').val(aPageDTOAdapter.dataBean.viewoptions);var visbilitySelectedOptions=aPageDTOAdapter.getVisibilityAsArray();if(visbilitySelectedOptions)
{for(var i=0;i<visbilitySelectedOptions.length;i++)
{$('#pagedetailactionform_visibility_'+visbilitySelectedOptions[i]).prop('checked',true);}}}});$.r3Utils.namespace("org.r3.console.siteconfig.page",window,function(aNamespace)
{aNamespace.pagedetailactionform_form_validationRules={pageid:{required:false,maxlength:25,identifier:true},pagetitle:{required:true,maxlength:80},pagelink:{required:true,maxlength:255},pageicon1:{required:false,maxlength:80},pageicon2:{required:false,maxlength:80},permissions:{required:false,maxlength:25},pageorder:{required:false,digits:true,maxlength:5},viewoptions:{required:false,maxlength:255}};aNamespace.pagedetailactionform_form_validationMessages={pageid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},pagetitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},pagelink:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},pageicon1:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},pageicon2:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},permissions:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},pageorder:{required:org.r3.message.field_required,digits:org.r3.message.field_digits,maxlength:org.r3.message.field_maxlength},viewoptions:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.siteconfig.page");org.r3.console.siteconfig.page.PageDetailActionFormView_TabPageText=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aPageDataBean,aPageDescrDataBean)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);$('#pagetextactionform_fieldset_message').formmessage({});$('#pagetextactionform_form_languagecode').unbind().change(function(e)
{var currentTarget=$(e.currentTarget);var l=currentTarget.val();_self.actionFormManager.retrievePageDescr(l,$.r3Utils.hitch(_self,_self.initializeFields),function(message)
{$('#pagetextactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_locale'),"selectWidget":$('#pagetextactionform_form_languagecode'),"selectedValue":org.r3.Constants.language});this.initializeFields(aPageDescrDataBean);$('#pagetextactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this.updateItem));$('#pagetextactionform_action_cancel').click(function(e){org.r3.PageManager.back();});$('#pagetextactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.page.pagetextactionform_form_validationRules,messages:org.r3.console.siteconfig.page.pagetextactionform_form_validationMessages});},updateItem:function()
{this.actionFormManager.updatePageDescr4Language($('#pagetextactionform_form_languagecode').val());},initializeFields:function(aPageDescrDataBean)
{$('#pagetextactionform_fieldset_message').formmessage('clear');if(aPageDescrDataBean!=null)
{$('#pagetextactionform_form_pageid_label').html('['+aPageDescrDataBean.dataBean.pageid+']');$('#pagetextactionform_form_pagetitle').val(aPageDescrDataBean.dataBean.pagetitle);$('#pagetextactionform_form_summary').val(aPageDescrDataBean.dataBean.summary);}
else
{$('#pagetextactionform_form_pagetitle').val(null);$('#pagetextactionform_form_summary').val(null);}}});$.r3Utils.namespace("org.r3.console.siteconfig.page",window,function(aNamespace)
{aNamespace.pagetextactionform_form_validationRules={pagetitle:{required:true,maxlength:80},summary:{required:true,maxlength:255}};aNamespace.pagetextactionform_form_validationMessages={pagetitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},summary:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.siteconfig.page");org.r3.console.siteconfig.page.PageQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.cms.page.PageQueryActionFormView(anHtmlActionFormContainerId,this,{dataTableId:'PageQueryActionFormView',layout:'fullWidth',iDisplayLength:25,gradeLevel:'grade_level2 grade_clickable',legend:org.r3.db.cms.page.message.queryactionformview_legend,dataTableSource:'GET_Pages',sortable:true,dataTableColumns:"pageid;sort,pagetitle;sort,pageorder;sort",onSelected:$.r3Utils.hitch(this,this.detailItem),onDblClick:null,onClearSelection:null,onClearSelection:null});},close:function()
{this.listView.hide();},open:function()
{this.listView.open();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},newItem:function()
{this.listView.hide();org.r3.console.cms.cards.PageManager.newCard();},detailItem:function(aDataBean)
{this.listView.hide();org.r3.console.siteconfig.PageManager.openDetailPagePanel(aDataBean);}});$.r3Utils.namespace("org.r3.console.siteconfig.site");org.r3.console.siteconfig.site.SiteDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.siteconfig.site.SiteDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{this.detailView.refresh();},open:function()
{this.detailView.open();},updateItem:function(onSuccessResponse,onErrorResponse,onRestDTOResponse)
{var _self=this;var currentSite=org.r3.Constants.site;var theForm=$('#sitedetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var restUrl=org.r3.PageManager.getRESTUrl('PUT_Site',[currentSite]);var method="put";org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);if(onRestDTOResponse)onRestDTOResponse(restDto);}
else
{if(onSuccessResponse)
{onSuccessResponse(responseData);}}},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onErrorResponse)onErrorResponse(jqXHR,timeout,message);}});}},uploadFile:function(aCardId)
{this.hide();this.pageManager.uploadSiteAssetFile(aCardId);},updateFileProperty:function(aCardId,aPropertyid,onSuccess)
{var theForm=$('#sitefileactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="put";var restUrl=org.r3.PageManager.getRESTUrl('PUT_CardProperty_File',[aCardId,aPropertyid]);org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('sitefileactionform_fieldset_message');}
else
{$('#sitefileactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});if(onSuccess)
onSuccess();}},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();$('#sitefileactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},deleteProperty:function(aCardPropertyDTOAdapter)
{var _self=this;var method="DELETE";var restUrl=null;var site=aCardPropertyDTOAdapter.dataBean.site;var cardId=aCardPropertyDTOAdapter.dataBean.cardid;var propertyId=aCardPropertyDTOAdapter.dataBean.propertyid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_CardProperty',[cardId,propertyId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();_self.detailView.refresh();},"error":function(jqXHR,timeout,message)
{console.error("GruppoDetailActionForm: ",message);}});}});$.r3Utils.namespace("org.r3.console.siteconfig.site");org.r3.console.siteconfig.site.SiteDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.tabGenerale=null;this.tabCardFile=null;this.tabCardGraphics=null;},close:function()
{this.hide();},refresh:function()
{if(this.tabCardFile)
this.tabCardFile.refresh();if(this.tabGenerale)
this.tabGenerale.refresh();if(this.tabCardGraphics)
this.tabCardGraphics.refresh();},open:function()
{var currentSite=org.r3.Constants.site;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/site/SiteDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SiteDetail',[currentSite]),dataType:"json"});networkRequestsQueue.push({id:"content_sail_event",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SailEventDetail',[currentSite]),dataType:"json"});networkRequestsQueue.push({id:"view_tabgenerale",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/site/SiteDetailActionFormView_TabGenerale.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_tabgraphics",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/site/SiteDetailActionFormView_TabCardGraphics.html.jsp'),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_sys_recstatus'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_locale'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var siteDataBean=responseData['content'];if(siteDataBean)
{siteDataBean=new org.r3.db.system.site.SiteDTOAdapter(siteDataBean);}
var sailEventDataBean=responseData['content_sail_event'];if(sailEventDataBean)
{sailEventDataBean=new org.r3.db.sailevent.event.SailEventDTOAdapter(sailEventDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#siteDetailActionForm_tab_generale').html(tmpl(responseData['view_tabgenerale'],{}));this.tabGenerale=new org.r3.console.siteconfig.site.SiteDetailActionFormView_TabGenerale('__UNUSED__',this.actionFormManager,siteDataBean,sailEventDataBean);this.tabCardFile=new org.r3.console.siteconfig.site.SiteDetailActionFormView_TabCardFile('#siteDetailActionForm_tab_cardfile',this.actionFormManager,siteDataBean);if(org.r3.SiteConstants.is10Gen())
{$('#siteDetailActionForm_tab_sitegraphics').html(tmpl(responseData['view_tabgraphics'],{}));this.graphicActionFormView=new org.r3.jsportlet.imageupload.ImageUploadActionFormView('#graphicsactionform_uploadimage_canvas',this);this.tabCardGraphics=new org.r3.console.siteconfig.site.SiteDetailActionFormView_TabCardGraphics('__UNUSED__',this.actionFormManager,this.graphicActionFormView);}
this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.console.siteconfig.site");org.r3.console.siteconfig.site.SiteDetailActionFormView_TabCardFile=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aSiteDataBean)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.siteCardId=aSiteDataBean.dataBean.cardid;this.fileView=new org.r3.db.cms.cardproperty.CardPropertyQueryActionFormView(anHtmlActionFormContainerId,this.actionFormManager,{dataTableId:'CardSiteFileQueryActionFormView',showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/console/siteconfig/site/SiteDetailActionFormView_TabCardFile.html.jsp",gradeLevel:'grade_level1',legend:org.r3.console.siteconfig.site.message.siteDetailActionForm_tab_cardfile,dataTableSource:org.r3.PageManager.getRESTUrl('GET_CardFiles',[aSiteDataBean.dataBean.cardid]),dataTableColumns:"propertyid,propertytypecode,propertyname,propertyrole,contenttype,propertysize,imagesize,iconsize",requiredLUTs:["GET_classifier_sys_recstatus"],onSelected:$.r3Utils.hitch(this,function(aCardPropertyDTOAdapter){$('#tabfile_deleteItem').prop('disabled',false);this.propertyDetail(aCardPropertyDTOAdapter);}),onDblClick:null,buttons:[{id:'tabfile_uploadfile',label:org.r3.message.action_upload,disabled:false,onClick:$.r3Utils.hitch(this,this._onUploadFile)},{id:'tabfile_deleteItem',label:org.r3.message.action_delete,disabled:true,onClick:$.r3Utils.hitch(this,this.propertyDelete)}],onClearSelection:function(){$('#tabfile_deleteItem').prop('disabled',true);},onInitializationComplete:$.r3Utils.hitch(this,function(){$('#sitefileactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.sitefileactionform_form_validationRules,messages:org.r3.console.siteconfig.sitefileactionform_form_validationMessages});$('#sitefileactionform_fieldset_message').formmessage({});$('#sitefileactionform_form_cardid_label').html('['+_self.siteCardId+']');$('#sitefileactionform_action_saveitem').unbind().click($.r3Utils.hitch(_self,_self.updateProperty));$('#sitefileactionform_action_ctlcurl').unbind().click(function(e){window.prompt("Per copiare premere i tasti Ctrl+C e successivamente Invio",$('#sitefileactionform_form_url').html());});})});this.fileView.open();},propertyDetail:function(aCardPropertyAdapterDTO)
{$('#sitefileactionform_form_propertyid').attr('value',aCardPropertyAdapterDTO.dataBean.propertyid);$('#sitefileactionform_form_propertytypecode').attr('value',aCardPropertyAdapterDTO.dataBean.propertytypecode);this.showDetail(aCardPropertyAdapterDTO);$('#sitefileactionform_form_propertyname').val(aCardPropertyAdapterDTO.dataBean.propertyname);var s=aCardPropertyAdapterDTO.dataBean.contenttype+' - '+aCardPropertyAdapterDTO.dataBean.propertysize;$('#sitefileactionform_form_propertytypesize').html(s);$('#sitefileactionform_form_propertyvalue').html(aCardPropertyAdapterDTO.dataBean.propertyvalue);$('#sitefileactionform_form_propertyvalue').unbind().click(function(e){org.r3.PageManager.viewDocument(aCardPropertyAdapterDTO.dataBean.propertyvalue);});$('#sitefileactionform_form_url').html($.r3Utils.formatDMSUrl4ClientAccess(aCardPropertyAdapterDTO.dataBean.propertyvalue));var iconUrl=org.r3.Constants.cms_default_icon;if(aCardPropertyAdapterDTO.isImage())
{if(aCardPropertyAdapterDTO.hasIcon())
{iconUrl=aCardPropertyAdapterDTO.dataBean.iconurl;}}
org.r3.PageManager.loadImage(iconUrl,{maxWidth:100,maxHeight:100},function(img){$('#sitefileactionform_form_icon').html(img);});},refresh:function()
{this.fileView.refresh();},propertyDelete:function()
{if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{this.hideDetail();var selectedItem=this.fileView.fnGetSelectedDataBean();this.actionFormManager.deleteProperty(selectedItem,$.r3Utils.hitch(this,function(e)
{this.actionFormManager.refresh();}));}},updateProperty:function()
{console.log("Whatever: ",this);this.actionFormManager.updateFileProperty(this.siteCardId,$('#sitefileactionform_form_propertyid').val(),$.r3Utils.hitch(this,function(e)
{this.actionFormManager.refresh();}));},hideDetail:function()
{$('#sitefileactionform_action_bar').hide();$('#sitefileactionform_detail_container').hide();},showDetail:function(aCardPropertyAdapterDTO)
{$('#sitefileactionform_fieldset_message').formmessage('clear');$('#sitefileactionform_detail_container').show();$('#sitefileactionform_action_bar').show();},_onUploadFile:function()
{this.actionFormManager.uploadFile(this.siteCardId);}});$.r3Utils.namespace("org.r3.console.siteconfig.site",window,function(aNamespace)
{aNamespace.sitefileactionform_form_validationRules={propertyname:{required:true,maxlength:80}};aNamespace.sitefileactionform_form_validationMessages={propertyname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.siteconfig.site");org.r3.console.siteconfig.site.SiteDetailActionFormView_TabCardGraphics=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aLoadGraphicView)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.loadGraphicActionFormView=aLoadGraphicView;this._populateSelectField({"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#graphicsactionform_cms_attachtype')});$('#graphicsactionform_cms_attachtype').unbind().change(function(e)
{var currentTarget=$(e.currentTarget);var l=currentTarget.val();_self.processGraphic(l);});},refresh:function()
{},processGraphic:function(aGraphicType)
{var _self=this;var currentSite=org.r3.Constants.site;org.r3.AjaxUtils.ajaxInvoke('get',org.r3.PageManager.getRESTUrl('GET_SiteCollection_Detail',[currentSite]),function(responseData)
{var siteCollectionDTOAdapter=null;if(responseData)
{siteCollectionDTOAdapter=new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(responseData);var mongoImage=siteCollectionDTOAdapter.getGraphicByRole('image',aGraphicType);console.log(mongoImage);_self.loadGraphicActionFormView.open(_self._getGraphicsUploadFor(aGraphicType,mongoImage));}});},_getGraphicsUploadFor:function(aGraphicType,mongoImage)
{var cfg=org.r3.db.mongo.sitecollection.SiteCollectionGraphicsConfig;if(cfg&&cfg.length)
{for(var i=0;i<cfg.length;i++)
{if(cfg[i].name==aGraphicType)
{var actualValue={"cssClassName":"css_"+aGraphicType,"extraInfo":cfg[i].extraInfo,"aspectRatio":cfg[i].aspectRatio,"maxSize":cfg[i].maxSize,"templateFile":cfg[i].templateFile,"uploadUrl":org.r3.PageManager.getRESTUrl(cfg[i].uploadUrl,[org.r3.Constants.site]),"currentImageUrl":cfg[i].currentImageUrl,"imageCanvasIdHash":cfg[i].imageCanvasIdHash,"inputFileTriggerSelector":cfg[i].inputFileTriggerSelector};var u=mongoImage&&mongoImage.getUrl();if(u)
{actualValue.currentImageUrl=mongoImage&&mongoImage.getUrl();}
return actualValue;}}}
return null;},_populateSelectField:function(aConfigOpts)
{var selectOptions=aConfigOpts.selectWidget.prop('options');selectOptions.length=0;if(aConfigOpts.blankOptionText)
selectOptions[selectOptions.length]=new Option(aConfigOpts.blankOptionText,'');var cfg=org.r3.db.mongo.sitecollection.SiteCollectionGraphicsConfig;if(cfg&&cfg.length)
{for(var i=0;i<cfg.length;i++)
{selectOptions[selectOptions.length]=new Option(cfg[i].description,cfg[i].name);}}}});$.r3Utils.namespace("org.r3.console.siteconfig.site");org.r3.console.siteconfig.site.SiteDetailActionFormView_TabGenerale=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aSiteDataBean,aSailEventDataBean)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#sitedetailactionform_form .date_picker').datepicker({showOn:"button",buttonImage:org.r3.Constants.applicationContext+"/resources/img/calendar.gif",buttonImageOnly:true,dateFormat:"dd/mm/yy"});$('#sitedetailactionform_fieldset_message').formmessage({});$('#sitedetailactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.siteconfig.site.sitedetailactionform_form_validationRules,messages:org.r3.console.siteconfig.site.sitedetailactionform_form_validationMessages});this._initializeFormFields(aSiteDataBean,aSailEventDataBean);$('#sitedetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));},refresh:function()
{},_onUpdateItem:function()
{this.actionFormManager.updateItem(function(responseData){},function(jqXHR,timeout,message){$('#sitedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},function(restDto){restDto.showMessage('sitedetailactionform_fieldset_message');});},_initializeFormFields:function(aSiteDTOAdapter,aSailEventDTOAdapter)
{var urlHome="/r3ng/"+aSiteDTOAdapter.dataBean.site+"/it/org/r3/home.do";$('#regattadetailactionform_form_urlhome').html(urlHome);$('#regattadetailactionform_form_urlhome').unbind().click(function(e){var w=window.open(urlHome,"Site_Window_"+aSiteDTOAdapter.dataBean.site);w.focus();});var urlConsoleHome="/r3ng/"+aSiteDTOAdapter.dataBean.site+"/it/org/r3/console/home.do";$('#regattadetailactionform_form_urlhomeconsole').html(urlConsoleHome);$('#regattadetailactionform_form_urlhomeconsole').unbind().click(function(e){var w=window.open(urlConsoleHome,"Site_Window_Console_"+aSiteDTOAdapter.dataBean.site);w.focus();});$('#regattadetailactionform_site').val(aSiteDTOAdapter.dataBean.site);$('#regattadetailactionform_site').prop('disabled',true);$('#regattadetailactionform_sitedescr').val(aSiteDTOAdapter.dataBean.sitedescr);if(aSiteDTOAdapter.dataBean.siteresourcepath&&aSiteDTOAdapter.dataBean.siteresourcepath!='default')
{var selectOptions=$('#regattadetailactionform_siteresourcepath').prop('options');selectOptions[selectOptions.length]=new Option(aSiteDTOAdapter.dataBean.siteresourcepath,aSiteDTOAdapter.dataBean.siteresourcepath,true,true);}
$('#regattadetailactionform_sitetheme').val(aSiteDTOAdapter.dataBean.sitetheme);var summary=aSiteDTOAdapter.dataBean.sitesummary;if(aSailEventDTOAdapter)
{summary=aSailEventDTOAdapter.dataBean.eventdescr;}
$('#regattadetailactionform_eventdescr').val(summary);}});$.r3Utils.namespace("org.r3.console.siteconfig.site",window,function(aNamespace)
{aNamespace.sitedetailactionform_form_validationRules={sitedescr:{required:true,maxlength:40},siteresourcepath:{required:true},sitetheme:{required:true},eventdescr:{required:true,maxlength:128}};aNamespace.sitedetailactionform_form_validationMessages={sitedescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},siteresourcepath:{required:org.r3.message.field_required},sitetheme:{required:org.r3.message.field_required},eventdescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.siteconfig.site");org.r3.console.siteconfig.site.UploadFileActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anUploadFileViewContainerId)
{this.setPageManager(aPageManager);this.uploadFileView=new org.r3.console.siteconfig.site.UploadFileActionFormView(anUploadFileViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.uploadFileView.hide();},show:function()
{this.uploadFileView.show();},open:function(aCardId)
{this.setDataBeanInfo(aCardId);this.uploadFileView.open(aCardId);},uploadFile:function()
{},releaseSession:function()
{if(this.uploadFileView.isPendingUpload())
{if(!org.r3.PageManager.confirmation("org.r3.console.cms.cards.message.pendingUploads"))
return;}}});$.r3Utils.namespace("org.r3.console.siteconfig.site");org.r3.console.siteconfig.site.UploadFileActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.uploadedFiles=[];},close:function()
{this.hide();},isPendingUpload:function()
{if(this.uploadedFiles&&this.uploadedFiles.length)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(this.uploadedFiles[i].pending)
return true;}
return false;},_clearFilenamesQueue:function()
{this.uploadedFiles.length=0;},_findEnqueuedFilename:function(aFileName)
{if(this.uploadedFiles&&this.uploadedFiles.length&&aFileName)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(aFileName==this.uploadedFiles[i].fname)
return i;}
return-1;},_enqueueFilename4Uploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Enqueue: "+aFileName);this.uploadedFiles.push({fname:aFileName,pending:true});}},_markEnqueuedFileAsCompleted:function(aFileName)
{if(aFileName)
{console.info("Trying to Mark File as Completed: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Mark: "+aFileName);this.uploadedFiles[fileNdx].pending=false;}}},_dequeueFilenameFromUploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Dequeue: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Dequeuing: "+aFileName);this.uploadedFiles.splice(fileNdx,1);}}},open:function(aCardId)
{org.r3.PageManager.wait("org.r3.message.waiting");this._clearFilenamesQueue();var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/siteconfig/site/UploadFileActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var this_actionFormView=this;org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_CMS_Attachtype_site'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#uploadfileactionform_form_cms_attachtype')});$("#uploadfileactionform_form").validate({meta:"validate"});var aRestUrl=org.r3.PageManager.getRESTUrl('POST_Card_File',[aCardId]);if(r3_IE)
aRestUrl=org.r3.PageManager.getRESTUrl('POST_Card_File_IE',[aCardId]);var fileTypes=org.r3.message.getDefaultAcceptedCMSFileTypes();var acceptedType='png';if(fileTypes&&fileTypes.length>0)
{if(fileTypes.length==1)
acceptedType=fileTypes[0];else
{acceptedType='';for(var i=0;i<fileTypes.length;i++)
{if(i>0)
acceptedType+='|';acceptedType=acceptedType+fileTypes[i];}}}
var rexp=new RegExp(".+\\.("+acceptedType+")$","i");$('#uploadfileactionform_form').fileupload({"acceptFileTypes":rexp,"url":aRestUrl,"dataType":'json',"sequentialUploads":true,"formAcceptCharset":"utf-8","submit":function(e,data)
{console.info("Submitting: ",e,data,data.files[0].name);if(!$("#uploadfileactionform_form").valid())
return false;return true;},"failed":function(e,data)
{console.info("Failing: ",e,data);console.info("Should Dequeue: ",data.files.valid,data.files[0].name);if(data.files.valid)
this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);return true;},"completed":function(e,data)
{console.info("Done: ",e,data);console.info("Done: is Error? "+data.result.files[0].error);if(data.result.files[0].error)
{this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
else this_actionFormView._markEnqueuedFileAsCompleted(data.files[0].name);return true;}});$('#uploadfileactionform_form_action_releasesession').button().unbind().click($.r3Utils.hitch(org.r3.PageManager,org.r3.PageManager.back));this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.console.system.resturls");org.r3.console.system.resturls.PageManager={init:function()
{this.simpleUrlInvokationActionForm=new org.r3.console.system.resturls.SimpleURLInvokationActionForm(this,'#pageWorkCanvas');org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createGSideBar();},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.csshoverenabled=false;gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'act_initcalendar',title:org.r3.console.system.resturls.message.gmenubar_act_initcalendar_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:false,icon:'user-plus'});sect1.items.push({id:'act_processmailqueue',title:org.r3.console.system.resturls.message.gmenubar_act_processmailqueue_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:false,icon:'user-plus'});sect1.items.push({id:'act_processfivcardqueue',title:org.r3.console.system.resturls.message.gmenubar_act_processfivcardqueue_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:false,icon:'user-plus'});sect1.items.push({id:'act_processfivcardqueuer',title:org.r3.console.system.resturls.message.gmenubar_act_processfivcardqueuer_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:false,icon:'user-plus'});sect1.items.push({id:'act_processeventqueue',title:org.r3.console.system.resturls.message.gmenubar_act_processeventqueue_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:false,icon:'user-plus'});sect1.items.push({id:'act_lutinvalidate',title:org.r3.console.system.resturls.message.gmenubar_act_lutinvalidate_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:false,icon:'user-plus'});sect1.items.push({id:'act_lutreload',title:org.r3.console.system.resturls.message.gmenubar_act_lutreload_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:false,icon:'user-plus'});$('#gsidebar-navanchor').gsidebar(gsidebarCfg);},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newcontact')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openNewActorPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_initcalendar':this.mngmt_initcalendar();break;case'act_processmailqueue':this.mngmt_processmailqueue();break;case'act_processfivcardqueue':this.mngmt_processfivcardqueue();break;case'act_processfivcardqueuer':this.mngmt_processfivcardqueuer();break;case'act_processeventqueue':this.mngmt_processeventqueue();break;case'act_lutinvalidate':this.mngmt_lutinvalidate();break;case'act_lutreload':this.mngmt_lutreload();break;default:break;}}}},mngmt_initcalendar:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Rest URLs Methods","actionForm":this.simpleUrlInvokationActionForm});this.simpleUrlInvokationActionForm.open("POST",org.r3.Constants.applicationContext+"/was/default/it/system/calendar/initialize;calperiod=true;calendarid=default;startdate=20150101;startday=1;length=6575");},mngmt_processmailqueue:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Rest URLs Methods","actionForm":this.simpleUrlInvokationActionForm});this.simpleUrlInvokationActionForm.open("POST",org.r3.Constants.applicationContext+"/was/default/it/system/queues/mailqueue/process");},mngmt_processfivcardqueue:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Rest URLs Methods","actionForm":this.simpleUrlInvokationActionForm});this.simpleUrlInvokationActionForm.open("POST",org.r3.Constants.applicationContext+"/was/default/it/system/queues/fivcardqueue/process");},mngmt_processfivcardqueuer:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Rest URLs Methods","actionForm":this.simpleUrlInvokationActionForm});this.simpleUrlInvokationActionForm.open("POST",org.r3.Constants.applicationContext+"/was/default/it/system/script/execute/RetryQueueSQLScript");},mngmt_processeventqueue:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Rest URLs Methods","actionForm":this.simpleUrlInvokationActionForm});this.simpleUrlInvokationActionForm.open("POST",org.r3.Constants.applicationContext+"/was/default/it/system/queues/eventqueue/process");},mngmt_lutinvalidate:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Rest URLs Methods","actionForm":this.simpleUrlInvokationActionForm});this.simpleUrlInvokationActionForm.open("POST",org.r3.Constants.applicationContext+"/was/default/it/system/lut/invalidate");},mngmt_lutreload:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Rest URLs Methods","actionForm":this.simpleUrlInvokationActionForm});this.simpleUrlInvokationActionForm.open("POST",org.r3.Constants.applicationContext+"/was/default/it/system/lut/reload");}};$.r3Utils.namespace("org.r3.console.system.resturls");org.r3.console.system.resturls.SimpleURLInvokationActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.system.resturls.SimpleURLInvokationActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(theMethod,theUrlToInvoke)
{console.log("SimpleURLInvokationActionForm::open",theMethod,theUrlToInvoke);this.detailView.open(theMethod,theUrlToInvoke);this.show();},execute:function()
{var _self=this;var theForm=$('#simpleurlinvokationactionform_form');this.detailView.clear();var restUrl=$('#simpleurlinvokationactionform_form_url').val();var method=$('#simpleurlinvokationactionform_form_method').val();if(theForm.valid())
{org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(!responseData)
$('#simpleurlinvokationactionform_form_riesponsedata').val("ResponseData is empty");else
{var str=JSON.stringify(responseData,undefined,2);$('#simpleurlinvokationactionform_form_riesponsedata').val(str);}},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();$('#simpleurlinvokationactionform_form_riesponsedata').val(message);}});}}});$.r3Utils.namespace("org.r3.console.system.resturls");org.r3.console.system.resturls.SimpleURLInvokationActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},clear:function()
{$('#simpleurlinvokationactionform_form_responsedata').val();},open:function(anHttpMethod,aUrlToInvoke)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/system/resturls/SimpleURLInvokationActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$('#simpleurlinvokationactionform_form_url').val(aUrlToInvoke);$('#simpleurlinvokationactionform_form_method').val(anHttpMethod);$('#simpleurlinvokationactionform_form_responsedata').val();$('#simpleurlinvokationactionform_action_execute').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.execute));this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.console.system.tutorials");org.r3.console.system.tutorials.PageManager={init:function()
{this.simpleUrlInvokationActionForm=new org.r3.console.system.tutorials.SimpleURLInvokationActionForm(this,'#pageWorkCanvas');org.r3.PageManager.pushHomeConsoleBreadCrumb();this.createGSideBar();},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.csshoverenabled=false;gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'act_videotutorials',title:org.r3.console.system.tutorials.message.gmenubar_act_videotutorials_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:false,icon:'video-camera'});$('#gsidebar-navanchor').gsidebar(gsidebarCfg);},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newcontact')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openNewActorPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_videotutorials':this.mngmt_videotutorials();break;default:break;}}}},mngmt_videotutorials:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Rest URLs Methods","actionForm":this.simpleUrlInvokationActionForm});this.simpleUrlInvokationActionForm.open("POST",org.r3.Constants.applicationContext+"/was/default/it/system/calendar/initialize;calperiod=true;calendarid=default;startdate=20150101;startday=1;length=6575");}};$.r3Utils.namespace("org.r3.console.system.tutorials");org.r3.console.system.tutorials.SimpleURLInvokationActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.system.tutorials.SimpleURLInvokationActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(theMethod,theUrlToInvoke)
{console.log("SimpleURLInvokationActionForm::open",theMethod,theUrlToInvoke);this.detailView.open(theMethod,theUrlToInvoke);this.show();}});$.r3Utils.namespace("org.r3.console.system.tutorials");org.r3.console.system.tutorials.SimpleURLInvokationActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},clear:function()
{},open:function(anHttpMethod,aUrlToInvoke)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/system/tutorials/SimpleURLInvokationActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.console.tow");org.r3.console.tow.PageManager={init:function()
{this.wbsQueryActionForm=new org.r3.console.tow.WBSQueryActionForm(this,'#towQueryActionForm');this.wbsActionForm=new org.r3.console.tow.WBSActionForm(this,'#towActionForm');this.teamMembersActionForm=new org.r3.jsportlet.teammemberprofile.TeamMemberProfileActionForm(this,'#teamMemberProfileDetailActionForm','#teamMemberProfileQueryActionForm');this.createGSideBar();org.r3.PageManager.pushHomeConsoleBreadCrumb();this.openWBSQueryActionFormPanel();},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'gmenubar_act_newwbs',title:org.r3.console.tow.message.gmenubar_act_newwbs,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'plus'});sect1.items.push({id:'act_query_wbs',title:org.r3.console.tow.message.act_query_wbs,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'table'});sect1.items.push({id:'act_query_teammembers',title:org.r3.console.tow.message.act_query_teammembers,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'users'});$('#gsidebar-navanchor').gsidebar(gsidebarCfg);},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newwbs')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openWBSPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_query_wbs':this.openWBSQueryActionFormPanel();break;case'act_query_teammembers':this.openTeamMemberQueryActionFormPanel();break;default:break;}}}},openWBSPanel:function(aWbsDtoAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.tow.message.wbs_breadcrumb,"actionForm":this.wbsActionForm});this.wbsActionForm.open(aWbsDtoAdapter);},closeWBSPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openWBSQueryActionFormPanel();},openWBSQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.tow.message.list_of_wbs_breadcrumb,"actionForm":this.wbsQueryActionForm});this.wbsQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_query_wbs');},openTeamMemberQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.tow.message.list_of_teammembers_breadcrumb,"actionForm":this.teamMembersActionForm});this.teamMembersActionForm.open(org.r3.Constants.site);$('#gsidebar-navanchor').gsidebar('select','act_query_teammembers');}};$.r3Utils.namespace("org.r3.console.tow",window,function(aNamespace)
{aNamespace.wbsnodeactionform_form_validationRules={nodename:{required:true,maxlength:40},startdate:{required:true},enddate:{required:true},nodesummary:{required:true,maxlength:255}};aNamespace.wbsnodeactionform_form_validationMessages={nodename:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},startdate:{required:org.r3.message.field_required},enddate:{required:org.r3.message.field_required},nodesummary:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.tow");org.r3.console.tow.TabWBSNode_Detail_WBSActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aWBSDtoAdapter)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.wbsId=aWBSDtoAdapter.dataBean.wbsid;$('#wbsnodeactionform_fieldset_message').formmessage({});$('#wbsnodeactionform_form .r3_datepicker').datepicker({format:"dd/mm/yyyy"});$('#wbsnodeactionform_nodetype').unbind().change(function(e)
{var currentTarget=$(e.currentTarget);var l=currentTarget.val();_self._setNodeType(l);});$('#wbsnodeactionform_form').validate({ignore:[],errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.tow.wbsnodeactionform_form_validationRules,messages:org.r3.console.tow.wbsnodeactionform_form_validationMessages});$('#wbsnodeactionform_action_saveitem').click($.r3Utils.hitch(this,this._onSaveItem));},startNodeEditing:function(actionContext)
{this.actionContext=actionContext;switch(actionContext.action)
{case'none':this.hide();break;case'add':this.show();$('#wbsnodeactionform_action_saveitem').prop('disabled',false);this._startAddingNode();break;case'update':this._initializeFields(actionContext.nodeObj);this.show();$('#wbsnodeactionform_action_saveitem').prop('disabled',false);break;}},_startAddingNode:function()
{this._resetForm();this._setNodeType('towgroup');},_resetForm:function()
{$('#wbsnodeactionform_nodetype').val('node');$('#wbsnodeactionform_nodename').val('');$('#wbsnodeactionform_form_startdate').val('');$('#wbsnodeactionform_form_enddate').val('');$('#wbsnodeactionform_nodesummary').val('');$('.teameffort').val("");},_initializeFields:function(aNodeObj)
{var aWBSNodeDTOAdapter=aNodeObj.node.nodeUserData;$('#wbsnodeactionform_nodetype').val(aWBSNodeDTOAdapter.dataBean.nodetype);$('#wbsnodeactionform_nodename').val(aWBSNodeDTOAdapter.dataBean.nodename);$('#wbsnodeactionform_form_startdate').val(aWBSNodeDTOAdapter.getStartdate());$('#wbsnodeactionform_form_enddate').val(aWBSNodeDTOAdapter.getEnddate());$('#wbsnodeactionform_nodesummary').val(aWBSNodeDTOAdapter.dataBean.nodesummary);this._setNodeType(aWBSNodeDTOAdapter.dataBean.nodetype);this._populateTeamMemberSection(aWBSNodeDTOAdapter.dataBean.wbsid,aWBSNodeDTOAdapter.dataBean.wbsnodeid);},_populateTeamMemberSection:function(aWbsId,aWbsNodeId)
{$.ajax({"type":"GET","url":org.r3.PageManager.getRESTUrl('GET_WBSNode_TeamProfile',[aWbsId,aWbsNodeId]),"dataType":"json","success":function(responseData)
{if(responseData)
{var wbsNodeTeamMemberProfileDTOTableAdapter=new org.r3.db.DTOTableAdapter(responseData,function(aRowDataBean){return new org.r3.db.project.wbsnodeteammemberprofile.WBSNodeTeamMemberProfileDTOAdapter(aRowDataBean);});var numItems=wbsNodeTeamMemberProfileDTOTableAdapter.getNumberOfItems();if(numItems>0)
{for(var i=0;i<numItems;i++)
{var item=wbsNodeTeamMemberProfileDTOTableAdapter.getItem(i);var fieldId="#wbsnodeactionform_teameffort_"+item.dataBean.profileid;$(fieldId).val(item.dataBean.effort);if(i==0)
{$('#wbsnodeactionform_teameffortunit').val(item.dataBean.uniteffort);}}}}},"error":function(jqXHR,timeout,message)
{console.error("_populateTeamMemberSection - Errore Getting Current TeamMember Config: ",message);}});},_setNodeType:function(aNodeType)
{$('.teameffort').val("");switch(aNodeType)
{case'tow':$('#wbsnodeactionform_form_startdate').prop('disabled',false);$('#wbsnodeactionform_form_enddate').prop('disabled',false);break;default:$('#wbsnodeactionform_form_startdate').val('');$('#wbsnodeactionform_form_enddate').val('');$('#wbsnodeactionform_form_startdate').prop('disabled',true);$('#wbsnodeactionform_form_enddate').prop('disabled',true);break;}},_onSaveItem:function()
{var _self=this;var theForm=$('#wbsnodeactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{if(this.actionContext.action=='add')
{this.actionFormManager.createWBSNode(this.actionContext,function(responseData){var isError=true;if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('wbsnodeactionform_fieldset_message');}
else
{isError=false;$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});_self.hide();}
return isError;},function(jqXHR,timeout,message){$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}
else
{if(this.actionContext.action=='update')
{this.actionFormManager.updateWBSNode(this.actionContext,function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('wbsnodeactionform_fieldset_message');}
else
{$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}}}}});$.r3Utils.namespace("org.r3.console.tow");org.r3.console.tow.TabWBSNode_Miller_WBSActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aWBSDtoAdapter)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.wbsId=aWBSDtoAdapter.dataBean.wbsid;this.actionContext={action:'none'};this.itemIdCounter=100;this.selectedItem=null;this.selectedGroup=null;$('#wbsnodeform_fieldset_message').formmessage({text:org.r3.jsportlet.wbs.message.wbsmillertip,category:'info'});$('#wbs_miller').gmiller({rootNodeId:aWBSDtoAdapter.dataBean.wbsid,rootNodeName:aWBSDtoAdapter.dataBean.wbstitle,nodeMove:true,onFetch:$.r3Utils.hitch(this,this._fetchNodeChildren),onSelect:$.r3Utils.hitch(this,this._nodeSelected),onClearActiveContainer:$.r3Utils.hitch(this,this._stopNodeEditing),onSort:$.r3Utils.hitch(this,this._onSort),onMove:$.r3Utils.hitch(this,this._onMove),renderHtml4NewNode:$.r3Utils.hitch(this,this._renderNode),buttons:[{id:"action_showwbs",caption:org.r3.jsportlet.wbs.message.wbsnodemanager_milleraction_outline,showOn:'first',enabled:'always',onClick:$.r3Utils.hitch(this,this._onWBSOutlineDisplay)},{id:"action_add",caption:org.r3.jsportlet.wbs.message.wbsnodemanager_milleraction_add,enabled:'onRefNode',showOn:'all',onClick:$.r3Utils.hitch(this,this._onAddNode)},{id:"action_delete",caption:org.r3.jsportlet.wbs.message.wbsnodemanager_milleraction_delete,showOn:'all',enabled:'onSelection',onClick:$.r3Utils.hitch(this,this._onDeleteNode)}]});$('#action_updatewbsnumbering').unbind().click($.r3Utils.hitch(this,this._onWBSOutlineUpdate));},dummy_fetchNodeChildren:function(aParentNodeId,treeLevel,onSuccess)
{var fetchedDataArray=[];for(var i=0;i<7;i++)
{var n={"dtokey":"Key_"+treeLevel+"_"+_self.itemIdCounter,"dtodescr":"Descr_"+treeLevel+"_"+_self.itemIdCounter};_self.itemIdCounter++;fetchedDataArray.push(n);}
onSuccess(fetchedDataArray,fetchedDataArray.length);},_nodeSelected:function(aSortableContainerId,aParentNodeId,aNodeId,aNodePosition,aNodeObj)
{console.log("ONSELECT - sid: "+aSortableContainerId+" parent: "+aParentNodeId+" node: "+aNodeId+" position: "+aNodePosition);this.actionContext.action='update';this.actionContext.sortableContainerId=aSortableContainerId;this.actionContext.parentNodeId=aParentNodeId;this.actionContext.nodeId=aNodeId;this.actionContext.nodePosition=aNodePosition;this.actionContext.nodeObj=aNodeObj;this.actionFormManager.detailView.startNodeEditing(this.actionContext);},_stopNodeEditing:function()
{this.actionContext.action='none';this.actionFormManager.detailView.startNodeEditing(this.actionContext);},_renderNode:function(nodeData)
{var nodeClass=nodeData.getCustomCSSClassName();if(nodeClass)
nodeClass="class='"+nodeClass+"'";var summary=nodeData.dataBean.nodesummary;if(summary&&summary.length>30)
summary=summary.substring(0,27)+'...';var h=$("<li id='"+nodeData.getNodeId()+"' "+nodeClass+">"
+"<div><b>"+nodeData.dataBean.nodename+"</b><br />"+summary+"</div>"
+"</li>");return h;},_onAddNode:function(aSortableContainerId,aParentNodeId,aSelectedNodeId){console.log("Clicked...."+aSortableContainerId+" on "+aSelectedNodeId+" within "+aParentNodeId);this.actionContext.action='add';this.actionContext.sortableContainerId=aSortableContainerId;this.actionContext.parentNodeId=aParentNodeId;this.actionFormManager.detailView.startNodeEditing(this.actionContext);return false;},addNode:function(aSortableContainerId,aParentNodeId,nodeInfo)
{$('#wbs_miller').gmiller('add',aSortableContainerId,aParentNodeId,nodeInfo);},refreshMillerView:function(aSortableContainerId,aNode)
{$('#wbs_miller').gmiller('refresh',aSortableContainerId,aNode);this._hideWBSOutline();},_onWBSOutlineUpdate:function()
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var method="PUT";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('PUT_WBSNodes_OutlineNumbering',[this.wbsId]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var dtoAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData);var renderedOutline=tmpl("tpl_wbsoutline",{"wbs":dtoAdapter});$('.wbs_outline').html(renderedOutline);_self._showWBSOutline();location.href='#wbs_outline_anchor';},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});},_onWBSOutlineDisplay:function(aSortableContainerId,aParentNodeId,aSelectedNodeId)
{var _self=this;var method="GET";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('GET_WBSTree',[this.wbsId]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{var dtoAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData);var renderedOutline=tmpl("tpl_wbsoutline",{"wbs":dtoAdapter});$('.wbs_outline').html(renderedOutline);_self._showWBSOutline();location.href='#wbs_outline_anchor';var teamDashBoard=new org.r3.jsportlet.project.dashboard.TeamWBSNodeTabularDashBoardActionFormView("#wbs_teamprofile",this.actionFormManager);teamDashBoard.open(_self.wbsId,org.r3.Constants.site);},"error":function(jqXHR,timeout,message)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});},_showWBSOutline:function()
{var wbsObject=$('.wbs');if(wbsObject.hasClass('wbs_collapsed'))
wbsObject.toggleClass('wbs_collapsed');if($('.wbs .wbs_outline .invalid').length)
{$('#wbsoutline_actonbar').show();$('#action_updatewbsnumbering').prop('disabled',false);}
else
{$('#wbsoutline_actonbar').hide();$('#action_updatewbsnumbering').prop('disabled',true);}},_hideWBSOutline:function()
{var wbsObject=$('.wbs');if(!wbsObject.hasClass('wbs_collapsed'))
wbsObject.toggleClass('wbs_collapsed');},_onDeleteNode:function(aSortableContainerId,aParentNodeId,aSelectedNodeId)
{console.log("Clicked...."+aSortableContainerId+" on "+aSelectedNodeId+" within "+aParentNodeId);if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{this._hideWBSOutline();this.actionContext.action='none';this.actionFormManager.detailView.startNodeEditing(this.actionContext);var restUrl=org.r3.PageManager.getRESTUrl('DELETE_WBSNode',[this.wbsId,aSelectedNodeId]);$.ajax({"type":"DELETE","url":restUrl,"dataType":"json","success":function(responseData)
{$('#wbs_miller').gmiller('remove',aSortableContainerId,aParentNodeId,aSelectedNodeId);},"error":function(jqXHR,timeout,message)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}
return false;},_fetchNodeChildren:function(aParentNodeId,treeLevel,onSuccess)
{var restUrl=org.r3.PageManager.getRESTUrl('GET_WBSNodeChildren',[this.wbsId,aParentNodeId]);$.ajax({"type":"GET","url":restUrl,"dataType":"json","success":function(responseData)
{var fetchedDataArray=[];for(var i=0;i<responseData.iTotalRecords;i++)
{var dtoAdapter=new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(responseData.aaData[i]);fetchedDataArray.push(dtoAdapter);}
onSuccess(fetchedDataArray,fetchedDataArray.length);},"error":function(jqXHR,timeout,message)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});},_onMove:function(aDroppableContainerId,aSortableContainerId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId)
{console.log("ONMOVE - did: "+aDroppableContainerId+" sid: "+aSortableContainerId+" parent: "+aParentNodeId+" node: "+aNodeId+" position: "+aNewPosition+" prevSiblingId: "+aNewPreviousSiblingNodeId);this._onSort(aSortableContainerId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId);},_onSort:function(aSortableContainerId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId)
{console.log("ONSORT - sid: "+aSortableContainerId+" parent: "+aParentNodeId+" node: "+aNodeId+" position: "+aNewPosition+" prevSiblingId: "+aNewPreviousSiblingNodeId);var restUrl=org.r3.PageManager.getRESTUrl('SORT_WBSNode',[this.wbsId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId]);this._hideWBSOutline();$.ajax({"type":"PUT","url":restUrl,"dataType":"json","success":function(responseData)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},"error":function(jqXHR,timeout,message)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}});$.r3Utils.namespace("org.r3.console.tow");org.r3.console.tow.TabWBS_WBSActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aWBSDtoAdapter)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#wbsactionform_form').validate({ignore:[],errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.tow.wbsactionform_form_validationRules,messages:org.r3.console.tow.wbsactionform_form_validationMessages});$('#wbsactionform_wbstext').ckeditor();$('#wbsactionform_fieldset_message').formmessage({});this._initializeFormFields(aWBSDtoAdapter);if(aWBSDtoAdapter)
$('#wbsactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));else $('#wbsactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));},_onCreateItem:function()
{if(!$('#wbsactionform_wbstext').val())
{org.r3.PageManager.alert("org.r3.jsportlet.wbs.message.wbstextEmptyConfirmation");return;}
this.actionFormManager.createWBS(function(responseData){$('#wbsactionform_action_saveitem').prop('disabled',true);$('#wbsactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#wbsactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{if(!$('#wbsactionform_wbstext').val())
{org.r3.PageManager.alert("org.r3.jsportlet.wbs.message.wbstextEmptyConfirmation");return;}
this.actionFormManager.updateWBS(function(responseData){$('#wbsactionform_action_saveitem').prop('disabled',true);$('#wbsactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#wbsactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function(aWBSDtoAdapter)
{if(aWBSDtoAdapter)
{$('#wbsactionform_wbstitle').val(aWBSDtoAdapter.dataBean.wbstitle);$('#wbsactionform_wbstext').val(aWBSDtoAdapter.dataBean.wbstext);$('#wbsactionform_bbstopicid').html(aWBSDtoAdapter.dataBean.bbstopicid);}
else
{}}});$.r3Utils.namespace("org.r3.console.tow");org.r3.console.tow.WBSActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.console.tow.WBSActionFormView(aDetailViewContainerId,this);},close:function()
{this.detailView.close();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(aWBSDtoAdapter)
{this.setDataBeanInfo(aWBSDtoAdapter);var _self=this;this.detailView.open(aWBSDtoAdapter);},createWBS:function(onSuccessResponse,onFailResponse)
{this._saveWBS(false,onSuccessResponse,onFailResponse);},updateWBS:function(onSuccessResponse,onFailResponse)
{this._saveWBS(true,onSuccessResponse,onFailResponse);},_saveWBS:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#wbsactionform_form');var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_WBS');if(isUpdate)
{var idWBS=this.dataBeanInfo.dataBean.wbsid;restUrl=org.r3.PageManager.getRESTUrl('PUT_WBS',[idWBS]);method="put";}
if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);if(!isUpdate)
_self.pageManager.closeWBSPanel();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},createWBSNode:function(anActionContext,onSuccessResponse,onFailResponse)
{this._saveWBSNode(false,anActionContext,onSuccessResponse,onFailResponse);},updateWBSNode:function(anActionContext,onSuccessResponse,onFailResponse)
{this._saveWBSNode(true,anActionContext,onSuccessResponse,onFailResponse);},_saveWBSNode:function(isUpdate,anActionContext,onSuccessResponse,onErrorResponse)
{var _self=this;var wbsid=this.dataBeanInfo.dataBean.wbsid;var theForm=$('#wbsnodeactionform_form');var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_WBSNode',[wbsid,anActionContext.parentNodeId]);if(isUpdate)
{restUrl=org.r3.PageManager.getRESTUrl('PUT_WBSNode',[wbsid,anActionContext.nodeId]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var isApplicationError=false;if(onSuccessResponse)
isApplicationError=onSuccessResponse(responseData);if(!isApplicationError)
{var dtoAdapter=new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(responseData);if(!isUpdate)
{_self.detailView.addNodeToMiller(anActionContext,dtoAdapter);}
else
_self.detailView.refreshMillerView(anActionContext,dtoAdapter);}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}});$.r3Utils.namespace("org.r3.console.tow");org.r3.console.tow.WBSActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aWBSDtoAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];if(aWBSDtoAdapter)
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/tow/WBSActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"view_tabwbsnode_miller",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/tow/TabWBSNode_Miller_WBSActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_tabwbsnode_detail",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/tow/TabWBSNode_Detail_WBSActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"teammembersprofile",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_TeamMemberProfiles'),dataType:"json"});}
else
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/tow/WBSActionFormView.html.jsp?mode=create'),dataType:"html"});}
networkRequestsQueue.push({id:"view_tabwbs",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/tow/TabWBS_WBSActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_skillambit'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_skillprofile'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var teamprofile=responseData["teammembersprofile"];if(teamprofile)
{teamprofile=new org.r3.db.DTOTableAdapter(teamprofile,function(aRowDataBean){return new org.r3.db.project.teammemberprofile.TeamMemberProfileDTOAdapter(aRowDataBean);});}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#wbsActionForm_tab_generale').html(tmpl(responseData['view_tabwbs'],{}));this.tabWBS=new org.r3.console.tow.TabWBS_WBSActionFormView('__UNUSED__',this.actionFormManager,aWBSDtoAdapter);if(aWBSDtoAdapter)
{$('#wbsActionForm_tab_nodes_miller').html(tmpl(responseData['view_tabwbsnode_miller'],{}));$('#wbsActionForm_tab_nodes_detail').html(tmpl(responseData['view_tabwbsnode_detail'],{"teamprofile":teamprofile}));this.tabWBSNode_miller=new org.r3.console.tow.TabWBSNode_Miller_WBSActionFormView('__UNUSED__',this.actionFormManager,aWBSDtoAdapter);this.tabWBSNode_detail=new org.r3.console.tow.TabWBSNode_Detail_WBSActionFormView('#wbsActionForm_tab_nodes_detail',this.actionFormManager,aWBSDtoAdapter);}
this.show();}),function(d)
{console.error("controller did not load");});},startNodeEditing:function(actionContext)
{this.tabWBSNode_detail.startNodeEditing(actionContext);},addNodeToMiller:function(actionContext,aNode)
{this.tabWBSNode_miller.addNode(actionContext.sortableContainerId,actionContext.parentNodeId,aNode);},refreshMillerView:function(actionContext,aNode)
{this.tabWBSNode_miller.refreshMillerView(actionContext.sortableContainerId,aNode);}});$.r3Utils.namespace("org.r3.console.tow",window,function(aNamespace)
{aNamespace.wbsactionform_form_validationRules={bbstopicid:{required:false,maxlength:15,identifier:true,texttransform:'uppercase'},wbstitle:{required:true,maxlength:255}};aNamespace.wbsactionform_form_validationMessages={bbstopicid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},wbstitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.tow");org.r3.console.tow.WBSQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.wbs.wbs.WBSQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'WBSQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.wbs.wbs.message.WBSQueryActionFormView_caption,iDisplayLength:25,dataTableSource:'GET_WBSes',layout:'fullWidth',sortable:true,dataTableColumns:"wbstitle",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.openDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_wbs_action_refresh',label:org.r3.jsportlet.wbs.message.console_wbs_action_refresh,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},openDetail:function(aWBSDTOAdapter)
{this.listView.hide();this.pageManager.openWBSPanel(aWBSDTOAdapter);}});$.r3Utils.namespace("org.r3.console.users");org.r3.console.users.PageManager={init:function()
{this.userQueryActionForm=new org.r3.console.users.UserQueryActionForm(this,'#userQueryActionForm','#userQueryAdvancedSearchActionForm');this.userDetailActionForm=new org.r3.jsportlet.user.UserDetailActionForm(this,'#userDetailActionForm');this.searchUsers();},searchUsers:function()
{org.r3.PageManager.pushHomeConsoleBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Gestione Utenti","actionForm":this.userQueryActionForm});this.userQueryActionForm.open();},newUser:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuova utenza","actionForm":this.userDetailActionForm});this.userDetailActionForm.open(null);},detailUser:function(userDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":"Det. Utenza","actionForm":this.userDetailActionForm});var dataBeanInfo={"userDataBean":userDataBean};this.userDetailActionForm.open(dataBeanInfo);}};$.r3Utils.namespace("org.r3.console.users");org.r3.console.users.UserQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.advancedSearchForm=new org.r3.console.users.UserQueryAdvancedSearchActionFormView(anAdvancedSearchHtmlActionFormContainerId,this);this.advancedSearchForm.open();this.listView=new org.r3.db.system.user.user.UserQueryActionFormView(anHtmlActionFormContainerId,this,{dataTableId:'R3UserQueryActionFormView',gradeLevel:'grade_level2 grade_clickable',legend:org.r3.db.system.user.user.message.queryactionformview_legend,dataTableSource:'GET_Users',actionBarOnTop:true,layout:'fullWidth',sortable:false,dataTableColumns:"userid,nickname,firstname,lastname,email,recstatus",onSelected:$.r3Utils.hitch(this,this.detailItem),onDblClick:null,onClearSelection:null,searchInfo:{label:org.r3.console.users.message.search_username,validationRules:org.r3.console.users.R3UserQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.console.users.R3UserQueryActionFormView_filter_searchform_validationMessages,autoStart:true},advancedSearchInfo:[{label:org.r3.console.users.message.search_advanced,actionView:this.advancedSearchForm,autoOpen:false}],buttons:[{id:'userqueryactionform_action_newuser',label:org.r3.message.action_new,disabled:false,onClick:$.r3Utils.hitch(this,this.newItem)}]});},close:function()
{this.listView.hide();},open:function()
{this.listView.open();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},newItem:function()
{this.listView.hide();org.r3.console.users.PageManager.newUser();},detailItem:function(aDataBean)
{this.listView.hide();org.r3.console.users.PageManager.detailUser(aDataBean);}});$.r3Utils.namespace("org.r3.console.users",window,function(aNamespace)
{aNamespace.R3UserQueryActionFormView_filter_searchform_validationRules={filter_item:{required:false}};aNamespace.R3UserQueryActionFormView_filter_searchform_validationMessages={filter_item:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.console.users");org.r3.console.users.UserQueryAdvancedSearchActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.executeSearch=null;},close:function()
{$("#dialog-form").modal("hide");},show:function(anExecuteSearchFunction)
{$("#dialog-form").modal();this.executeSearch=anExecuteSearchFunction;},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkInitializationQueue=[];networkInitializationQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/console/users/UserQueryAdvancedSearchActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkInitializationQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);var actionFormView=this;$("#userquery_advancedsearchform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.users.advancedsearchform_form_validationRules,messages:org.r3.console.users.advancedsearchform_form_validationMessages});$('#userquery_advancedsearchform_action_search').unbind().click($.r3Utils.hitch(actionFormView,actionFormView.executeAdvancedSearch));}),function(d)
{console.error("controller did not load");});},dismissAdvancedSearchDialog:function()
{$("#dialog-form").modal("hide");},executeAdvancedSearch:function()
{var theForm=$('#userquery_advancedsearchform_form');if(!theForm.valid())
return;var qparams=[];qparams.push({"name":"nickname","value":$('#userquery_advancedsearchform_form_nickname').val()});qparams.push({"name":"userid","value":$('#userquery_advancedsearchform_form_userid').val()});qparams.push({"name":"firstname","value":$('#userquery_advancedsearchform_form_firstname').val()});qparams.push({"name":"lastname","value":$('#userquery_advancedsearchform_form_lastname').val()});qparams.push({"name":"email","value":$('#userquery_advancedsearchform_form_email').val()});this.executeSearch(qparams);this.dismissAdvancedSearchDialog();}});$.r3Utils.namespace("org.r3.console.users",window,function(aNamespace)
{aNamespace.advancedsearchform_form_validationRules={userid:{required:false,maxlength:15},nickname:{required:false,maxlength:40},firstname:{required:false,maxlength:80},lastname:{required:false,maxlength:80},email:{required:false,maxlength:80}};aNamespace.advancedsearchform_form_validationMessages={userid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},nickname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},firstname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},lastname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},email:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.console.wbs");org.r3.console.wbs.PageManager={init:function()
{this.wbsQueryActionForm=new org.r3.jsportlet.wbs.WBSQueryActionForm(this,'#wbsQueryActionForm');this.wbsActionForm=new org.r3.jsportlet.wbs.WBSActionForm(this,'#wbsActionForm');this.createGSideBar();org.r3.PageManager.pushHomeConsoleBreadCrumb();this.openWBSQueryActionFormPanel();},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'gmenubar_act_newwbs',title:org.r3.console.wbs.message.gmenubar_act_newwbs,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'plus'});sect1.items.push({id:'act_query_wbs',title:org.r3.console.wbs.message.act_query_wbs,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'table'});$('#gsidebar-navanchor').gsidebar(gsidebarCfg);},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newwbs')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openWBSPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_query_wbs':this.openWBSQueryActionFormPanel();break;default:break;}}}},openWBSPanel:function(aWbsDtoAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.wbs.message.wbs_breadcrumb,"actionForm":this.wbsActionForm});this.wbsActionForm.open(aWbsDtoAdapter);},closeWBSPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openWBSQueryActionFormPanel();},openWBSQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.console.wbs.message.list_of_wbs_breadcrumb,"actionForm":this.wbsQueryActionForm});this.wbsQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_query_wbs');}};$.r3Utils.namespace("org.r3.db");org.r3.db.DTOAdapter=Class.extend({init:function(aDataBean)
{this.dataBean=aDataBean;this.markFlag=false;this.setDT_RowClass();this.indexOfItem=0;},setDT_RowClass:function()
{this.DT_RowClass=this.dataBean.dtrowclass;if(this.markFlag)
this.DT_RowClass+=" grade_mark";},setMark:function(aFlag)
{this.markFlag=aFlag;this.setDT_RowClass();},update:function(aDataBeanHashObject)
{for(pname in aDataBeanHashObject)
{if(typeof this.dataBean[pname]==="undefined")
console.error("DTOAdapter::update property "+pname+" is undefined and cannot be set ",aDataBeanHashObject);else
this.dataBean[pname]=aDataBeanHashObject[pname];}}});$.r3Utils.namespace("org.r3.db");org.r3.db.DTOTableAdapter=Class.extend({init:function(queryResult,aDataBeanAdapterConstructor,simpleArrayFlag)
{this.listOfItems=[];this.dataBeanAdapterConstructor=aDataBeanAdapterConstructor;if(simpleArrayFlag&&queryResult&&queryResult.length>0)
{$.each(queryResult,$.r3Utils.hitch(this,function(entryIndex,entry)
{this.addRowItem(entry);}));}
else
{if(queryResult&&queryResult.aaData&&queryResult.aaData.length>0)
{$.each(queryResult.aaData,$.r3Utils.hitch(this,function(entryIndex,entry)
{this.addRowItem(entry);}));}}},getNumberOfItems:function()
{return this.listOfItems.length;},visit:function(aVisitor)
{for(var i=0;i<this.listOfItems.length;i++)
{var entry=this.listOfItems[i];var continueTheLoop=true;if(aVisitor.processItem)
continueTheLoop=aVisitor.processItem(entry);if(!continueTheLoop)
break;}},getItem:function(index)
{if(this.getNumberOfItems()>index&&index>=0)
return this.listOfItems[index];return null;},addRowItem:function(aRowDataBean)
{var theModel=this.dataBeanAdapterConstructor(aRowDataBean);return this.addItem(theModel);},addItem:function(anAdaptedDataBean)
{anAdaptedDataBean.indexOfItem=this.listOfItems.length;this.listOfItems.push(anAdaptedDataBean);return anAdaptedDataBean;},removeItem:function(anItemId)
{var foundItem=this.findItem(anItemId);if(foundItem)
{var e=this.listOfItems.splice(foundItem.indexOfItem,1);return e;}
return null;},replaceItem:function(anItemId,anAdaptedDataBean)
{var foundItem=this.findItem(anItemId);if(foundItem)
{anAdaptedDataBean.indexOfItem=foundItem.indexOfItem;this.listOfItems[foundItem.indexOfItem]=anAdaptedDataBean;return anAdaptedDataBean;}
else
{this.addItem(anAdaptedDataBean);}
return anAdaptedDataBean;},findItem:function(anItemId)
{var theModel=null;var visitor={processItem:function(anItem)
{if(!anItem.dataBean.compareTo)
{console.error("::findItem - item doesn't implement function compareTo");}
else
{if(anItem.dataBean.compareTo(anItemId)==0)
{theModel=anItem;return false;}}
return true;}};this.visit(visitor);return theModel;},findRowOfItem:function(anItemId)
{var rowNumber=-1;var counter=0;var visitor={processItem:function(anItem)
{if(anItem.dataBean.compareTo(anItemId)==0)
{rowNumber=counter;return false;}
counter++;return true;}};this.visit(visitor);return rowNumber;}});$.r3Utils.namespace("org.r3.db");org.r3.db.DataTableEntityActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.dataTableSource=null;this.dataTable=null;this.dataTableId=optionsHash.dataTableId;;optionsHash=$.extend({iDisplayLength:10,"showTemplateOnOpen":true,actionBarOnTop:false,"canvasType":"panel-light"},optionsHash);this._setupOptions(optionsHash);},_setupOptions:function(optionsHash)
{this.optionsHash=optionsHash;this.optionsHash.defaultColumnDefinitions=this._setupDefaultColumnDefinitions();this.optionsHash.isLayoutFullWidth=function(){return optionsHash.layout&&optionsHash.layout=='fullWidth';};this.optionsHash.isHScrollable=function(){return optionsHash.hscrollable?optionsHash.hscrollable:'';};this.optionsHash.isSortEnabled=function(){return optionsHash.sortable?true:false;};this._setupSearchInfoOptions();this._setupAdvancedSearchInfoOptions();this._setupButtonsOptions();},_setupButtonsOptions:function()
{this.optionsHash.isActionBarEnabled=function(){return this.buttons;};this.optionsHash.isActionBarOnTop=function(){return this.actionBarOnTop;};this.optionsHash.getActionBarPosition=function(){var pos='none';if(this.buttons)
{pos='right';if(this.actionBarOnTop)
pos='top';}
return pos;};this.optionsHash.getCanvasType=function(){return this.canvasType;};},_setupSearchInfoOptions:function()
{this.optionsHash.isSearchEnabled=function(){return this.searchInfo;};this.optionsHash.isSearchWidgetSelect=function(){return this.searchInfo.widget=='select';};this.optionsHash.getSearchWidgetInitialization=function(){return(this.searchInfo.widget=='select')?this.searchInfo.widgetInitialization:null;};this.optionsHash.getSearchLabel=function(){return this.searchInfo.label;};if(this.optionsHash.isSearchEnabled())
{if(!this.optionsHash.searchInfo.label)
this.optionsHash.searchInfo.label="Ricerca";}},_setupAdvancedSearchInfoOptions:function()
{this.optionsHash.isAdvancedSearchEnabled=function(){return this.advancedSearchInfo&&this.advancedSearchInfo.length>0;};this.optionsHash.getAdvancedSearchLabel=function(i){return this.advancedSearchInfo[i].label;};this.optionsHash.getNumberOfAdvancedSearchOptions=function(){return(this.advancedSearchInfo)?this.advancedSearchInfo.length:0;};this.optionsHash.advancedSearchAutoOpenIndex=-1;if(this.optionsHash.isAdvancedSearchEnabled())
{for(var i=0;i<this.optionsHash.advancedSearchInfo.length;i++)
{if(!this.optionsHash.advancedSearchInfo[i].label)
this.optionsHash.advancedSearchInfo[i].label="Ricerca Avanzata";if(this.optionsHash.advancedSearchInfo[i].autoOpen)
this.optionsHash.advancedSearchAutoOpenIndex=i;}}},_initAdvancedSearchForm:function()
{if(this._isAdvancedSearchEnabled())
{$('.'+this.dataTableId+'_filter_advsearch').bind('click',$.r3Utils.hitch(this,this._onClickOpenAdvancedSearchDialog));}},_initSearchForm:function()
{if(this._isSearchEnabled())
{if(this.optionsHash.searchInfo.validationRules)
{$('#'+this.dataTableId+'_filter_searchform').validate
({rules:this.optionsHash.searchInfo.validationRules,messages:this.optionsHash.searchInfo.validationMessages});}
$('#'+this.dataTableId+'_filter_searchform').bind("keypress",$.r3Utils.hitch(this,function(event)
{if(event.keyCode==13)
{event.preventDefault();this._executeSearch();return false;}}));$('.'+this.dataTableId+'_filter_search').bind('click',$.r3Utils.hitch(this,this._executeSearch));if(this._getSearchWidgetInitialization())
{org.r3.PageManager.lutManager.populateSelectField({"lutUrl":this._getSearchWidgetInitialization().url,"blankOptionText":this._getSearchWidgetInitialization().blankOptionText,"selectWidget":$('#'+this.dataTableId+'_filter_searchitem')});$('#'+this.dataTableId+'_filter_searchitem').unbind().change($.r3Utils.hitch(this,this._executeSearch));}}},close:function()
{this.hide();},refresh:function()
{console.info("Refreshing the view....");this._super();if(this.optionsHash.requiredLUTs&&this.optionsHash.requiredLUTs.length)
{var networkRequestsQueue=[];for(var j=0;j<this.optionsHash.requiredLUTs.length;j++)
{networkRequestsQueue.push(this._getLUTNetworkRequest(j));}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{this.dataTable.fnDraw();}));}
else
{console.info("Doing a Redraw Only....");this.dataTable.fnDraw();}},_getHtmlTemplateUrl:function()
{var templateUrl=this.optionsHash.htmlTemplateUrl;if(!templateUrl)
templateUrl=org.r3.Constants.applicationContext+"/org/r3/db/DefaultEntityViewTemplate.html";return templateUrl;},_isDeferLoading:function()
{if(this._isAjaxSource()&&this._isSearchEnabled()&&!this.optionsHash.searchInfo.autoStart)
return true;return false;},_getScrollX:function()
{if(this.optionsHash.isHScrollable())
return"100%";return null;},_getScrollXInner:function()
{if(this.optionsHash.isHScrollable())
return this.optionsHash.isHScrollable();return null;},_isAutoWidth:function()
{if(this.optionsHash.fixedWidth)
return false;return true;},_isPaginate:function()
{return this.optionsHash.dataTableSource&&this.optionsHash.iDisplayLength>0;},_getIDisplayLength:function()
{return this.optionsHash.iDisplayLength;},_isAjaxSource:function()
{return this.optionsHash.dataTableSource;},_isSearchEnabled:function()
{return this.optionsHash.isSearchEnabled();},_isSortEnabled:function()
{var b=this.optionsHash.isSortEnabled();return b},_getSearchWidgetInitialization:function()
{return this.optionsHash.getSearchWidgetInitialization();},_isAdvancedSearchEnabled:function()
{return this.optionsHash.isAdvancedSearchEnabled();},_getAjaxSource:function()
{return this.dataTableSource;},_executeSearch:function()
{org.r3.PageManager.googleAnalyticsSendPageView("search");var theForm=$('#'+this.dataTableId+'_filter_searchform');this.clearQueryParameters();if(theForm.valid())
this._applyFnFilter($('#'+this.dataTableId+'_filter_searchitem').val());},_onClickOpenAdvancedSearchDialog:function(aClickEvent)
{var currentTarget=$(aClickEvent.currentTarget);var idOfAdvancedSearchLink=currentTarget.attr('id');var indexOfView=idOfAdvancedSearchLink.lastIndexOf('_');if(indexOfView>=0)
{indexOfView=parseInt(idOfAdvancedSearchLink.slice(indexOfView+1));}
else indexOfView=0;this._openAdvancedSearchDialog(indexOfView);},_openAdvancedSearchDialog:function(indexOfView)
{this.optionsHash.advancedSearchInfo[indexOfView].actionView.show($.r3Utils.hitch(this,this._executeAdvancedSearch));},_getAutoOpenIndexOfAdvancedSearch:function()
{return this.optionsHash.advancedSearchAutoOpenIndex;},_executeAdvancedSearch:function(anArrayOfQueryParameters)
{org.r3.PageManager.googleAnalyticsSendPageView("advancedSearch");this.clearQueryParameters();if(anArrayOfQueryParameters&&anArrayOfQueryParameters.length)
{for(var i=0;i<anArrayOfQueryParameters.length;i++)
this.addQueryParameter(anArrayOfQueryParameters[i]);}
$('#'+this.dataTableId+'_filter_searchitem').val(null);this._applyFnFilter('');},_applyFnFilter:function(searchTerm)
{this.dataTable.fnFilter(searchTerm);},_getNumberOfColumns:function()
{if(!this.optionsHash.dataTableColumns)
{console.error("org.r3.db.DataTableEntityActionFormView::_getNumberOfColumns - No columns specified for dataTable");return 0;}
var columnNames=this.optionsHash.dataTableColumns.split(",");return columnNames.length;},_getColumnIds:function()
{if(!this._getNumberOfColumns())
{console.error("org.r3.db.DataTableEntityActionFormView::_getColumnIds - No columns specified for dataTable");return[];}
var columnNames=this.optionsHash.dataTableColumns.split(",");return columnNames;},_getDefaultColumnDefinitions:function()
{return this.optionsHash.defaultColumnDefinitions;},getAoColumns:function()
{var aoColumns=[];if(this._getNumberOfColumns())
{for(var i=0;i<this._getNumberOfColumns();i++)
{aoColumns.push({"mDataProp":null});}}
return aoColumns;},getAoColumnDefs:function()
{var aoColumnDefs=[];if(!this._getNumberOfColumns())
{console.error("org.r3.db.DataTableEntityActionFormView::getAoColumnDefs - No columns specified for dataTable");return aoColumnDefs;}
var columnIds=this._getColumnIds();for(var i=0;i<columnIds.length;i++)
{var realColId=columnIds[i];var columnSortable=false;var ndx=realColId.indexOf(';sort');if(ndx>=0)
{columnSortable=true;}
ndx=realColId.indexOf(';');if(ndx>=0)
realColId=realColId.substring(0,ndx);var colDef=this._getDefaultColumnDefinitions()[realColId];if(colDef)
{colDef.aTargets=[i];colDef.bSortable=columnSortable;if(!colDef.sName)
colDef.sName=realColId;if(colDef.sTitle&&$.isFunction(colDef.sTitle))
colDef.sTitle=colDef.sTitle();}
else
colDef=this._getColumnDefinition4UnmatchedColumn(columnIds[i],i);aoColumnDefs.push(colDef);}
return aoColumnDefs;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};return defaultColumnDefinitions;},_getColumnDefinition4UnmatchedColumn:function(aColumnId,aColumnIndex)
{var colDef={"aTargets":[aColumnIndex],"sClass":"left","sTitle":aColumnId,"fnRender":function(oObj,sVal)
{return"N.D.";},"render":function(data,type,row,meta)
{return"N.D.";}};return colDef;},_getLUTNetworkRequest:function(indexOfRequest)
{var networkRequest={"id":"requiredLUT_"+indexOfRequest,"context":this,"requester":function(onSuccess,onError)
{var resolvedUrl=org.r3.PageManager.getRESTUrl(this.optionsHash.requiredLUTs[indexOfRequest]);org.r3.PageManager.lutManager.getLUT(resolvedUrl,onSuccess);}};return networkRequest;},getAdapterFromServerData:function(serverResponse)
{return serverResponse;},_fnServerData:function(sUrl,aoData,fnCallback,oSettings)
{var me=this;$.ajax({"dataType":'json',"type":"GET","url":sUrl,"data":aoData,"success":function(data,textStatus,jqXHR)
{$(oSettings.oInstance).trigger('xhr',oSettings);var items=me.getAdapterFromServerData(data);data.aaData=items.listOfItems;fnCallback(data);if(me.optionsHash.onServerData)
me.optionsHash.onServerData(items,data);},"error":function(xhr,error,thrown)
{if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. "+"This is caused by a JSON formatting error.");}}});},open:function(openOptionsHash)
{this.clearQueryParameters();if(openOptionsHash&&openOptionsHash.queryparams&&openOptionsHash.queryparams.length)
{for(var i=0;i<openOptionsHash.queryparams.length;i++)
this.addQueryParameter(openOptionsHash.queryparams[i]);}
this.optionsHash=$.extend(this.optionsHash,openOptionsHash);if(this.optionsHash.dataTableSource)
{if(this.optionsHash.dataTableSource.indexOf('/')>=0)
{this.dataTableSource=this.optionsHash.dataTableSource;}
else
this.dataTableSource=org.r3.PageManager.getRESTUrl(this.optionsHash.dataTableSource);}
var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(this._getHtmlTemplateUrl()),dataType:"html"});if(this.optionsHash.requiredLUTs&&this.optionsHash.requiredLUTs.length)
{for(var j=0;j<this.optionsHash.requiredLUTs.length;j++)
{networkRequestsQueue.push(this._getLUTNetworkRequest(j));}}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var aoColumnDefinitions=this.getAoColumnDefs();this.optionsHash.columnDefinitions=aoColumnDefinitions;var templatedHtml=tmpl(responseData['view'],this.optionsHash);$(this.htmlContainerId).html(templatedHtml);this.dataTable=$('#'+this.dataTableId).dataTable({"responsive":true,"bPaginate":this._isPaginate(),"bLengthChange":false,"iDisplayLength":this._getIDisplayLength(),"bFilter":this._isSearchEnabled(),"sDom":'rtipl',"bSort":this._isSortEnabled(),"aaSorting":[],"bInfo":true,"bAutoWidth":this._isAutoWidth(),"bProcessing":this._isAjaxSource(),"bServerSide":this._isAjaxSource(),"sAjaxSource":this._getAjaxSource(),"aoColumns":this.getAoColumns(),"aoColumnDefs":aoColumnDefinitions,"fnServerParams":$.r3Utils.hitch(this,this.fnGetQueryParameters),"fnServerData":(this._isAjaxSource())?$.r3Utils.hitch(this,this._fnServerData):null});this._initSearchForm();this._initAdvancedSearchForm();$('#'+this.dataTableId).unbind('page').bind('page',$.r3Utils.hitch(this,this.onPageChange));var matchExpr='#'+this.dataTableId+" tbody tr";if(this.optionsHash.onSelected)
$(document).off('click',matchExpr).on('click',matchExpr,$.r3Utils.hitch(this,this.fnSelectRow));if(this.optionsHash.onDblClick)
$(document).off('dblclick',matchExpr).on('dblclick',matchExpr,$.r3Utils.hitch(this,this.fnDbClickRow));var advancedFormAutoOpenIndex=this._getAutoOpenIndexOfAdvancedSearch();if(advancedFormAutoOpenIndex>=0)
this._openAdvancedSearchDialog(advancedFormAutoOpenIndex);if(this.optionsHash.isActionBarEnabled())
{for(var j=0;j<this.optionsHash.buttons.length;j++)
{$('#'+this.optionsHash.buttons[j].id).unbind().click(this.optionsHash.buttons[j].onClick);}}
if(this.optionsHash.onInitializationComplete)
this.optionsHash.onInitializationComplete.apply(this,(this.optionsHash.onInitializationCompleteArgs)?this.optionsHash.onInitializationCompleteArgs:[]);if(this.optionsHash.showTemplateOnOpen)
this.show();}));},addItem:function(anItem)
{this.dataTable.fnAddData(anItem);},fnGetSelected:function(oTableLocal)
{return oTableLocal.$('tr.row_selected');},fnGetSelectedDataBean:function()
{var selectedItem=this.fnGetSelected(this.dataTable)[0];var dataReturned=this.dataTable.fnGetData(selectedItem);return dataReturned;},fnDeleteRow:function()
{var anSelected=this.fnGetSelected(this.dataTable);this.dataTable.fnDeleteRow(anSelected[0]);$('#'+this.dataTableId+"_delete").prop('disabled',true);},fnDbClickRow:function(e)
{console.log("Row dbl-clicked");var currentTarget=e.currentTarget;console.log("ScanSessionItemsActionFormView::fnDbClickRow:: e.CurrentTarget: ",currentTarget);var dataReturned=this.dataTable.fnGetData(e.currentTarget);console.log("DataReurned: ",dataReturned);if($(e.currentTarget).hasClass('row_selected')){$(e.currentTarget).removeClass('row_selected');if(dataReturned)
this.optionsHash.onDblClick(dataReturned,false);}
else{this.dataTable.$('tr.row_selected').removeClass('row_selected');$(e.currentTarget).addClass('row_selected');if(dataReturned)
this.optionsHash.onDblClick(dataReturned,true);}},fnSelectRow:function(e)
{console.log("Row selected");var selectRowEnabled=false;var selectedDataBean=this.dataTable.fnGetData(e.currentTarget);if($(e.currentTarget).hasClass('row_selected')||!selectedDataBean){$(e.currentTarget).removeClass('row_selected');if(this.optionsHash.onClearSelection)this.optionsHash.onClearSelection();}
else{this.dataTable.$('tr.row_selected').removeClass('row_selected');$(e.currentTarget).addClass('row_selected');selectRowEnabled=true;}
var isToolSelection=false;if(this.optionsHash.onToolsIconSelected)
{var target=$(e.target);isToolSelection=target.hasClass('tools-icon');if(isToolSelection)
{var t=null;var c=target.attr('class').split(/\s+/);if(c.length)
{for(var i=0;i<c.length;i++)
{if(c[i].indexOf('toolid-')>=0)
{t=c[i];break;}}}
this.optionsHash.onToolsIconSelected(selectedDataBean,t);}}
if(selectRowEnabled&&!isToolSelection)
{this.optionsHash.onSelected(selectedDataBean);}},onPageChange:function()
{if(this.optionsHash.onPageChange)this.optionsHash.onPageChange();else if(this.optionsHash.onClearSelection)this.optionsHash.onClearSelection();},clearTable:function()
{this.dataTable.fnClearTable();},getDataTable:function()
{return this.dataTable;},getFilterSearchItem:function()
{var item=$('#'+this.optionsHash.dataTableId+'_filter_searchitem');if(item&&item.length==0)
console.error("The Item "+'#'+this.optionsHash.dataTableId+'_filter_searchitem'+" could not be found");return item;}});jQuery.r3Utils.namespace("org.r3.db.actor.actor");org.r3.db.actor.actor.ActorDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_actor";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.actorid=aDataBean.actorid||null;this.userid=aDataBean.userid||null;this.firstname=aDataBean.firstname||null;this.lastname=aDataBean.lastname||null;this.phone=aDataBean.phone||null;this.cellphone=aDataBean.cellphone||null;this.email=aDataBean.email||null;this.address=aDataBean.address||null;this.town=aDataBean.town||null;this.zipcode=aDataBean.zipcode||null;this.contactgroup=aDataBean.contactgroup||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;if(aDataBean.groups)
{this.groups=new org.r3.db.DTOTableAdapter(aDataBean.groups,function(aRowDataBean){return new org.r3.db.actor.group.ActorGroupDTOAdapter(aRowDataBean);});}
else this.groups=null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.actor.actor");org.r3.db.actor.actor.ActorDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.actor.actor.ActorDTO(aDataBean));},getSystemgroupsDescr:function()
{if(this.dataBean.groups&&this.dataBean.groups.getNumberOfItems()>0)
{var textResult=null;var visitor={processItem:function(anItem)
{if(anItem.dataBean.groupnature=='system')
{if(!textResult)
textResult='';else if(textResult.length>0)
textResult=textResult+'<br />';textResult=textResult+anItem.dataBean.grouptitle;}
return true;}};this.dataBean.groups.visit(visitor);return textResult;}
return null;},getNONSystemgroupsAsCSV:function()
{if(this.dataBean.groups&&this.dataBean.groups.getNumberOfItems()>0)
{var csvResult=null;var visitor={processItem:function(anItem)
{if(anItem.dataBean.groupnature=='user'||anItem.dataBean.groupnature=='app')
{if(!csvResult)
csvResult='';else if(csvResult.length>0)
csvResult=csvResult+',';csvResult=csvResult+anItem.dataBean.groupid;}
return true;}};this.dataBean.groups.visit(visitor);return csvResult;}
return null;},isLocked:function()
{return this.dataBean.recstatus&&this.dataBean.recstatus=='sys_recblock';}});jQuery.r3Utils.namespace("org.r3.db.actor.actor");org.r3.db.actor.actor.ActorQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.actor.actor.ActorDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};var global_multiselector=this.dataTableId+"_all_actorid";defaultColumnDefinitions['multiselector']={"aTargets":[-1],"sClass":"center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_actorid' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var itemChecked="";var s="<input type='checkbox' name='actorid' value='"+item.dataBean.actorid+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.eventid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['actorid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.actorid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.actorid||'';}};defaultColumnDefinitions['firstname']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.firstname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.firstname||'';}};defaultColumnDefinitions['lastname']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.lastname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastname||'';}};defaultColumnDefinitions['phone']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.phone,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.phone||'';}};defaultColumnDefinitions['cellphone']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.cellphone,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cellphone||'';}};defaultColumnDefinitions['email']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.email,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.email||'';}};defaultColumnDefinitions['address']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.address,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.address||'';}};defaultColumnDefinitions['town']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.town,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.town||'';}};defaultColumnDefinitions['zipcode']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.zipcode,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.zipcode||'';}};defaultColumnDefinitions['contactgroup']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.contactgroup,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.contactgroup||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":"&nbsp;","render":function(data,type,row,meta)
{var item=data;var s='';if(item.dataBean.recstatus&&item.dataBean.recstatus=='sys_recblock')
s="<label class='contact-icon contact-locked'></label>";else s="<label class='contact-icon contact-unlocked'></label>";return s;}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.actor.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.actor.actor.ActorDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.actor.group");org.r3.db.actor.group.ActorGroupDTO=Class.extend({init:function(aDataBean){this.dtrowclass="grade_actorgroup";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.groupid=aDataBean.groupid||null;this.grouptitle=aDataBean.grouptitle||null;this.groupnature=aDataBean.groupnature||null;this.grouptype=aDataBean.grouptype||null;this.groupprofile=aDataBean.groupprofile||null;this.businesskey=aDataBean.businesskey||null;this.grouporder=aDataBean.grouporder||null;},compareTo:function(anItemId){if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.actor.group");org.r3.db.actor.group.ActorGroupDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.actor.group.ActorGroupDTO(aDataBean));},getGroupprofile:function()
{var p=null;if(this.dataBean.groupprofile)
p=this.dataBean.groupprofile.split(',');return p;},isGroupprofile:function(aProfileOption)
{return this.dataBean.groupprofile&&this.dataBean.groupprofile.indexOf(aProfileOption)>=0;}});jQuery.r3Utils.namespace("org.r3.db.actor.group");org.r3.db.actor.group.ActorGroupQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.actor.group.ActorGroupDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.group.message.eventid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['groupid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.group.message.groupid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.groupid||'';}};defaultColumnDefinitions['grouptitle']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.group.message.grouptitle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.grouptitle||'';}};defaultColumnDefinitions['groupnature']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.group.message.groupnature,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.groupnature||'';}};defaultColumnDefinitions['grouptype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.group.message.grouptype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.grouptype||'';}};defaultColumnDefinitions['groupprofile']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.group.message.groupprofile,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.groupprofile||'';}};defaultColumnDefinitions['businesskey']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.group.message.businesskey,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.businesskey||'';}};defaultColumnDefinitions['grouporder']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.actor.group.message.grouporder,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.grouporder||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.actor.group.ActorGroupDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.agenda.agendaentry");org.r3.db.agenda.agendaentry.AgendaEntryDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_agendaentry";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.agendaentryid=aDataBean.agendaentryid||null;this.agendaid=aDataBean.agendaid||null;this.entrydescr=aDataBean.entrydescr||null;this.entrytype=aDataBean.entrytype||null;this.entrytyperefid=aDataBean.entrytyperefid||null;this.alldayflag=aDataBean.alldayflag||null;this.startdate=aDataBean.startdate||null;this.starttime=aDataBean.starttime||null;this.enddate=aDataBean.enddate||null;this.endtime=aDataBean.endtime||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.agenda.agendaentry");org.r3.db.agenda.agendaentry.AgendaEntryDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.agenda.agendaentry.AgendaEntryDTO(aDataBean));},getStartdate:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.startdate)+' '+this.dataBean.starttime;}});jQuery.r3Utils.namespace("org.r3.db.agenda.agendaentry");org.r3.db.agenda.agendaentry.AgendaEntryQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.agenda.agendaentry.AgendaEntryDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['agendaentryid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.agenda.agendaentry.message.agendaentryid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.agendaentryid||'';}};defaultColumnDefinitions['agendaid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.agenda.agendaentry.message.agendaid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.agendaid||'';}};defaultColumnDefinitions['entrydescr']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.agenda.agendaentry.message.entrydescr,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.entrydescr||'';}};defaultColumnDefinitions['entrytype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.agenda.agendaentry.message.entrytype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.entrytype||'';}};defaultColumnDefinitions['entrytyperefid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.agenda.agendaentry.message.entrytyperefid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.entrytyperefid||'';}};defaultColumnDefinitions['startdate']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.agenda.agendaentry.message.startdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.startdate||'';}};defaultColumnDefinitions['starttime']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.agenda.agendaentry.message.starttime,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.starttime||'';}};defaultColumnDefinitions['enddate']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.agenda.agendaentry.message.enddate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.enddate||'';}};defaultColumnDefinitions['endtime']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.agenda.agendaentry.message.endtime,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.endtime||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.agenda.agendaentry.AgendaEntryDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthread");org.r3.db.bbs.bbsthread.BBSThreadDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_bbsthread";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.threadid=aDataBean.threadid||null;this.topicid=aDataBean.topicid||null;this.threadtitle=aDataBean.threadtitle||null;this.threadprofile=aDataBean.threadprofile||null;this.userid=aDataBean.userid||null;this.creationdate=aDataBean.creationdate||null;this.numposts=aDataBean.numposts||null;this.lastthreadnodeid=aDataBean.lastthreadnodeid||null;this.lastposttimestamp=aDataBean.lastposttimestamp||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthread");org.r3.db.bbs.bbsthread.BBSThreadDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.bbs.bbsthread.BBSThreadDTO(aDataBean));},getCreationdate:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.creationdate);},getLastposttimestamp:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.lastposttimestamp);},getThreadProfile:function()
{var p=new org.r3.db.bbs.bbsthread.BBSThreadDTO_Default_Profile();if(!this.dataBean.threadprofile)
return p;switch(this.dataBean.threadprofile)
{case'crewask':p=new org.r3.db.bbs.bbsthread.BBSThreadDTO_CImbarco_Profile();break;case'crewoffer':p=new org.r3.db.bbs.bbsthread.BBSThreadDTO_OImbarco_Profile();break;}
return p;}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthread");org.r3.db.bbs.bbsthread.BBSThreadDTO_CImbarco_Profile=Class.extend({init:function()
{},getNewPostTemplate:function()
{return'/org/r3/jsportlet/bbs/BBSThreadPortletView_NewPostCImbarco_FormTemplate.html.jsp';},getPostActions:function()
{var postActions=[{"id":'edit',"text":'Modifica',"visibility":"onUserIsOwner"},];return postActions;},getLabels:function()
{var labels={newPost:"Nuova Inserzione",multiplePosts:"Inserzioni",singlePost:"Inserzione",newPostPanelHeading:'Inserimento Inserzione'};return labels;},serializePost:function()
{var frm=$('#bbsthreadportletviewactionform_form');var serializedArray=frm.serializeArray();var crewRoleVal=$('#bbsthreadportletviewactionform_crewrole').val();var crewLevelVal=$('#bbsthreadportletviewactionform_crewlevel').val();var crewRoleText=$("#bbsthreadportletviewactionform_crewrole option[value='"+crewRoleVal+"']").text();var crewLevelText=$("#bbsthreadportletviewactionform_crewlevel option[value='"+crewLevelVal+"']").text();serializedArray.push({"name":"crewroletext","value":crewRoleText});serializedArray.push({"name":"crewleveltext","value":crewLevelText});var data=JSON.stringify(serializedArray);$('#bbsthreadportletviewactionform_nodetext').val(data);if(crewRoleVal)
$('#bbsthreadportletviewactionform_nodetitle').val(crewRoleText+' '+crewLevelText);else $('#bbsthreadportletviewactionform_nodetitle').val($('#bbsthreadportletviewactionform_crewname').val());},postInfoRenderer:function(aBBSTopic,aBBSThread,aPost)
{var templatedHtml=tmpl('template-bbsthreadportletviewactionform_postinforenderer',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"threadProfile":this});return templatedHtml;},postContentRenderer:function(aBBSTopic,aBBSThread,aPost)
{var deserializedObj=this._getNodetextAsJSONObject(aPost.dataBean.nodetext);var htmlPostText=tmpl('template-bbsthreadportletviewactionform_cimbarco_contentrenderer',deserializedObj);return htmlPostText;},postRenderer:function(aBBSTopic,aBBSThread,aPost)
{var htmlPostText=this.postContentRenderer(aBBSTopic,aBBSThread,aPost);var templatedHtml=tmpl('template-bbsthreadportletviewactionform',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"nodetextashtml":htmlPostText,"threadProfile":this});return templatedHtml;},initializeForm:function(aBBSThreadNodeDTOAdapter)
{$('#bbsthreadportletviewactionform_nodetitle').val(null);$('#bbsthreadportletviewactionform_nodetext').val("");if(aBBSThreadNodeDTOAdapter)
{var deserializedObj=this._getNodetextAsJSONObject(aBBSThreadNodeDTOAdapter.dataBean.nodetext);$("#bbsthreadportletviewactionform_crewrole").val(deserializedObj.crewrole);$("#bbsthreadportletviewactionform_crewlevel").val(deserializedObj.crewlevel);$("#bbsthreadportletviewactionform_crewname").val(deserializedObj.crewname);$("#bbsthreadportletviewactionform_crewemail").val(deserializedObj.crewemail);$("#bbsthreadportletviewactionform_crewphone").val(deserializedObj.crewphone);$("#bbsthreadportletviewactionform_crewweight").val(deserializedObj.crewweight);$("#bbsthreadportletviewactionform_crewheight").val(deserializedObj.crewheight);$("#bbsthreadportletviewactionform_crewage").val(deserializedObj.crewage);$("#bbsthreadportletviewactionform_crewinfo").val(deserializedObj.crewinfo);}},_getNodetextAsJSONObject:function(s)
{var deserializedObj=$.parseJSON(s);var objHash={};for(var i=0;i<deserializedObj.length;i++)
{objHash[deserializedObj[i].name]=deserializedObj[i].value;}
return objHash;}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthread");org.r3.db.bbs.bbsthread.BBSThreadDTO_Default_Profile=Class.extend({init:function()
{},getNewPostTemplate:function()
{return'/org/r3/jsportlet/bbs/BBSThreadPortletView_NewPost_FormTemplate.html.jsp';},getPostActions:function()
{var postActions=[{"id":'close',"text":'Chiudi',"visibility":"always"},{"id":'reply',"text":'Rispondi',"visibility":"onUserLogged"},{"id":'reply-with-citation',"text":'Rispondi Citando',"visibility":"onUserLogged"}];return postActions;},getLabels:function()
{var labels={newPost:"Nuovo Commento",multiplePosts:"Commenti",singlePost:"Commento",newPostPanelHeading:'Inserimento Commento'};return labels;},serializePost:function()
{},postInfoRenderer:function(aBBSTopic,aBBSThread,aPost)
{var templatedHtml=tmpl('template-bbsthreadportletviewactionform_postinforenderer',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"threadProfile":this});return templatedHtml;},postContentRenderer:function(aBBSTopic,aBBSThread,aPost)
{var nodetextAsHtml=XBBCODE.process({text:aPost.dataBean.nodetext,removeMisalignedTags:false,addInLineBreaks:true});return nodetextAsHtml.html;},postRenderer:function(aBBSTopic,aBBSThread,aPost)
{var nodetextAsHtml=this.postContentRenderer(aBBSTopic,aBBSThread,aPost);var templatedHtml=tmpl('template-bbsthreadportletviewactionform',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"nodetextashtml":nodetextAsHtml,"threadProfile":this});return templatedHtml;},initializeForm:function(aBBSThreadNodeDTOAdapter)
{if(aBBSThreadNodeDTOAdapter)
{$('#bbsthreadportletviewactionform_nodetitle').val(aBBSThreadNodeDTOAdapter.dataBean.nodetitle);$('#bbsthreadportletviewactionform_nodetext').val(dtoAdapter.dataBean.nodetext);}
else
{$('#bbsthreadportletviewactionform_nodetitle').val(null);$('#bbsthreadportletviewactionform_nodetext').val("");}}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthread");org.r3.db.bbs.bbsthread.BBSThreadDTO_OImbarco_Profile=Class.extend({init:function()
{},getNewPostTemplate:function()
{return'/org/r3/jsportlet/bbs/BBSThreadPortletView_NewPostOImbarco_FormTemplate.html.jsp';},getPostActions:function()
{var postActions=[{"id":'edit',"text":'Modifica',"visibility":"onUserIsOwner"},];return postActions;},getLabels:function()
{var labels={newPost:"Nuova Inserzione",multiplePosts:"Inserzioni",singlePost:"Inserzione",newPostPanelHeading:'Inserimento Inserzione'};return labels;},serializePost:function()
{var frm=$('#bbsthreadportletviewactionform_form');var serializedArray=frm.serializeArray();var crewRoleVal='';var crewRoleText='';var rolesCheck=$("#bbsthreadportletviewactionform_form input[type='checkbox'][name='crewrole']");for(var i=0;i<rolesCheck.length;i++)
{var cbk=$(rolesCheck[i]);if(cbk.prop('checked'))
{if(crewRoleVal.length>0)
crewRoleVal=crewRoleVal+',';crewRoleVal=crewRoleVal+cbk.val();if(crewRoleText.length>0)
crewRoleText=crewRoleText+', ';crewRoleText=crewRoleText+cbk.parent().text();}}
serializedArray.push({"name":"crewrole","value":crewRoleVal});var crewLevelVal=$('#bbsthreadportletviewactionform_crewlevel').val();var crewLevelText=$("#bbsthreadportletviewactionform_crewlevel option[value='"+crewLevelVal+"']").text();serializedArray.push({"name":"crewroletext","value":crewRoleText});serializedArray.push({"name":"crewleveltext","value":crewLevelText});var data=JSON.stringify(serializedArray);$('#bbsthreadportletviewactionform_nodetext').val(data);if(crewRoleVal)
$('#bbsthreadportletviewactionform_nodetitle').val(crewRoleText+' '+crewLevelText);else $('#bbsthreadportletviewactionform_nodetitle').val($('#bbsthreadportletviewactionform_ownername').val());},postInfoRenderer:function(aBBSTopic,aBBSThread,aPost)
{var templatedHtml=tmpl('template-bbsthreadportletviewactionform_postinforenderer',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"threadProfile":this});return templatedHtml;},postContentRenderer:function(aBBSTopic,aBBSThread,aPost)
{var deserializedObj=this._getNodetextAsJSONObject(aPost.dataBean.nodetext);var htmlPostText=tmpl('template-bbsthreadportletviewactionform_oimbarco_contentrenderer',deserializedObj);return htmlPostText;},postRenderer:function(aBBSTopic,aBBSThread,aPost)
{var htmlPostText=this.postContentRenderer(aBBSTopic,aBBSThread,aPost);var templatedHtml=tmpl('template-bbsthreadportletviewactionform',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"nodetextashtml":htmlPostText,"threadProfile":this});return templatedHtml;},initializeForm:function(aBBSThreadNodeDTOAdapter)
{$('#bbsthreadportletviewactionform_nodetitle').val(null);$('#bbsthreadportletviewactionform_nodetext').val("");if(aBBSThreadNodeDTOAdapter)
{var deserializedObj=this._getNodetextAsJSONObject(aBBSThreadNodeDTOAdapter.dataBean.nodetext);if(deserializedObj.crewrole&&deserializedObj.crewrole.length>0)
{var listOfRoles=deserializedObj.crewrole.split(',');if(listOfRoles&&listOfRoles.length)
{for(var j=0;j<listOfRoles.length;j++)
{$('#bbsthreadportletviewactionform_crewrole_'+listOfRoles[j]).prop('checked',true);}}}
$("#bbsthreadportletviewactionform_crewlevel").val(deserializedObj.crewlevel);$("#bbsthreadportletviewactionform_ownername").val(deserializedObj.ownername);$("#bbsthreadportletviewactionform_owneremail").val(deserializedObj.owneremail);$("#bbsthreadportletviewactionform_ownerphone").val(deserializedObj.ownerphone);$("#bbsthreadportletviewactionform_yachtname").val(deserializedObj.yachtname);$("#bbsthreadportletviewactionform_yachtmodel").val(deserializedObj.yachtmodel);$("#bbsthreadportletviewactionform_yachtinfo").val(deserializedObj.yachtinfo);}},_getNodetextAsJSONObject:function(s)
{var deserializedObj=$.parseJSON(s);var objHash={};for(var i=0;i<deserializedObj.length;i++)
{objHash[deserializedObj[i].name]=deserializedObj[i].value;}
return objHash;}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthread");org.r3.db.bbs.bbsthread.BBSThreadQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.bbs.bbsthread.BBSThreadDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};var global_multiselector=this.dataTableId+"_all_threadid";defaultColumnDefinitions['multiselector']={"aTargets":[-1],"sClass":"center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_threadid' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var itemChecked="";var s="<input type='checkbox' name='threadid' value='"+item.dataBean.threadid+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbsthread.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['threadid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbsthread.message.threadid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.threadid||'';}};defaultColumnDefinitions['topicid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbsthread.message.topicid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.topicid||'';}};defaultColumnDefinitions['threadtitle']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbsthread.message.threadtitle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.threadtitle||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbsthread.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};defaultColumnDefinitions['creationdate']={"aTargets":[-1],"sClass":"right","sTitle":org.r3.db.bbs.bbsthread.message.creationdate,"render":function(data,type,row,meta)
{var item=data;return item.getCreationdate()||'';}};defaultColumnDefinitions['numposts']={"aTargets":[-1],"sClass":"right","sTitle":org.r3.db.bbs.bbsthread.message.numposts,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numposts||'0';}};defaultColumnDefinitions['lastthreadnodeid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbsthread.message.lastthreadnodeid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastthreadnodeid||'';}};defaultColumnDefinitions['lastposttimestamp']={"aTargets":[-1],"sClass":"right","sTitle":org.r3.db.bbs.bbsthread.message.lastposttimestamp,"render":function(data,type,row,meta)
{var item=data;return item.getLastposttimestamp()||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbsthread.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbsthread.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.bbs.bbsthread.BBSThreadDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthreadnode");org.r3.db.bbs.bbsthreadnode.BBSThreadNodeDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_bbsthreadnode";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.threadnodeid=aDataBean.threadnodeid||null;this.site=aDataBean.site||null;this.threadid=aDataBean.threadid||null;this.nodetype=aDataBean.nodetype||null;this.nodetitle=aDataBean.nodetitle||null;this.nodetext=aDataBean.nodetext||null;this.nodeparentid=aDataBean.nodeparentid||null;this.nodepath=aDataBean.nodepath||null;this.userid=aDataBean.userid||null;this.creationdate=aDataBean.creationdate||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthreadnode");org.r3.db.bbs.bbsthreadnode.BBSThreadNodeDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.bbs.bbsthreadnode.BBSThreadNodeDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthreadnode");org.r3.db.bbs.bbsthreadnode.BBSThreadNodeQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.bbs.bbsthreadnode.BBSThreadNodeDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.bbs.bbsthreadnode.BBSThreadNodeQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.bbs.bbsthreadnode.BBSThreadNodeDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.bbs.bbsthreadnode.BBSThreadNodeQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='threadnodeid';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.threadnodeid;var d=item.dataBean.nodetitle;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.threadnodeid;var d=item.dataBean.nodetitle;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='threadnodeid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.threadnodeid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.threadnodeid||'';}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='threadid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.threadid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.threadid||'';}};}
var columnId='nodetype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.nodetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodetype||'';}};}
var columnId='nodetitle';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.nodetitle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodetitle||'';}};}
var columnId='nodetext';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.nodetext,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodetext||'';}};}
var columnId='nodeparentid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.nodeparentid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodeparentid||'';}};}
var columnId='nodepath';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.nodepath,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodepath||'';}};}
var columnId='userid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};}
var columnId='creationdate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.creationdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.creationdate||'';}};}
var columnId='recstatus';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnode.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthreadnodeview");org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_bbsthreadnodeview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.threadnodeid=aDataBean.threadnodeid||null;this.site=aDataBean.site||null;this.threadid=aDataBean.threadid||null;this.nodetype=aDataBean.nodetype||null;this.nodetitle=aDataBean.nodetitle||null;this.nodetext=aDataBean.nodetext||null;this.nodeparentid=aDataBean.nodeparentid||null;this.nodepath=aDataBean.nodepath||null;this.userid=aDataBean.userid||null;this.nickname=aDataBean.nickname||null;this.firstname=aDataBean.firstname||null;this.lastname=aDataBean.lastname||null;this.creationdate=aDataBean.creationdate||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthreadnodeview");org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTO(aDataBean));},getCreationdate:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.creationdate);},getUsername:function()
{var s="N.A.";if(this.dataBean.nickname)
{s=this.dataBean.firstname;s=s+' '+this.dataBean.lastname;}
else
{s=org.r3.PageManager.userInfo.dataBean.firstname;s=s+' '+org.r3.PageManager.userInfo.dataBean.lastname;}
return s;},getCreationdate:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.creationdate);},getCreationDateAsBadge:function()
{return $.r3Utils.formatDateAsBadge(this.dataBean.creationdate);},getCreationdateAsElapsed:function()
{return $.r3Utils.formatTimeDifferenceFromNow(this.dataBean.creationdate);},allowsTweets:function()
{return!this.dataBean.nodeparentid;}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbsthreadnodeview");org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='threadnodeid';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.threadnodeid;var d=item.dataBean.nodetitle;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.threadnodeid;var d=item.dataBean.nodetitle;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='threadnodeid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.threadnodeid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.threadnodeid||'';}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='threadid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.threadid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.threadid||'';}};}
var columnId='nodetype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.nodetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodetype||'';}};}
var columnId='nodetitle';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.nodetitle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodetitle||'';}};}
var columnId='nodetext';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.nodetext,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodetext||'';}};}
var columnId='nodeparentid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.nodeparentid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodeparentid||'';}};}
var columnId='nodepath';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.nodepath,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodepath||'';}};}
var columnId='userid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};}
var columnId='nickname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.nickname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nickname||'';}};}
var columnId='firstname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.firstname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.firstname||'';}};}
var columnId='lastname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.lastname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastname||'';}};}
var columnId='creationdate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.creationdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.creationdate||'';}};}
var columnId='recstatus';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.bbs.bbsthreadnodeview.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.bbs.bbstopic");org.r3.db.bbs.bbstopic.BBSTopicDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_bbstopic";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.topicid=aDataBean.topicid||null;this.topictitle=aDataBean.topictitle||null;this.cardid=aDataBean.cardid||null;this.moderatorid=aDataBean.moderatorid||null;this.moderatormode=aDataBean.moderatormode||null;this.options=aDataBean.options||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbstopic");org.r3.db.bbs.bbstopic.BBSTopicDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.bbs.bbstopic.BBSTopicDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbstopic");org.r3.db.bbs.bbstopic.BBSTopicQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.bbs.bbstopic.BBSTopicDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['topicid']={"aTargets":[-1],"sClass":"left","sTitle":"topicid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.topicid||'';}};defaultColumnDefinitions['topictitle']={"aTargets":[-1],"sClass":"left","sTitle":"topictitle","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.topictitle||'';}};defaultColumnDefinitions['cardid']={"aTargets":[-1],"sClass":"left","sTitle":"cardid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.cardid||'';}};defaultColumnDefinitions['moderatorid']={"aTargets":[-1],"sClass":"left","sTitle":"moderatorid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.moderatorid||'';}};defaultColumnDefinitions['moderatormode']={"aTargets":[-1],"sClass":"left","sTitle":"moderatormode","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.moderatormode||'';}};defaultColumnDefinitions['options']={"aTargets":[-1],"sClass":"left","sTitle":"options","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.options||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":"recstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"rectimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.bbs.bbstopic.BBSTopicDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbstopicview");org.r3.db.bbs.bbstopicview.BBSTopicViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_bbstopicview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.topicid=aDataBean.topicid||null;this.topictitle=aDataBean.topictitle||null;this.cardid=aDataBean.cardid||null;this.moderatorid=aDataBean.moderatorid||null;this.moderatormode=aDataBean.moderatormode||null;this.options=aDataBean.options||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;this.numthreads=aDataBean.numthreads||null;this.numposts=aDataBean.numposts||null;}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbstopicview");org.r3.db.bbs.bbstopicview.BBSTopicViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.bbs.bbstopicview.BBSTopicViewDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.bbs.bbstopicview");org.r3.db.bbs.bbstopicview.BBSTopicViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.bbs.bbstopicview.BBSTopicViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbstopicview.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['topicid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbstopicview.message.topicid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.topicid||'';}};defaultColumnDefinitions['topictitle']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbstopicview.message.topictitle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.topictitle||'';}};defaultColumnDefinitions['cardid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbstopicview.message.cardid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cardid||'';}};defaultColumnDefinitions['moderatorid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbstopicview.message.moderatorid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.moderatorid||'';}};defaultColumnDefinitions['moderatormode']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbstopicview.message.moderatormode,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.moderatormode||'';}};defaultColumnDefinitions['options']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbstopicview.message.options,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.options||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbstopicview.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.bbs.bbstopicview.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};defaultColumnDefinitions['numthreads']={"aTargets":[-1],"sClass":"right","sTitle":org.r3.db.bbs.bbstopicview.message.numthreads,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numthreads||'0';}};defaultColumnDefinitions['numposts']={"aTargets":[-1],"sClass":"right","sTitle":org.r3.db.bbs.bbstopicview.message.numposts,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numposts||'0';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.bbs.bbstopicview.BBSTopicViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.card");org.r3.db.cms.card.CardDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_card";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.cardid=aDataBean.cardid||null;this.systemtitle=aDataBean.systemtitle||null;this.pagelinktype=aDataBean.pagelinktype||null;this.pagelink=aDataBean.pagelink||null;this.pageid=aDataBean.pageid||null;this.refdate=aDataBean.refdate||null;this.options=aDataBean.options||null;this.validityrule=aDataBean.validityrule||null;this.validfrom=aDataBean.validfrom||null;this.validto=aDataBean.validto||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;this.categoryid=aDataBean.categoryid||null;if(aDataBean.groups)
{this.groups=new org.r3.db.DTOTableAdapter(aDataBean.groups,function(aRowDataBean){return new org.r3.db.cms.group.GroupDTOAdapter(aRowDataBean);});}
else this.groups=null;if(aDataBean.channels)
{this.channels=new org.r3.db.DTOTableAdapter(aDataBean.channels,function(aRowDataBean){return new org.r3.db.cms.channel.ChannelDTOAdapter(aRowDataBean);});}
else this.channels=null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.card");org.r3.db.cms.card.CardDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.card.CardDTO(aDataBean));},isValidityRuleDate:function()
{if(this.dataBean.validityrule&&this.dataBean.validityrule=='date')
return true;return false;},isValidityRuleAlways:function()
{if(this.dataBean.validityrule&&this.dataBean.validityrule=='always')
return true;return false;},isValidityRuleNever:function()
{if(this.dataBean.validityrule&&this.dataBean.validityrule=='never')
return true;return false;},getValidityAsSemaphore:function()
{var semaphoreColor='gray';if(this.isValidityRuleAlways())
semaphoreColor='green';if(this.isValidityRuleNever())
semaphoreColor='red';if(this.isValidityRuleDate())
semaphoreColor='yellow';return $.r3Utils.formatSemaphore(semaphoreColor);},getRefdate:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.refdate);},getValidfrom:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.validfrom);},getValidto:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.validto);},getCategorydescr:function()
{return $.r3Utils.formatLUTDataBeanField('LUT_CMS_Category',this.dataBean.categoryid);},getCardgroupsAsCSV:function()
{if(this.dataBean.groups&&this.dataBean.groups.getNumberOfItems()>0)
{var csvResult=null;var visitor={processItem:function(anItem)
{if(!csvResult)
csvResult='';else if(csvResult.length>0)
csvResult=csvResult+',';csvResult=csvResult+anItem.dataBean.groupid;return true;}};this.dataBean.groups.visit(visitor);return csvResult;}
return null;},getCardgroupsAsArray:function()
{if(this.dataBean.groups&&this.dataBean.groups.getNumberOfItems()>0)
{var csvResult=[];var visitor={processItem:function(anItem)
{csvResult.push(anItem.dataBean.groupid);return true;}};this.dataBean.groups.visit(visitor);return csvResult;}
return null;},getChannelsAsCSV:function()
{if(this.dataBean.channels&&this.dataBean.channels.getNumberOfItems()>0)
{var csvResult=null;var visitor={processItem:function(anItem)
{if(!csvResult)
csvResult='';else if(csvResult.length>0)
csvResult=csvResult+',';csvResult=csvResult+anItem.dataBean.channelid;return true;}};this.dataBean.channels.visit(visitor);return csvResult;}
return null;}});jQuery.r3Utils.namespace("org.r3.db.cms.card");org.r3.db.cms.card.CardQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.card.CardDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};var global_multiselector=this.dataTableId+"_all_cardid";var selectorPrefix=this.dataTableId;defaultColumnDefinitions['singleselector']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var itemChecked="";var s="<input type='radio' name='cardid' id='"+selectorPrefix+'_'+item.dataBean.cardid+"' value='"+item.dataBean.cardid+"' title='"+item.dataBean.systemtitle+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['queryformview-tools']={"aTargets":[-1],"sClass":"text-center","sTitle":"Azioni","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['valid']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.getValidityAsSemaphore();}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['cardid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.cardid,"render":function(data,type,row,meta)
{var item=data;var s=item.getValidityAsSemaphore()+item.dataBean.cardid;return s;}};defaultColumnDefinitions['categoryid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.categoryid,"render":function(data,type,row,meta)
{var item=data;return item.getCategorydescr()||'';}};defaultColumnDefinitions['systemtitle']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.systemtitle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.systemtitle||'';}};defaultColumnDefinitions['pagelinktype']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.pagelinktype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pagelinktype||'';}};defaultColumnDefinitions['pagelink']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.pagelink,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pagelink||'';}};defaultColumnDefinitions['pageid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.pageid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pageid||'';}};defaultColumnDefinitions['refdate']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.refdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.refdate||'';}};defaultColumnDefinitions['options']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.options,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.options||'';}};defaultColumnDefinitions['validityrule']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.validityrule,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.validityrule||'';}};defaultColumnDefinitions['validfrom']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.validfrom,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.validfrom||'';}};defaultColumnDefinitions['validto']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.validto,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.validto||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};defaultColumnDefinitions['categoryid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.card.message.categoryid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.categoryid||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.card.CardDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.cardchannelview");org.r3.db.cms.cardchannelview.CardChannelViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_cardchannelview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.channelid=aDataBean.channelid||null;this.site=aDataBean.site||null;this.cardid=aDataBean.cardid||null;this.languagecode=aDataBean.languagecode||null;this.categoryid=aDataBean.categoryid||null;this.pagelinktype=aDataBean.pagelinktype||null;this.pagelink=aDataBean.pagelink||null;this.pageid=aDataBean.pageid||null;this.refdate=aDataBean.refdate||null;this.options=aDataBean.options||null;this.title=aDataBean.title||null;this.summary=aDataBean.summary||null;this.textbody=aDataBean.textbody||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.cardchannelview");org.r3.db.cms.cardchannelview.CardChannelViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.cardchannelview.CardChannelViewDTO(aDataBean));},getChannelidDescr:function()
{return $.r3Utils.formatLUTDataBeanField('LUT_CMS_Channels',this.dataBean.channelid);},getSiteDescr:function()
{return $.r3Utils.formatLUTDataBeanField("LUT_Site",this.dataBean.site);}});jQuery.r3Utils.namespace("org.r3.db.cms.cardchannelview");org.r3.db.cms.cardchannelview.CardChannelViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.cardchannelview.CardChannelViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.cms.cardchannelview.CardChannelViewQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.cardchannelview.CardChannelViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.cms.cardchannelview.CardChannelViewQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='channelid_site_cardid';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='channelid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.channelid,"render":function(data,type,row,meta)
{var item=data;return item.getChannelidDescr()||'';}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.site,"render":function(data,type,row,meta)
{var item=data;return item.getSiteDescr()||'';}};}
var columnId='cardid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.cardid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cardid||'';}};}
var columnId='languagecode';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.languagecode,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.languagecode||'';}};}
var columnId='categoryid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.categoryid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.categoryid||'';}};}
var columnId='pagelinktype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.pagelinktype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pagelinktype||'';}};}
var columnId='pagelink';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.pagelink,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pagelink||'';}};}
var columnId='pageid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.pageid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pageid||'';}};}
var columnId='refdate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.refdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.refdate||'';}};}
var columnId='options';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.options,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.options||'';}};}
var columnId='title';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.title,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.title||'';}};}
var columnId='summary';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.summary,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.summary||'';}};}
var columnId='textbody';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.textbody,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.textbody||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.cms.cardchannelview.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.cms.carddescr");org.r3.db.cms.carddescr.CardDescrDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_carddescr";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.cardid=aDataBean.cardid||null;this.languagecode=aDataBean.languagecode||null;this.title=aDataBean.title||null;this.summary=aDataBean.summary||null;this.textbody=aDataBean.textbody||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.carddescr");org.r3.db.cms.carddescr.CardDescrDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.carddescr.CardDescrDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.cms.carddescr");org.r3.db.cms.carddescr.CardDescrQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.carddescr.CardDescrDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.carddescr.message.site,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['cardid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.carddescr.message.cardid,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.cardid||'';}};defaultColumnDefinitions['languagecode']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.carddescr.message.languagecode,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.languagecode||'';}};defaultColumnDefinitions['title']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.carddescr.message.title,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.title||'';}};defaultColumnDefinitions['summary']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.carddescr.message.summary,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.summary||'';}};defaultColumnDefinitions['textbody']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.carddescr.message.textbody,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.textbody||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.carddescr.message.recstatus,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.carddescr.message.rectimestamp,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.carddescr.CardDescrDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.cardproperty");org.r3.db.cms.cardproperty.CardPropertyDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_cardproperty";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.propertyid=aDataBean.propertyid||null;this.site=aDataBean.site||null;this.cardid=aDataBean.cardid||null;this.languagecode=aDataBean.languagecode||null;this.propertyrole=aDataBean.propertyrole||null;this.propertytypecode=aDataBean.propertytypecode||null;this.propertyname=aDataBean.propertyname||null;this.propertyvalue=aDataBean.propertyvalue||null;this.propertysize=aDataBean.propertysize||null;this.refpropertyid=aDataBean.refpropertyid||null;this.contenttype=aDataBean.contenttype||null;this.imageurl=aDataBean.imageurl||null;this.imageheight=aDataBean.imageheight||null;this.imagewidth=aDataBean.imagewidth||null;this.iconurl=aDataBean.iconurl||null;this.iconwidth=aDataBean.iconwidth||null;this.iconheight=aDataBean.iconheight||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.cardproperty");org.r3.db.cms.cardproperty.CardPropertyDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.cardproperty.CardPropertyDTO(aDataBean));},isAttachment:function()
{return this.databean&&(this.dataBean.propertytypecode=='image'||this.dataBean.propertytypecode=='document'||this.dataBean.propertytypecode=='file');},isImage:function()
{return this.dataBean&&(this.dataBean.propertytypecode=='image');},isDocument:function()
{return this.dataBean&&(this.dataBean.propertytypecode=='document');},isFile:function()
{return this.dataBean&&(this.dataBean.propertytypecode=='file');},isHtmlfragment:function()
{return this.dataBean&&(this.dataBean.propertytypecode=='htmlfragment');},isLink:function()
{return this.dataBean&&(this.dataBean.propertytypecode=='link');},hasIcon:function()
{return this.dataBean&&this.dataBean.iconurl;},getPropertyrole:function()
{if(this.dataBean.propertyrole&&this.dataBean.propertyrole.length)
{var prole='';var proles=this.dataBean.propertyrole.split(',');if(proles&&proles.length)
{for(var i=0;i<proles.length;i++)
{prole=prole+' '+proles[i];}}
return prole;}
return null;},hasPropertyrole:function(aPropertyRole)
{return this.dataBean.propertyrole&&this.dataBean.propertyrole.indexOf(aPropertyRole)>=0;},getImageurl:function()
{return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.imageurl);},getIconurl:function()
{if(this.dataBean.iconurl)
return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.iconurl);return this.getImageurl();},getIconMarginTop:function(maxWidth,maxHeight)
{if(this.dataBean.iconurl)
{return Math.floor((maxHeight-this.dataBean.iconheight)/2)||'0';}
else return'0';},getDocumenturl:function()
{return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.propertyvalue);},getDocumentIconClass_16x16:function()
{var s='icon_file';var ct=this.dataBean.contenttype;if(ct)
{switch(ct)
{case'application/pdf':s='icon_application_pdf';break;}}
return s;},getOnClickGoogleTracking:function()
{return"org.r3.PageManager.googleAnalyticsSendPageView('"+this.dataBean.propertyid+"');";}});jQuery.r3Utils.namespace("org.r3.db.cms.cardproperty");org.r3.db.cms.cardproperty.CardPropertyQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.cardproperty.CardPropertyDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['propertyid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.propertyid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.propertyid||'';}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['cardid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.cardid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cardid||'';}};defaultColumnDefinitions['languagecode']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.languagecode,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.languagecode||'';}};defaultColumnDefinitions['propertyrole']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.propertyrole,"render":function(data,type,row,meta)
{var item=data;return item.getPropertyrole()||'';}};defaultColumnDefinitions['propertytypecode']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.propertytypecode,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.propertytypecode||'';}};defaultColumnDefinitions['propertyname']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.propertyname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.propertyname||'';}};defaultColumnDefinitions['propertyvalue']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.propertyvalue,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.propertyvalue||'';}};defaultColumnDefinitions['propertysize']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.propertysize,"render":function(data,type,row,meta)
{var item=data;var s=item.dataBean.propertysize+'B';return s;}};defaultColumnDefinitions['refpropertyid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.refpropertyid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.refpropertyid||'';}};defaultColumnDefinitions['contenttype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.contenttype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.contenttype||'';}};defaultColumnDefinitions['imageurl']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.imageurl,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.imageurl||'';}};defaultColumnDefinitions['imageheight']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.imageheight,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.imageheight||'';}};defaultColumnDefinitions['imagewidth']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.imagewidth,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.imagewidth||'';}};defaultColumnDefinitions['iconurl']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.iconurl,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.iconurl||'';}};defaultColumnDefinitions['iconwidth']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.iconwidth,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.iconwidth||'';}};defaultColumnDefinitions['iconheight']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.iconheight,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.iconheight||'';}};defaultColumnDefinitions['imagesize']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.imagesize,"render":function(data,type,row,meta)
{var item=data;var s=null;if(item.dataBean.imagewidth&&item.dataBean.imageheight)
s="["+item.dataBean.imagewidth+","+item.dataBean.imageheight+"]";return s||'';}};defaultColumnDefinitions['iconsize']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.iconsize,"render":function(data,type,row,meta)
{var item=data;var s=null;if(item.dataBean.iconwidth&&item.dataBean.iconheight)
s="["+item.dataBean.iconwidth+","+item.dataBean.iconheight+"]";return s||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.cardproperty.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.cardproperty.CardPropertyDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.cardview");org.r3.db.cms.cardview.CardViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_cardview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.cardid=aDataBean.cardid||null;this.languagecode=aDataBean.languagecode||null;this.categoryid=aDataBean.categoryid||null;this.pagelinktype=aDataBean.pagelinktype||null;this.pagelink=aDataBean.pagelink||null;this.pageid=aDataBean.pageid||null;this.refdate=aDataBean.refdate||null;this.options=aDataBean.options||null;this.title=aDataBean.title||null;this.summary=aDataBean.summary||null;this.textbody=aDataBean.textbody||null;this.rectimestamp=aDataBean.rectimestamp||null;this.properties=null;this.cardicon=null;this.cardimage=null;this.listof_image=null;this.listof_document=null;this.listof_file=null;this.listof_link=null;this.listof_textlink=null;this.listof_iconlink=null;this.listof_htmlfragments=null;this.listof_executablehtmlfragments=null;if(aDataBean.properties&&aDataBean.properties.length)
{this._initializeProperties(aDataBean.properties);}},_initializeProperties:function(anArrayOfPropsDataBean)
{var propertiesLookupMap={};for(var i=0;i<anArrayOfPropsDataBean.length;i++)
{var propertyAdapter=new org.r3.db.cms.cardproperty.CardPropertyDTOAdapter(anArrayOfPropsDataBean[i]);propertiesLookupMap[propertyAdapter.dataBean.propertyid]=propertyAdapter;if(!this.properties)
this.properties=[propertyAdapter];else this.properties.push(propertyAdapter);if(propertyAdapter.isImage())
{if(!this.listof_image)
this.listof_image=[propertyAdapter];else this.listof_image.push(propertyAdapter);if(propertyAdapter.dataBean.propertyrole=='cms_card_icon')
{this.cardicon=propertyAdapter;}
if(propertyAdapter.dataBean.propertyrole=='cms_card_image')
{this.cardimage=propertyAdapter;}}
if(propertyAdapter.isDocument())
{if(!this.listof_document)
this.listof_document=[propertyAdapter];else this.listof_document.push(propertyAdapter);}
if(propertyAdapter.isFile())
{if(!this.listof_file)
this.listof_file=[propertyAdapter];else this.listof_file.push(propertyAdapter);}
if(propertyAdapter.isHtmlfragment())
{if(propertyAdapter.dataBean.propertyrole=='cms_htmlexe')
{if(!this.listof_executablehtmlfragments)
this.listof_executablehtmlfragments=[propertyAdapter];else this.listof_executablehtmlfragments.push(propertyAdapter);}
else
{if(!this.listof_htmlfragments)
this.listof_htmlfragments=[propertyAdapter];else this.listof_htmlfragments.push(propertyAdapter);}}
if(propertyAdapter.isLink())
{if(!this.listof_link)
this.listof_link=[propertyAdapter];else this.listof_link.push(propertyAdapter);if(propertyAdapter.dataBean.refpropertyid)
{if(!this.listof_iconlink)
this.listof_iconlink=[propertyAdapter];else this.listof_iconlink.push(propertyAdapter);}
else
{if(!this.listof_textlink)
this.listof_textlink=[propertyAdapter];else this.listof_textlink.push(propertyAdapter);}}}
if(this.listof_iconlink)
{for(var k=0;k<this.listof_iconlink.length;k++)
{var prop=this.listof_iconlink[k];if(prop.dataBean.refpropertyid)
{var referredProperty=propertiesLookupMap[prop.dataBean.refpropertyid];if(!referredProperty)
console.log("ReferredProperty NOT found "+prop.dataBean.refpropertyid);else
{prop.dataBean.imageurl=referredProperty.dataBean.imageurl;prop.dataBean.imageheight=referredProperty.dataBean.imageheight;prop.dataBean.imagewidth=referredProperty.dataBean.imagewidth;prop.dataBean.iconurl=referredProperty.dataBean.iconurl;prop.dataBean.iconheight=referredProperty.dataBean.iconheight;prop.dataBean.iconwidth=referredProperty.dataBean.iconwidth;}}}}},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.cardview");org.r3.db.cms.cardview.CardViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.cardview.CardViewDTO(aDataBean));},getListOfPropertiesByPropertyrole:function(aPropertyRole)
{var listOf=null;if(this.dataBean.properties&&this.dataBean.properties.length)
{var props=this.dataBean.properties;for(var i=0;i<props.length;i++)
{if(props[i].hasPropertyrole(aPropertyRole))
{if(listOf==null)
listOf=[props[i]];else listOf.push(props[i]);}}}
return listOf;},getRefdate:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.refdate);},getCardIconUrl:function()
{console.error("DataBean is: ",this.dataBean);if(this.dataBean.cardicon)
{return this.dataBean.cardicon.getImageurl();}
if(this.dataBean.cardimage)
{return this.dataBean.cardimage.getIconurl();}
return'';},getCardImageUrl:function()
{if(this.dataBean.cardimage)
{return this.dataBean.cardimage.getImageurl();}
return'';},getPagelink:function()
{var pgl=null;var urlPath=org.r3.Constants.getStrutsActionContext(this.dataBean.site)+'/org/r3/cms/cmspage.do';if(this.dataBean.site!=org.r3.SiteConstants.targetSite)
{urlPath=org.r3.Constants.getStrutsActionContext(this.dataBean.site)+'/org/r3/sev/cmspage.do';}
else if(org.r3.SiteConstants.targetSiteType=='regatta')
urlPath=org.r3.Constants.getStrutsActionContext(this.dataBean.site)+'/org/r3/sev/cmspage.do';switch(this.dataBean.pagelinktype)
{case'none':break;case'page':pgl=urlPath+'?pageid='+this.dataBean.pageid+'&cardid='+this.dataBean.cardid;break;case'custom':pgl=this.dataBean.pagelink;break;}
return pgl;},getOnClickGoogleTracking:function()
{if(this.dataBean.pagelinktype=='custom')
{if(this.dataBean.pagelink.indexOf("/r3ng")<0)
{return"org.r3.PageManager.googleAnalyticsSendPageView('"+this.dataBean.cardid+"');";}}
return"";},getHtmlLinkFragmentTitle2Detail:function(currentPageId)
{var pgl=null;var urlPath=org.r3.Constants.getStrutsActionContext()+'/org/r3/cms/cmspage.do';if(org.r3.SiteConstants.targetSiteType=='regatta')
urlPath=org.r3.Constants.getStrutsActionContext()+'/org/r3/sev/cmspage.do';switch(this.dataBean.pagelinktype)
{case'none':pgl=this.dataBean.title;break;case'page':if(currentPageId&&this.dataBean.pageid&&this.dataBean.pageid==currentPageId)
{pgl="<a href='javascript:void(0)' data-cardid='"+this.dataBean.cardid+"' class='cmsCard_link2carddetail' >"+this.dataBean.title+"</a>";}
else
{pgl=urlPath+'?pageid='+this.dataBean.pageid+'&cardid='+this.dataBean.cardid;pgl="<a href='"+pgl+"'>"+this.dataBean.title+"</a>";}
break;case'custom':pgl="<a href='"+this.dataBean.pagelink+"' onClick=\""+this.getOnClickGoogleTracking()+"\" >"+this.dataBean.title+"</a>";break;}
return pgl;},hasExecutableHtmlFragments:function()
{return this.dataBean.listof_executablehtmlfragments&&this.dataBean.listof_executablehtmlfragments.length>0;}});jQuery.r3Utils.namespace("org.r3.db.cms.cardview");org.r3.db.cms.cardview.CardViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.cardview.CardViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['cardid']={"aTargets":[-1],"sClass":"left","sTitle":"cardid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.cardid||'';}};defaultColumnDefinitions['languagecode']={"aTargets":[-1],"sClass":"left","sTitle":"languagecode","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.languagecode||'';}};defaultColumnDefinitions['categoryid']={"aTargets":[-1],"sClass":"left","sTitle":"categoryid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.categoryid||'';}};defaultColumnDefinitions['pagelinktype']={"aTargets":[-1],"sClass":"left","sTitle":"pagelinktype","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pagelinktype||'';}};defaultColumnDefinitions['pagelink']={"aTargets":[-1],"sClass":"left","sTitle":"pagelink","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pagelink||'';}};defaultColumnDefinitions['pageid']={"aTargets":[-1],"sClass":"left","sTitle":"pageid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pageid||'';}};defaultColumnDefinitions['refdate']={"aTargets":[-1],"sClass":"left","sTitle":"Data Rif.","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.refdate||'';}};defaultColumnDefinitions['options']={"aTargets":[-1],"sClass":"left","sTitle":"options","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.options||'';}};defaultColumnDefinitions['title']={"aTargets":[-1],"sClass":"left","sTitle":"title","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.title||'';}};defaultColumnDefinitions['summary']={"aTargets":[-1],"sClass":"left","sTitle":"summary","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.summary||'';}};defaultColumnDefinitions['textbody']={"aTargets":[-1],"sClass":"left","sTitle":"textbody","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.textbody||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"rectimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.cardview.CardViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.category");org.r3.db.cms.category.CategoryDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_category";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.categoryid=aDataBean.categoryid||null;this.categorymode=aDataBean.categorymode||null;this.categorydescr=aDataBean.categorydescr||null;this.previewtmpl=aDataBean.previewtmpl||null;this.fulltmpl=aDataBean.fulltmpl||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.category");org.r3.db.cms.category.CategoryDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.category.CategoryDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.cms.category");org.r3.db.cms.category.CategoryQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.category.CategoryDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['categoryid']={"aTargets":[-1],"sClass":"left","sTitle":"categoryid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.categoryid||'';}};defaultColumnDefinitions['categorymode']={"aTargets":[-1],"sClass":"left","sTitle":"categorymode","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.categorymode||'';}};defaultColumnDefinitions['categorydescr']={"aTargets":[-1],"sClass":"left","sTitle":"categorydescr","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.categorydescr||'';}};defaultColumnDefinitions['previewtmpl']={"aTargets":[-1],"sClass":"left","sTitle":"previewtmpl","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.previewtmpl||'';}};defaultColumnDefinitions['fulltmpl']={"aTargets":[-1],"sClass":"left","sTitle":"fulltmpl","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.fulltmpl||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.category.CategoryDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.channel");org.r3.db.cms.channel.ChannelDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_channel";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.channelid=aDataBean.channelid||null;this.channelname=aDataBean.channelname||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.channel");org.r3.db.cms.channel.ChannelDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.channel.ChannelDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.cms.channel");org.r3.db.cms.channel.ChannelQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.channel.ChannelDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['channelid']={"aTargets":[-1],"sClass":"left","sTitle":"channelid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.channelid||'';}};defaultColumnDefinitions['channelname']={"aTargets":[-1],"sClass":"left","sTitle":"channelname","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.channelname||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.channel.ChannelDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.group");org.r3.db.cms.group.GroupDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_group";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.groupid=aDataBean.groupid||null;this.groupname=aDataBean.groupname||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.group");org.r3.db.cms.group.GroupDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.group.GroupDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.cms.group");org.r3.db.cms.group.GroupQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.group.GroupDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['groupid']={"aTargets":[-1],"sClass":"left","sTitle":"groupid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.groupid||'';}};defaultColumnDefinitions['groupname']={"aTargets":[-1],"sClass":"left","sTitle":"groupname","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.groupname||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":"recstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"rectimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.group.GroupDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.page");org.r3.db.cms.page.PageDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_page";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.pageid=aDataBean.pageid||null;this.pagetype=aDataBean.pagetype||null;this.pagetitle=aDataBean.pagetitle||null;this.pageicon1=aDataBean.pageicon1||null;this.pageicon2=aDataBean.pageicon2||null;this.pagelink=aDataBean.pagelink||null;this.pageorder=aDataBean.pageorder||null;this.visibility=aDataBean.visibility||null;this.pagestyle=aDataBean.pagestyle||null;this.forwardview=aDataBean.forwardview||null;this.onuserstatus=aDataBean.onuserstatus||null;this.permissions=aDataBean.permissions||null;this.viewoptions=aDataBean.viewoptions||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.page");org.r3.db.cms.page.PageDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.page.PageDTO(aDataBean));},isInRole:function()
{if(!this.dataBean.permissions)
return true;return org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,this.dataBean.permissions);},isVisible:function(aContext)
{return this.dataBean.visibility&&this.dataBean.visibility.indexOf(aContext)>=0;},getPageIcon2Url:function()
{return org.r3.SiteConstants.getSiteresourcepathUrl4FileName(this.dataBean.pageicon2);},loadPageImage:function(anImageContainerId)
{if(this.dataBean.pageicon2)
{loadImage(this.getPageIcon2Url(),function(img){if(img.type==="error"){console.log("Error loading image "+imageUrl);}else{$(anImageContainerId).append(img);}},{maxWidth:600});}},getVisibilityAsArray:function()
{if(this.dataBean.visibility)
return this.dataBean.visibility.split(',');return null;},getViewOptionsJSObject:function()
{var r={"cardindexquery":"groupid=grp_meeting","cardtemplate":"cms_tpl_cardview_type3","downloadCanvas":true};if(this.dataBean.viewoptions)
{r=JSON.parse(this.dataBean.viewoptions);}
return r;}});jQuery.r3Utils.namespace("org.r3.db.cms.page");org.r3.db.cms.page.PageQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.page.PageDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['pageid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.pageid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pageid||'';}};defaultColumnDefinitions['pagetype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.pagetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pagetype||'';}};defaultColumnDefinitions['pagetitle']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.pagetitle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pagetitle||'';}};defaultColumnDefinitions['pageicon1']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.pageicon1,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pageicon1||'';}};defaultColumnDefinitions['pageicon2']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.pageicon2,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pageicon2||'';}};defaultColumnDefinitions['pagelink']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.pagelink,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pagelink||'';}};defaultColumnDefinitions['pageorder']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.pageorder,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pageorder||'';}};defaultColumnDefinitions['visibility']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.visibility,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.visibility||'';}};defaultColumnDefinitions['pagestyle']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.pagestyle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pagestyle||'';}};defaultColumnDefinitions['forwardview']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.forwardview,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.forwardview||'';}};defaultColumnDefinitions['onuserstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.onuserstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.onuserstatus||'';}};defaultColumnDefinitions['permissions']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.permissions,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.permissions||'';}};defaultColumnDefinitions['viewoptions']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.page.message.viewoptions,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.viewoptions||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.page.PageDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.pagedescr");org.r3.db.cms.pagedescr.PageDescrDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_pagedescr";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.pageid=aDataBean.pageid||null;this.languagecode=aDataBean.languagecode||null;this.pagetitle=aDataBean.pagetitle||null;this.summary=aDataBean.summary||null;this.textbody=aDataBean.textbody||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.pagedescr");org.r3.db.cms.pagedescr.PageDescrDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.pagedescr.PageDescrDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.cms.pagedescr");org.r3.db.cms.pagedescr.PageDescrQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.pagedescr.PageDescrDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.pagedescr.message.site,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['pageid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.pagedescr.message.pageid,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pageid||'';}};defaultColumnDefinitions['languagecode']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.pagedescr.message.languagecode,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.languagecode||'';}};defaultColumnDefinitions['pagetitle']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.pagedescr.message.pagetitle,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pagetitle||'';}};defaultColumnDefinitions['summary']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.pagedescr.message.summary,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.summary||'';}};defaultColumnDefinitions['textbody']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.pagedescr.message.textbody,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.textbody||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.pagedescr.message.recstatus,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.cms.pagedescr.message.rectimestamp,"fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.pagedescr.PageDescrDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.cms.pageview");org.r3.db.cms.pageview.PageViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_pageview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.pageid=aDataBean.pageid||null;this.languagecode=aDataBean.languagecode||null;this.pagetype=aDataBean.pagetype||null;this.pagetitle=aDataBean.pagetitle||null;this.summary=aDataBean.summary||null;this.pageicon1=aDataBean.pageicon1||null;this.pageicon2=aDataBean.pageicon2||null;this.pagelink=aDataBean.pagelink||null;this.pageorder=aDataBean.pageorder||null;this.visibility=aDataBean.visibility||null;this.pagestyle=aDataBean.pagestyle||null;this.forwardview=aDataBean.forwardview||null;this.onuserstatus=aDataBean.onuserstatus||null;this.permissions=aDataBean.permissions||null;this.viewoptions=aDataBean.viewoptions||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.cms.pageview");org.r3.db.cms.pageview.PageViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.cms.pageview.PageViewDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.cms.pageview");org.r3.db.cms.pageview.PageViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.cms.pageview.PageViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['pageid']={"aTargets":[-1],"sClass":"left","sTitle":"pageid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pageid||'';}};defaultColumnDefinitions['languagecode']={"aTargets":[-1],"sClass":"left","sTitle":"languagecode","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.languagecode||'';}};defaultColumnDefinitions['pagetype']={"aTargets":[-1],"sClass":"left","sTitle":"pagetype","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pagetype||'';}};defaultColumnDefinitions['pagetitle']={"aTargets":[-1],"sClass":"left","sTitle":"pagetitle","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pagetitle||'';}};defaultColumnDefinitions['summary']={"aTargets":[-1],"sClass":"left","sTitle":"summary","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.summary||'';}};defaultColumnDefinitions['pageicon1']={"aTargets":[-1],"sClass":"left","sTitle":"pageicon1","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pageicon1||'';}};defaultColumnDefinitions['pageicon2']={"aTargets":[-1],"sClass":"left","sTitle":"pageicon2","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pageicon2||'';}};defaultColumnDefinitions['pagelink']={"aTargets":[-1],"sClass":"left","sTitle":"pagelink","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pagelink||'';}};defaultColumnDefinitions['pageorder']={"aTargets":[-1],"sClass":"left","sTitle":"pageorder","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pageorder||'';}};defaultColumnDefinitions['visibility']={"aTargets":[-1],"sClass":"left","sTitle":"visibility","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.visibility||'';}};defaultColumnDefinitions['pagestyle']={"aTargets":[-1],"sClass":"left","sTitle":"pagestyle","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pagestyle||'';}};defaultColumnDefinitions['forwardview']={"aTargets":[-1],"sClass":"left","sTitle":"forwardview","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.forwardview||'';}};defaultColumnDefinitions['onuserstatus']={"aTargets":[-1],"sClass":"left","sTitle":"onuserstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.onuserstatus||'';}};defaultColumnDefinitions['permissions']={"aTargets":[-1],"sClass":"left","sTitle":"permissions","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.permissions||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":"recstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"rectimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.cms.pageview.PageViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.mongo");org.r3.db.mongo.AddressDTO=Class.extend({init:function(aDataBean)
{this.formatted=aDataBean.formatted||null;this.snumber=aDataBean.snumber||null;this.route=aDataBean.route||null;this.locality=aDataBean.locality||null;this.adminarea_l3=aDataBean.adminarea_l3||null;this.adminarea_l2=aDataBean.adminarea_l2||null;this.adminarea_l1=aDataBean.adminarea_l1||null;this.country=aDataBean.country||null;this.postcode=aDataBean.postcode||null;this.geom=aDataBean.geom||null;this.gmapplaceid=aDataBean.gmapplaceid||null;}});org.r3.db.mongo.AddressDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.AddressDTO(aDataBean));},getRouteStreetNumber:function()
{var a=this.dataBean&&this.dataBean.route;if(a&&this.dataBean.snumber)
a=a+', '+this.dataBean.snumber;return a;},getAdministrative_area_level_1_id:function()
{if(this.dataBean&&this.dataBean.adminarea_l1&&this.dataBean.adminarea_l1.locationid)
return this.dataBean.adminarea_l1.locationid;return null;},getSerializedAdminarea_l1:function()
{if(this.dataBean&&this.dataBean.adminarea_l1)
{return this.getSerializedNameAndSName(this.dataBean.adminarea_l1);}
return null;},getAdministrative_area_level_2_id:function()
{if(this.dataBean&&this.dataBean.adminarea_l2&&this.dataBean.adminarea_l2.locationid)
return this.dataBean.adminarea_l2.locationid;return null;},getSerializedAdminarea_l2:function()
{if(this.dataBean&&this.dataBean.adminarea_l2)
{return this.getSerializedNameAndSName(this.dataBean.adminarea_l2);}
return null;},getAdministrative_area_level_3_id:function()
{if(this.dataBean&&this.dataBean.adminarea_l3&&this.dataBean.adminarea_l3.locationid)
return this.dataBean.adminarea_l3.locationid;return null;},getSerializedAdminarea_l3:function()
{if(this.dataBean&&this.dataBean.adminarea_l3)
{return this.getSerializedNameAndSName(this.dataBean.adminarea_l3);}
return null;},getSerializedCountry:function()
{if(this.dataBean&&this.dataBean.country)
{return this.getSerializedNameAndSName(this.dataBean.country);}
return null;},getSerializedNameAndSName:function(anItem)
{if(!anItem)
return null;if(anItem.sname&&anItem.name)
{return anItem.sname+'#'+anItem.name;}
return anItem.name;},getSerializedLocation:function()
{if(this.dataBean&&this.dataBean.geom&&this.dataBean.geom.location)
{return this.getSerializedLatLng(this.dataBean.geom.location);}
return null;},getLocationAsCoordsArray:function()
{if(this.dataBean&&this.dataBean.geom&&this.dataBean.geom.location)
{var item=this.dataBean.geom.location;return[item.coordinates[1],item.coordinates[0]];}
return null;},getSerializedNortheast:function()
{if(this.dataBean&&this.dataBean.geom&&this.dataBean.geom.viewpnortheast)
{return this.getSerializedLatLng(this.dataBean.geom.viewpnortheast);}
return null;},getSerializedSouthwest:function()
{if(this.dataBean&&this.dataBean.geom&&this.dataBean.geom.viewpsouthwest)
{return this.getSerializedLatLng(this.dataBean.geom.viewpsouthwest);}
return null;},getSerializedLatLng:function(anItem)
{if(!anItem)
return null;return anItem.coordinates[1]+'#'+anItem.coordinates[0];}});jQuery.r3Utils.namespace("org.r3.db.mongo");org.r3.db.mongo.MongoFileAttachmentDTO=Class.extend({init:function(aDataBean)
{this.fileid=aDataBean.fileid||null;this.url=aDataBean.url||null;this.ctype=aDataBean.ctype||null;this.width=aDataBean.width||null;this.height=aDataBean.height||null;this.name=aDataBean.name||null;this.size=aDataBean.size||null;this.attachmenttype=aDataBean.attachmenttype||null;this.fileIcon=aDataBean.fileIcon||null;}});org.r3.db.mongo.MongoFileAttachmentDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.MongoFileAttachmentDTO(aDataBean));},getUrl:function()
{return this.dataBean.url;},hasIcon:function()
{return this.dataBean.fileIcon;},getIcon:function()
{return new org.r3.db.mongo.MongoImageDTOAdapter(this.dataBean.fileIcon);},isImage:function()
{return false;}});org.r3.db.mongo.MongoFileAttachmentQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.MongoFileAttachmentDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.MongoFileAttachmentQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.MongoFileAttachmentDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.MongoFileAttachmentQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='fileid';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='fileid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.attachment_fileid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.fileid||'';}};}
var columnId='name';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.attachment_name,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.name||'';}};}
var columnId='ctype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.attachment_ctype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.ctype||'';}};}
var columnId='attachmenttype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.attachment_attachmenttype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.attachmenttype||'';}};}
var columnId='size';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.attachment_size,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.size||'0';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo");org.r3.db.mongo.MongoImageDTO=Class.extend({init:function(aDataBean)
{this.imageid=aDataBean.imageid||null;this.url=aDataBean.url||null;this.ctype=aDataBean.ctype||null;this.width=aDataBean.width||null;this.height=aDataBean.height||null;this.name=aDataBean.name||null;this.majorRole=aDataBean.majorRole||null;this.minorRole=aDataBean.minorRole||null;this.size=aDataBean.size||null;}});org.r3.db.mongo.MongoImageDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.MongoImageDTO(aDataBean));},isOfRole:function(aMajorRole,aMinorRole)
{var b=this.dataBean.minorRole&&aMinorRole&&aMinorRole==this.dataBean.minorRole&&this.dataBean.majorRole&&aMajorRole&&aMajorRole==this.dataBean.majorRole;return b;},getUrl:function()
{return this.dataBean.url;},});org.r3.db.mongo.MongoImageQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.MongoImageDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.MongoImageQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.MongoImageDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.MongoImageQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='postid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.postid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.postid||'';}};}
var columnId='size';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.attachment_size,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.size||'0';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo");org.r3.db.mongo.MongoImageIconDTO=Class.extend({init:function(aDataBean)
{this.imageiconid=aDataBean.imageiconid||null;this.imagerole=aDataBean.imagerole||null;this.image=aDataBean.image||null;this.icon=aDataBean.icon||null;}});org.r3.db.mongo.MongoImageIconDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.MongoImageIconDTO(aDataBean));},isOfRole:function(aRole)
{var b=this.dataBean.imagerole&&aRole&&this.dataBean.imagerole==aRole;return b;},hasImage:function()
{return this.dataBean.image;},getImage:function()
{if(this.dataBean.image)
return new org.r3.db.mongo.MongoImageDTOAdapter(this.dataBean.image);return null;},hasIcon:function()
{return this.dataBean.icon;},getIcon:function()
{if(this.dataBean.icon)
return new org.r3.db.mongo.MongoImageDTOAdapter(this.dataBean.icon);return null;}});org.r3.db.mongo.MongoImageIconQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.MongoImageIconDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.MongoImageIconQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.MongoImageIconDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.MongoImageIconQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='postid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.postid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.postid||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo");org.r3.db.mongo.MongoLinkDTO=Class.extend({init:function(aDataBean)
{this.linkid=aDataBean.linkid||null;this.refattachmentid=aDataBean.refattachmentid||null;this.href=aDataBean.href||null;this.name=aDataBean.name||null;this.linktype=aDataBean.linktype||null;}});org.r3.db.mongo.MongoLinkDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.MongoLinkDTO(aDataBean));}});org.r3.db.mongo.MongoLinkQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.MongoLinkDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.MongoLinkQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.MongoLinkDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.MongoLinkQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='linkid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.link_linkid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.linkid||'';}};}
var columnId='href';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.link_href,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.href||'';}};}
var columnId='name';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.link_name,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.name||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection");org.r3.db.mongo.contentdefinitioncollection.ContentDefinitionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_lutcollection";this.dtokey=aDataBean.dtokey;this.dtodescr=aDataBean.dtodescr
this.photographictype=aDataBean.photographictype;this.mongocms=aDataBean.mongocms;this.timeline=aDataBean.timeline;this.modelclass=aDataBean.modelclass;this.formvalidation=aDataBean.formvalidation;this.geolocation=aDataBean.geolocation;}});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection");org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList={"parentpostid":1,"postid":1,"contentclass":1,"title":1,"content":1,"files":1,"timeline":1,"author":1,"authorname":1,"authortype":1,"photo":1,"geolat":1,"geolong":1,"geoacc":1};org.r3.db.mongo.contentdefinitioncollection.getContentClassDefinition=function(contentClass)
{var contentClassLUTResolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_contentclassdef');var lutItem=org.r3.PageManager.lutManager.getLUTItem(contentClassLUTResolvedUrl,contentClass);if(lutItem)
lutItem=new org.r3.db.mongo.contentdefinitioncollection.ContentDefinitionDTOAdapter(lutItem);return lutItem;};org.r3.db.mongo.contentdefinitioncollection.getPhotoGraphicContentDefinitionByContentClass=function(contentClass)
{var contentClassDef=org.r3.db.mongo.contentdefinitioncollection.getContentClassDefinition(contentClass);var graphicContentDefinitionLUTResolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_graphcontentdef');var lutItem=org.r3.PageManager.lutManager.getLUTItem(graphicContentDefinitionLUTResolvedUrl,contentClassDef.dataBean.photographictype);return lutItem;};org.r3.db.mongo.contentdefinitioncollection.ContentDefinitionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.contentdefinitioncollection.ContentDefinitionDTO(aDataBean));this.modelObject=null;this.viewTemplate=null;},isSectionEnabledInMongoCMS:function(aSectionName)
{if(this.dataBean.mongocms&&this.dataBean.mongocms.sections&&this.dataBean.mongocms.sections.length)
{for(var i=0;i<this.dataBean.mongocms.sections.length;i++)
{if(this.dataBean.mongocms.sections[i]==aSectionName)
return true;}}
return false;},getGeolocationOptions:function()
{return this.dataBean.geolocation||"disabled";},shouldGeoLocationBeAcquired:function()
{var o=this.getGeolocationOptions();return o!="disabled";},isGeoLocationRequired:function()
{var o=this.getGeolocationOptions();return o=="required";},newModelObject:function()
{var modelObject=eval('new '+this.dataBean.modelclass+'()');modelObject.setContentDefinitionDTOAdapter(this);return modelObject;},getModelObject:function()
{if(!this.modelObject)
{this.modelObject=this.newModelObject();}
return this.modelObject;},initializeModelObject:function(eventHandler)
{this.getModelObject().setupForm(eventHandler);},setAuhtorInfo:function(anAuthorInfo)
{this.getModelObject().setAuhtorInfo(this.dataBean.dtokey,anAuthorInfo);},getFormValidation:function()
{var fv=eval(this.dataBean.formvalidation);return fv;},getTimelinePhotoUploadOptions:function()
{var _self=this;var graphicContent=org.r3.db.mongo.contentdefinitioncollection.getPhotoGraphicContentDefinitionByContentClass(this.dataBean.dtokey);var uploadOptions={"extra_info":graphicContent.extrainfo,"aspect_ratio":graphicContent.aspectratio,"max_size":graphicContent.maxsize,onUploadCallback:this.getModelObject().displayPhoto,onUploadedCallback:function(responseData)
{_self.getModelObject().setPhoto(responseData);console.log('On Uploaded CallBack',responseData);}};return uploadOptions;},getEditTemplateURL:function()
{return this.dataBean.mongocms.content.template;},getTimelineEditTemplateURL:function()
{return this.dataBean.timeline.timeline_edit_template;},getTimelineViewTemplateURL:function()
{return this.dataBean.timeline.timeline_view_template;;},setViewTemplate:function(aViewTemplate)
{this.viewTemplate=aViewTemplate;},applyViewTemplate:function(aPost)
{templatedHtml=tmpl(this.viewTemplate,{post:aPost,postProfile:this});return templatedHtml;},getActionsByActionType:function(anActionType,targetObj,commentObj)
{return this.getEnabledActionsByType(anActionType,targetObj,commentObj);},_evalVisibility:function(aVisibilityRule,primaryObj,secondaryObject)
{var targetObj=(secondaryObject)?secondaryObject:primaryObj;var tokenizedExpr=aVisibilityRule&&aVisibilityRule.split(/([ ||&&()!]+)/);if(tokenizedExpr&&tokenizedExpr.length)
{var compiledVisibilityRule="";for(var j=0;j<tokenizedExpr.length;j++)
{var token=tokenizedExpr[j];switch(token)
{case'always':compiledVisibilityRule+='true';break;case'isFollower':if(org.r3.PageManager.userCollectionProfileInfo.isUserFollower())
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isOwner':if(targetObj.isUserOwnerOfContent(org.r3.PageManager.userInfo,org.r3.PageManager.userCollectionProfileInfo))
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isMerchant':if(org.r3.PageManager.userCollectionProfileInfo.isUserMerchant())
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isShaked':if(secondaryObject&&secondaryObject.isShaked())
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isPostOwner':if(primaryObj.isUserOwnerOfContent(org.r3.PageManager.userInfo,org.r3.PageManager.userCollectionProfileInfo))
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isNeighbowner':if(org.r3.PageManager.userCollectionProfileInfo.isUserNeighborhoodOwner())
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'never':compiledVisibilityRule+='false';break;default:compiledVisibilityRule+=token;}}
if(compiledVisibilityRule.length>0)
return eval(compiledVisibilityRule);}
return false;},_getTimelineActions:function()
{if(this.dataBean==null||!this.dataBean.timeline||!this.dataBean.timeline.timeline_actions||!this.dataBean.timeline.timeline_actions.length)
return null;return this.dataBean.timeline.timeline_actions;},getActionsByType:function(anActionType)
{var actions=this._getTimelineActions();if(!actions)
return null;var acts=[];for(var i=0;i<actions.length;i++)
{var item=actions[i];if(item.actionType==anActionType)
{acts.push(item);}}
return acts;},getActionsById:function(anActionId)
{var actions=this._getTimelineActions();if(!actions)
return null;for(var i=0;i<actions.length;i++)
{var item=actions[i];if(item.id==anActionId)
{return item;}}
return null;},getEnabledActionsByType:function(anActionType,primaryObj,secondaryObject)
{var actions=this._getTimelineActions();if(!actions)
return null;var acts=[];for(var i=0;i<actions.length;i++)
{var item=actions[i];if(item.actionType==anActionType)
{if(this._evalVisibility(item.visibility,primaryObj,secondaryObject))
{acts.push(item);}}}
return acts;},isActionEnabled:function(anActionId,primaryObj,secondaryObject)
{var actions=this._getTimelineActions();if(!actions)
return false;for(var i=0;i<actions.length;i++)
{var item=actions[i];if(item.id==anActionId)
{return this._evalVisibility(item.visibility,primaryObj,secondaryObject);}}
return false;},getCurrentUserEnabledRoles4NewPost:function(anActionId,aPostObj)
{var roles=[];var lastAuthorChosenByUser=org.r3.PageManager.userCollectionProfileInfo.getUserAnalyticsLastpostauthor();var preferredAuthor=null;var act=this.getActionsById(anActionId);if(act)
{var postOwnerAdded=null;var enabledRoles=act.roles;if(enabledRoles.indexOf('postOwner')>=0)
{switch(aPostObj.dataBean.authortype)
{case'user':if(org.r3.PageManager.userInfo.dataBean.userid==aPostObj.dataBean.author)
{roles.push({author:org.r3.PageManager.userInfo.dataBean.userid,authorname:org.r3.PageManager.userInfo.getUserFullname(),authortype:'user',getAuthorphotourl:function(){return org.r3.PageManager.userInfo.getUserPhotoIconUrl();}});postOwnerAdded=aPostObj.dataBean.author;if(lastAuthorChosenByUser&&lastAuthorChosenByUser==org.r3.PageManager.userInfo.dataBean.userid)
preferredAuthor=roles[roles.length-1];}
break;case'merchant':if(org.r3.PageManager.userInfo.hasRole4Site(aPostObj.dataBean.author,org.r3.db.system.user.user.role_shkadmin)||org.r3.PageManager.userInfo.hasRole4Site(aPostObj.dataBean.author,org.r3.db.system.user.user.role_shkowner))
{var m=org.r3.PageManager.userCollectionProfileInfo.getMerchantRoleById(aPostObj.dataBean.author);roles.push({author:m.site.site,authorname:m.site.sitedescription,authortype:'merchant',getAuthorphotourl:function(){return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[this.author,'sitesquared','icon']);}});postOwnerAdded=aPostObj.dataBean.author;if(lastAuthorChosenByUser&&lastAuthorChosenByUser==m.site.site)
preferredAuthor=roles[roles.length-1];}
break;case'neighbowner':if(org.r3.PageManager.userInfo.hasRole4Site(aPostObj.dataBean.author,org.r3.db.system.user.user.role_shkadmin)||org.r3.PageManager.userInfo.hasRole4Site(aPostObj.dataBean.author,org.r3.db.system.user.user.role_shkowner))
{roles.push({author:org.r3.SiteConstants.targetSite,authorname:org.r3.SiteConstants.targetSiteName,authortype:'neighborhood',getAuthorphotourl:function(){return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[org.r3.SiteConstants.targetSite,'sitesquared','icon']);}});postOwnerAdded=aPostObj.dataBean.author;if(lastAuthorChosenByUser&&lastAuthorChosenByUser==org.r3.SiteConstants.targetSite)
preferredAuthor=roles[roles.length-1];}
break;}}
if(enabledRoles.indexOf('user')>=0&&(!postOwnerAdded||postOwnerAdded!=org.r3.PageManager.userInfo.dataBean.userid))
{roles.push({author:org.r3.PageManager.userInfo.dataBean.userid,authorname:org.r3.PageManager.userInfo.getUserFullname(),authortype:'user',getAuthorphotourl:function(){return org.r3.PageManager.userInfo.getUserPhotoIconUrl();}});if(lastAuthorChosenByUser&&lastAuthorChosenByUser==org.r3.PageManager.userInfo.dataBean.userid)
preferredAuthor=roles[roles.length-1];}
if(enabledRoles.indexOf('merchant')>=0&&org.r3.PageManager.userCollectionProfileInfo.isUserMerchant())
{var merchantRoles=org.r3.PageManager.userCollectionProfileInfo.merchantRoles;for(var i=0;i<merchantRoles.length;i++)
{if((!postOwnerAdded||postOwnerAdded!=merchantRoles[i].site.site))
{roles.push({author:merchantRoles[i].site.site,authorname:merchantRoles[i].site.sitedescription,authortype:'merchant',getAuthorphotourl:function(){return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[this.author,'sitesquared','icon']);}});if(lastAuthorChosenByUser&&lastAuthorChosenByUser==merchantRoles[i].site.site)
preferredAuthor=roles[roles.length-1];}}}
if(enabledRoles.indexOf('neighbowner')>=0&&org.r3.PageManager.userCollectionProfileInfo.isUserNeighborhoodOwner()&&(!postOwnerAdded||postOwnerAdded!=org.r3.SiteConstants.targetSite))
{roles.push({author:org.r3.SiteConstants.targetSite,authorname:org.r3.SiteConstants.targetSiteName,authortype:'neighborhood',getAuthorphotourl:function(){return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[org.r3.SiteConstants.targetSite,'sitesquared','icon']);}});if(lastAuthorChosenByUser&&lastAuthorChosenByUser==org.r3.SiteConstants.targetSite)
preferredAuthor=roles[roles.length-1];}}
if(roles.length)
{if(!preferredAuthor)
preferredAuthor=roles[0];return{current:preferredAuthor,listofroles:roles};}
return null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection");org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel=Class.extend({init:function(aContentDefinitionDTOAdapter)
{this.contentDefinitionDTOAdapter=aContentDefinitionDTOAdapter;this.objectCanvas;this.photo=null;},setObjectCanvas:function(aJQueryObject)
{this.objectCanvas=aJQueryObject;},_getContentDefinitionId:function()
{return this.contentDefinitionDTOAdapter&&this.contentDefinitionDTOAdapter.dataBean.dtokey;},setContentDefinitionDTOAdapter:function(aContentDefinitionDTOAdapter)
{this.contentDefinitionDTOAdapter=aContentDefinitionDTOAdapter;},setPhoto:function(aMongoImageIcon)
{this.photo=aMongoImageIcon;},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},acquireGeoLocationInfo:function()
{var geoLocRequired=this.contentDefinitionDTOAdapter.isGeoLocationRequired();if(this.contentDefinitionDTOAdapter.shouldGeoLocationBeAcquired())
{org.r3.GoogleMapsUtils.geoCodeLocation($.r3Utils.hitch(this,this._setupCoordinates),(geoLocRequired)?$.r3Utils.hitch(this,this._geoLocationBlocked):$.r3Utils.hitch(this,this._geoLocationBlocked))}},_setupCoordinates:function(lat,long,accuracy)
{var cid=this._getContentDefinitionId();$('#'+cid+'_geolat').val(lat);$('#'+cid+'_geolong').val(long);$('#'+cid+'_geoacc').val(accuracy);if(this.objectCanvas)
{var postHeaderMessage=this.objectCanvas.find('.infomessage');postHeaderMessage.html("GEO OK: "+lat+' - '+long);var marker=this.objectCanvas.find('.box-tools i.fa-map-marker');marker.toggleClass('text-success');}},_geoLocationBlocked:function(aCode,aMessage)
{if(this.objectCanvas)
{var postHeaderMessage=this.objectCanvas.find('.infomessage');postHeaderMessage.html("GEO Fail: "+aCode+' - '+aMessage);var marker=this.objectCanvas.find('.box-tools i.fa-map-marker');marker.toggleClass('text-danger');}},resetCommonForm:function()
{var cid=this._getContentDefinitionId();$('#'+cid+'_geolat').val(null);$('#'+cid+'_geolong').val(null);$('#'+cid+'_geoacc').val(null);},onPositionToolClick:function()
{if(this.objectCanvas)
{var postHeaderMessage=this.objectCanvas.find('.infomessage');postHeaderMessage.show();}}});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.crewask");org.r3.db.mongo.contentdefinitioncollection.crewask.Crewask_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#crewask_form');},setupForm:function(eventHandler)
{$('#crewask_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.crewask.crewask_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.crewask.crewask_validation_messages});$('#crewask_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#crewask_form button').unbind().click(eventHandler);},resetForm:function()
{$('#crewask_form')[0].reset();this.resetCommonForm();$('#crewask_parentpostid').val(null);$('#crewask_postid').val(null);$('#crewask_title').val(null);$('#crewask_content').val(null);$('#crewask_photo').val(null);$('#crewask_image')[0].src='/r3ng/resources/sites/default/default_avatar_male.jpg';this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{$('#crewask_image')[0].src=blob_or_canvas;},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#crewask_timeline').val(aTimelineId);$('#crewask_parentpostid').val(aPostDTOAdapter);}
else
{$('#crewask_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#crewask_parentpostid').val(aPostDTOAdapter.dataBean.parentpostid);$('#crewask_postid').val(aPostDTOAdapter.dataBean.postid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#crewask_crewrole").val(contentInfo.crewrole);$("#crewask_crewlevel").val(contentInfo.crewlevel);$("#crewask_crewname").val(contentInfo.crewname);$("#crewask_crewemail").val(contentInfo.crewemail);$("#crewask_crewphone").val(contentInfo.crewphone);$("#crewask_crewweight").val(contentInfo.crewweight);$("#crewask_crewheight").val(contentInfo.crewheight);$("#crewask_crewage").val(contentInfo.crewage);$("#crewask_crewinfo").val(contentInfo.crewinfo);this.photo=null;var u=aPostDTOAdapter.getPhotoUrl();if(u)
{this.displayPhoto($.r3Utils.formatDMSUrl4ClientAccess(u));this.setPhoto(aPostDTOAdapter.dataBean.photo);}}}
else
{this.acquireGeoLocationInfo();$('#crewask_timeline').val(aTimelineId);}
this.setAuhtorInfo("crewask",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var crewRoleVal=$('#crewask_crewrole').val();var crewRoleText='';if(crewRoleVal&&crewRoleVal.length>0)
{crewRoleText=$("#crewask_crewrole option[value='"+crewRoleVal+"']").text();serializedArray.push({"name":"crewroletext","value":crewRoleText});}
var crewLevelVal=$('#crewask_crewlevel').val();var crewLevelText='';if(crewLevelVal&&crewLevelVal.length>0)
{crewLevelText=$("#crewask_crewlevel option[value='"+crewLevelVal+"']").text();serializedArray.push({"name":"crewleveltext","value":crewLevelText});}
var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#crewask_content').val(data);if(this.photo)
{$('#crewask_photo').val(JSON.stringify(this.photo));}
else
$('#crewask_photo').val();if(crewRoleVal&&crewRoleVal.length>0)
$('#crewask_title').val(crewRoleText+' '+crewLevelText);else $('#crewask_title').val($('#crewask_crewname').val());},showMessage:function(m)
{$('#crewask_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.crewask",window,function(aNamespace)
{aNamespace.crewask_validation_rules={title:{required:true,maxlength:80},crewrole:{required:false},crewlevel:{required:false},ownername:{required:true,maxlength:60},crewname:{required:true,maxlength:60},owneremail:{required:true,email:true,maxlength:60},crewemail:{required:true,email:true,maxlength:60},ownerphone:{required:true,digits:true,maxlength:15},crewphone:{required:true,digits:true,maxlength:15},crewweight:{required:false,digits:true,maxlength:6},crewheight:{required:false,digits:true,maxlength:6},crewage:{required:false,digits:true,maxlength:6},crewinfo:{required:false,maxlength:255},yachtinfo:{required:false,maxlength:255},yachtname:{required:true,maxlength:30},yachtmodel:{required:true,maxlength:30}};aNamespace.crewask_validation_messages={title:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewrole:{required:org.r3.message.field_required},crewlevel:{required:org.r3.message.field_required},ownername:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},ownermail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},crewemail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},ownerphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewweight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewheight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewage:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtmodel:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.crewoffer");org.r3.db.mongo.contentdefinitioncollection.crewoffer.Crewoffer_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#crewoffer_form');},setupForm:function(eventHandler)
{$('#crewoffer_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.crewoffer.crewoffer_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.crewoffer.crewoffer_validation_messages});$('#crewoffer_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#crewoffer_form button').unbind().click(eventHandler);},resetForm:function()
{$('#crewoffer_form')[0].reset();this.resetCommonForm();$('#crewoffer_parentpostid').val(null);$('#crewoffer_postid').val(null);$('#crewoffer_title').val(null);$('#crewoffer_content').val(null);$('#crewoffer_photo').val(null);$('#crewoffer_image')[0].src='/r3ng/resources/sites/default/default_avatar_male.jpg';this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{$('#crewoffer_image')[0].src=blob_or_canvas;},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#crewoffer_timeline').val(aTimelineId);$('#crewoffer_parentpostid').val(aPostDTOAdapter);}
else
{$('#crewoffer_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#crewoffer_parentpostid').val(aPostDTOAdapter.dataBean.parentpostid);$('#crewoffer_postid').val(aPostDTOAdapter.dataBean.postid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};if(contentInfo.crewrole&&contentInfo.crewrole.length>0)
{var listOfRoles=contentInfo.crewrole.split(',');if(listOfRoles&&listOfRoles.length)
{for(var j=0;j<listOfRoles.length;j++)
{$('#crewoffer_crewrole_'+listOfRoles[j]).prop('checked',true);}}}
$("#crewoffer_crewlevel").val(contentInfo.crewlevel);$("#crewoffer_ownername").val(contentInfo.ownername);$("#crewoffer_owneremail").val(contentInfo.owneremail);$("#crewoffer_ownerphone").val(contentInfo.ownerphone);$("#crewoffer_yachtname").val(contentInfo.yachtname);$("#crewoffer_yachtmodel").val(contentInfo.yachtmodel);$("#crewoffer_yachtinfo").val(contentInfo.yachtinfo);this.photo=null;var u=aPostDTOAdapter.getPhotoUrl();if(u)
{this.displayPhoto($.r3Utils.formatDMSUrl4ClientAccess(u));this.setPhoto(aPostDTOAdapter.dataBean.photo);}}}
else
{this.acquireGeoLocationInfo();$('#crewoffer_timeline').val(aTimelineId);}
this.setAuhtorInfo("crewoffer",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var crewRoleVal='';var crewRoleText='';var rolesCheck=$("#crewoffer_form input[type='checkbox'][name='crewrole']");for(var i=0;i<rolesCheck.length;i++)
{var cbk=$(rolesCheck[i]);if(cbk.prop('checked'))
{if(crewRoleVal.length>0)
crewRoleVal=crewRoleVal+',';crewRoleVal=crewRoleVal+cbk.val();if(crewRoleText.length>0)
crewRoleText=crewRoleText+', ';crewRoleText=crewRoleText+cbk.parent().text();}}
if(crewRoleVal&&crewRoleVal.length>0)
{serializedArray.push({"name":"crewroletext","value":crewRoleText});}
var crewLevelVal=$('#crewoffer_crewlevel').val();var crewLevelText='';if(crewLevelVal&&crewLevelVal.length>0)
{crewLevelText=$("#crewoffer_crewlevel option[value='"+crewLevelVal+"']").text();serializedArray.push({"name":"crewleveltext","value":crewLevelText});}
var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#crewoffer_content').val(data);if(this.photo)
{$('#crewask_photo').val(JSON.stringify(this.photo));}
else
$('#crewoffer_photo').val();if(crewRoleVal&&crewRoleVal.length>0)
$('#crewoffer_title').val(crewRoleText+' '+crewLevelText);else $('#crewoffer_title').val($('#crewoffer_ownername').val());},showMessage:function(m)
{$('#crewoffer_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.crewoffer",window,function(aNamespace)
{aNamespace.crewoffer_validation_rules={nodetitle:{required:true,maxlength:80},crewrole:{required:false},crewlevel:{required:false},ownername:{required:true,maxlength:60},crewname:{required:true,maxlength:60},owneremail:{required:true,email:true,maxlength:60},crewemail:{required:true,email:true,maxlength:60},ownerphone:{required:true,digits:true,maxlength:15},crewphone:{required:true,digits:true,maxlength:15},crewweight:{required:false,digits:true,maxlength:6},crewheight:{required:false,digits:true,maxlength:6},crewage:{required:false,digits:true,maxlength:6},crewinfo:{required:false,maxlength:255},yachtinfo:{required:false,maxlength:255},yachtname:{required:true,maxlength:30},yachtmodel:{required:true,maxlength:30}};aNamespace.crewoffer_validation_messages={nodetitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewrole:{required:org.r3.message.field_required},crewlevel:{required:org.r3.message.field_required},ownername:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},ownermail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},crewemail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},ownerphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewweight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewheight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewage:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtmodel:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shcask");org.r3.db.mongo.contentdefinitioncollection.shcask.Shcask_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#shcask_form');},setupForm:function(eventHandler)
{$('#shcask_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.shcask.shcask_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.shcask.shcask_validation_messages});$('#shcask_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#shcask_form button').unbind().click(eventHandler);},resetForm:function()
{$('#shcask_form')[0].reset();this.resetCommonForm();$('#shcask_parentpostid').val(null);$('#shcask_postid').val(null);$('#shcask_title').val(null);$('#shcask_content').val(null);$('#shcask_image').empty();$('#shcask_photo').val(null);this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{var img=document.createElement('img');img.src=blob_or_canvas;img=$(img);img.css("width","100%");$('#shcask_postimage').html(img);},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#shcask_timeline').val(aTimelineId);$('#shcask_parentpostid').val(aPostDTOAdapter);}
else
{$('#shcask_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#shcask_parentpostid').val(aPostDTOAdapter.dataBean.parentpostid);$('#shcask_postid').val(aPostDTOAdapter.dataBean.postid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#shcask_what").val(contentInfo.what);$("#shcask_description").val(contentInfo.description);$("#shcask_unitprice").val(contentInfo.unitprice);this.photo=null;var u=aPostDTOAdapter.getPhotoUrl();if(u)
{this.displayPhoto($.r3Utils.formatDMSUrl4ClientAccess(u));this.setPhoto(aPostDTOAdapter.dataBean.photo);}}}
else
{this.acquireGeoLocationInfo();$('#shcask_timeline').val(aTimelineId);}
this.setAuhtorInfo("shcask",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#shcask_content').val(data);if(this.photo)
{$('#shcask_photo').val(JSON.stringify(this.photo));}
else
$('#shcask_photo').val();$('#shcask_title').val($('#shcask_what').val());},showMessage:function(m)
{$('#shcask_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shcask",window,function(aNamespace)
{aNamespace.shcask_validation_rules={what:{required:true,maxlength:80},unitprice:{required:false,maxlength:10,digits:true},description:{required:true,maxlength:255}};aNamespace.shcask_validation_messages={what:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},unitprice:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},description:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shcaskoffer");org.r3.db.mongo.contentdefinitioncollection.shcaskoffer.Shcaskoffer_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#shcaskoffer_form');},setupForm:function(eventHandler)
{$('#shcaskoffer_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.shcaskoffer.shcaskoffer_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.shcaskoffer.shcaskoffer_validation_messages});$('#shcaskoffer_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#shcaskoffer_form button').unbind().click(eventHandler);},resetForm:function()
{$('#shcaskoffer_form')[0].reset();this.resetCommonForm();$('#shcaskoffer_parentpostid').val(null);$('#shcaskoffer_postid').val(null);$('#shcaskoffer_title').val(null);$('#shcaskoffer_content').val(null);$('#shcaskoffer_image').empty();$('#shcaskoffer_photo').val(null);this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{var img=document.createElement('img');img.src=blob_or_canvas;img=$(img);img.css("width","100%");$('#shcaskoffer_postimage').html(img);},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#shcaskoffer_timeline').val(aTimelineId);$('#shcaskoffer_parentpostid').val(aPostDTOAdapter);}
else
{$('#shcaskoffer_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#shcaskoffer_parentpostid').val(aPostDTOAdapter.dataBean.postid);$('#shcaskoffer_postid').val(aPostDTOAdapter.dataBean.commentid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#shcaskoffer_shcaskoffer").val(contentInfo.shcaskoffer);this.photo=null;}}
else
{this.acquireGeoLocationInfo();$('#shcaskoffer_timeline').val(aTimelineId);}
this.setAuhtorInfo("shcaskoffer",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#shcaskoffer_content').val(data);$('#shcaskoffer_title').val('Tweet');},showMessage:function(m)
{$('#shcaskoffer_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shcaskoffer",window,function(aNamespace)
{aNamespace.shcaskoffer_validation_rules={shcaskoffer:{required:true,maxlength:80}};aNamespace.shcaskoffer_validation_messages={shcaskoffer:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shcoffer");org.r3.db.mongo.contentdefinitioncollection.shcoffer.Shcoffer_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#shcoffer_form');},setupForm:function(eventHandler)
{$('#shcoffer_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.shcoffer.shcoffer_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.shcoffer.shcoffer_validation_messages});$('#shcoffer_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#shcoffer_form button').unbind().click(eventHandler);},resetForm:function()
{$('#shcoffer_form')[0].reset();this.resetCommonForm();$('#shcoffer_parentpostid').val(null);$('#shcoffer_postid').val(null);$('#shcoffer_title').val(null);$('#shcoffer_content').val(null);$('#shcoffer_image').empty();$('#shcoffer_photo').val(null);this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{var img=document.createElement('img');img.src=blob_or_canvas;img=$(img);img.css("width","100%");$('#shcoffer_postimage').html(img);},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#shcoffer_timeline').val(aTimelineId);$('#shcoffer_parentpostid').val(aPostDTOAdapter);}
else
{$('#shcoffer_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#shcoffer_parentpostid').val(aPostDTOAdapter.dataBean.parentpostid);$('#shcoffer_postid').val(aPostDTOAdapter.dataBean.postid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#shcoffer_what").val(contentInfo.what);$("#shcoffer_description").val(contentInfo.description);$("#shcoffer_unitprice").val(contentInfo.unitprice);$("#shcoffer_availability").val(contentInfo.availability);this.photo=null;var u=aPostDTOAdapter.getPhotoUrl();if(u)
{this.displayPhoto($.r3Utils.formatDMSUrl4ClientAccess(u));this.setPhoto(aPostDTOAdapter.dataBean.photo);}}}
else
{this.acquireGeoLocationInfo();$('#shcoffer_timeline').val(aTimelineId);}
this.setAuhtorInfo("shcoffer",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#shcoffer_content').val(data);if(this.photo)
{$('#shcoffer_photo').val(JSON.stringify(this.photo));}
else
$('#shcoffer_photo').val();$('#shcoffer_title').val($('#shcoffer_what').val());},showMessage:function(m)
{$('#shcoffer_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shcoffer",window,function(aNamespace)
{aNamespace.shcoffer_validation_rules={what:{required:true,maxlength:80},availability:{required:true,maxlength:10,digits:true},unitprice:{required:true,maxlength:10,digits:true},description:{required:true,maxlength:255}};aNamespace.shcoffer_validation_messages={what:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},availability:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},unitprice:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},description:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shcofferbook");org.r3.db.mongo.contentdefinitioncollection.shcofferbook.Shcofferbook_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#shcofferbook_form');},setupForm:function(eventHandler)
{$('#shcofferbook_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.shcofferbook.shcofferbook_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.shcofferbook.shcofferbook_validation_messages});$('#shcofferbook_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#shcofferbook_form button').unbind().click(eventHandler);},resetForm:function()
{$('#shcofferbook_form')[0].reset();this.resetCommonForm();$('#shcofferbook_parentpostid').val(null);$('#shcofferbook_postid').val(null);$('#shcofferbook_title').val(null);$('#shcofferbook_content').val(null);$('#shcofferbook_image').empty();$('#shcofferbook_photo').val(null);this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{var img=document.createElement('img');img.src=blob_or_canvas;img=$(img);img.css("width","100%");$('#shcofferbook_postimage').html(img);},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#shcofferbook_timeline').val(aTimelineId);$('#shcofferbook_parentpostid').val(aPostDTOAdapter);}
else
{$('#shcofferbook_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#shcofferbook_parentpostid').val(aPostDTOAdapter.dataBean.postid);$('#shcofferbook_postid').val(aPostDTOAdapter.dataBean.commentid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#shcofferbook_message").val(contentInfo.message);this.photo=null;}}
else
{this.acquireGeoLocationInfo();$('#shcofferbook_timeline').val(aTimelineId);}
this.setAuhtorInfo("shcofferbook",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#shcofferbook_content').val(data);$('#shcofferbook_title').val('Tweet');},showMessage:function(m)
{$('#shcofferbook_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shcofferbook",window,function(aNamespace)
{aNamespace.shcofferbook_validation_rules={message:{required:true,maxlength:80}};aNamespace.shcofferbook_validation_messages={message:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shkarticle");org.r3.db.mongo.contentdefinitioncollection.shkarticle.Shkarticle_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#shkarticle_form');},setupForm:function(eventHandler)
{$('#shkarticle_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.shkarticle.shkarticle_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.shkarticle.shkarticle_validation_messages});$('#shkarticle_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#shkarticle_form button').unbind().click(eventHandler);},resetForm:function()
{$('#shkarticle_form')[0].reset();this.resetCommonForm();$('#shkarticle_parentpostid').val(null);$('#shkarticle_postid').val(null);$('#shkarticle_title').val(null);$('#shkarticle_content').val(null);$('#shkarticle_image').empty();$('#shkarticle_photo').val(null);this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{var img=document.createElement('img');img.src=blob_or_canvas;img=$(img);img.css("width","100%");$('#shkarticle_postimage').html(img);},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#shkarticle_timeline').val(aTimelineId);$('#shkarticle_parentpostid').val(aPostDTOAdapter);}
else
{$('#shkarticle_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#shkarticle_parentpostid').val(aPostDTOAdapter.dataBean.parentpostid);$('#shkarticle_postid').val(aPostDTOAdapter.dataBean.postid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#shkarticle_message").val(contentInfo.message);this.photo=null;var u=aPostDTOAdapter.getPhotoUrl();if(u)
{this.displayPhoto($.r3Utils.formatDMSUrl4ClientAccess(u));this.setPhoto(aPostDTOAdapter.dataBean.photo);}}}
else
{this.acquireGeoLocationInfo();$('#shkarticle_timeline').val(aTimelineId);}
this.setAuhtorInfo("shkarticle",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#shkarticle_content').val(data);if(this.photo)
{$('#shkarticle_photo').val(JSON.stringify(this.photo));}
else
$('#shkarticle_photo').val();$('#shkarticle_title').val($('#shkarticle_message').val());},showMessage:function(m)
{$('#shkarticle_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shkarticle",window,function(aNamespace)
{aNamespace.shkarticle_validation_rules={message:{required:true,maxlength:250}};aNamespace.shkarticle_validation_messages={message:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shkmessage");org.r3.db.mongo.contentdefinitioncollection.shkmessage.Shkmessage_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#shkmessage_form');},setupForm:function(eventHandler)
{$('#shkmessage_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.shkmessage.shkmessage_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.shkmessage.shkmessage_validation_messages});$('#shkmessage_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#shkmessage_form button').unbind().click(eventHandler);},resetForm:function()
{$('#shkmessage_form')[0].reset();this.resetCommonForm();$('#shkmessage_parentpostid').val(null);$('#shkmessage_postid').val(null);$('#shkmessage_title').val(null);$('#shkmessage_content').val(null);$('#shkmessage_image').empty();$('#shkmessage_photo').val(null);this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{var img=document.createElement('img');img.src=blob_or_canvas;img=$(img);img.css("width","100%");$('#shkmessage_postimage').html(img);},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#shkmessage_timeline').val(aTimelineId);$('#shkmessage_parentpostid').val(aPostDTOAdapter);}
else
{$('#shkmessage_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#shkmessage_parentpostid').val(aPostDTOAdapter.dataBean.parentpostid);$('#shkmessage_postid').val(aPostDTOAdapter.dataBean.postid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#shkmessage_message").val(contentInfo.message);this.photo=null;var u=aPostDTOAdapter.getPhotoUrl();if(u)
{this.displayPhoto($.r3Utils.formatDMSUrl4ClientAccess(u));this.setPhoto(aPostDTOAdapter.dataBean.photo);}}}
else
{this.acquireGeoLocationInfo();$('#shkmessage_timeline').val(aTimelineId);}
this.setAuhtorInfo("shkmessage",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#shkmessage_content').val(data);if(this.photo)
{$('#shkmessage_photo').val(JSON.stringify(this.photo));}
else
$('#shkmessage_photo').val();$('#shkmessage_title').val($('#shkmessage_message').val());},showMessage:function(m)
{$('#shkmessage_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shkmessage",window,function(aNamespace)
{aNamespace.shkmessage_validation_rules={message:{required:true,maxlength:512}};aNamespace.shkmessage_validation_messages={message:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shknews");org.r3.db.mongo.contentdefinitioncollection.shknews.Shknews_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#shknews_form');},setupForm:function(eventHandler)
{$('#shknews_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.shknews.shknews_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.shknews.shknews_validation_messages});$('#shknews_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#shknews_form button').unbind().click(eventHandler);},resetForm:function()
{$('#shknews_form')[0].reset();this.resetCommonForm();$('#shknews_parentpostid').val(null);$('#shknews_postid').val(null);$('#shknews_title').val(null);$('#shknews_content').val(null);$('#shknews_image').empty();$('#shknews_photo').val(null);this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{var img=document.createElement('img');img.src=blob_or_canvas;img=$(img);img.css("width","100%");$('#shknews_postimage').html(img);},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#shknews_timeline').val(aTimelineId);$('#shknews_parentpostid').val(aPostDTOAdapter);}
else
{$('#shknews_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#shknews_parentpostid').val(aPostDTOAdapter.dataBean.parentpostid);$('#shknews_postid').val(aPostDTOAdapter.dataBean.postid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#shknews_message").val(contentInfo.message);this.photo=null;var u=aPostDTOAdapter.getPhotoUrl();if(u)
{this.displayPhoto($.r3Utils.formatDMSUrl4ClientAccess(u));this.setPhoto(aPostDTOAdapter.dataBean.photo);}}}
else
{this.acquireGeoLocationInfo();$('#shknews_timeline').val(aTimelineId);}
this.setAuhtorInfo("shknews",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#shknews_content').val(data);if(this.photo)
{$('#shknews_photo').val(JSON.stringify(this.photo));}
else
$('#shknews_photo').val();$('#shknews_title').val($('#shknews_message').val());},showMessage:function(m)
{$('#shknews_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shknews",window,function(aNamespace)
{aNamespace.shknews_validation_rules={message:{required:true,maxlength:250}};aNamespace.shknews_validation_messages={message:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shkstruct");org.r3.db.mongo.contentdefinitioncollection.shkstruct.Shkstruct_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#shkstruct_form');},setupForm:function(eventHandler)
{$('#shkstruct_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.shkstruct.shkstruct_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.shkstruct.shkstruct_validation_messages});$('#shkstruct_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#shkstruct_form button').unbind().click(eventHandler);},resetForm:function()
{$('#shkstruct_form')[0].reset();this.resetCommonForm();$('#shkstruct_parentpostid').val(null);$('#shkstruct_postid').val(null);$('#shkstruct_title').val(null);$('#shkstruct_content').val(null);$('#shkstruct_image').empty();$('#shkstruct_photo').val(null);this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{var img=document.createElement('img');img.src=blob_or_canvas;img=$(img);img.css("width","100%");$('#shkstruct_postimage').html(img);},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#shkstruct_timeline').val(aTimelineId);$('#shkstruct_parentpostid').val(aPostDTOAdapter);}
else
{$('#shkstruct_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#shkstruct_parentpostid').val(aPostDTOAdapter.dataBean.parentpostid);$('#shkstruct_postid').val(aPostDTOAdapter.dataBean.postid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#shkstruct_message").val(contentInfo.message);this.photo=null;var u=aPostDTOAdapter.getPhotoUrl();if(u)
{this.displayPhoto($.r3Utils.formatDMSUrl4ClientAccess(u));this.setPhoto(aPostDTOAdapter.dataBean.photo);}}}
else
{this.acquireGeoLocationInfo();$('#shkstruct_timeline').val(aTimelineId);}
this.setAuhtorInfo("shkstruct",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);var data=JSON.stringify(formAsJsonObject);$('#shkstruct_content').val(data);if(this.photo)
{$('#shkstruct_photo').val(JSON.stringify(this.photo));}
else
$('#shkstruct_photo').val();$('#shkstruct_title').val($('#shkstruct_message').val());},showMessage:function(m)
{$('#shkstruct_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.shkstruct",window,function(aNamespace)
{aNamespace.shkstruct_validation_rules={message:{required:true,maxlength:250}};aNamespace.shkstruct_validation_messages={message:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.tweet");org.r3.db.mongo.contentdefinitioncollection.tweet.Tweet_Model=org.r3.db.mongo.contentdefinitioncollection.ContentObjectModel.extend({init:function(aContentDefinitionDTOAdapter)
{this._super(aContentDefinitionDTOAdapter);},getForm:function()
{return $('#tweet_form');},setupForm:function(eventHandler)
{$('#tweet_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.db.mongo.contentdefinitioncollection.tweet.tweet_validation_rules,messages:org.r3.db.mongo.contentdefinitioncollection.tweet.tweet_validation_messages});$('#tweet_edit_wrapper .content_fieldsetmessage').formmessage({});if(eventHandler)
$('#tweet_form button').unbind().click(eventHandler);},resetForm:function()
{$('#tweet_form')[0].reset();this.resetCommonForm();$('#tweet_parentpostid').val(null);$('#tweet_postid').val(null);$('#tweet_title').val(null);$('#tweet_content').val(null);$('#tweet_image').empty();$('#tweet_photo').val(null);this.pendingFiles=null;},displayPhoto:function(blob_or_canvas)
{var img=document.createElement('img');img.src=blob_or_canvas;img=$(img);img.css("width","100%");$('#tweet_postimage').html(img);},initializeForm:function(initializationContext)
{var aPostDTOAdapter=initializationContext.targetnode_or_id;var aTimelineId=initializationContext.timelineid;var anAuthorInfo=initializationContext.authorinfo;if(initializationContext.objectcanvas)
{this.setObjectCanvas(initializationContext.objectcanvas);}
if(aPostDTOAdapter)
{if(!anAuthorInfo)
{anAuthorInfo={author:aPostDTOAdapter.dataBean.author,authorname:aPostDTOAdapter.dataBean.authorname,authortype:aPostDTOAdapter.dataBean.authortype};}
if(_.isString(aPostDTOAdapter))
{$('#tweet_timeline').val(aTimelineId);$('#tweet_parentpostid').val(aPostDTOAdapter);}
else
{$('#tweet_timeline').val(aPostDTOAdapter.dataBean.timeline);$('#tweet_parentpostid').val(aPostDTOAdapter.dataBean.postid);$('#tweet_postid').val(aPostDTOAdapter.dataBean.commentid);var contentInfo=aPostDTOAdapter.dataBean.content;if(!contentInfo)
contentInfo={};$("#tweet_tweet").val(contentInfo.tweet);this.pendingFiles=[];}}
else
{this.acquireGeoLocationInfo();$('#tweet_timeline').val(aTimelineId);}
this.setAuhtorInfo("tweet",anAuthorInfo);},setAuhtorInfo:function(contentDefinitionId,anAuthorInfo)
{$('#'+contentDefinitionId+'_author').val(anAuthorInfo.author);$('#'+contentDefinitionId+'_authorname').val(anAuthorInfo.authorname);$('#'+contentDefinitionId+'_authortype').val(anAuthorInfo.authortype);},serializeContent:function()
{var frm=this.getForm();var serializedArray=frm.serializeArray();serializedArray=serializedArray.filter(function(anItem)
{return!(org.r3.db.mongo.contentdefinitioncollection.formSerializationFieldExclusionList)[anItem.name]&&anItem.value;});var formAsJsonObject=$.r3Utils.getArrayAsJSONObject(serializedArray);if(this.pendingFiles&&this.pendingFiles.length)
{var photo={};for(var j=0;j<this.pendingFiles.length;j++)
{var p={"width":this.pendingFiles[j].width,"height":this.pendingFiles[j].height,"role":this.pendingFiles[j].majorrole||this.pendingFiles[j].role,"url":this.pendingFiles[j].url};photo[this.pendingFiles[j].majorrole||this.pendingFiles[j].role]=p;}
formAsJsonObject["photo"]=photo;}
var data=JSON.stringify(formAsJsonObject);$('#tweet_content').val(data);$('#tweet_title').val('Tweet');},showMessage:function(m)
{$('#tweet_edit_wrapper .content_fieldsetmessage').formmessage('setText',m);}});$.r3Utils.namespace("org.r3.db.mongo.contentdefinitioncollection.tweet",window,function(aNamespace)
{aNamespace.tweet_validation_rules={tweet:{required:true,maxlength:512}};aNamespace.tweet_validation_messages={tweet:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.db.mongo.postcollection");org.r3.db.mongo.postcollection.PostCollectionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_postcollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.postid=aDataBean.postid||null;this.status=aDataBean.status||null;this.groups=aDataBean.groups||null;this.site=aDataBean.site||null;this.domain=aDataBean.domain||null;this.timeline=aDataBean.timeline||null;this.author=aDataBean.author||null;this.authorname=aDataBean.authorname||null;this.authortype=aDataBean.authortype||null;this.userid=aDataBean.userid||null;this.refdate=aDataBean.refdate||null;this.lastmodified=aDataBean.lastmodified||null;this.title=aDataBean.title||null;this.geolocation=aDataBean.geolocation||null;this.textbody=aDataBean.textbody||null;this.photo=aDataBean.photo||null;this.attachments=aDataBean.attachments||null;this.links=aDataBean.links||null;this.gallery=aDataBean.gallery||null;this.calendars=aDataBean.calendars||null;this.contentcategory=aDataBean.contentcategory||null;this.contentclass=aDataBean.contentclass||null;this.content=aDataBean.content||null;this.comments=aDataBean.comments||null;}});org.r3.db.mongo.postcollection.TextbodyDTO=Class.extend({init:function(aDataBean)
{this.language=aDataBean.language||null;this.title=aDataBean.title||null;this.summary=aDataBean.summary||null;this.body=aDataBean.body||null;}});org.r3.db.mongo.postcollection.CommentsDTO=Class.extend({init:function(aDataBean)
{this.commentid=aDataBean.commentid||null;this.author=aDataBean.author||null;this.authorname=aDataBean.authorname||null;this.authortype=aDataBean.authortype||null;this.userid=aDataBean.userid||null;this.shakeevent=aDataBean.shakeevent||null;this.shakedate=aDataBean.shakedate||null;this.lastmodified=aDataBean.lastmodified||null;this.title=aDataBean.title||null;this.geolocation=aDataBean.geolocation||null;this.contentcategory=aDataBean.contentcategory||null;this.contentclass=aDataBean.contentclass||null;this.content=aDataBean.content||null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.postcollection");org.r3.db.mongo.postcollection.PostCollectionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.postcollection.PostCollectionDTO(aDataBean));},isPublished:function()
{return this.dataBean.status&&this.dataBean.status=='published';},isPublished:function()
{return this.dataBean.status&&this.dataBean.status=='published';},setPublished:function()
{this.dataBean.status='published';},isDraft:function()
{return this.dataBean.status&&this.dataBean.status=='draft';},setDraft:function()
{this.dataBean.status='draft';},getLastmodified:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.lastmodified);},getLastmodifiedAsElapsed:function()
{return $.r3Utils.formatTimeDifferenceFromNow(this.dataBean.lastmodified);},getTitleLink:function()
{var u=org.r3.Constants.getStrutsActionContext(this.dataBean.site)+'/org/r3/home.do';u=u+'?postid='+this.dataBean.postid;return u;},getTitle:function()
{var l=org.r3.Constants.language;var tb=this.getTextBody4Language(l);if(tb!=null)
return tb.dataBean.title;return this.dataBean.title;},getSummary:function()
{var l=org.r3.Constants.language;var tb=this.getTextBody4Language(l);if(tb!=null)
return tb.dataBean.summary;return'-';},getPhotoUrl:function()
{var p=this.getPhoto();if(p!=null)
return p.getImage().getUrl();return null;},getPhoto:function()
{if(this.dataBean.photo)
{var image=new org.r3.db.mongo.MongoImageIconDTOAdapter(this.dataBean.photo);return image;}
return null;},getTextBody4Language:function(aLanguageCode)
{if(!aLanguageCode)
aLanguageCode=org.r3.Constants.language;var t=this.dataBean.textbody;if(t&&t.length)
{for(var i=0;i<t.length;i++)
{if(t[i].language==aLanguageCode)
return new org.r3.db.mongo.postcollection.PostCollectionTextBodyDTOAdapter(t[i]);}}
return null;},hasComments:function()
{return this.dataBean.comments&&this.dataBean.comments.length>0;},addComment:function(aTimelineCommentCollectionDTOAdapter)
{if(!this.dataBean.comments)
this.dataBean.comments=[];this.dataBean.comments.push(aTimelineCommentCollectionDTOAdapter.dataBean);},_findIndexOfCommentByCommentid:function(aCommentid)
{if(!this.hasComments())
return-1;for(var i=0;i<this.dataBean.comments.length;i++)
{var c=this.dataBean.comments[i];if(c.commentid==aCommentid)
{return i;}}
return-1;},updateComment:function(aTimelineCommentCollectionDTOAdapter,upsertFlag)
{var ndx=this._findIndexOfCommentByCommentid(aTimelineCommentCollectionDTOAdapter.dataBean.commentid);if(ndx==-1&&upsertFlag)
{if(upsertFlag)
{this.addComment(aTimelineCommentCollectionDTOAdapter);return true;}
return false;}
this.dataBean.comments[ndx]=aTimelineCommentCollectionDTOAdapter.dataBean;return true;},addOrUpdateComment:function(aTimelineCommentCollectionDTOAdapter)
{return this.updateComment(aTimelineCommentCollectionDTOAdapter,true);},removeComment:function(aCommentId)
{var ndx=this._findIndexOfCommentByCommentid(aCommentId);if(ndx!=-1)
{this.dataBean.comments.splice(ndx,1);}},getComment:function(aCommentId)
{var ndx=this._findIndexOfCommentByCommentid(aCommentId);if(ndx!=-1)
{var t=new org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTOAdapter(this.dataBean.comments[ndx]);t.dataBean.postid=this.dataBean.postid;t.dataBean.timeline=this.dataBean.timeline;return t;}
return null;},getCreationdate:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.lastmodified);},getCreationDateAsBadge:function()
{return $.r3Utils.formatDateAsBadge(this.dataBean.lastmodified);},getCreationdateAsElapsed:function()
{return this.getLastmodifiedAsElapsed();},getAuthorImgUrl:function()
{if(this.dataBean.author)
{if(this.dataBean.authortype&&this.dataBean.authortype=='user')
return org.r3.PageManager.getRESTUrl("GET_UserCollection_Photo",[this.dataBean.author,'icon']);else return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[this.dataBean.author,'sitesquared','icon']);}
return null;},getAuthorname:function()
{return this.dataBean.authorname;},isGeoLocated:function()
{return this.dataBean.geolocation;},getGeoLocationAsString:function()
{var s="";if(this.dataBean.geolocation)
{s="GEO: "+this.dataBean.geolocation.coordinates[0]+' - '+this.dataBean.geolocation.coordinates[1];}
return s;},isUserOwnerOfContent:function(aUserDTOAdapter,aUserCollectionDTOAdapter)
{console.log('TimelineCollectionDTOAdapter - User is Owner of Content');return this.dataBean.author&&((this.dataBean.authortype=='user'&&this.dataBean.author==aUserCollectionDTOAdapter.dataBean.userid)||(this.dataBean.authortype!='user'&&(aUserDTOAdapter.hasRole4Site(this.dataBean.author,org.r3.db.system.user.user.role_shkadmin)||aUserDTOAdapter.hasRole4Site(this.dataBean.author,org.r3.db.system.user.user.role_shkowner))));},getGroupsAsArray:function()
{return this.dataBean&&this.dataBean.groups;}});org.r3.db.mongo.postcollection.PostCollectionTextBodyDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_timelinecollection";this.language=aDataBean.language||null;this.title=aDataBean.title||null;this.summary=aDataBean.summary||null;this.body=aDataBean.body||null;}});org.r3.db.mongo.postcollection.PostCollectionTextBodyDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.postcollection.PostCollectionTextBodyDTO(aDataBean));}});org.r3.db.mongo.postcollection.TimelineConfig={contentclasses:[{name:'shkmessage',primary:true,canvasskin:'post-blue',actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-primary","visibility":"isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-post","visibility":"isOwner"},{"id":'new-post',"text":'Nuovo',"actionType":"new-post","dataAction":"UNUSED","visibility":"isFollower || isMerchant || isNeighbowner","roles":"user,merchant,neighbowner"},{"id":'new-child',"text":'Commenta',"actionType":"new-child","dataAction":"new-child:tweet","visibility":"isFollower || isMerchant || isNeighbowner","roles":"user,merchant,neighbowner"}]},{name:'crewask',primary:true,canvasskin:'post-default',actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-primary","visibility":"isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-post","visibility":"isOwner"},{"id":'new-post',"text":'Nuovo',"actionType":"new-post","dataAction":"UNUSED","visibility":"always","roles":"user"},{"id":'new-child',"text":'Commenta',"actionType":"new-child","dataAction":"new-child:tweet","visibility":"always","roles":"user"}]},{name:'crewoffer',primary:true,canvasskin:'post-default',actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-primary","visibility":"isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-post","visibility":"isOwner"},{"id":'new-post',"text":'Nuovo',"actionType":"new-post","dataAction":"UNUSED","visibility":"always","roles":"user"},{"id":'new-child',"text":'Commenta',"actionType":"new-child","dataAction":"new-child:tweet","visibility":"always","roles":"user"}]},{name:'tweet',primary:false,actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-child","visibility":"!isShaked && isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-child","visibility":"!isShaked && isOwner"}]},{name:'shcask',primary:true,canvasskin:'post-default',actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-primary","visibility":"isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-post","visibility":"isOwner"},{"id":'new-post',"text":'Nuovo',"actionType":"new-post","dataAction":"UNUSED","visibility":"always","roles":"user"},{"id":'new-child',"text":'Commenta',"actionType":"new-child","dataAction":"new-child:tweet","visibility":"always","roles":"user,merchant"},{"id":'new-child1',"text":'Offerta',"actionType":"new-child","dataAction":"new-child1:shcaskoffer","visibility":"isMerchant && !isOwner","roles":"merchant"}]},{name:'shcoffer',primary:true,canvasskin:'post-default',actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-primary","visibility":"isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-post","visibility":"isOwner"},{"id":'new-post',"text":'Nuovo',"actionType":"new-post","dataAction":"UNUSED","visibility":"isMerchant","roles":"merchant"},{"id":'new-child',"text":'Commenta',"actionType":"new-child","dataAction":"new-child:tweet","visibility":"always","roles":"user,postOwner"},{"id":'new-child1',"text":'Prenota',"actionType":"new-child","dataAction":"new-child1:shcofferbook","visibility":"!isPostOwner","roles":"user"}]},{name:'shcofferbook',primary:false,actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-child","visibility":"!isShaked && isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-child","visibility":"!isShaked && isOwner"},{"id":'shakeit',"text":'Prenota',"actionType":"shake","dataAction":"shakeit","visibility":"!isShaked && isOwner"},{"id":'unshakeit',"text":'Annulla Prenotazione',"actionType":"shake","dataAction":"unshakeit","visibility":"isShaked && isOwner"}]},{name:'shcaskoffer',primary:false,actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-child","visibility":"!isShaked && isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-child","visibility":"!isShaked && isOwner"},{"id":'shakeit',"text":'Prenota',"actionType":"shake","dataAction":"shakeit","visibility":"!isShaked && isPostOwner && !isOwner"},{"id":'unshakeit',"text":'Annulla Prenotazione',"actionType":"shake","dataAction":"unshakeit","visibility":"isShaked && isPostOwner && !isOwner"}]},{name:'shknews',primary:true,canvasskin:'post-default',actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-primary","visibility":"isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-post","visibility":"isOwner"},{"id":'new-post',"text":'Nuovo',"actionType":"new-post","dataAction":"UNUSED","visibility":"isNeighbowner","roles":"neighbowner"},{"id":'new-child',"text":'Commenta',"actionType":"new-child","dataAction":"new-child:tweet","visibility":"always","roles":"user"}]},{name:'shkstruct',primary:true,canvasskin:'post-default',actions:[{"id":'edit',"text":'Modifica',"actionType":"edit","dataAction":"edit-primary","visibility":"isOwner"},{"id":'delete',"text":'Elimina',"actionType":"delete","dataAction":"delete-post","visibility":"isOwner"},{"id":'new-post',"text":'Nuovo',"actionType":"new-post","dataAction":"UNUSED","visibility":"isNeighbowner","roles":"neighbowner"},{"id":'new-child',"text":'Commenta',"actionType":"new-child","dataAction":"new-child:tweet","visibility":"always","roles":"user"}]}],timelines:[{_id:"messages",name:"Conversazioni",pillskin:'pill-blue',postcontentclass:'shkmessage',childcontentclass:'tweet'},{_id:"crew",name:"Imbarchi",pillskin:'pill-orange',timelines:[{_id:"crewask",name:"Cerco",postcontentclass:'crewask',childcontentclass:'tweet'},{_id:"crewoffer",name:"Offro",postcontentclass:'crewoffer',childcontentclass:'tweet'}]},{_id:"showcase",name:"Vetrina",pillskin:'pill-blue',timelines:[{_id:"shcask",name:"Cerco",postcontentclass:'shcask'},{_id:"shcoffer",name:"Offro",postcontentclass:'shcoffer'}]},{_id:"news",name:"Notizie",pillskin:'pill-blue',postcontentclass:'shknews',childcontentclass:'tweet',direct:true},{_id:"structs",name:"Strutture",pillskin:'pill-blue',postcontentclass:'shkstruct',childcontentclass:'tweet',direct:true}]};jQuery.r3Utils.namespace("org.r3.db.mongo.postcollection");org.r3.db.mongo.postcollection.PostCollectionQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.postcollection.PostCollectionQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.postcollection.PostCollectionQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='postid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.postid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.postid||'';}};}
var columnId='status';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.status,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.status||'';}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='domain';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.domain,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.domain||'';}};}
var columnId='timeline';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.timeline,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.timeline||'';}};}
var columnId='author';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.author,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.author||'';}};}
var columnId='authorname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.authorname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.authorname||'';}};}
var columnId='authortype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.authortype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.authortype||'';}};}
var columnId='userid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};}
var columnId='refdate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.refdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.refdate||'';}};}
var columnId='lastmodified';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.lastmodified,"render":function(data,type,row,meta)
{var item=data;return item.getLastmodified()||'';}};}
var columnId='title';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.title,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.title||'';}};}
var columnId='contentcategory';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.contentcategory,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.contentcategory||'';}};}
var columnId='contentclass';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcollection.message.contentclass,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.contentclass||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo.postcommentcollection");org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_postcommentcollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.commentid=aDataBean.commentid||null;this.site=aDataBean.site||null;this.domain=aDataBean.domain||null;this.timeline=aDataBean.timeline||null;this.postid=aDataBean.postid||null;this.author=aDataBean.author||null;this.authorname=aDataBean.authorname||null;this.authortype=aDataBean.authortype||null;this.userid=aDataBean.userid||null;this.shakeevent=aDataBean.shakeevent||null;this.shakedate=aDataBean.shakedate||null;this.lastmodified=aDataBean.lastmodified||null;this.title=aDataBean.title||null;this.geolocation=aDataBean.geolocation||null;this.geolocation=aDataBean.geolocation||null;this.contentcategory=aDataBean.contentcategory||null;this.contentclass=aDataBean.contentclass||null;this.content=aDataBean.content||null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.postcommentcollection");org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTO(aDataBean));},setTimelinePostid:function(aTimeline,aPostid)
{this.dataBean.timeline=aTimeline;this.dataBean.postid=aPostid;},isShaked:function()
{return this.dataBean.shakeevent;},getCreationdate:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.lastmodified);},getCreationDateAsBadge:function()
{return $.r3Utils.formatDateAsBadge(this.dataBean.lastmodified);},getCreationdateAsElapsed:function()
{return $.r3Utils.formatTimeDifferenceFromNow(this.dataBean.lastmodified);},getAuthorImgUrl:function()
{if(this.dataBean.author)
{if(this.dataBean.authortype&&this.dataBean.authortype=='user')
return org.r3.PageManager.getRESTUrl("GET_UserCollection_Photo",[this.dataBean.author,'icon']);else return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[this.dataBean.author,'sitesquared','icon']);}
return null;},getAuthorname:function()
{return this.dataBean.authorname;},isUserOwnerOfContent:function(aUserDTOAdapter,aUserCollectionDTOAdapter)
{console.log('PostCommentCollectionDTOAdapter - User is Owner of Content');return this.dataBean.author&&((this.dataBean.authortype=='user'&&this.dataBean.author==aUserCollectionDTOAdapter.dataBean.userid)||(this.dataBean.authortype!='user'&&(aUserDTOAdapter.hasRole4Site(this.dataBean.author,org.r3.db.system.user.user.role_shkadmin)||aUserDTOAdapter.hasRole4Site(this.dataBean.author,org.r3.db.system.user.user.role_shkowner))));}});jQuery.r3Utils.namespace("org.r3.db.mongo.postcommentcollection");org.r3.db.mongo.postcommentcollection.PostCommentCollectionQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.postcommentcollection.PostCommentCollectionQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.postcommentcollection.PostCommentCollectionQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='commentid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.commentid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.commentid||'';}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='domain';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.domain,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.domain||'';}};}
var columnId='timeline';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.timeline,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.timeline||'';}};}
var columnId='postid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.postid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.postid||'';}};}
var columnId='author';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.author,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.author||'';}};}
var columnId='authorname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.authorname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.authorname||'';}};}
var columnId='authortype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.authortype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.authortype||'';}};}
var columnId='userid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};}
var columnId='shakeevent';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.shakeevent,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.shakeevent||'';}};}
var columnId='shakedate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.shakedate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.shakedate||'';}};}
var columnId='lastmodified';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.lastmodified,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastmodified||'';}};}
var columnId='title';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.title,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.title||'';}};}
var columnId='contentcategory';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.contentcategory,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.contentcategory||'';}};}
var columnId='contentclass';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.postcommentcollection.message.contentclass,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.contentclass||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizcollection");org.r3.db.mongo.quiz.quizcollection.QuizCollectionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_quizcollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.quizid=aDataBean.quizid||null;this.mode=aDataBean.mode||null;this.useweight=aDataBean.useweight||null;this.title=aDataBean.title||null;this.description=aDataBean.description||null;this.score_comment=aDataBean.score_comment||null;this.quizblocks=aDataBean.quizblocks||null;this.questions=aDataBean.questions||null;}});org.r3.db.mongo.quiz.quizcollection.Score_commentDTO=Class.extend({init:function(aDataBean)
{this.score_level=aDataBean.score_level||null;this.score_comment=aDataBean.score_comment||null;}});org.r3.db.mongo.quiz.quizcollection.QuizblocksDTO=Class.extend({init:function(aDataBean)
{this.blocknumber=aDataBean.blocknumber||null;this.lateanswerpenalty=aDataBean.lateanswerpenalty||null;this.size=aDataBean.size||null;this.duration=aDataBean.duration||null;this.validfrom=aDataBean.validfrom||null;this.validto=aDataBean.validto||null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizcollection");org.r3.db.mongo.quiz.quizcollection.QuizCollectionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.quiz.quizcollection.QuizCollectionDTO(aDataBean));},getScoreComment:function(score)
{if(this.dataBean.score_comment)
{if(this.dataBean.score_comment.length)
{for(var i=0;i<this.dataBean.score_comment.length;i++)
{if(score<=this.dataBean.score_comment[i].score_level)
return this.dataBean.score_comment[i].score_comment;}}
return this.dataBean.score_comment;}
return"";},isOpaque:function()
{return!(this.dataBean&&this.dataBean.mode=='clear');}});jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizcollection");org.r3.db.mongo.quiz.quizcollection.QuizCollectionQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.quiz.quizcollection.QuizCollectionDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.quiz.quizcollection.QuizCollectionQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.quiz.quizcollection.QuizCollectionDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.quiz.quizcollection.QuizCollectionQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='quizid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizcollection.message.quizid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.quizid||'';}};}
var columnId='mode';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizcollection.message.mode,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.mode||'';}};}
var columnId='useweight';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizcollection.message.useweight,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.useweight||'';}};}
var columnId='title';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizcollection.message.title,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.title||'';}};}
var columnId='description';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizcollection.message.description,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.description||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizquestioncollection");org.r3.db.mongo.quiz.quizquestioncollection.QuizQuestionCollectionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_quizquestioncollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.questionid=aDataBean.questionid||null;this.quizid=aDataBean.quizid||null;this.text=aDataBean.text||null;this.qlevel=aDataBean.qlevel||null;this.answers=aDataBean.answers||null;}});org.r3.db.mongo.quiz.quizquestioncollection.AnswersDTO=Class.extend({init:function(aDataBean)
{this.answerid=aDataBean.answerid||null;this.text=aDataBean.text||null;this.valid=aDataBean.valid||null;this.weight=aDataBean.weight||null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizquestioncollection");org.r3.db.mongo.quiz.quizquestioncollection.QuizQuestionCollectionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.quiz.quizquestioncollection.QuizQuestionCollectionDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizquestioncollection");org.r3.db.mongo.quiz.quizquestioncollection.QuizQuestionCollectionQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.quiz.quizquestioncollection.QuizQuestionCollectionDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.quiz.quizquestioncollection.QuizQuestionCollectionQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.quiz.quizquestioncollection.QuizQuestionCollectionDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.quiz.quizquestioncollection.QuizQuestionCollectionQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='questionid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizquestioncollection.message.questionid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.questionid||'';}};}
var columnId='quizid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizquestioncollection.message.quizid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.quizid||'';}};}
var columnId='text';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizquestioncollection.message.text,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.text||'';}};}
var columnId='qlevel';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizquestioncollection.message.qlevel,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.qlevel||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizuseranswercollection");org.r3.db.mongo.quiz.quizuseranswercollection.QuizUserAnswerCollectionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_quizuseranswercollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.useranswerid=aDataBean.useranswerid||null;this.quizid=aDataBean.quizid||null;this.usersessionid=aDataBean.usersessionid||null;this.quizuserblocknumber=aDataBean.quizuserblocknumber||null;this.blocknumber=aDataBean.blocknumber||null;this.questionid=aDataBean.questionid||null;this.answerid=aDataBean.answerid||null;this.valid=aDataBean.valid||null;this.score=aDataBean.score||null;this.when=aDataBean.when||null;this.timeout=aDataBean.timeout||null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizuseranswercollection");org.r3.db.mongo.quiz.quizuseranswercollection.QuizUserAnswerCollectionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.quiz.quizuseranswercollection.QuizUserAnswerCollectionDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizuseranswercollection");org.r3.db.mongo.quiz.quizuseranswercollection.QuizUserAnswerCollectionQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.quiz.quizuseranswercollection.QuizUserAnswerCollectionDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.quiz.quizuseranswercollection.QuizUserAnswerCollectionQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.quiz.quizuseranswercollection.QuizUserAnswerCollectionDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.quiz.quizuseranswercollection.QuizUserAnswerCollectionQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='useranswerid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.useranswerid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.useranswerid||'';}};}
var columnId='quizid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.quizid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.quizid||'';}};}
var columnId='usersessionid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.usersessionid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.usersessionid||'';}};}
var columnId='quizuserblocknumber';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.quizuserblocknumber,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.quizuserblocknumber||'';}};}
var columnId='blocknumber';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.blocknumber,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.blocknumber||'';}};}
var columnId='questionid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.questionid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.questionid||'';}};}
var columnId='answerid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.answerid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.answerid||'';}};}
var columnId='valid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.valid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.valid||'';}};}
var columnId='score';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.score,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.score||'';}};}
var columnId='when';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.when,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.when||'';}};}
var columnId='timeout';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuseranswercollection.message.timeout,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.timeout||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizuserblockcollection");org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_quizuserblockcollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.quizuserblocknumber=aDataBean.quizuserblocknumber||null;this.quizid=aDataBean.quizid||null;this.usersessionid=aDataBean.usersessionid||null;this.blocknumber=aDataBean.blocknumber||null;this.status=aDataBean.status||null;this.validfrom=aDataBean.validfrom||null;this.validto=aDataBean.validto||null;this.duration=aDataBean.duration||null;this.lateanswerpenalty=aDataBean.lateanswerpenalty||null;this.userstartdate=aDataBean.userstartdate||null;this.usertimer=aDataBean.usertimer||null;this.score=aDataBean.score||null;this.lastanswerdate=aDataBean.lastanswerdate||null;this.lastanswerquestion=aDataBean.lastanswerquestion||null;this.userlateanswerpenalty=aDataBean.userlateanswerpenalty||null;this.numberofquestions=aDataBean.numberofquestions||null;this.numberofanswered=aDataBean.numberofanswered||null;this.numberofok=aDataBean.numberofok||null;this.questions=aDataBean.questions||null;this.questionsDTOs=aDataBean.questionsDTOs||null;if(this.questionsDTOs&&this.questions&&this.questionsDTOs.length&&this.questions.length)
{var reorderedQuestions=[];for(var i=0;i<this.questions.length;i++)
{for(var j=0;j<this.questionsDTOs.length;j++)
{if(this.questions[i]==this.questionsDTOs[j].questionid)
reorderedQuestions.push(this.questionsDTOs[j]);}}
this.questionsDTOs=reorderedQuestions;}}});jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizuserblockcollection");org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTO(aDataBean));this.numberOfOK=0;this.numberOfKO=0;this.numberOfRepaired=0;},getValidfrom:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.validfrom);},getValidto:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.validto);},isEmpty:function()
{return!this.dataBean.questionsDTOs||!this.dataBean.questionsDTOs.length;},getBlockSize:function()
{return(this.dataBean&&this.dataBean.numberofquestions);},getNumberOfQuestions:function()
{return(this.dataBean&&this.dataBean.questions&&this.dataBean.questions.length)?this.dataBean.questions.length:0;},getQuestion:function(qIndex)
{return(this.dataBean&&this.dataBean.questionsDTOs&&this.dataBean.questionsDTOs.length&&this.dataBean.questionsDTOs.length>qIndex)?this.dataBean.questionsDTOs[qIndex]:null;},findCorrectAnswer:function(aQuestion)
{for(var i=0;i<aQuestion.answers.length;i++)
{if(aQuestion.answers[i].valid)
{return aQuestion.answers[i];}}
return null;},findAnswer4:function(aQuestion,anAnswerId)
{for(var i=0;i<aQuestion.answers.length;i++)
{if(aQuestion.answers[i].answerid==anAnswerId)
{return aQuestion.answers[i];}}
return null;},getScore:function()
{var score=0;if(this.dataBean&&this.dataBean.questionsDTOs&&this.dataBean.questionsDTOs.length)
{for(var i=0;i<this.dataBean.questionsDTOs.length;i++)
{score+=this.getQuestionScore(this.dataBean.questionsDTOs[i]);}}
return score;},getQuestionScore:function(aQuestion)
{if(aQuestion.selectedAnswerValid)
{if(aQuestion.numberOfResponses==1)
return this.findCorrectAnswer(aQuestion).weight||0;}
return 0;},getReportIconColumn:function(aQuestion)
{var s="";if(aQuestion.selectedAnswerValid)
{if(aQuestion.numberOfResponses==1)
{s="<td style='color: green'><i class='icon fa fa-thumbs-o-up'></i></td>";}
else
{s="<td style='color: orange'><i class='icon fa fa-thumbs-o-up'></i></td>";}}
else
{s="<td style='color: red'><i class='icon fa fa-thumbs-o-down'></i></td>";}
return s;},getUserTimer:function()
{if(this.dataBean.userstartdate)
{var now=Date.now();var millis=now-this.dataBean.userstartdate;return Math.floor(millis/1000);}
return 0;},isLate:function()
{var now=Date.now();if(this.dataBean.lateanswerpenalty)
{if(this.dataBean.userlateanswerpenalty||((this.dataBean.status=='ready'||this.dataBean.status=='started')&&(now-this.dataBean.validto)>0))
return true;}
return false;},getUserBlockStatusAsSemaphore:function()
{var semaphoreColor='gray';if(this.isLate())
semaphoreColor='red';return $.r3Utils.formatSemaphore(semaphoreColor);},canBeStarted:function()
{return this.dataBean&&(this.dataBean.status=='ready'||this.dataBean.status=='started');}});jQuery.r3Utils.namespace("org.r3.db.mongo.quiz.quizuserblockcollection");org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='quizuserblocknumber';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.quizuserblocknumber,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.quizuserblocknumber||'';}};}
var columnId='quizid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.quizid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.quizid||'';}};}
var columnId='usersessionid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.usersessionid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.usersessionid||'';}};}
var columnId='blocknumber';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.blocknumber,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.blocknumber||'';}};}
var columnId='status';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.status,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.status||'';}};}
var columnId='validfrom';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.validfrom,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.validfrom||'';}};}
var columnId='validto';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.validto,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.validto||'';}};}
var columnId='duration';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.duration,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.duration||'';}};}
var columnId='lateanswerpenalty';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.lateanswerpenalty,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lateanswerpenalty||'';}};}
var columnId='userstartdate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.userstartdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userstartdate||'';}};}
var columnId='usertimer';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.usertimer,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.usertimer||'';}};}
var columnId='score';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.score,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.score||'';}};}
var columnId='lastanswerdate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.lastanswerdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastanswerdate||'';}};}
var columnId='lastanswerquestion';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.lastanswerquestion,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastanswerquestion||'';}};}
var columnId='userlateanswerpenalty';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.userlateanswerpenalty,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userlateanswerpenalty||'';}};}
var columnId='numberofquestions';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.numberofquestions,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofquestions||'';}};}
var columnId='numberofanswered';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.numberofanswered,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofanswered||'';}};}
var columnId='numberofok';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.quiz.quizuserblockcollection.message.numberofok,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofok||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo.sitecollection");org.r3.db.mongo.sitecollection.SiteCollectionConfigDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sitecollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.timelines=aDataBean.timelines;}});org.r3.db.mongo.sitecollection.ContentClassConfigDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sitecollection";this.dtokey=aDataBean.name||null;this.dtodescr=aDataBean.name||null;this.name=aDataBean.name;this.primary=aDataBean.primary||false;this.childContentclass=aDataBean.childContentclass;this.canvasskin=aDataBean.canvasskin;this.actions=aDataBean.actions;}});jQuery.r3Utils.namespace("org.r3.db.mongo.sitecollection");org.r3.db.mongo.sitecollection.SiteCollectionConfigDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.sitecollection.SiteCollectionConfigDTO(aDataBean));this.timelinesMap={};for(var i=0;i<aDataBean.timelines.length;i++)
{var timelineCfgItem=aDataBean.timelines[i];timelineCfgItem.path=timelineCfgItem._id;this.timelinesMap[timelineCfgItem._id]=timelineCfgItem;if(timelineCfgItem.timelines&&timelineCfgItem.timelines.length)
{for(var j=0;j<timelineCfgItem.timelines.length;j++)
{var timelineCfgSubItem=timelineCfgItem.timelines[j];timelineCfgSubItem.path=timelineCfgItem._id+'/'+timelineCfgSubItem._id;this.timelinesMap[timelineCfgSubItem._id]=timelineCfgSubItem;}}}
this.contentClassMap={};this.contentclasses=[];for(var i=0;i<aDataBean.contentclasses.length;i++)
{var contentClassDataBean=aDataBean.contentclasses[i];var contentclassCfgItem=new org.r3.db.mongo.sitecollection.ContentClassConfigDTOAdapter(contentClassDataBean);this.contentClassMap[contentClassDataBean.name]=contentclassCfgItem;this.contentclasses.push(contentclassCfgItem);}},getTimeline:function(aTimelineId)
{var t=this.timelinesMap[aTimelineId];if(!t)
console.error("Could Not find Timeline for "+aTimelineId);return t;},getContentclass:function(aContentclassId)
{var t=this.contentClassMap[aContentclassId];if(!t)
console.error("Could Not find Content class for "+aContentclassId);return t;}});org.r3.db.mongo.sitecollection.ContentClassConfigDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.sitecollection.ContentClassConfigDTO(aDataBean));},_evalVisibility:function(aVisibilityRule,primaryObj,secondaryObject)
{var targetObj=(secondaryObject)?secondaryObject:primaryObj;var tokenizedExpr=aVisibilityRule&&aVisibilityRule.split(/([ ||&&()!]+)/);if(tokenizedExpr&&tokenizedExpr.length)
{var compiledVisibilityRule="";for(var j=0;j<tokenizedExpr.length;j++)
{var token=tokenizedExpr[j];switch(token)
{case'always':compiledVisibilityRule+='true';break;case'isFollower':if(org.r3.PageManager.userCollectionProfileInfo.isUserFollower())
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isOwner':if(targetObj.isUserOwnerOfContent(org.r3.PageManager.userInfo,org.r3.PageManager.userCollectionProfileInfo))
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isMerchant':if(org.r3.PageManager.userCollectionProfileInfo.isUserMerchant())
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isShaked':if(secondaryObject&&secondaryObject.isShaked())
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isPostOwner':if(primaryObj.isUserOwnerOfContent(org.r3.PageManager.userInfo,org.r3.PageManager.userCollectionProfileInfo))
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'isNeighbowner':if(org.r3.PageManager.userCollectionProfileInfo.isUserNeighborhoodOwner())
compiledVisibilityRule+='true';else
compiledVisibilityRule+='false';break;case'never':compiledVisibilityRule+='false';break;default:compiledVisibilityRule+=token;}}
if(compiledVisibilityRule.length>0)
return eval(compiledVisibilityRule);}
return false;},getActionsByType:function(anActionType)
{if(this.dataBean==null||this.dataBean.actions==null||!this.dataBean.actions.length)
return null;var acts=[];for(var i=0;i<this.dataBean.actions.length;i++)
{var item=this.dataBean.actions[i];if(item.actionType==anActionType)
{acts.push(item);}}
return acts;},getActionsById:function(anActionId)
{if(this.dataBean==null||this.dataBean.actions==null||!this.dataBean.actions.length)
return null;for(var i=0;i<this.dataBean.actions.length;i++)
{var item=this.dataBean.actions[i];if(item.id==anActionId)
{return item;}}
return null;},getEnabledActionsByType:function(anActionType,primaryObj,secondaryObject)
{if(this.dataBean==null||this.dataBean.actions==null||!this.dataBean.actions.length)
return null;var acts=[];for(var i=0;i<this.dataBean.actions.length;i++)
{var item=this.dataBean.actions[i];if(item.actionType==anActionType)
{if(this._evalVisibility(item.visibility,primaryObj,secondaryObject))
{acts.push(item);}}}
return acts;},isActionEnabled:function(anActionId,primaryObj,secondaryObject)
{if(this.dataBean==null||this.dataBean.actions==null||!this.dataBean.actions.length)
return false;for(var i=0;i<this.dataBean.actions.length;i++)
{var item=this.dataBean.actions[i];if(item.id==anActionId)
{return this._evalVisibility(item.visibility,primaryObj,secondaryObject);}}
return false;},getCurrentUserEnabledRoles4NewPost:function(anActionId,aPostObj)
{var roles=[];var lastAuthorChosenByUser=org.r3.PageManager.userCollectionProfileInfo.getUserAnalyticsLastpostauthor();var preferredAuthor=null;var act=this.getActionsById(anActionId);if(act)
{var postOwnerAdded=null;var enabledRoles=act.roles;if(enabledRoles.indexOf('postOwner')>=0)
{switch(aPostObj.dataBean.authortype)
{case'user':if(org.r3.PageManager.userInfo.dataBean.userid==aPostObj.dataBean.author)
{roles.push({author:org.r3.PageManager.userInfo.dataBean.userid,authorname:org.r3.PageManager.userInfo.getUserFullname(),authortype:'user',getAuthorphotourl:function(){return org.r3.PageManager.userInfo.getUserPhotoIconUrl();}});postOwnerAdded=aPostObj.dataBean.author;if(lastAuthorChosenByUser&&lastAuthorChosenByUser==org.r3.PageManager.userInfo.dataBean.userid)
preferredAuthor=roles[roles.length-1];}
break;case'merchant':if(org.r3.PageManager.userInfo.hasRole4Site(aPostObj.dataBean.author,org.r3.db.system.user.user.role_shkadmin)||org.r3.PageManager.userInfo.hasRole4Site(aPostObj.dataBean.author,org.r3.db.system.user.user.role_shkowner))
{var m=org.r3.PageManager.userCollectionProfileInfo.getMerchantRoleById(aPostObj.dataBean.author);roles.push({author:m.site.site,authorname:m.site.sitedescription,authortype:'merchant',getAuthorphotourl:function(){return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[this.author,'sitesquared','icon']);}});postOwnerAdded=aPostObj.dataBean.author;if(lastAuthorChosenByUser&&lastAuthorChosenByUser==m.site.site)
preferredAuthor=roles[roles.length-1];}
break;case'neighbowner':if(org.r3.PageManager.userInfo.hasRole4Site(aPostObj.dataBean.author,org.r3.db.system.user.user.role_shkadmin)||org.r3.PageManager.userInfo.hasRole4Site(aPostObj.dataBean.author,org.r3.db.system.user.user.role_shkowner))
{roles.push({author:org.r3.SiteConstants.targetSite,authorname:org.r3.SiteConstants.targetSiteName,authortype:'neighborhood',getAuthorphotourl:function(){return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[org.r3.SiteConstants.targetSite,'sitesquared','icon']);}});postOwnerAdded=aPostObj.dataBean.author;if(lastAuthorChosenByUser&&lastAuthorChosenByUser==org.r3.SiteConstants.targetSite)
preferredAuthor=roles[roles.length-1];}
break;}}
if(enabledRoles.indexOf('user')>=0&&(!postOwnerAdded||postOwnerAdded!=org.r3.PageManager.userInfo.dataBean.userid))
{roles.push({author:org.r3.PageManager.userInfo.dataBean.userid,authorname:org.r3.PageManager.userInfo.getUserFullname(),authortype:'user',getAuthorphotourl:function(){return org.r3.PageManager.userInfo.getUserPhotoIconUrl();}});if(lastAuthorChosenByUser&&lastAuthorChosenByUser==org.r3.PageManager.userInfo.dataBean.userid)
preferredAuthor=roles[roles.length-1];}
if(enabledRoles.indexOf('merchant')>=0&&org.r3.PageManager.userCollectionProfileInfo.isUserMerchant())
{var merchantRoles=org.r3.PageManager.userCollectionProfileInfo.merchantRoles;for(var i=0;i<merchantRoles.length;i++)
{if((!postOwnerAdded||postOwnerAdded!=merchantRoles[i].site.site))
{roles.push({author:merchantRoles[i].site.site,authorname:merchantRoles[i].site.sitedescription,authortype:'merchant',getAuthorphotourl:function(){return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[this.author,'sitesquared','icon']);}});if(lastAuthorChosenByUser&&lastAuthorChosenByUser==merchantRoles[i].site.site)
preferredAuthor=roles[roles.length-1];}}}
if(enabledRoles.indexOf('neighbowner')>=0&&org.r3.PageManager.userCollectionProfileInfo.isUserNeighborhoodOwner()&&(!postOwnerAdded||postOwnerAdded!=org.r3.SiteConstants.targetSite))
{roles.push({author:org.r3.SiteConstants.targetSite,authorname:org.r3.SiteConstants.targetSiteName,authortype:'neighborhood',getAuthorphotourl:function(){return org.r3.PageManager.getRESTUrl("GET_SiteCollection_Graphic",[org.r3.SiteConstants.targetSite,'sitesquared','icon']);}});if(lastAuthorChosenByUser&&lastAuthorChosenByUser==org.r3.SiteConstants.targetSite)
preferredAuthor=roles[roles.length-1];}}
if(roles.length)
{if(!preferredAuthor)
preferredAuthor=roles[0];return{current:preferredAuthor,listofroles:roles};}
return null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.sitecollection");org.r3.db.mongo.sitecollection.SiteCollectionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sitecollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.domain=aDataBean.domain||null;this.sitetype=aDataBean.sitetype||null;this.sitestatus=aDataBean.sitestatus||null;this.description=aDataBean.description||null;this.summary=aDataBean.summary||null;this.primarygeo=aDataBean.primarygeo||null;this.lastmodified=aDataBean.lastmodified||null;this.sections=aDataBean.sections||null;this.friends=aDataBean.friends||null;this.graphics=aDataBean.graphics||null;this.address=aDataBean.address||null;}});org.r3.db.mongo.sitecollection.FriendsDTO=Class.extend({init:function(aDataBean)
{this.site=aDataBean.site||null;this.sitetype=aDataBean.sitetype||null;this.sitedescription=aDataBean.sitedescription||null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.sitecollection");org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.sitecollection.SiteCollectionDTO(aDataBean));},getAddressDTOAdapter:function()
{if(!this.dataBean.address)
return null;return new org.r3.db.mongo.AddressDTOAdapter(this.dataBean.address);},getGraphicByRole:function(aMajorRole,aMinorRole)
{if(!this.dataBean.graphics)
return null;for(var i=0;i<this.dataBean.graphics.length;i++)
{var mimage=new org.r3.db.mongo.MongoImageIconDTOAdapter(this.dataBean.graphics[i]);if(mimage.isOfRole(aMinorRole))
{if(aMajorRole=='image'&&mimage.hasImage())
return mimage.getImage();if(aMajorRole=='icon'&&mimage.hasIcon())
return mimage.getIcon();}}
return null;}});org.r3.db.mongo.sitecollection.SiteCollectionGraphicsConfig=[{"name":"userphoto","description":"Foto Profilo Utente","extraInfo":[{"name":"cms_attachtype","value":"userphoto"}],"aspectRatio":1,"maxSize":[300,300],"templateFile":"ImageUploadActionFormView.html.jsp","uploadUrl":"PUT_SiteCollection_Graphic","imageCanvasIdHash":'#loadimage_canvas',"currentImageUrl":"/r3ng/resources/sites/default/img/userphoto.jpg","inputFileTriggerSelector":'#loadimage_input_file'},{"name":"shksitephoto","description":"Immagine Rettangolare Sito","extraInfo":[{"name":"cms_attachtype","value":"shksitephoto"}],"aspectRatio":2.85,"maxSize":[800,280],"templateFile":"ImageUploadActionFormView.html.jsp","uploadUrl":"PUT_SiteCollection_Graphic","imageCanvasIdHash":'#loadimage_canvas',"currentImageUrl":"/r3ng/resources/sites/default/img/shksitephoto.jpg","inputFileTriggerSelector":'#loadimage_input_file'},{"name":"sitesquared","description":"Immagine Quadrata Sito","extraInfo":[{"name":"cms_attachtype","value":"sitesquared"}],"aspectRatio":1,"maxSize":[300,300],"templateFile":"ImageUploadActionFormView.html.jsp","uploadUrl":"PUT_SiteCollection_Graphic","imageCanvasIdHash":'#loadimage_canvas',"currentImageUrl":"/r3ng/resources/sites/default/img/sitesquared.png","inputFileTriggerSelector":'#loadimage_input_file'}];jQuery.r3Utils.namespace("org.r3.db.mongo.sitecollection");org.r3.db.mongo.sitecollection.SiteCollectionQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.sitecollection.SiteCollectionQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.sitecollection.SiteCollectionQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.sitecollection.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='domain';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.sitecollection.message.domain,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.domain||'';}};}
var columnId='sitetype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.sitecollection.message.sitetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitetype||'';}};}
var columnId='sitestatus';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.sitecollection.message.sitestatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitestatus||'';}};}
var columnId='description';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.sitecollection.message.description,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.description||'';}};}
var columnId='summary';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.sitecollection.message.summary,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.summary||'';}};}
var columnId='primarygeo';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.sitecollection.message.primarygeo,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.primarygeo||'';}};}
var columnId='lastmodified';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.sitecollection.message.lastmodified,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastmodified||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo.timelinecollection");org.r3.db.mongo.timelinecollection.TimelineCollectionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_timelinecollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.timelineid=aDataBean.timelineid||null;this.site=aDataBean.site||null;this.title=aDataBean.title||null;this.description=aDataBean.description||null;this.timelinetype=aDataBean.timelinetype||null;this.creationdate=aDataBean.creationdate||null;this.lastmodified=aDataBean.lastmodified||null;this.allowedcontent=aDataBean.allowedcontent||null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.timelinecollection");org.r3.db.mongo.timelinecollection.TimelineCollectionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.timelinecollection.TimelineCollectionDTO(aDataBean));},getLastmodified:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.lastmodified);},hasAllowedcontent:function(aContentDefinitionId)
{if(this.dataBean&&this.dataBean.allowedcontent&&this.dataBean.allowedcontent.length)
{for(var i=0;i<this.dataBean.allowedcontent.length;i++)
{if(this.dataBean.allowedcontent[i]==aContentDefinitionId)
return true;}}
return false;},isDeletable:function()
{var systemFlag=this.dataBean&&this.dataBean.timelinetype&&this.dataBean.timelinetype=='system';return!systemFlag;}});jQuery.r3Utils.namespace("org.r3.db.mongo.timelinecollection");org.r3.db.mongo.timelinecollection.TimelineCollectionQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.timelinecollection.TimelineCollectionDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.timelinecollection.TimelineCollectionQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.timelinecollection.TimelineCollectionDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.timelinecollection.TimelineCollectionQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='timelineid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.timelinecollection.message.timelineid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.timelineid||'';}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.timelinecollection.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='title';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.timelinecollection.message.title,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.title||'';}};}
var columnId='description';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.timelinecollection.message.description,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.description||'';}};}
var columnId='timelinetype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.timelinecollection.message.timelinetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.timelinetype||'';}};}
var columnId='creationdate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.timelinecollection.message.creationdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.creationdate||'';}};}
var columnId='lastmodified';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.mongo.timelinecollection.message.lastmodified,"render":function(data,type,row,meta)
{var item=data;return item.getLastmodified()||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.mongo.usercollection");org.r3.db.mongo.usercollection.UserCollectionDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_usercollection";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.userid=aDataBean.userid||null;this.nickname=aDataBean.nickname||null;this.firstname=aDataBean.firstname||null;this.lastname=aDataBean.lastname||null;this.email=aDataBean.email||null;this.usertype=aDataBean.usertype||null;this.primarygeo=aDataBean.primarygeo||null;this.lastmodified=aDataBean.lastmodified||null;this.userstatus=aDataBean.userstatus||null;this.lastlogin=aDataBean.lastlogin||null;this.numberoflogins=aDataBean.numberoflogins||null;this.userconsent=aDataBean.userconsent||null;this.userana=aDataBean.userana||null;this.sections=aDataBean.sections||null;this.favsites=aDataBean.favsites||null;this.photo=aDataBean.photo||null;this.address=aDataBean.address||null;this.businesscard=aDataBean.businesscard||null;}});org.r3.db.mongo.usercollection.UseranaDTO=Class.extend({init:function(aDataBean)
{this.numberofposts=aDataBean.numberofposts||null;this.lastpostaction=aDataBean.lastpostaction||null;this.numberofcomments=aDataBean.numberofcomments||null;this.lastcommentaction=aDataBean.lastcommentaction||null;this.lastpostauthorid=aDataBean.lastpostauthorid||null;this.lastpostauthortype=aDataBean.lastpostauthortype||null;}});org.r3.db.mongo.usercollection.PhotoDTO=Class.extend({init:function(aDataBean)
{this.url=aDataBean.url||null;this.ctype=aDataBean.ctype||null;this.width=aDataBean.width||null;this.height=aDataBean.height||null;this.role=aDataBean.role||null;}});org.r3.db.mongo.usercollection.AddressDTO=Class.extend({init:function(aDataBean)
{this.formatted=aDataBean.formatted||null;this.snumber=aDataBean.snumber||null;this.route=aDataBean.route||null;this.locality=aDataBean.locality||null;this.adminarea_l3=aDataBean.adminarea_l3||null;this.adminarea_l2=aDataBean.adminarea_l2||null;this.adminarea_l1=aDataBean.adminarea_l1||null;this.country=aDataBean.country||null;this.postcode=aDataBean.postcode||null;this.geom=aDataBean.geom||null;this.gmapplaceid=aDataBean.gmapplaceid||null;}});org.r3.db.mongo.usercollection.AddressGeomDTO=Class.extend({init:function(aDataBean)
{this.location=aDataBean.location||null;this.viewpnortheast=aDataBean.viewpnortheast||null;this.viewpsouthwest=aDataBean.viewpsouthwest||null;}});org.r3.db.mongo.usercollection.BusinesscardDTO=Class.extend({init:function(aDataBean)
{this.personalstatement=aDataBean.personalstatement||null;this.email=aDataBean.email||null;this.cellphone=aDataBean.cellphone||null;}});jQuery.r3Utils.namespace("org.r3.db.mongo.usercollection");org.r3.db.mongo.usercollection.UserCollectionDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.usercollection.UserCollectionDTO(aDataBean));this.completionPercs=[0,25,50,100];this.merchantRoles=[];this.userNeighborhoodOwnerFlag=false;this.userFollowerFlag=false;this.userMemberFlag=false;},isCurrentUser:function()
{return this.dataBean.userid==org.r3.PageManager.userCollectionProfileInfo.dataBean.userid;},getUsername:function()
{if(this.dataBean.firstname)
return this.dataBean.firstname+' '+this.dataBean.lastname;return this.dataBean.userid;},getEmail:function()
{return this.dataBean.email||'n.d.';},getCellphone:function()
{return"+39";},setUserAnalyticsLastpostauthor:function(anAuthorId,anAuthorType)
{if(!this.dataBean.userana)
this.dataBean.userana={};this.dataBean.userana.lastpostauthorid=anAuthorId;this.dataBean.userana.lastpostauthortype=anAuthorType;},getUserAnalyticsLastpostauthor:function()
{return this.dataBean.userana&&this.dataBean.userana.lastpostauthorid;},isSiteInFavoriteList:function()
{if(this.dataBean.favsites&&this.dataBean.favsites.length)
{for(var i=0;i<this.dataBean.favsites.length;i++)
{if(this.dataBean.favsites[i]==org.r3.Constants.site)
return true;}}
return false;},isUserFollower:function()
{return this.userFollowerFlag;},isUserMember:function()
{return this.userMemberFlag;},isUserMerchant:function()
{return this.merchantRoles&&this.merchantRoles.length>0;},isUserNeighborhoodOwner:function(aUserDTOAdapter)
{return this.userNeighborhoodOwnerFlag;},setupEnabledRoles4Site:function(aUserDTOAdapter,aSiteCollectionDTOAdapter)
{if(aUserDTOAdapter)
{if(aSiteCollectionDTOAdapter&&aSiteCollectionDTOAdapter.dataBean.friends&&aSiteCollectionDTOAdapter.dataBean.friends.length)
{for(var i=0;i<aSiteCollectionDTOAdapter.dataBean.friends.length;i++)
{var item=aSiteCollectionDTOAdapter.dataBean.friends[i];var rs=aUserDTOAdapter.getRoles4Site(item.site);if(rs&&rs.length)
{switch(item.sitetype)
{case'shkshop':if(aUserDTOAdapter.hasRole4Site(item.site,org.r3.db.system.user.user.role_shkadmin)||aUserDTOAdapter.hasRole4Site(item.site,org.r3.db.system.user.user.role_shkowner))
{this.merchantRoles.push({site:item,roles:rs});}
break;}}}}
this.userNeighborhoodOwnerFlag=aUserDTOAdapter.hasRole4Site(org.r3.Constants.site,org.r3.db.system.user.user.role_shkadmin)||aUserDTOAdapter.hasRole4Site(org.r3.Constants.site,org.r3.db.system.user.user.role_shkowner);if(this.userNeighborhoodOwnerFlag&&org.r3.SiteConstants.targetSiteType=='shkshop')
{this.merchantRoles.push({site:{site:org.r3.Constants.site,sitetype:'shkshop',sitedescription:org.r3.SiteConstants.targetSiteName},roles:aUserDTOAdapter.getRoles4Site(org.r3.Constants.site)});}
this.userFollowerFlag=aUserDTOAdapter.hasRole4Site(org.r3.Constants.site,org.r3.db.system.user.user.role_shkfollower);this.userMemberFlag=aUserDTOAdapter.hasRole4Site(org.r3.Constants.site,org.r3.db.system.user.user.role_shkmember);}},isProfileOK:function()
{if(this.dataBean.sections&&this.dataBean.sections.length)
return this.completionPercs[this.dataBean.sections.length]==100;return false;},getCompletionPercentage:function()
{if(this.dataBean.sections&&this.dataBean.sections.length)
return this.completionPercs[this.dataBean.sections.length];return this.completionPercs[0];},getPhotoIconUrl:function()
{var p=this.getPhotoByRole('icon');if(p)
return p.url;var defUrl=org.r3.SiteConstants.getSiteResourceUrl('img','userPhotoIcon.png');return defUrl;},getPhotoUrl:function()
{var p=this.getPhotoByRole('image');if(p)
return p.url;return null;},getPhotoByRole:function(aRole)
{if(!this.dataBean.photo)
return null;for(var i=0;i<this.dataBean.photo.length;i++)
{if(this.dataBean.photo[i].role==aRole)
return this.dataBean.photo[i];}
return null;},getAddressDTOAdapter:function()
{if(!this.dataBean.address)
return null;return new org.r3.db.mongo.usercollection.AddressDTOAdapter(this.dataBean.address);},getMerchantRoleById:function(aMerchantId)
{var m=null;var merchantRoles=org.r3.PageManager.userCollectionProfileInfo.merchantRoles;if(merchantRoles&&merchantRoles.length)
{for(var i=0;i<merchantRoles.length;i++)
{if(aMerchantId==merchantRoles[i].site.site)
return merchantRoles[i];}}
return m;}});org.r3.db.mongo.usercollection.AddressDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.mongo.usercollection.AddressDTO(aDataBean));},getRouteStreetNumber:function()
{var a=this.dataBean&&this.dataBean.route;if(a&&this.dataBean.snumber)
a=a+', '+this.dataBean.snumber;return a;},getAdministrative_area_level_1_id:function()
{if(this.dataBean&&this.dataBean.adminarea_l1&&this.dataBean.adminarea_l1.locationid)
return this.dataBean.adminarea_l1.locationid;return null;},getSerializedAdminarea_l1:function()
{if(this.dataBean&&this.dataBean.adminarea_l1)
{return this.getSerializedNameAndSName(this.dataBean.adminarea_l1);}
return null;},getAdministrative_area_level_2_id:function()
{if(this.dataBean&&this.dataBean.adminarea_l2&&this.dataBean.adminarea_l2.locationid)
return this.dataBean.adminarea_l2.locationid;return null;},getSerializedAdminarea_l2:function()
{if(this.dataBean&&this.dataBean.adminarea_l2)
{return this.getSerializedNameAndSName(this.dataBean.adminarea_l2);}
return null;},getAdministrative_area_level_3_id:function()
{if(this.dataBean&&this.dataBean.adminarea_l3&&this.dataBean.adminarea_l3.locationid)
return this.dataBean.adminarea_l3.locationid;return null;},getSerializedAdminarea_l3:function()
{if(this.dataBean&&this.dataBean.adminarea_l3)
{return this.getSerializedNameAndSName(this.dataBean.adminarea_l3);}
return null;},getSerializedCountry:function()
{if(this.dataBean&&this.dataBean.country)
{return this.getSerializedNameAndSName(this.dataBean.country);}
return null;},getSerializedNameAndSName:function(anItem)
{if(!anItem)
return null;if(anItem.sname&&anItem.name)
{return anItem.sname+'#'+anItem.name;}
return anItem.name;},getSerializedLocation:function()
{if(this.dataBean&&this.dataBean.geom&&this.dataBean.geom.location)
{return this.getSerializedLatLng(this.dataBean.geom.location);}
return null;},getLocationAsCoordsArray:function()
{if(this.dataBean&&this.dataBean.geom&&this.dataBean.geom.location)
{var item=this.dataBean.geom.location;return[item.coordinates[1],item.coordinates[0]];}
return null;},getSerializedNortheast:function()
{if(this.dataBean&&this.dataBean.geom&&this.dataBean.geom.viewpnortheast)
{return this.getSerializedLatLng(this.dataBean.geom.viewpnortheast);}
return null;},getSerializedSouthwest:function()
{if(this.dataBean&&this.dataBean.geom&&this.dataBean.geom.viewpsouthwest)
{return this.getSerializedLatLng(this.dataBean.geom.viewpsouthwest);}
return null;},getSerializedLatLng:function(anItem)
{if(!anItem)
return null;return anItem.coordinates[1]+'#'+anItem.coordinates[0];}});jQuery.r3Utils.namespace("org.r3.db.mongo.usercollection");org.r3.db.mongo.usercollection.UsercollectionQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.mongo.usercollection.UserCollectionDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.mongo.usercollection.UserCollectionQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.mongo.usercollection.UserCollectionDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.mongo.usercollection.UserCollectionQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='userid';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='userid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};}
var columnId='nickname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.nickname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nickname||'';}};}
var columnId='password';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.password,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.password||'';}};}
var columnId='firstname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.firstname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.firstname||'';}};}
var columnId='lastname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.lastname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastname||'';}};}
var columnId='companyid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.companyid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.companyid||'';}};}
var columnId='email';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.email,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.email||'';}};}
var columnId='usertype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.usertype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.usertype||'';}};}
var columnId='avatarrole';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.avatarrole,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.avatarrole||'';}};}
var columnId='parentuserid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.parentuserid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.parentuserid||'';}};}
var columnId='userphoto';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.userphoto,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userphoto||'';}};}
var columnId='lastlogin';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.lastlogin,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastlogin||'';}};}
var columnId='numberoflogins';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.numberoflogins,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberoflogins||'';}};}
var columnId='userconsent';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.userconsent,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userconsent||'';}};}
var columnId='recstatus';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.orc.rms");org.r3.db.orc.rms.RMSDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_rms";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.rmsid=aDataBean.rmsid||null;this.filename=aDataBean.filename||null;this.fileurl=aDataBean.fileurl||null;this.filesize=aDataBean.filesize||null;this.numberofcerts=aDataBean.numberofcerts||null;this.numberofdupcerts=aDataBean.numberofdupcerts||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.orc.rms");org.r3.db.orc.rms.RMSDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.orc.rms.RMSDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.orc.rms");org.r3.db.orc.rms.RMSQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.orc.rms.RMSDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.orc.rms.RMSQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.orc.rms.RMSDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.orc.rms.RMSQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='rmsid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.orc.rms.message.rmsid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rmsid||'';}};}
var columnId='filename';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.orc.rms.message.filename,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.filename||'';}};}
var columnId='fileurl';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.orc.rms.message.fileurl,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.fileurl||'';}};}
var columnId='filesize';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.orc.rms.message.filesize,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.filesize||'';}};}
var columnId='numberofcerts';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.orc.rms.message.numberofcerts,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofcerts||'';}};}
var columnId='numberofdupcerts';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.orc.rms.message.numberofdupcerts,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofdupcerts||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.orc.rms.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.project.resource");org.r3.db.project.resource.ResourceDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_resource";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.resourceid=aDataBean.resourceid||null;this.resourcetype=aDataBean.resourcetype||null;this.resourcedescr=aDataBean.resourcedescr||null;this.sitedomain=aDataBean.sitedomain||null;this.userid=aDataBean.userid||null;this.firstname=aDataBean.firstname||null;this.lastname=aDataBean.lastname||null;this.phone=aDataBean.phone||null;this.cellphone=aDataBean.cellphone||null;this.email=aDataBean.email||null;this.address=aDataBean.address||null;this.town=aDataBean.town||null;this.zipcode=aDataBean.zipcode||null;this.ssn=aDataBean.ssn||null;this.sex=aDataBean.sex||null;this.birthdate=aDataBean.birthdate||null;this.birthtown=aDataBean.birthtown||null;this.birthdistrict=aDataBean.birthdistrict||null;this.resourcecardid=aDataBean.resourcecardid||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.project.resource");org.r3.db.project.resource.ResourceDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.resource.ResourceDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.project.resource");org.r3.db.project.resource.ResourceQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.resource.ResourceDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=this.dataTableId+"_all_"+attributekey;var selectorPrefix=this.dataTableId;defaultColumnDefinitions['singleselector']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['multiselector']={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['queryformview-tools']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var s='<div class="tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};defaultColumnDefinitions['resourceid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.resourceid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourceid||'';}};defaultColumnDefinitions['resourcetype']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.resourcetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourcetype||'';}};defaultColumnDefinitions['resourcedescr']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.resourcedescr,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourcedescr||'';}};defaultColumnDefinitions['sitedomain']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.sitedomain,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitedomain||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};defaultColumnDefinitions['firstname']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.firstname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.firstname||'';}};defaultColumnDefinitions['lastname']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.lastname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastname||'';}};defaultColumnDefinitions['phone']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.phone,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.phone||'';}};defaultColumnDefinitions['cellphone']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.cellphone,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cellphone||'';}};defaultColumnDefinitions['email']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.email,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.email||'';}};defaultColumnDefinitions['address']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.address,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.address||'';}};defaultColumnDefinitions['town']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.town,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.town||'';}};defaultColumnDefinitions['zipcode']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.zipcode,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.zipcode||'';}};defaultColumnDefinitions['ssn']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.ssn,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.ssn||'';}};defaultColumnDefinitions['sex']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.sex,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sex||'';}};defaultColumnDefinitions['birthdate']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.birthdate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.birthdate||'';}};defaultColumnDefinitions['birthtown']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.birthtown,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.birthtown||'';}};defaultColumnDefinitions['birthdistrict']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.birthdistrict,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.birthdistrict||'';}};defaultColumnDefinitions['resourcecardid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.resourcecardid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourcecardid||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resource.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.resource.ResourceDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.project.resourcetimesheet");org.r3.db.project.resourcetimesheet.ResourceTimesheetDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_resourcetimesheet";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.tsentryid=aDataBean.tsentryid||null;this.caleveday=aDataBean.caleveday||null;this.site=aDataBean.site||null;this.teamid=aDataBean.teamid||null;this.resourceid=aDataBean.resourceid||null;this.uniteffort=aDataBean.uniteffort||null;this.ordeffort=aDataBean.ordeffort||null;this.exteffort=aDataBean.exteffort||null;this.oncalleffort=aDataBean.oncalleffort||null;this.tseuserid=aDataBean.tseuserid||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.project.resourcetimesheet");org.r3.db.project.resourcetimesheet.ResourceTimesheetDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.resourcetimesheet.ResourceTimesheetDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.project.resourcetimesheet");org.r3.db.project.resourcetimesheet.ResourceTimesheetQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.resourcetimesheet.ResourceTimesheetDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=this.dataTableId+"_all_"+attributekey;var selectorPrefix=this.dataTableId;defaultColumnDefinitions['singleselector']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['multiselector']={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['queryformview-tools']={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};defaultColumnDefinitions['tsentryid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.tsentryid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.tsentryid||'';}};defaultColumnDefinitions['caleveday']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.caleveday,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.caleveday||'';}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['teamid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.teamid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.teamid||'';}};defaultColumnDefinitions['resourceid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.resourceid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourceid||'';}};defaultColumnDefinitions['uniteffort']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.uniteffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.uniteffort||'';}};defaultColumnDefinitions['ordeffort']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.ordeffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.ordeffort||'';}};defaultColumnDefinitions['exteffort']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.exteffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.exteffort||'';}};defaultColumnDefinitions['oncalleffort']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.oncalleffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.oncalleffort||'';}};defaultColumnDefinitions['tseuserid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.tseuserid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.tseuserid||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheet.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.resourcetimesheet.ResourceTimesheetDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.project.resourcetimesheetview");org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_resourcetimesheetview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.tsentryid=aDataBean.tsentryid||null;this.sitedomain=aDataBean.sitedomain||null;this.resourceid=aDataBean.resourceid||null;this.resourcedescr=aDataBean.resourcedescr||null;this.teamid=aDataBean.teamid||null;this.teamperiod=aDataBean.teamperiod||null;this.profileid=aDataBean.profileid||null;this.companyid=aDataBean.companyid||null;this.costcenter1=aDataBean.costcenter1||null;this.costcenter2=aDataBean.costcenter2||null;this.costcenter3=aDataBean.costcenter3||null;this.uniteffort=aDataBean.uniteffort||null;this.ordeffort=aDataBean.ordeffort||null;this.exteffort=aDataBean.exteffort||null;this.oncalleffort=aDataBean.oncalleffort||null;this.price=aDataBean.price||null;this.cost=aDataBean.cost||null;this.evalueunit=aDataBean.evalueunit||null;this.caldate=aDataBean.caldate||null;this.caleveday=aDataBean.caleveday||null;this.calevemonth=aDataBean.calevemonth||null;this.caleveweek=aDataBean.caleveweek||null;this.calevequarter=aDataBean.calevequarter||null;this.caleveyear=aDataBean.caleveyear||null;this.tseuserid=aDataBean.tseuserid||null;}});jQuery.r3Utils.namespace("org.r3.db.project.resourcetimesheetview");org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewDTO(aDataBean));},getCalevemonth:function()
{return $.r3Utils.formatLUTDataBeanField("LUT_DefaultCalendarMonthlyPeriod",this.dataBean.calevemonth);},getCaleveyear:function()
{return $.r3Utils.formatLUTDataBeanField("LUT_DefaultCalendarYearlyPeriod",this.dataBean.caleveyear);},getCalevequarter:function()
{return $.r3Utils.formatLUTDataBeanField("LUT_DefaultCalendarQuarterlyPeriod",this.dataBean.calevequarter);}});jQuery.r3Utils.namespace("org.r3.db.project.resourcetimesheetview");org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-trash-o tools-icon toolid-trash" style="margin: 2px"></i></div>';return s;}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='tsentryid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.tsentryid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.tsentryid||'';}};}
var columnId='sitedomain';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.sitedomain,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitedomain||'';}};}
var columnId='resourceid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.resourceid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourceid||'';}};}
var columnId='resourcedescr';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.resourcedescr,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourcedescr||'';}};}
var columnId='teamid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.teamid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.teamid||'';}};}
var columnId='teamperiod';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.teamperiod,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.teamperiod||'';}};}
var columnId='profileid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.profileid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.profileid||'';}};}
var columnId='companyid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.companyid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.companyid||'';}};}
var columnId='costcenter1';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.costcenter1,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.costcenter1||'';}};}
var columnId='costcenter2';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.costcenter2,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.costcenter2||'';}};}
var columnId='costcenter3';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.costcenter3,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.costcenter3||'';}};}
var columnId='uniteffort';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.uniteffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.uniteffort||'';}};}
var columnId='ordeffort';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.project.resourcetimesheetview.message.ordeffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.ordeffort||'0';}};}
var columnId='exteffort';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.project.resourcetimesheetview.message.exteffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.exteffort||'0';}};}
var columnId='oncalleffort';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.project.resourcetimesheetview.message.oncalleffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.oncalleffort||'0';}};}
var columnId='price';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.price,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.price||'0';}};}
var columnId='cost';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.cost,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cost||'0';}};}
var columnId='evalueunit';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.evalueunit,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.evalueunit||'';}};}
var columnId='caldate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.caldate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.caldate||'';}};}
var columnId='caleveday';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.caleveday,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.caleveday||'';}};}
var columnId='calevemonth';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.calevemonth,"render":function(data,type,row,meta)
{var item=data;return item.getCalevemonth()||'';}};}
var columnId='caleveweek';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.caleveweek,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.caleveweek||'';}};}
var columnId='calevequarter';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.calevequarter,"render":function(data,type,row,meta)
{var item=data;return item.getCalevequarter()||'';}};}
var columnId='caleveyear';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.caleveyear,"render":function(data,type,row,meta)
{var item=data;return item.getCaleveyear()||'';}};}
var columnId='tseuserid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.resourcetimesheetview.message.tseuserid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.tseuserid||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.project.siteresource");org.r3.db.project.siteresource.SiteResourceDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_siteresource";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.resourceid=aDataBean.resourceid||null;this.profileid=aDataBean.profileid||null;this.evalueunit=aDataBean.evalueunit||null;this.price=aDataBean.price||0.0;this.cost=aDataBean.cost||0.0;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.project.siteresource");org.r3.db.project.siteresource.SiteResourceDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.siteresource.SiteResourceDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.project.siteresource");org.r3.db.project.siteresource.SiteResourceQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.siteresource.SiteResourceDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresource.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['resourceid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresource.message.resourceid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourceid||'';}};defaultColumnDefinitions['profileid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresource.message.profileid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.profileid||'';}};defaultColumnDefinitions['evalueunit']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresource.message.evalueunit,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.evalueunit||'';}};defaultColumnDefinitions['price']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresource.message.price,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.price||'';}};defaultColumnDefinitions['cost']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresource.message.cost,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cost||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresource.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresource.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.siteresource.SiteResourceDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.project.siteresourceview");org.r3.db.project.siteresourceview.SiteResourceViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_siteresourceview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.resourceid=aDataBean.resourceid||null;this.resourcetype=aDataBean.resourcetype||null;this.resourcedescr=aDataBean.resourcedescr||null;this.sitedomain=aDataBean.sitedomain||null;this.userid=aDataBean.userid||null;this.firstname=aDataBean.firstname||null;this.lastname=aDataBean.lastname||null;this.phone=aDataBean.phone||null;this.cellphone=aDataBean.cellphone||null;this.email=aDataBean.email||null;this.address=aDataBean.address||null;this.town=aDataBean.town||null;this.zipcode=aDataBean.zipcode||null;this.resourcecardid=aDataBean.resourcecardid||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;this.site=aDataBean.site||null;this.profileid=aDataBean.profileid||null;this.evalueunit=aDataBean.evalueunit||null;this.price=aDataBean.price||null;this.cost=aDataBean.cost||null;this.siterecstatus=aDataBean.siterecstatus||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.project.siteresourceview");org.r3.db.project.siteresourceview.SiteResourceViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.siteresourceview.SiteResourceViewDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.project.siteresourceview");org.r3.db.project.siteresourceview.SiteResourceViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.siteresourceview.SiteResourceViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['resourceid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.resourceid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourceid||'';}};defaultColumnDefinitions['resourcetype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.resourcetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourcetype||'';}};defaultColumnDefinitions['resourcedescr']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.resourcedescr,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourcedescr||'';}};defaultColumnDefinitions['sitedomain']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.sitedomain,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitedomain||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};defaultColumnDefinitions['firstname']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.firstname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.firstname||'';}};defaultColumnDefinitions['lastname']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.lastname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastname||'';}};defaultColumnDefinitions['phone']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.phone,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.phone||'';}};defaultColumnDefinitions['cellphone']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.cellphone,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cellphone||'';}};defaultColumnDefinitions['email']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.email,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.email||'';}};defaultColumnDefinitions['address']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.address,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.address||'';}};defaultColumnDefinitions['town']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.town,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.town||'';}};defaultColumnDefinitions['zipcode']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.zipcode,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.zipcode||'';}};defaultColumnDefinitions['resourcecardid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.resourcecardid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourcecardid||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['profileid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.profileid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.profileid||'';}};defaultColumnDefinitions['evalueunit']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.evalueunit,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.evalueunit||'';}};defaultColumnDefinitions['price']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.price,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.price||'';}};defaultColumnDefinitions['cost']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.cost,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cost||'';}};defaultColumnDefinitions['siterecstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.siteresourceview.message.siterecstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.siterecstatus||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.siteresourceview.SiteResourceViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.project.team");org.r3.db.project.team.TeamDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_team";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.teamid=aDataBean.teamid||null;this.teamdescr=aDataBean.teamdescr||null;this.periodindex=aDataBean.periodindex||null;this.periodtype=aDataBean.periodtype||null;this.teamstatus=aDataBean.teamstatus||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.project.team");org.r3.db.project.team.TeamDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.team.TeamDTO(aDataBean));},isOpen4Reporting:function()
{return this.dataBean.teamstatus&&this.dataBean.teamstatus=='team_reporting';},getTeamstatusAsSemaphore:function()
{var semaphoreColor='gray';switch(this.dataBean.teamstatus)
{case'team_empty':break;case'team_building':semaphoreColor='green';break;case'team_verifying':semaphoreColor='orange';break;case'team_reporting':semaphoreColor='red';break;case'team_validating':semaphoreColor='blue';break;case'team_close':semaphoreColor='black';break;}
return $.r3Utils.formatSemaphore(semaphoreColor);},canBeModified:function()
{var rc=false;switch(this.dataBean.teamstatus)
{case'team_empty':rc=true;break;case'team_building':rc=true;break;case'team_verifying':if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'srvcauditor'))
rc=true;break;case'team_reporting':break;case'team_validating':break;case'team_close':break;}
return rc;},getOnCompleteOKTask_InReportingTask:function()
{if(this.dataBean.teamstatus=='team_reporting'||this.dataBean.teamstatus=='team_validating')
{return this.getOnCompleteOKTask();}
return null;},getOnCompleteOKTask:function()
{var task=null;switch(this.dataBean.teamstatus)
{case'team_empty':break;case'team_building':if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'srvcmgr'))
task='team_verifying';break;case'team_verifying':if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'srvcauditor'))
task='team_reporting';break;case'team_reporting':if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'srvcmgr')||org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'srvcauditor'))
task='team_validating';break;case'team_validating':if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'srvcauditor'))
task='team_close';break;case'team_close':break;}
return task;},getOnCompleteKOTask_InReportingTask:function()
{if(this.dataBean.teamstatus=='team_reporting'||this.dataBean.teamstatus=='team_validating')
{return this.getOnCompleteKOTask();}
return null;},getOnCompleteKOTask:function()
{var task=null;switch(this.dataBean.teamstatus)
{case'team_empty':break;case'team_building':break;case'team_verifying':if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'srvcauditor'))
task='team_building';break;case'team_reporting':if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'srvcauditor'))
task='team_building';break;case'team_validating':if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'srvcauditor'))
task='team_reporting';break;case'team_close':break;}
return task;}});jQuery.r3Utils.namespace("org.r3.db.project.team");org.r3.db.project.team.TeamQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.team.TeamDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.team.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['teamid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.team.message.teamid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.teamid||'';}};defaultColumnDefinitions['teamdescr']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.team.message.teamdescr,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.teamdescr||'';}};defaultColumnDefinitions['periodindex']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.team.message.periodindex,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.periodindex||'';}};defaultColumnDefinitions['periodtype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.team.message.periodtype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.periodtype||'';}};defaultColumnDefinitions['teamstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.team.message.teamstatus,"render":function(data,type,row,meta)
{var item=data;return item.getTeamstatusAsSemaphore()+' '+item.dataBean.teamstatus;}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.team.TeamDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.project.teammemberprofile");org.r3.db.project.teammemberprofile.TeamMemberProfileDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_teammemberprofile";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.profileid=aDataBean.profileid||null;this.site=aDataBean.site||null;this.teamid=aDataBean.teamid||null;this.profiledescr=aDataBean.profiledescr||null;this.skillprofile=aDataBean.skillprofile||null;this.skillambit=aDataBean.skillambit||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.project.teammemberprofile");org.r3.db.project.teammemberprofile.TeamMemberProfileDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.teammemberprofile.TeamMemberProfileDTO(aDataBean));},getSkillprofile:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_skillprofile',this.dataBean.skillprofile);},getSkillambit:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_skillambit',this.dataBean.skillambit);},getProfiledescr:function()
{var s=this.getSkillprofile()+" "+this.getSkillambit();return s;}});jQuery.r3Utils.namespace("org.r3.db.project.teammemberprofile");org.r3.db.project.teammemberprofile.TeamMemberProfileQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.teammemberprofile.TeamMemberProfileDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['profileid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teammemberprofile.message.profileid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.profileid||'';}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teammemberprofile.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['teamid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teammemberprofile.message.teamid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.teamid||'';}};defaultColumnDefinitions['profiledescr']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teammemberprofile.message.profiledescr,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.profiledescr||'';}};defaultColumnDefinitions['skillprofile']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teammemberprofile.message.skillprofile,"render":function(data,type,row,meta)
{var item=data;return item.getSkillprofile()||'';}};defaultColumnDefinitions['skillambit']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teammemberprofile.message.skillambit,"render":function(data,type,row,meta)
{var item=data;return item.getSkillambit()||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teammemberprofile.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teammemberprofile.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.teammemberprofile.TeamMemberProfileDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.project.teamresource");org.r3.db.project.teamresource.TeamResourceDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_teamresource";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.teamid=aDataBean.teamid||null;this.resourceid=aDataBean.resourceid||null;this.profileid=aDataBean.profileid||null;this.evalueunit=aDataBean.evalueunit||null;this.price=aDataBean.price||null;this.cost=aDataBean.cost||null;this.resourcedefstatus=aDataBean.resourcedefstatus||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.project.teamresource");org.r3.db.project.teamresource.TeamResourceDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.teamresource.TeamResourceDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.project.teamresource");org.r3.db.project.teamresource.TeamResourceQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.teamresource.TeamResourceDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['teamid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.teamid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.teamid||'';}};defaultColumnDefinitions['resourceid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.resourceid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourceid||'';}};defaultColumnDefinitions['profileid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.profileid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.profileid||'';}};defaultColumnDefinitions['evalueunit']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.evalueunit,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.evalueunit||'';}};defaultColumnDefinitions['price']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.price,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.price||'';}};defaultColumnDefinitions['cost']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.cost,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cost||'';}};defaultColumnDefinitions['resourcedefstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.resourcedefstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourcedefstatus||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.teamresource.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.teamresource.TeamResourceDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.project.teamresourceview");org.r3.db.project.teamresourceview.TeamResourceViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_teamresourceview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.teamid=aDataBean.teamid||null;this.teamdescr=aDataBean.teamdescr||null;this.periodindex=aDataBean.periodindex||null;this.periodtype=aDataBean.periodtype||null;this.teamstatus=aDataBean.teamstatus||null;this.resourceid=aDataBean.resourceid||null;this.resourcedescr=aDataBean.resourcedescr||null;this.profileid=aDataBean.profileid||null;this.evalueunit=aDataBean.evalueunit||null;this.price=aDataBean.price||null;this.cost=aDataBean.cost||null;this.resourcedefstatus=aDataBean.resourcedefstatus||null;this.recstatus=aDataBean.recstatus||null;}});jQuery.r3Utils.namespace("org.r3.db.project.teamresourceview");org.r3.db.project.teamresourceview.TeamResourceViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.teamresourceview.TeamResourceViewDTO(aDataBean));},getResourcedefstatusAsSemaphore:function()
{var semaphoreColor='gray';switch(this.dataBean.resourcedefstatus)
{case'complete':semaphoreColor='green';break;case'incomplete':semaphoreColor='red';break;}
return $.r3Utils.formatSemaphore(semaphoreColor);},getTeamstatusAsSemaphore:function()
{var semaphoreColor='gray';switch(this.dataBean.teamstatus)
{case'team_empty':break;case'team_building':semaphoreColor='green';break;case'team_verifying':semaphoreColor='orange';break;case'team_reporting':semaphoreColor='red';break;case'team_validating':semaphoreColor='blue';break;case'team_close':semaphoreColor='black';break;}
return $.r3Utils.formatSemaphore(semaphoreColor);},getProfileDescr:function()
{return $.r3Utils.formatLUTDataBeanField('GET_TeamMemberProfiles',this.dataBean.profileid);}});jQuery.r3Utils.namespace("org.r3.db.project.teamresourceview");org.r3.db.project.teamresourceview.TeamResourceViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.teamresourceview.TeamResourceViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=this.dataTableId+"_all_"+attributekey;var selectorPrefix=this.dataTableId;defaultColumnDefinitions['singleselector']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['multiselector']={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['queryformview-tools']={"aTargets":[-1],"sClass":"text-center","sWidth":"35px","sTitle":"","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools">';s+='<i class="fa fa-file-o tools-icon toolid-detail" style="margin: 2px"></i>';if(item.dataBean.teamstatus=='team_building')
s+='<i class="fa fa-trash-o tools-icon toolid-delete" style="margin: 2px"></i>';s+='</div>';return s;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['teamid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.teamid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.teamid||'';}};defaultColumnDefinitions['teamdescr']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.teamdescr,"render":function(data,type,row,meta)
{var item=data;return item.getTeamstatusAsSemaphore()+' '+item.dataBean.teamdescr||'';}};defaultColumnDefinitions['periodindex']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.periodindex,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.periodindex||'';}};defaultColumnDefinitions['periodtype']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.periodtype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.periodtype||'';}};defaultColumnDefinitions['teamstatus']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.teamstatus,"render":function(data,type,row,meta)
{var item=data;return item.getTeamstatusAsSemaphore()+' '+item.dataBean.teamstatus;}};defaultColumnDefinitions['resourceid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.resourceid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.resourceid||'';}};defaultColumnDefinitions['resourcedescr']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.resourcedescr,"render":function(data,type,row,meta)
{var item=data;return item.getResourcedefstatusAsSemaphore()+' '+item.dataBean.resourcedescr||'';}};defaultColumnDefinitions['profileid']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.profileid,"render":function(data,type,row,meta)
{var item=data;return item.getProfileDescr();}};defaultColumnDefinitions['evalueunit']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.evalueunit,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.evalueunit||'';}};defaultColumnDefinitions['price']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.price,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.price||'';}};defaultColumnDefinitions['cost']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.cost,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cost||'';}};defaultColumnDefinitions['resourcedefstatus']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.resourcedefstatus,"render":function(data,type,row,meta)
{var item=data;return item.getResourcedefstatusAsSemaphore();}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.project.teamresourceview.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.teamresourceview.TeamResourceViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.project.wbsnodeteammemberprofile");org.r3.db.project.wbsnodeteammemberprofile.WBSNodeTeamMemberProfileDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_wbsnodeteammemberprofile";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.profileid=aDataBean.profileid||null;this.wbsnodeid=aDataBean.wbsnodeid||null;this.effort=aDataBean.effort||null;this.uniteffort=aDataBean.uniteffort||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.project.wbsnodeteammemberprofile");org.r3.db.project.wbsnodeteammemberprofile.WBSNodeTeamMemberProfileDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.wbsnodeteammemberprofile.WBSNodeTeamMemberProfileDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.project.wbsnodeteammemberprofile");org.r3.db.project.wbsnodeteammemberprofile.WBSNodeTeamMemberProfileQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.wbsnodeteammemberprofile.WBSNodeTeamMemberProfileDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['profileid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofile.message.profileid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.profileid||'';}};defaultColumnDefinitions['wbsnodeid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofile.message.wbsnodeid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.wbsnodeid||'';}};defaultColumnDefinitions['effort']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofile.message.effort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.effort||'';}};defaultColumnDefinitions['uniteffort']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofile.message.uniteffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.uniteffort||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofile.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofile.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.wbsnodeteammemberprofile.WBSNodeTeamMemberProfileDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.project.wbsnodeteammemberprofileview");org.r3.db.project.wbsnodeteammemberprofileview.WBSNodeTeamMemberProfileViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_wbsnodeteammemberprofileview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.profileid=aDataBean.profileid||null;this.wbsnodeid=aDataBean.wbsnodeid||null;this.effort=aDataBean.effort||null;this.uniteffort=aDataBean.uniteffort||null;this.recstatus=aDataBean.recstatus||null;this.site=aDataBean.site||null;this.wbsid=aDataBean.wbsid||null;this.nodetype=aDataBean.nodetype||null;this.nodeorder=aDataBean.nodeorder||null;this.nodesect=aDataBean.nodesect||null;this.nodename=aDataBean.nodename||null;this.nodestatus=aDataBean.nodestatus||null;}});jQuery.r3Utils.namespace("org.r3.db.project.wbsnodeteammemberprofileview");org.r3.db.project.wbsnodeteammemberprofileview.WBSNodeTeamMemberProfileViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.project.wbsnodeteammemberprofileview.WBSNodeTeamMemberProfileViewDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.project.wbsnodeteammemberprofileview");org.r3.db.project.wbsnodeteammemberprofileview.WBSNodeTeamMemberProfileViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.project.wbsnodeteammemberprofileview.WBSNodeTeamMemberProfileViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['profileid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.profileid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.profileid||'';}};defaultColumnDefinitions['wbsnodeid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.wbsnodeid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.wbsnodeid||'';}};defaultColumnDefinitions['effort']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.effort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.effort||'';}};defaultColumnDefinitions['uniteffort']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.uniteffort,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.uniteffort||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['wbsid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.wbsid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.wbsid||'';}};defaultColumnDefinitions['nodetype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.nodetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodetype||'';}};defaultColumnDefinitions['nodeorder']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.nodeorder,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodeorder||'';}};defaultColumnDefinitions['nodesect']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.nodesect,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodesect||'';}};defaultColumnDefinitions['nodename']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.nodename,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodename||'';}};defaultColumnDefinitions['nodestatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.project.wbsnodeteammemberprofileview.message.nodestatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nodestatus||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.project.wbsnodeteammemberprofileview.WBSNodeTeamMemberProfileViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appcrewmember");org.r3.db.sailevent.appcrewmember.SailApplicationCrewMemberDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailapplicationcrewmember";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.crewmemberid=aDataBean.crewmemberid||null;this.eventid=aDataBean.eventid||null;this.applicationid=aDataBean.applicationid||null;this.cardnumber=aDataBean.cardnumber||null;this.crewmembername=aDataBean.crewmembername||null;this.weight=aDataBean.weight||null;this.crewmemberrolecode=aDataBean.crewmemberrolecode||null;this.memberstatuscode=aDataBean.memberstatuscode||null;this.createtimestamp=aDataBean.createtimestamp||null;this.deletetimestamp=aDataBean.deletetimestamp||null;this.checkcardnumber=aDataBean.checkcardnumber||null;this.checkcardnumber_ts=aDataBean.checkcardnumber_ts||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appcrewmember");org.r3.db.sailevent.appcrewmember.SailApplicationCrewMemberDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.appcrewmember.SailApplicationCrewMemberDTO(aDataBean));},getCrewmemberrolecode:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_crewrole',this.dataBean.crewmemberrolecode);},getMemberstatuscode:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_crewstatus',this.dataBean.memberstatuscode);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appcrewmember");org.r3.db.sailevent.appcrewmember.SailApplicationCrewMemberQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.appcrewmember.SailApplicationCrewMemberDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['crewmemberid']={"aTargets":[-1],"sClass":"left","sTitle":"crewmemberid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.crewmemberid||'';}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.eventid||'';}};defaultColumnDefinitions['applicationid']={"aTargets":[-1],"sClass":"left","sTitle":"applicationid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.applicationid||'';}};defaultColumnDefinitions['cardnumber']={"aTargets":[-1],"sClass":"left","sTitle":"No. Tessera","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.cardnumber||'';}};defaultColumnDefinitions['crewmembername']={"aTargets":[-1],"sClass":"left","sTitle":"Nominativo","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.crewmembername||'';}};defaultColumnDefinitions['weight']={"aTargets":[-1],"sClass":"left","sTitle":"Peso","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.weight||'';}};defaultColumnDefinitions['crewmemberrolecode']={"aTargets":[-1],"sClass":"left","sTitle":"Ruolo","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.getCrewmemberrolecode()||'';}};defaultColumnDefinitions['memberstatuscode']={"aTargets":[-1],"sClass":"left","sTitle":"memberstatuscode","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.memberstatuscode||'';}};defaultColumnDefinitions['createtimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"createtimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.createtimestamp||'';}};defaultColumnDefinitions['deletetimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"deletetimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.deletetimestamp||'';}};defaultColumnDefinitions['checkcardnumber']={"aTargets":[-1],"sClass":"left","sTitle":"checkcardnumber","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.checkcardnumber||'';}};defaultColumnDefinitions['checkcardnumber_ts']={"aTargets":[-1],"sClass":"left","sTitle":"checkcardnumber_ts","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.checkcardnumber_ts||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":"recstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"rectimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.appcrewmember.SailApplicationCrewMemberDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appcrewmemberview");org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailapplicationcrewmemberview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.crewmemberid=aDataBean.crewmemberid||null;this.eventid=aDataBean.eventid||null;this.applicationid=aDataBean.applicationid||null;this.cardnumber=aDataBean.cardnumber||null;this.crewmembername=aDataBean.crewmembername||null;this.weight=aDataBean.weight||null;this.crewmemberrolecode=aDataBean.crewmemberrolecode||null;this.memberstatuscode=aDataBean.memberstatuscode||null;this.createtimestamp=aDataBean.createtimestamp||null;this.deletetimestamp=aDataBean.deletetimestamp||null;this.checkcardnumber=aDataBean.checkcardnumber||null;this.checkcardnumber_ts=aDataBean.checkcardnumber_ts||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;this.cardnumberstatuscode=aDataBean.cardnumberstatuscode||null;this.yachtclub=aDataBean.yachtclub||null;this.cardholdername=aDataBean.cardholdername||null;this.cardholderlastname=aDataBean.cardholderlastname||null;this.medexamexpirationdate=aDataBean.medexamexpirationdate||null;this.cardexpirationdate=aDataBean.cardexpirationdate||null;this.renewaldate=aDataBean.renewaldate||null;this.generalcardexpirationdate=aDataBean.generalcardexpirationdate||null;this.systemcheckdate=aDataBean.systemcheckdate||null;this.sailnumber=aDataBean.sailnumber||null;this.yachtname=aDataBean.yachtname||null;this.completionstatus=aDataBean.completionstatus||null;this.verificationstatus=aDataBean.verificationstatus||null;this.numcoviddocs=aDataBean.numcoviddocs||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appcrewmemberview");org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewDTO(aDataBean));},isActive:function()
{return this.dataBean&&this.dataBean.recstatus=='sys_recact';},getCrewmemberrolecode:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_crewrole',this.dataBean.crewmemberrolecode);},getMemberstatuscode:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_crewstatus',this.dataBean.memberstatuscode);},getCardnumberstatuscode:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_fivcardstatus',this.dataBean.cardnumberstatuscode);},isAnExistingCardNumber:function()
{if(this.dataBean&&this.dataBean.cardnumberstatuscode&&this.dataBean.cardnumberstatuscode!='fiv_cn_unknown'&&this.dataBean.cardnumberstatuscode!='fiv_cn_notexist')
return true;return false;},getMemberInfo:function()
{var s='';if(this.isAnExistingCardNumber())
{s=s+this.dataBean.cardholdername+' '+this.dataBean.cardholderlastname;if(!$.r3Utils.stringContains(this.dataBean.crewmembername,this.dataBean.cardholdername)||!$.r3Utils.stringContains(this.dataBean.crewmembername,this.dataBean.cardholderlastname))
s=s+"<br />("+this.dataBean.crewmembername+") ";}
else
{s+=this.dataBean.crewmembername;}
return s;},getCardnumberstatuscodeAsSemaphore:function()
{var semaphoreColor='gray';switch(this.dataBean.cardnumberstatuscode)
{case'fiv_cn_valid':semaphoreColor='green';break;case'fiv_cn_expired':case'fiv_cn_notexist':semaphoreColor='red';break;}
return $.r3Utils.formatSemaphore(semaphoreColor);},getRectimestamp:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.rectimestamp);},getMedexamexpirationdate:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.medexamexpirationdate,true);},getRenewaldate:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.renewaldate,true);},getSystemcheckdate:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.systemcheckdate);},getCheckcardnumber_ts:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.checkcardnumber_ts);},getCheckcardnumberAsSemaphore:function()
{if(this.dataBean.checkcardnumber&&this.dataBean.checkcardnumber=='btrue')
return $.r3Utils.deprecatedFormatSemaphore('redo');return null;},getNumcoviddocsAsSemaphore:function()
{var semaphoreColor='gray';if(this.dataBean.numcoviddocs&&this.dataBean.numcoviddocs>0)
{semaphoreColor='green';}
return $.r3Utils.formatSemaphore(semaphoreColor);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appcrewmemberview");org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['memberinfo']={"aTargets":[-1],"sClass":"center","sTitle":"Nominativo / Circolo","render":function(data,type,row,meta)
{var item=data;return item.getMemberInfo()||'';}};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['crewmemberid']={"aTargets":[-1],"sClass":"left","sTitle":"crewmemberid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.crewmemberid||'';}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['applicationid']={"aTargets":[-1],"sClass":"left","sTitle":"applicationid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.applicationid||'';}};defaultColumnDefinitions['cardnumber']={"aTargets":[-1],"sClass":"left","sTitle":"Numero","render":function(data,type,row,meta)
{var item=data;return item.dataBean.cardnumber||'';}};defaultColumnDefinitions['crewmembername']={"aTargets":[-1],"sClass":"left","sTitle":"Nominativo","render":function(data,type,row,meta)
{var item=data;return item.dataBean.crewmembername||'';}};defaultColumnDefinitions['weight']={"aTargets":[-1],"sClass":"left","sTitle":"weight","render":function(data,type,row,meta)
{var item=data;return item.dataBean.weight||'';}};defaultColumnDefinitions['crewmemberrolecode']={"aTargets":[-1],"sClass":"left","sTitle":"Ruolo","render":function(data,type,row,meta)
{var item=data;return item.getCrewmemberrolecode()||'';}};defaultColumnDefinitions['memberstatuscode']={"aTargets":[-1],"sClass":"left","sTitle":"Tit/Ris.","render":function(data,type,row,meta)
{var item=data;return item.getMemberstatuscode()||'';}};defaultColumnDefinitions['createtimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"createtimestamp","render":function(data,type,row,meta)
{var item=data;return item.dataBean.createtimestamp||'';}};defaultColumnDefinitions['deletetimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"deletetimestamp","render":function(data,type,row,meta)
{var item=data;return item.dataBean.deletetimestamp||'';}};defaultColumnDefinitions['checkcardnumber']={"aTargets":[-1],"sClass":"left","sTitle":"&nbsp;","render":function(data,type,row,meta)
{var item=data;return item.getCheckcardnumberAsSemaphore()||'';}};defaultColumnDefinitions['checkcardnumber_ts']={"aTargets":[-1],"sClass":"left","sTitle":"Data Verif.","render":function(data,type,row,meta)
{var item=data;return item.getCheckcardnumber_ts()||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":"recstatus","render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"Ultima Mod.","render":function(data,type,row,meta)
{var item=data;return item.getRectimestamp()||'';}};defaultColumnDefinitions['cardnumberstatuscode']={"aTargets":[-1],"sClass":"left","sTitle":"&nbsp;","render":function(data,type,row,meta)
{var item=data;return item.getCardnumberstatuscodeAsSemaphore()||'';}};defaultColumnDefinitions['yachtclub']={"aTargets":[-1],"sClass":"left","sTitle":"yachtclub","render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtclub||'';}};defaultColumnDefinitions['cardholdername']={"aTargets":[-1],"sClass":"left","sTitle":"cardholdername","render":function(data,type,row,meta)
{var item=data;return item.dataBean.cardholdername||'';}};defaultColumnDefinitions['cardholderlastname']={"aTargets":[-1],"sClass":"left","sTitle":"cardholderlastname","render":function(data,type,row,meta)
{var item=data;return item.dataBean.cardholderlastname||'';}};defaultColumnDefinitions['medexamexpirationdate']={"aTargets":[-1],"sClass":"left","sTitle":"Vis. Med.","render":function(data,type,row,meta)
{var item=data;return item.getMedexamexpirationdate()||'';}};defaultColumnDefinitions['cardexpirationdate']={"aTargets":[-1],"sClass":"left","sTitle":"cardexpirationdate","render":function(data,type,row,meta)
{var item=data;return item.dataBean.cardexpirationdate||'';}};defaultColumnDefinitions['renewaldate']={"aTargets":[-1],"sClass":"left","sTitle":"Rinnovo","render":function(data,type,row,meta)
{var item=data;return item.getRenewaldate()||'';}};defaultColumnDefinitions['generalcardexpirationdate']={"aTargets":[-1],"sClass":"left","sTitle":"generalcardexpirationdate","render":function(data,type,row,meta)
{var item=data;return item.dataBean.generalcardexpirationdate||'';}};defaultColumnDefinitions['systemcheckdate']={"aTargets":[-1],"sClass":"left","sTitle":"Data Verif. FIV","render":function(data,type,row,meta)
{var item=data;return item.getSystemcheckdate()||'';}};defaultColumnDefinitions['sailnumber']={"aTargets":[-1],"sClass":"left","sTitle":"sailnumber","render":function(data,type,row,meta)
{var item=data;return item.dataBean.sailnumber||'';}};defaultColumnDefinitions['yachtname']={"aTargets":[-1],"sClass":"left","sTitle":"yachtname","render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtname||'';}};defaultColumnDefinitions['completionstatus']={"aTargets":[-1],"sClass":"left","sTitle":"completionstatus","render":function(data,type,row,meta)
{var item=data;return item.dataBean.completionstatus||'';}};defaultColumnDefinitions['verificationstatus']={"aTargets":[-1],"sClass":"left","sTitle":"verificationstatus","render":function(data,type,row,meta)
{var item=data;return item.dataBean.verificationstatus||'';}};defaultColumnDefinitions['numcoviddocs']={"aTargets":[-1],"sClass":"text-center","sTitle":"Certif. Covid","render":function(data,type,row,meta)
{var item=data;return item.getNumcoviddocsAsSemaphore()||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appcrewmemberview");org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewSummaryDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailapplicationcrewmemberview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.applicationid=aDataBean.applicationid||null;this.sailnumber=aDataBean.sailnumber||null;this.yachtname=aDataBean.yachtname||null;this.crewSize=0;this.crewValid=0;this.crewExpired=0;this.crewError=0;this.crewUnknown=0;this.crewDeleted=0;if(aDataBean.listOfCrewMembers&&aDataBean.listOfCrewMembers.length>0)
{var dataInfo={aaData:aDataBean.listOfCrewMembers,iTotalRecords:aDataBean.listOfCrewMembers.length};this.listOfCrewMembers=new org.r3.db.DTOTableAdapter(dataInfo,function(aRowDataBean){return new org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewDTOAdapter(aRowDataBean);});for(var j=0;j<aDataBean.listOfCrewMembers.length;j++)
{var theItem=aDataBean.listOfCrewMembers[j];if(theItem.recstatus&&theItem.recstatus=='sys_recact')
this.crewSize++;if(theItem.recstatus&&theItem.recstatus=='sys_recdeleted')
{this.crewDeleted++;continue;}
if(theItem.cardnumberstatuscode&&theItem.cardnumberstatuscode=='fiv_cn_valid')
this.crewValid++;if(theItem.cardnumberstatuscode&&theItem.cardnumberstatuscode=='fiv_cn_expired')
this.crewExpired++;if(theItem.cardnumberstatuscode&&theItem.cardnumberstatuscode=='fiv_cn_unknown')
this.crewUnknown++;if(theItem.cardnumberstatuscode&&theItem.cardnumberstatuscode=='fiv_cn_notexist')
this.crewError++;}}
else this.listOfCrewMembers=null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appcrewmemberview");org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewSummaryDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewSummaryDTO(aDataBean));},getCrewSize:function()
{return this.dataBean.crewSize||'0';},getCrewValid:function()
{return this.dataBean.crewValid||'0';},getCrewExpired:function()
{return this.dataBean.crewExpired||'0';},getCrewError:function()
{return this.dataBean.crewError||'0';},getCrewUnknown:function()
{return this.dataBean.crewUnknown||'0';},getCrewDeleted:function()
{return this.dataBean.crewDeleted||'0';},_getCrewStatus:function()
{var status='NK';if(!this.dataBean.crewSize||this.dataBean.crewExpired||this.dataBean.crewError)
status='KO';else if(this.dataBean.crewSize&&this.dataBean.crewValid&&this.dataBean.crewSize==this.dataBean.crewValid)
status='OK';return status;},getCrewStatus:function()
{var t='Da verif.';switch(this._getCrewStatus())
{case'KO':t="NON Valida";break;case'KN':break;case'OK':t="OK";break;}
return t;},getCrewStatusAsSemaphore:function()
{var semaphoreColor='gray';switch(this._getCrewStatus())
{case'KO':semaphoreColor="red";break;case'NK':break;case'OK':semaphoreColor="green";break;}
return $.r3Utils.formatSemaphore(semaphoreColor);},getCrewStatusAsTableContextualClass:function()
{var bootstrapContextualClass='';switch(this._getCrewStatus())
{case'KO':bootstrapContextualClass="danger";break;case'NK':break;case'OK':bootstrapContextualClass="success";break;}
return bootstrapContextualClass;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appdata");org.r3.db.sailevent.appdata.SailApplicationDataDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailapplicationdata";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.applicationid=aDataBean.applicationid||null;this.sectionid=aDataBean.sectionid||null;this.paramname=aDataBean.paramname||null;this.paramvalue=aDataBean.paramvalue||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appdata");org.r3.db.sailevent.appdata.SailApplicationDataDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.appdata.SailApplicationDataDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appdata");org.r3.db.sailevent.appdata.SailApplicationDataQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.appdata.SailApplicationDataDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.eventid||'';}};defaultColumnDefinitions['applicationid']={"aTargets":[-1],"sClass":"left","sTitle":"applicationid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.applicationid||'';}};defaultColumnDefinitions['sectionid']={"aTargets":[-1],"sClass":"left","sTitle":"sectionid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.sectionid||'';}};defaultColumnDefinitions['paramname']={"aTargets":[-1],"sClass":"left","sTitle":"paramname","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.paramname||'';}};defaultColumnDefinitions['paramvalue']={"aTargets":[-1],"sClass":"left","sTitle":"paramvalue","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.paramvalue||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.appdata.SailApplicationDataDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appdocument");org.r3.db.sailevent.appdocument.SailApplicationDocumentDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailapplicationdocument";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.documentid=aDataBean.documentid||null;this.eventid=aDataBean.eventid||null;this.applicationid=aDataBean.applicationid||null;this.documenttypecode=aDataBean.documenttypecode||null;this.documentname=aDataBean.documentname||null;this.documenturl=aDataBean.documenturl||null;this.filesize=aDataBean.filesize||null;this.contenttype=aDataBean.contenttype||null;this.annotation=aDataBean.annotation||null;this.imageurl=aDataBean.imageurl||null;this.imageheight=aDataBean.imageheight||null;this.imagewidth=aDataBean.imagewidth||null;this.iconurl=aDataBean.iconurl||null;this.iconwidth=aDataBean.iconwidth||null;this.iconheight=aDataBean.iconheight||null;this.uploadtimestamp=aDataBean.uploadtimestamp||null;this.crewmemberid=aDataBean.crewmemberid||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appdocument");org.r3.db.sailevent.appdocument.SailApplicationDocumentDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.appdocument.SailApplicationDocumentDTO(aDataBean));},getContenttypeAsIconCSSStyle:function()
{if(this.dataBean.contenttype)
return'icon_'+this.dataBean.contenttype.replace('/','_');return'icon_file';},getDocumenttypecode:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_doctype',this.dataBean.documenttypecode);},getDocumentUrl:function()
{if(this.dataBean.documenturl)
return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.documenturl);return null;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appdocument");org.r3.db.sailevent.appdocument.SailApplicationDocumentQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.appdocument.SailApplicationDocumentDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['documentid']={"aTargets":[-1],"sClass":"left","sTitle":"Id.","render":function(data,type,row,meta)
{var item=data;return item.dataBean.documentid||'';}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['applicationid']={"aTargets":[-1],"sClass":"left","sTitle":"applicationid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.applicationid||'';}};defaultColumnDefinitions['documenttypecode']={"aTargets":[-1],"sClass":"left","sTitle":"Tipo","render":function(data,type,row,meta)
{var item=data;return item.getDocumenttypecode()||'';}};defaultColumnDefinitions['documentname']={"aTargets":[-1],"sClass":"left","sTitle":"Nome","render":function(data,type,row,meta)
{var item=data;return item.dataBean.documentname||'';}};defaultColumnDefinitions['documenturl']={"aTargets":[-1],"sClass":"left","sTitle":"documenturl","render":function(data,type,row,meta)
{var item=data;return item.dataBean.documenturl||'';}};defaultColumnDefinitions['filesize']={"aTargets":[-1],"sClass":"left","sTitle":"filesize","render":function(data,type,row,meta)
{var item=data;return item.dataBean.filesize||'';}};defaultColumnDefinitions['contenttype']={"aTargets":[-1],"sClass":"left","sTitle":"contenttype","render":function(data,type,row,meta)
{var item=data;return item.dataBean.contenttype||'';}};defaultColumnDefinitions['annotation']={"aTargets":[-1],"sClass":"left","sTitle":"annotation","render":function(data,type,row,meta)
{var item=data;return item.dataBean.annotation||'';}};defaultColumnDefinitions['imageurl']={"aTargets":[-1],"sClass":"left","sTitle":"imageurl","render":function(data,type,row,meta)
{var item=data;return item.dataBean.imageurl||'';}};defaultColumnDefinitions['imageheight']={"aTargets":[-1],"sClass":"left","sTitle":"imageheight","render":function(data,type,row,meta)
{var item=data;return item.dataBean.imageheight||'';}};defaultColumnDefinitions['imagewidth']={"aTargets":[-1],"sClass":"left","sTitle":"imagewidth","render":function(data,type,row,meta)
{var item=data;return item.dataBean.imagewidth||'';}};defaultColumnDefinitions['iconurl']={"aTargets":[-1],"sClass":"left","sTitle":"iconurl","render":function(data,type,row,meta)
{var item=data;return item.dataBean.iconurl||'';}};defaultColumnDefinitions['iconwidth']={"aTargets":[-1],"sClass":"left","sTitle":"iconwidth","render":function(data,type,row,meta)
{var item=data;return item.dataBean.iconwidth||'';}};defaultColumnDefinitions['iconheight']={"aTargets":[-1],"sClass":"left","sTitle":"iconheight","render":function(data,type,row,meta)
{var item=data;return item.dataBean.iconheight||'';}};defaultColumnDefinitions['uploadtimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"uploadtimestamp","render":function(data,type,row,meta)
{var item=data;return item.dataBean.uploadtimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.appdocument.SailApplicationDocumentDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appeventlogview");org.r3.db.sailevent.appeventlogview.SailApplicationEventLogViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailapplicationeventlogview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.usecaseambit=aDataBean.usecaseambit||null;this.applicationid=aDataBean.applicationid||null;this.userid=aDataBean.userid||null;this.sailnumber=aDataBean.sailnumber||null;this.yachtname=aDataBean.yachtname||null;this.ownername=aDataBean.ownername||null;this.latest_ts=aDataBean.latest_ts||null;this.ev_general=aDataBean.ev_general||null;this.ev_general_ts=aDataBean.ev_general_ts||null;this.ev_document=aDataBean.ev_document||null;this.ev_doc_ts=aDataBean.ev_doc_ts||null;this.ev_crew=aDataBean.ev_crew||null;this.ev_crew_ts=aDataBean.ev_crew_ts||null;this.ev_commit=aDataBean.ev_commit||null;this.ev_commit_ts=aDataBean.ev_commit_ts||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appeventlogview");org.r3.db.sailevent.appeventlogview.SailApplicationEventLogViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.appeventlogview.SailApplicationEventLogViewDTO(aDataBean));},getLatest_ts:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.latest_ts);},getApplicationinfo:function()
{return this.dataBean.sailnumber+' '+this.dataBean.yachtname+'<br /><span style="font-size: 0.7em">'+this.dataBean.ownername+'</span>';},getEv_info:function()
{result="<div style='margin: 0 auto; width: "+(4*19)+"px'>";var checkBoxIcon=$.r3Utils.formatBooleanAsCheckboxIcon(this.dataBean.ev_general,2);result=result+checkBoxIcon;var checkBoxIcon=$.r3Utils.formatBooleanAsCheckboxIcon(this.dataBean.ev_document,2);result=result+checkBoxIcon;var checkBoxIcon=$.r3Utils.formatBooleanAsCheckboxIcon(this.dataBean.ev_crew,2);result=result+checkBoxIcon;var checkBoxIcon=$.r3Utils.formatBooleanAsCheckboxIcon(this.dataBean.ev_commit,2);result=result+checkBoxIcon;result+="<div>";return result;},getEv_generalAsSemaphore:function()
{return $.r3Utils.formatSemaphore(this.dataBean.ev_general?'green':'gray');},getEv_documentAsSemaphore:function()
{return $.r3Utils.formatSemaphore(this.dataBean.ev_document?'green':'gray');},getEv_crewAsSemaphore:function()
{return $.r3Utils.formatSemaphore(this.dataBean.ev_crew?'green':'gray');},getEv_commitAsSemaphore:function()
{return $.r3Utils.formatSemaphore(this.dataBean.ev_commit?'green':'gray');}});jQuery.r3Utils.namespace("org.r3.db.sailevent.appeventlogview");org.r3.db.sailevent.appeventlogview.SailApplicationEventLogViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.appeventlogview.SailApplicationEventLogViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['usecaseambit']={"aTargets":[-1],"sClass":"left","sTitle":"usecaseambit","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.usecaseambit||'';}};defaultColumnDefinitions['applicationid']={"aTargets":[-1],"sClass":"left","sTitle":"Id.","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.applicationid||'';}};defaultColumnDefinitions['applicationinfo']={"aTargets":[-1],"sClass":"left","sTitle":"Info","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.getApplicationinfo()||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"left","sTitle":"userid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.userid||'';}};defaultColumnDefinitions['sailnumber']={"aTargets":[-1],"sClass":"left","sTitle":"No. Vel.","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.sailnumber||'';}};defaultColumnDefinitions['yachtname']={"aTargets":[-1],"sClass":"left","sTitle":"Imbarcazione","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.yachtname||'';}};defaultColumnDefinitions['ownername']={"aTargets":[-1],"sClass":"left","sTitle":"Armatore","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.ownername||'';}};defaultColumnDefinitions['latest_ts']={"aTargets":[-1],"sClass":"left","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.getLatest_ts()||'';}};defaultColumnDefinitions['ev_info']={"aTargets":[-1],"sClass":"center","sTitle":"GEN DOC EQ CONF","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.getEv_info();}};defaultColumnDefinitions['ev_general']={"aTargets":[-1],"sClass":"center","sTitle":"Gen.","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.getEv_generalAsSemaphore();}};defaultColumnDefinitions['ev_general_ts']={"aTargets":[-1],"sClass":"left","sTitle":"ev_general_ts","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.ev_general_ts||'';}};defaultColumnDefinitions['ev_document']={"aTargets":[-1],"sClass":"center","sTitle":"Doc.","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.getEv_documentAsSemaphore()||'';}};defaultColumnDefinitions['ev_doc_ts']={"aTargets":[-1],"sClass":"left","sTitle":"ev_doc_ts","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.ev_doc_ts||'';}};defaultColumnDefinitions['ev_crew']={"aTargets":[-1],"sClass":"center","sTitle":"Equip.","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.getEv_crewAsSemaphore()||'';}};defaultColumnDefinitions['ev_crew_ts']={"aTargets":[-1],"sClass":"left","sTitle":"ev_crew_ts","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.ev_crew_ts||'';}};defaultColumnDefinitions['ev_commit']={"aTargets":[-1],"sClass":"center","sTitle":"Conf.","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.getEv_commitAsSemaphore()||'';}};defaultColumnDefinitions['ev_commit_ts']={"aTargets":[-1],"sClass":"left","sTitle":"ev_commit_ts","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.ev_commit_ts||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.appeventlogview.SailApplicationEventLogViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.application");org.r3.db.sailevent.application.SailApplicationDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailapplication";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.applicationid=aDataBean.applicationid||null;this.userid=aDataBean.userid||null;this.dmsfolderurl=aDataBean.dmsfolderurl||null;this.annotation=aDataBean.annotation||null;this.completionstatus=aDataBean.completionstatus||null;this.verificationstatus=aDataBean.verificationstatus||null;this.adminchecks=aDataBean.adminchecks||null;this.adminracegroup=aDataBean.adminracegroup||null;this.adminraceclass=aDataBean.adminraceclass||null;this.plate=aDataBean.plate||null;this.yachtname=aDataBean.yachtname||null;this.yachtclub=aDataBean.yachtclub||null;this.yachttype=aDataBean.yachttype||null;this.mooringloc=aDataBean.mooringloc||null;this.yachtbsf=aDataBean.yachtbsf||null;this.yachtgph=aDataBean.yachtgph||null;this.sailnumber=aDataBean.sailnumber||null;this.racegroup=aDataBean.racegroup||null;this.raceclass=aDataBean.raceclass||null;this.apptype=aDataBean.apptype||null;this.ownerid=aDataBean.ownerid||null;this.helmsmanid=aDataBean.helmsmanid||null;this.boatimageid=aDataBean.boatimageid||null;this.boatimageurl=aDataBean.boatimageurl||null;this.boatimageheight=aDataBean.boatimageheight||null;this.boatimagewidth=aDataBean.boatimagewidth||null;this.boaticonurl=aDataBean.boaticonurl||null;this.boaticonwidth=aDataBean.boaticonwidth||null;this.boaticonheight=aDataBean.boaticonheight||null;this.addtohomeentrylist=aDataBean.addtohomeentrylist||null;this.createtimestamp=aDataBean.createtimestamp||null;this.committimestamp=aDataBean.committimestamp||null;this.rectimestamp=aDataBean.rectimestamp||null;this.nickname=aDataBean.nickname||null;if(aDataBean.owner)
this.owner=new org.r3.db.actor.actor.ActorDTOAdapter(aDataBean.owner);else this.owner=null;if(aDataBean.helmsman)
this.helmsman=new org.r3.db.actor.actor.ActorDTOAdapter(aDataBean.helmsman);else this.helmsman=null;if(aDataBean.properties)
{this.properties=new org.r3.db.DTOTableAdapter(aDataBean.properties,function(aRowDataBean){return new org.r3.db.sailevent.appdata.SailApplicationDataDTOAdapter(aRowDataBean);});}
else this.properties=null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.application");org.r3.db.sailevent.application.SailApplicationDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.application.SailApplicationDTO(aDataBean));},getCompletionstatusText:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_completion',this.dataBean.completionstatus);},isDraft:function()
{return this.dataBean.completionstatus=='r3ea_draft';},isEmpty:function()
{return this.dataBean.completionstatus=='r3ea_empty';},isCommit:function()
{return this.dataBean.completionstatus=='r3ea_commit';},isAccepted:function()
{return this.dataBean.verificationstatus=='r3ea_accepted';},getPropertyValue:function(propName,defaultValue)
{if(this.dataBean.properties&&this.dataBean.properties.getNumberOfItems()>0)
{var foundProperty=null;var visitor={processItem:function(theItem)
{if(theItem.dataBean.paramname==propName)
{foundProperty=theItem;return false;}
return true;}}
this.dataBean.properties.visit(visitor);if(foundProperty)
return foundProperty.dataBean.paramvalue;}
return defaultValue;},getPropertyValueAsBoolean:function(propName)
{var t=this.getPropertyValue(propName,'bfalse');return t&&t=='btrue';},getOwnerfirstname:function()
{return this.dataBean.owner&&this.dataBean.owner.dataBean.firstname;},getOwnerlastname:function()
{return this.dataBean.owner&&this.dataBean.owner.dataBean.lastname;},getOwnerphone:function()
{return this.dataBean.owner&&this.dataBean.owner.dataBean.phone;},getOwnercellphone:function()
{return this.dataBean.owner&&this.dataBean.owner.dataBean.cellphone;},getOwneremail:function()
{return this.dataBean.owner&&this.dataBean.owner.dataBean.email;},getOwneraddress:function()
{return this.dataBean.owner&&this.dataBean.owner.dataBean.address;},getOwnertown:function()
{return this.dataBean.owner&&this.dataBean.owner.dataBean.town;},getOwnerzipcode:function()
{return this.dataBean.owner&&this.dataBean.owner.dataBean.zipcode;},getHavehelmsman:function()
{return this.getPropertyValueAsBoolean('havehelmsman');},getHelmsmanfirstname:function()
{return this.dataBean.helmsman&&this.dataBean.helmsman.dataBean.firstname;},getHelmsmanlastname:function()
{return this.dataBean.helmsman&&this.dataBean.helmsman.dataBean.lastname;},getHelmsmanphone:function()
{return this.dataBean.helmsman&&this.dataBean.helmsman.dataBean.phone;},getHelmsmancellphone:function()
{return this.dataBean.helmsman&&this.dataBean.helmsman.dataBean.cellphone;},getHelmsmanemail:function()
{return this.dataBean.helmsman&&this.dataBean.helmsman.dataBean.email;},getHelmsmanaddress:function()
{return this.dataBean.helmsman&&this.dataBean.helmsman.dataBean.address;},getHelmsmantown:function()
{return this.dataBean.helmsman&&this.dataBean.helmsman.dataBean.town;},getHelmsmanzipcode:function()
{return this.dataBean.helmsman&&this.dataBean.helmsman.dataBean.zipcode;},getCommittimestamp:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.committimestamp);},getCreatetimestamp:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.createtimestamp);},getBoatIconUrl:function()
{if(this.hasBoatImage())
return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.boaticonurl);return org.r3.Constants.getDefaultBoatIcon();},hasBoatImage:function()
{return this.dataBean.boaticonurl;},getBoatIconMarginTop:function()
{if(this.hasBoatImage())
{return Math.floor((org.r3.Constants.boatIconMaxHeight-this.dataBean.boaticonheight)/2)||'0';}
else return Math.floor((org.r3.Constants.boatIconMaxHeight-org.r3.Constants.defaultBoatIconHeight)/2)||'0';},getBoatIconLayoutType:function()
{if(this.hasBoatImage())
{return(this.dataBean.boaticonwidth-this.dataBean.boaticonheight)>0?'landscape':'portrait';}
null;},getEscapedYachtTitle:function()
{var t=this.dataBean.sailnumber+' - '+$.r3Utils.format4HtmlConsumption(this.dataBean.yachtname);return t;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.application");org.r3.db.sailevent.application.SailApplicationQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.application.SailApplicationDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.eventid||'';}};defaultColumnDefinitions['applicationid']={"aTargets":[-1],"sClass":"left","sTitle":"applicationid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.applicationid||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"left","sTitle":"userid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.userid||'';}};defaultColumnDefinitions['dmsfolderurl']={"aTargets":[-1],"sClass":"left","sTitle":"dmsfolderurl","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.dmsfolderurl||'';}};defaultColumnDefinitions['annotation']={"aTargets":[-1],"sClass":"left","sTitle":"annotation","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.annotation||'';}};defaultColumnDefinitions['completionstatus']={"aTargets":[-1],"sClass":"left","sTitle":"completionstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completionstatus||'';}};defaultColumnDefinitions['verificationstatus']={"aTargets":[-1],"sClass":"left","sTitle":"verificationstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.verificationstatus||'';}};defaultColumnDefinitions['adminchecks']={"aTargets":[-1],"sClass":"left","sTitle":"adminchecks","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.adminchecks||'';}};defaultColumnDefinitions['adminracegroup']={"aTargets":[-1],"sClass":"left","sTitle":"adminracegroup","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.adminracegroup||'';}};defaultColumnDefinitions['adminraceclass']={"aTargets":[-1],"sClass":"left","sTitle":"adminraceclass","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.adminraceclass||'';}};defaultColumnDefinitions['plate']={"aTargets":[-1],"sClass":"left","sTitle":"plate","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.plate||'';}};defaultColumnDefinitions['yachtname']={"aTargets":[-1],"sClass":"left","sTitle":"yachtname","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.yachtname||'';}};defaultColumnDefinitions['yachtclub']={"aTargets":[-1],"sClass":"left","sTitle":"yachtclub","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.yachtclub||'';}};defaultColumnDefinitions['yachttype']={"aTargets":[-1],"sClass":"left","sTitle":"yachttype","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.yachttype||'';}};defaultColumnDefinitions['mooringloc']={"aTargets":[-1],"sClass":"left","sTitle":"mooringloc","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.mooringloc||'';}};defaultColumnDefinitions['yachtbsf']={"aTargets":[-1],"sClass":"left","sTitle":"yachtbsf","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.yachtbsf||'';}};defaultColumnDefinitions['yachtgph']={"aTargets":[-1],"sClass":"left","sTitle":"yachtgph","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.yachtgph||'';}};defaultColumnDefinitions['sailnumber']={"aTargets":[-1],"sClass":"left","sTitle":"sailnumber","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.sailnumber||'';}};defaultColumnDefinitions['racegroup']={"aTargets":[-1],"sClass":"left","sTitle":"racegroup","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.racegroup||'';}};defaultColumnDefinitions['raceclass']={"aTargets":[-1],"sClass":"left","sTitle":"raceclass","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.raceclass||'';}};defaultColumnDefinitions['apptype']={"aTargets":[-1],"sClass":"left","sTitle":"apptype","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.apptype||'';}};defaultColumnDefinitions['ownerid']={"aTargets":[-1],"sClass":"left","sTitle":"ownerid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.ownerid||'';}};defaultColumnDefinitions['helmsmanid']={"aTargets":[-1],"sClass":"left","sTitle":"helmsmanid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.helmsmanid||'';}};defaultColumnDefinitions['boatimageid']={"aTargets":[-1],"sClass":"left","sTitle":"boatimageid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boatimageid||'';}};defaultColumnDefinitions['boatimageurl']={"aTargets":[-1],"sClass":"left","sTitle":"boatimageurl","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boatimageurl||'';}};defaultColumnDefinitions['boatimageheight']={"aTargets":[-1],"sClass":"left","sTitle":"boatimageheight","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boatimageheight||'';}};defaultColumnDefinitions['boatimagewidth']={"aTargets":[-1],"sClass":"left","sTitle":"boatimagewidth","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boatimagewidth||'';}};defaultColumnDefinitions['boaticonurl']={"aTargets":[-1],"sClass":"left","sTitle":"boaticonurl","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boaticonurl||'';}};defaultColumnDefinitions['boaticonwidth']={"aTargets":[-1],"sClass":"left","sTitle":"boaticonwidth","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boaticonwidth||'';}};defaultColumnDefinitions['boaticonheight']={"aTargets":[-1],"sClass":"left","sTitle":"boaticonheight","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boaticonheight||'';}};defaultColumnDefinitions['addtohomeentrylist']={"aTargets":[-1],"sClass":"left","sTitle":"addtohomeentrylist","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.addtohomeentrylist||'';}};defaultColumnDefinitions['createtimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"createtimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.createtimestamp||'';}};defaultColumnDefinitions['committimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"committimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.committimestamp||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"rectimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.application.SailApplicationDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.applicationview");org.r3.db.sailevent.applicationview.SailApplicationViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailapplicationview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.applicationid=aDataBean.applicationid||null;this.userid=aDataBean.userid||null;this.completionstatus=aDataBean.completionstatus||null;this.verificationstatus=aDataBean.verificationstatus||null;this.adminchecks=aDataBean.adminchecks||null;this.plate=aDataBean.plate||null;this.sailnumber=aDataBean.sailnumber||null;this.yachtname=aDataBean.yachtname||null;this.yachtclub=aDataBean.yachtclub||null;this.yachttype=aDataBean.yachttype||null;this.mooringloc=aDataBean.mooringloc||null;this.yachtbsf=aDataBean.yachtbsf||null;this.yachtgph=aDataBean.yachtgph||null;this.racegroup=aDataBean.racegroup||null;this.raceclass=aDataBean.raceclass||null;this.apptype=aDataBean.apptype||null;this.ownerid=aDataBean.ownerid||null;this.ownerfirstname=aDataBean.ownerfirstname||null;this.ownerlastname=aDataBean.ownerlastname||null;this.owneremail=aDataBean.owneremail||null;this.ownercellphone=aDataBean.ownercellphone||null;this.rectimestamp=aDataBean.rectimestamp||null;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.applicationview");org.r3.db.sailevent.applicationview.SailApplicationViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.applicationview.SailApplicationViewDTO(aDataBean));},getRacegroup:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_boatgroup',this.dataBean.adminracegroup||this.dataBean.racegroup);},getRaceclass:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_raceclass',this.dataBean.adminraceclass||this.dataBean.raceclass);},getRectimestamp:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.rectimestamp);},isDraft:function()
{return this.dataBean.completionstatus=='r3ea_draft';},isEmpty:function()
{return this.dataBean.completionstatus=='r3ea_empty';},isCommit:function()
{return this.dataBean.completionstatus=='r3ea_commit';},isAccepted:function()
{return this.dataBean.verificationstatus=='r3ea_accepted';},getCompletionstatusAsSemaphore:function()
{return $.r3Utils.formatSemaphore(this.isCommit()?'green':'gray');},getVerificationstatusAsSemaphore:function()
{return $.r3Utils.formatSemaphore(this.isAccepted()?'green':'gray');},getAdminchecks:function()
{var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_admincks');var theLUT=org.r3.PageManager.lutManager.getLUT(resolvedUrl);var result='';if(theLUT.aaData&&theLUT.iTotalRecords)
{result="<div style='margin: 0 auto; width: "+(theLUT.iTotalRecords*19)+"px'>";var theDataBeanValue=this.dataBean.adminchecks;$.each(theLUT.aaData,function(index,item)
{var checkBoxIcon=$.r3Utils.formatBooleanAsCheckboxIcon(theDataBeanValue&&theDataBeanValue.indexOf(item.dtokey)>=0,2);result=result+checkBoxIcon;});result+="<div>";}
return result;},isAccepted:function()
{var theDataBeanValue=this.dataBean.adminchecks;if(theDataBeanValue&&theDataBeanValue.indexOf('chk5')>=0)
return true;return false;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.applicationview");org.r3.db.sailevent.applicationview.SailApplicationViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.applicationview.SailApplicationViewDTOAdapter(aRowDataBean);});return adapter;},getColumnDefinitions_sTitle_4adminchecks:function()
{var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_admincks');var theLUT=org.r3.PageManager.lutManager.getLUT(resolvedUrl);var result='';if(theLUT.aaData&&theLUT.iTotalRecords)
{$.each(theLUT.aaData,function(index,item)
{result=result+item.classifieritemsattr+' ';});}
return result;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['ownername']={"aTargets":[-1],"sClass":"text-left","sTitle":"Armatore","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ownerlastname||'';}};defaultColumnDefinitions['racegroup_raceclass']={"aTargets":[-1],"sClass":"text-left","sTitle":"Raggrup.","render":function(data,type,row,meta)
{var item=data;var s=item.getRacegroup();var s1=item.getRaceclass();if(s)
{if(s1)
s=s+' '+s1;return s;}
return'';}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"text-left","sTitle":"eventid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['applicationid']={"aTargets":[-1],"sClass":"text-left","sTitle":"Id.","render":function(data,type,row,meta)
{var item=data;return item.dataBean.applicationid||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"text-left","sTitle":"Id. utente","render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};defaultColumnDefinitions['completionstatus']={"aTargets":[-1],"sClass":"text-center","sTitle":"&nbsp;","render":function(data,type,row,meta)
{var item=data;return item.getCompletionstatusAsSemaphore()||'';}};defaultColumnDefinitions['verificationstatus']={"aTargets":[-1],"sClass":"text-left","sTitle":"verificationstatus","render":function(data,type,row,meta)
{var item=data;return item.getVerificationstatusAsSemaphore()||'';}};defaultColumnDefinitions['adminchecks']={"aTargets":[-1],"sClass":"text-center","sTitle":this.getColumnDefinitions_sTitle_4adminchecks,"render":function(data,type,row,meta)
{var item=data;return item.getAdminchecks()||'';}};defaultColumnDefinitions['accepted']={"aTargets":[-1],"sClass":"text-center sevapp-accepted-label","sTitle":'&nbsp;',"render":function(data,type,row,meta)
{var item=data;if(item.isAccepted()){return"<div style='background-color: #12633e; color: white; padding: 2px'>COMPLETATA</div>";}else{return"<div style='background-color: #bb0606; color: white; padding: 2px'>DA&nbsp;COMPLETARE</div>";}}};defaultColumnDefinitions['plate']={"aTargets":[-1],"sClass":"text-left","sTitle":"Targa","render":function(data,type,row,meta)
{var item=data;return item.dataBean.plate||'';}};defaultColumnDefinitions['sailnumber']={"aTargets":[-1],"sClass":"text-left","sTitle":"No. velico","render":function(data,type,row,meta)
{var item=data;return item.dataBean.sailnumber||'';}};defaultColumnDefinitions['yachtname']={"aTargets":[-1],"sClass":"text-left","sTitle":"Nome imbarcazione","render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtname||'';}};defaultColumnDefinitions['yachtclub']={"aTargets":[-1],"sClass":"text-left","sTitle":"Yacht Club","render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtclub||'';}};defaultColumnDefinitions['yachttype']={"aTargets":[-1],"sClass":"text-left","sTitle":"Tipo modello","render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachttype||'';}};defaultColumnDefinitions['mooringloc']={"aTargets":[-1],"sClass":"text-left","sTitle":"Ormeggio","render":function(data,type,row,meta)
{var item=data;return item.dataBean.mooringloc||'';}};defaultColumnDefinitions['yachtbsf']={"aTargets":[-1],"sClass":"text-left","sTitle":"BSF","render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtbsf||'';}};defaultColumnDefinitions['yachtgph']={"aTargets":[-1],"sClass":"text-left","sTitle":"GPH","render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtgph||'';}};defaultColumnDefinitions['racegroup']={"aTargets":[-1],"sClass":"text-left","sTitle":"racegroup","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racegroup||'';}};defaultColumnDefinitions['raceclass']={"aTargets":[-1],"sClass":"text-left","sTitle":"raceclass","render":function(data,type,row,meta)
{var item=data;return item.dataBean.raceclass||'';}};defaultColumnDefinitions['apptype']={"aTargets":[-1],"sClass":"text-left","sTitle":"Tipo Iscriz.","render":function(data,type,row,meta)
{var item=data;return item.dataBean.apptype||'';}};defaultColumnDefinitions['ownerid']={"aTargets":[-1],"sClass":"text-left","sTitle":"Id. Armatore","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ownerid||'';}};defaultColumnDefinitions['ownerfirstname']={"aTargets":[-1],"sClass":"text-left","sTitle":"ownerfirstname","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ownerfirstname||'';}};defaultColumnDefinitions['ownerlastname']={"aTargets":[-1],"sClass":"text-left","sTitle":"ownerlastname","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ownerlastname||'';}};defaultColumnDefinitions['owneremail']={"aTargets":[-1],"sClass":"text-left","sTitle":"e-mail","render":function(data,type,row,meta)
{var item=data;return item.dataBean.owneremail||'';}};defaultColumnDefinitions['ownercellphone']={"aTargets":[-1],"sClass":"text-left","sTitle":"Cellulare","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ownercellphone||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"text-left","sTitle":"Modifica","render":function(data,type,row,meta)
{var item=data;return item.getRectimestamp()||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.applicationview.SailApplicationViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.entrylist");org.r3.db.sailevent.entrylist.SailEntryListDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailentrylist";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.applicationid=aDataBean.applicationid||null;this.userid=aDataBean.userid||null;this.verificationstatus=aDataBean.verificationstatus||null;this.plate=aDataBean.plate||null;this.sailnumber=aDataBean.sailnumber||null;this.yachtname=aDataBean.yachtname||null;this.yachtclub=aDataBean.yachtclub||null;this.yachttype=aDataBean.yachttype||null;this.yachtbsf=aDataBean.yachtbsf||null;this.yachtgph=aDataBean.yachtgph||null;this.racegroup=aDataBean.racegroup||null;this.raceclass=aDataBean.raceclass||null;this.apptype=aDataBean.apptype||null;this.boatimageurl=aDataBean.boatimageurl||null;this.boatimageheight=aDataBean.boatimageheight||null;this.boatimagewidth=aDataBean.boatimagewidth||null;this.boaticonurl=aDataBean.boaticonurl||null;this.boaticonwidth=aDataBean.boaticonwidth||null;this.boaticonheight=aDataBean.boaticonheight||null;this.ownerfirstname=aDataBean.ownerfirstname||null;this.ownerlastname=aDataBean.ownerlastname||null;this.owneremail=aDataBean.owneremail||null;this.ownercellphone=aDataBean.ownercellphone||null;this.accepted=aDataBean.accepted||null;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.entrylist");org.r3.db.sailevent.entrylist.SailEntryListDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.entrylist.SailEntryListDTO(aDataBean));},getBoatIconUrl:function()
{if(this.hasBoatImage())
return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.boaticonurl);return org.r3.Constants.getDefaultBoatIcon();},getBoatImageUrl:function()
{if(this.hasBoatImage())
return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.boatimageurl);return null;},hasBoatImage:function()
{return this.dataBean.boaticonurl;},getBoatIconMarginTop:function()
{if(this.hasBoatImage())
{return Math.floor((org.r3.Constants.boatIconMaxHeight-this.dataBean.boaticonheight)/2)||'0';}
else return Math.floor((org.r3.Constants.boatIconMaxHeight-org.r3.Constants.defaultBoatIconHeight)/2)||'0';},getBoatIconLayoutType:function()
{if(this.hasBoatImage())
{return(this.dataBean.boaticonwidth-this.dataBean.boaticonheight)>0?'landscape':'portrait';}
null;},getRacegroup:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_boatgroup',this.dataBean.racegroup);},getRaceclass:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_raceclass',this.dataBean.raceclass);},getEscapedYachtTitle:function()
{var t=this.dataBean.sailnumber+' - '+$.r3Utils.format4HtmlConsumption(this.dataBean.yachtname);return t;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.entrylist");org.r3.db.sailevent.entrylist.SailEntryListQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.entrylist.SailEntryListDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['boaticon']={"aTargets":[-1],"sClass":"left","sTitle":"","render":function(data,type,row,meta)
{var item=data;var stb="";var showIcons=$('#entrylist_action_showboaticons').prop('checked');if(showIcons)
{var iconTitle=item.getEscapedYachtTitle();if(item.hasBoatImage()){stb="<div class='boatIcon'><a href='"+item.getBoatImageUrl()+"' rel='lightbox-entrylist' title='"+iconTitle+"'><img src='"+item.getBoatIconUrl()+"' border='0' style='max-width: 100px; margin-top: "+item.getBoatIconMarginTop()+"px;' /></a></div>";}
else
stb="<div class='boatIcon'><img src='"+item.getBoatIconUrl()+"' border='0' style='margin-top: "+item.getBoatIconMarginTop()+"px;' /></div>";}
return stb;}};defaultColumnDefinitions['ownername']={"aTargets":[-1],"sClass":"left","sTitle":"Armatore","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ownerlastname||'';}};defaultColumnDefinitions['racegroup_raceclass']={"aTargets":[-1],"sClass":"left","sTitle":"Raggruppamento","render":function(data,type,row,meta)
{var item=data;return(item.getRacegroup()||'')+(item.getRacegroup()!=null&&item.getRaceclass()!=null?' - ':'')+(item.getRaceclass()||'');}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.eventid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['applicationid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.applicationid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.applicationid||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};defaultColumnDefinitions['verificationstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.verificationstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.verificationstatus||'';}};defaultColumnDefinitions['plate']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.plate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.plate||'';}};defaultColumnDefinitions['sailnumber']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.sailnumber,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sailnumber||'';}};defaultColumnDefinitions['yachtname']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.yachtname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtname||'';}};defaultColumnDefinitions['yachtclub']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.yachtclub,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtclub||'';}};defaultColumnDefinitions['yachttype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.yachttype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachttype||'';}};defaultColumnDefinitions['yachtbsf']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.yachtbsf,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtbsf||'';}};defaultColumnDefinitions['yachtgph']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.yachtgph,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtgph||'';}};defaultColumnDefinitions['racegroup']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.racegroup,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.racegroup||'';}};defaultColumnDefinitions['raceclass']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.raceclass,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.raceclass||'';}};defaultColumnDefinitions['apptype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.apptype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.apptype||'';}};defaultColumnDefinitions['boatimageurl']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.boatimageurl,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.boatimageurl||'';}};defaultColumnDefinitions['boatimageheight']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.boatimageheight,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.boatimageheight||'';}};defaultColumnDefinitions['boatimagewidth']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.boatimagewidth,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.boatimagewidth||'';}};defaultColumnDefinitions['boaticonurl']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.boaticonurl,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.boaticonurl||'';}};defaultColumnDefinitions['boaticonwidth']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.boaticonwidth,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.boaticonwidth||'';}};defaultColumnDefinitions['boaticonheight']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.boaticonheight,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.boaticonheight||'';}};defaultColumnDefinitions['ownerfirstname']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.ownerfirstname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.ownerfirstname||'';}};defaultColumnDefinitions['ownerlastname']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.ownerlastname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.ownerlastname||'';}};defaultColumnDefinitions['owneremail']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.owneremail,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.owneremail||'';}};defaultColumnDefinitions['ownercellphone']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.sailevent.entrylist.message.ownercellphone,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.ownercellphone||'';}};var columnId='accepted';defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center sevapp-accepted-label","sTitle":org.r3.db.sailevent.entrylist.message.accepted,"render":function(data,type,row,meta)
{var item=data;if(item.dataBean.accepted&&item.dataBean.accepted=='btrue')
return"<div style='background-color: #12633e; color: white; padding: 2px'>COMPLETATA</div>";return"<div style='background-color: #bb0606; color: white; padding: 2px'>DA&nbsp;COMPLETARE</div>";}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.entrylist.SailEntryListDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.event");org.r3.db.sailevent.event.SailEventDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailevent";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.eventtitle=aDataBean.eventtitle||null;this.eventdescr=aDataBean.eventdescr||null;this.eventgroup=aDataBean.eventgroup||null;this.eventstatus=aDataBean.eventstatus||null;this.applicationstatus=aDataBean.applicationstatus||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.event");org.r3.db.sailevent.event.SailEventDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.event.SailEventDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.sailevent.event");org.r3.db.sailevent.event.SailEventQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.event.SailEventDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.eventid||'';}};defaultColumnDefinitions['eventtitle']={"aTargets":[-1],"sClass":"left","sTitle":"eventtitle","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.eventtitle||'';}};defaultColumnDefinitions['eventdescr']={"aTargets":[-1],"sClass":"left","sTitle":"eventdescr","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.eventdescr||'';}};defaultColumnDefinitions['eventgroup']={"aTargets":[-1],"sClass":"left","sTitle":"eventgroup","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.eventgroup||'';}};defaultColumnDefinitions['eventstatus']={"aTargets":[-1],"sClass":"left","sTitle":"eventstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.eventstatus||'';}};defaultColumnDefinitions['applicationstatus']={"aTargets":[-1],"sClass":"left","sTitle":"applicationstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.applicationstatus||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.event.SailEventDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.homeentrylist");org.r3.db.sailevent.homeentrylist.SailHomeEntryListDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailhomeentrylist";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.applicationid=aDataBean.applicationid||null;this.userid=aDataBean.userid||null;this.sailnumber=aDataBean.sailnumber||null;this.yachtname=aDataBean.yachtname||null;this.yachttype=aDataBean.yachttype||null;this.boatimageurl=aDataBean.boatimageurl||null;this.boatimageheight=aDataBean.boatimageheight||null;this.boatimagewidth=aDataBean.boatimagewidth||null;this.boaticonurl=aDataBean.boaticonurl||null;this.boaticonwidth=aDataBean.boaticonwidth||null;this.boaticonheight=aDataBean.boaticonheight||null;this.addtohomeentrylist=aDataBean.addtohomeentrylist||null;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.homeentrylist");org.r3.db.sailevent.homeentrylist.SailHomeEntryListDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.homeentrylist.SailHomeEntryListDTO(aDataBean));},getBoatIconUrl:function()
{if(this.hasBoatImage())
return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.boaticonurl);return org.r3.Constants.getDefaultBoatIcon();},getBoatImageUrl:function()
{if(this.hasBoatImage())
return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.boatimageurl);return null;},hasBoatImage:function()
{return this.dataBean.boaticonurl;},getBoatIconMarginTop:function()
{if(this.hasBoatImage())
{return Math.floor((org.r3.Constants.boatIconMaxHeight-this.dataBean.boaticonheight)/2)||'0';}
else return Math.floor((org.r3.Constants.boatIconMaxHeight-org.r3.Constants.defaultBoatIconHeight)/2)||'0';},getBoatIconLayoutType:function()
{if(this.hasBoatImage())
{return(this.dataBean.boaticonwidth-this.dataBean.boaticonheight)>0?'landscape':'portrait';}
null;},getEscapedYachtTitle:function()
{var t=this.dataBean.sailnumber+' - '+$.r3Utils.format4HtmlConsumption(this.dataBean.yachtname);return t;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.homeentrylist");org.r3.db.sailevent.homeentrylist.SailHomeEntryListQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.homeentrylist.SailHomeEntryListDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.eventid||'';}};defaultColumnDefinitions['applicationid']={"aTargets":[-1],"sClass":"left","sTitle":"applicationid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.applicationid||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"left","sTitle":"userid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.userid||'';}};defaultColumnDefinitions['sailnumber']={"aTargets":[-1],"sClass":"left","sTitle":"sailnumber","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.sailnumber||'';}};defaultColumnDefinitions['yachtname']={"aTargets":[-1],"sClass":"left","sTitle":"yachtname","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.yachtname||'';}};defaultColumnDefinitions['yachttype']={"aTargets":[-1],"sClass":"left","sTitle":"yachttype","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.yachttype||'';}};defaultColumnDefinitions['boatimageurl']={"aTargets":[-1],"sClass":"left","sTitle":"boatimageurl","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boatimageurl||'';}};defaultColumnDefinitions['boatimageheight']={"aTargets":[-1],"sClass":"left","sTitle":"boatimageheight","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boatimageheight||'';}};defaultColumnDefinitions['boatimagewidth']={"aTargets":[-1],"sClass":"left","sTitle":"boatimagewidth","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boatimagewidth||'';}};defaultColumnDefinitions['boaticonurl']={"aTargets":[-1],"sClass":"left","sTitle":"boaticonurl","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boaticonurl||'';}};defaultColumnDefinitions['boaticonwidth']={"aTargets":[-1],"sClass":"left","sTitle":"boaticonwidth","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boaticonwidth||'';}};defaultColumnDefinitions['boaticonheight']={"aTargets":[-1],"sClass":"left","sTitle":"boaticonheight","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.boaticonheight||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.homeentrylist.SailHomeEntryListDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.openregattas.openregattasview");org.r3.db.sailevent.openregattas.openregattasview.OpenRegattasViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_openregattasview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.regattaid=aDataBean.regattaid||null;this.title=aDataBean.title||null;this.languages=aDataBean.languages||null;this.domain=aDataBean.domain||null;this.icon=aDataBean.icon||null;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.openregattas.openregattasview");org.r3.db.sailevent.openregattas.openregattasview.OpenRegattasViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.openregattas.openregattasview.OpenRegattasViewDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.sailevent.openregattas.openregattasview");org.r3.db.sailevent.openregattas.openregattasview.OpenRegattasViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.openregattas.openregattasview.OpenRegattasViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['regattaid']={"aTargets":[-1],"sClass":"left","sTitle":"regattaid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.regattaid||'';}};defaultColumnDefinitions['title']={"aTargets":[-1],"sClass":"left","sTitle":"title","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.title||'';}};defaultColumnDefinitions['languages']={"aTargets":[-1],"sClass":"left","sTitle":"languages","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.languages||'';}};defaultColumnDefinitions['domain']={"aTargets":[-1],"sClass":"left","sTitle":"domain","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.domain||'';}};defaultColumnDefinitions['icon']={"aTargets":[-1],"sClass":"left","sTitle":"icon","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.icon||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.openregattas.openregattasview.OpenRegattasViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.racegroupview");org.r3.db.sailevent.racegroupview.SailRaceGroupViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_sailracegroupview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.parentitemid=aDataBean.parentitemid||null;this.parentitemdescr=aDataBean.parentitemdescr||null;this.parentitemorder=aDataBean.parentitemorder||null;this.childitemid=aDataBean.childitemid||null;this.childitemdescr=aDataBean.childitemdescr||null;this.childitemorder=aDataBean.childitemorder||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.racegroupview");org.r3.db.sailevent.racegroupview.SailRaceGroupViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.racegroupview.SailRaceGroupViewDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.sailevent.racegroupview");org.r3.db.sailevent.racegroupview.SailRaceGroupViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.racegroupview.SailRaceGroupViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['parentitemid']={"aTargets":[-1],"sClass":"left","sTitle":"parentitemid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.parentitemid||'';}};defaultColumnDefinitions['parentitemdescr']={"aTargets":[-1],"sClass":"left","sTitle":"parentitemdescr","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.parentitemdescr||'';}};defaultColumnDefinitions['parentitemorder']={"aTargets":[-1],"sClass":"left","sTitle":"parentitemorder","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.parentitemorder||'';}};defaultColumnDefinitions['childitemid']={"aTargets":[-1],"sClass":"left","sTitle":"childitemid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.childitemid||'';}};defaultColumnDefinitions['childitemdescr']={"aTargets":[-1],"sClass":"left","sTitle":"childitemdescr","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.childitemdescr||'';}};defaultColumnDefinitions['childitemorder']={"aTargets":[-1],"sClass":"left","sTitle":"childitemorder","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.childitemorder||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.racegroupview.SailRaceGroupViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.ranking");org.r3.db.sailevent.ranking.RankingDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_ranking";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.rankid=aDataBean.rankid||null;this.rankinggroup=aDataBean.rankinggroup||null;this.ranktitle=aDataBean.ranktitle||null;this.ranktype=aDataBean.ranktype||null;this.championship=aDataBean.championship||null;this.racegroup=aDataBean.racegroup||null;this.raceclass=aDataBean.raceclass||null;this.rating=aDataBean.rating||null;this.racefilepattern=aDataBean.racefilepattern||null;this.overallfilepattern=aDataBean.overallfilepattern||null;this.rankordering=aDataBean.rankordering||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.ranking");org.r3.db.sailevent.ranking.RankingDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.ranking.RankingDTO(aDataBean));},getRating:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_rank_rating',this.dataBean.rating);},getRacegroup:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_boatgroup',this.dataBean.racegroup);},getRaceclass:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_raceclass',this.dataBean.raceclass);},getRankinggroup:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_sinott',this.dataBean.rankinggroup);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.ranking");org.r3.db.sailevent.ranking.RankingQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.ranking.RankingDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['rankid']={"aTargets":[-1],"sClass":"left","sTitle":"Id.","render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankid||'';}};defaultColumnDefinitions['rankinggroup']={"aTargets":[-1],"sClass":"left","sTitle":"Raggrupp.","render":function(data,type,row,meta)
{var item=data;return item.getRankinggroup()||'';}};defaultColumnDefinitions['ranktitle']={"aTargets":[-1],"sClass":"left","sTitle":"Nome classifica","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ranktitle||'';}};defaultColumnDefinitions['ranktype']={"aTargets":[-1],"sClass":"left","sTitle":"ranktype","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ranktype||'';}};defaultColumnDefinitions['championship']={"aTargets":[-1],"sClass":"left","sTitle":"championship","render":function(data,type,row,meta)
{var item=data;return item.dataBean.championship||'';}};defaultColumnDefinitions['racegroup']={"aTargets":[-1],"sClass":"left","sTitle":"Raggrupp.","render":function(data,type,row,meta)
{var item=data;return item.getRacegroup()||'';}};defaultColumnDefinitions['raceclass']={"aTargets":[-1],"sClass":"left","sTitle":"Classe","render":function(data,type,row,meta)
{var item=data;return item.getRaceclass()||'';}};defaultColumnDefinitions['rating']={"aTargets":[-1],"sClass":"left","sTitle":"IRC/ORC","render":function(data,type,row,meta)
{var item=data;return item.getRating()||'';}};defaultColumnDefinitions['racefilepattern']={"aTargets":[-1],"sClass":"left","sTitle":"Nome file prova","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racefilepattern||'';}};defaultColumnDefinitions['overallfilepattern']={"aTargets":[-1],"sClass":"left","sTitle":"Nome file generale","render":function(data,type,row,meta)
{var item=data;return item.dataBean.overallfilepattern||'';}};defaultColumnDefinitions['rankordering']={"aTargets":[-1],"sClass":"left","sTitle":"&nbsp;","render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankordering||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"rectimestamp","render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.ranking.RankingDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstance");org.r3.db.sailevent.rankinginstance.RankingInstanceDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_rankinginstance";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.instanceid=aDataBean.instanceid||null;this.rankid=aDataBean.rankid||null;this.instancetype=aDataBean.instancetype||null;this.racenumber=aDataBean.racenumber||null;this.racedate=aDataBean.racedate||null;this.racetime=aDataBean.racetime||null;this.racedistance=aDataBean.racedistance||null;this.racecoefficient=aDataBean.racecoefficient||null;this.racerating=aDataBean.racerating||null;this.minrealtime=aDataBean.minrealtime||null;this.softwareversion=aDataBean.softwareversion||null;this.softwarecode=aDataBean.softwarecode||null;this.racefiledmsurl=aDataBean.racefiledmsurl||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstance");org.r3.db.sailevent.rankinginstance.RankingInstanceDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.rankinginstance.RankingInstanceDTO(aDataBean));},getRacedate:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.racedate);},getRectimestamp:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.rectimestamp);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstance");org.r3.db.sailevent.rankinginstance.RankingInstanceQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.rankinginstance.RankingInstanceDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};var global_multiselector=this.dataTableId+"_all_instanceid";defaultColumnDefinitions['multiselector']={"aTargets":[-1],"sClass":"center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_instanceid' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var itemChecked="";var s="<input type='checkbox' name='instanceid' value='"+item.dataBean.instanceid+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['instanceid']={"aTargets":[-1],"sClass":"left","sTitle":"Id.","render":function(data,type,row,meta)
{var item=data;return item.dataBean.instanceid||'';}};defaultColumnDefinitions['instancetype']={"aTargets":[-1],"sClass":"left","sTitle":"instancetype","render":function(data,type,row,meta)
{var item=data;return item.dataBean.instancetype||'';}};defaultColumnDefinitions['rankid']={"aTargets":[-1],"sClass":"left","sTitle":"rankid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankid||'';}};defaultColumnDefinitions['racenumber']={"aTargets":[-1],"sClass":"left","sTitle":"N.Prova","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racenumber||'';}};defaultColumnDefinitions['racedate']={"aTargets":[-1],"sClass":"left","sTitle":"Data","render":function(data,type,row,meta)
{var item=data;return item.getRacedate()||'';}};defaultColumnDefinitions['racefiledmsurl']={"aTargets":[-1],"sClass":"left","sTitle":"racefiledmsurl","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racefiledmsurl||'';}};defaultColumnDefinitions['racetime']={"aTargets":[-1],"sClass":"left","sTitle":"racetime","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racetime||'';}};defaultColumnDefinitions['racedistance']={"aTargets":[-1],"sClass":"left","sTitle":"racedistance","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racedistance||'';}};defaultColumnDefinitions['racecoefficient']={"aTargets":[-1],"sClass":"left","sTitle":"racecoefficient","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racecoefficient||'';}};defaultColumnDefinitions['racerating']={"aTargets":[-1],"sClass":"left","sTitle":"racerating","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racerating||'';}};defaultColumnDefinitions['softwareversion']={"aTargets":[-1],"sClass":"left","sTitle":"softwareversion","render":function(data,type,row,meta)
{var item=data;return item.dataBean.softwareversion||'';}};defaultColumnDefinitions['softwarecode']={"aTargets":[-1],"sClass":"left","sTitle":"softwarecode","render":function(data,type,row,meta)
{var item=data;return item.dataBean.softwarecode||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"Ultima Mod.","render":function(data,type,row,meta)
{var item=data;return item.getRectimestamp()||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.rankinginstance.RankingInstanceDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstancedetail");org.r3.db.sailevent.rankinginstancedetail.RankingInstanceDetailDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_rankinginstancedetail";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.rankentryid=aDataBean.rankentryid||null;this.eventid=aDataBean.eventid||null;this.instanceid=aDataBean.instanceid||null;this.applicationid=aDataBean.applicationid||null;this.pos=aDataBean.pos||null;this.sailnumber=aDataBean.sailnumber||null;this.yachtname=aDataBean.yachtname||null;this.owner=aDataBean.owner||null;this.club=aDataBean.club||null;this.model=aDataBean.model||null;this.racegroup=aDataBean.racegroup||null;this.division=aDataBean.division||null;this.timoniere=aDataBean.timoniere||null;this.arrivaldate=aDataBean.arrivaldate||null;this.realtime=aDataBean.realtime||null;this.drealtime=aDataBean.drealtime||null;this.correctedtime=aDataBean.correctedtime||null;this.annotation=aDataBean.annotation||null;this.perctempen=aDataBean.perctempen||null;this.perctempen=aDataBean.perctempen||null;this.score=aDataBean.score||null;this.maxraces=aDataBean.maxraces||null;this.scorer01=aDataBean.scorer01||null;this.scorer02=aDataBean.scorer02||null;this.scorer03=aDataBean.scorer03||null;this.scorer04=aDataBean.scorer04||null;this.scorer05=aDataBean.scorer05||null;this.scorer06=aDataBean.scorer06||null;this.scorer07=aDataBean.scorer07||null;this.scorer08=aDataBean.scorer08||null;this.scorer09=aDataBean.scorer09||null;this.scorer10=aDataBean.scorer10||null;this.scorer11=aDataBean.scorer11||null;this.scorer12=aDataBean.scorer12||null;this.scorer13=aDataBean.scorer13||null;this.scorer14=aDataBean.scorer14||null;this.scorer15=aDataBean.scorer15||null;this.scorern01=aDataBean.scorern01||null;this.scorern02=aDataBean.scorern02||null;this.scorern03=aDataBean.scorern03||null;this.scorern04=aDataBean.scorern04||null;this.scorern05=aDataBean.scorern05||null;this.scorern06=aDataBean.scorern06||null;this.scorern07=aDataBean.scorern07||null;this.scorern08=aDataBean.scorern08||null;this.scorern09=aDataBean.scorern09||null;this.scorern10=aDataBean.scorern10||null;this.scorern11=aDataBean.scorern11||null;this.scorern12=aDataBean.scorern12||null;this.scorern13=aDataBean.scorern13||null;this.scorern14=aDataBean.scorern14||null;this.scorern15=aDataBean.scorern15||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstancedetail");org.r3.db.sailevent.rankinginstancedetail.RankingInstanceDetailDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.rankinginstancedetail.RankingInstanceDetailDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstancedetail");org.r3.db.sailevent.rankinginstancedetail.RankingInstanceDetailQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.rankinginstancedetail.RankingInstanceDetailDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.sailevent.rankinginstancedetail.RankingInstanceDetailQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.rankinginstancedetail.RankingInstanceDetailDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.sailevent.rankinginstancedetail.RankingInstanceDetailQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='rankentryid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.rankentryid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankentryid||'';}};}
var columnId='eventid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.eventid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};}
var columnId='instanceid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.instanceid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.instanceid||'';}};}
var columnId='applicationid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.applicationid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.applicationid||'';}};}
var columnId='pos';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.pos,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pos||'';}};}
var columnId='sailnumber';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.sailnumber,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sailnumber||'';}};}
var columnId='yachtname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.yachtname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtname||'';}};}
var columnId='owner';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.owner,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.owner||'';}};}
var columnId='club';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.club,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.club||'';}};}
var columnId='model';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.model,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.model||'';}};}
var columnId='racegroup';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.racegroup,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.racegroup||'';}};}
var columnId='division';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.division,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.division||'';}};}
var columnId='timoniere';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.timoniere,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.timoniere||'';}};}
var columnId='arrivaldate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.arrivaldate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.arrivaldate||'';}};}
var columnId='realtime';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.realtime,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.realtime||'';}};}
var columnId='drealtime';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.drealtime,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.drealtime||'';}};}
var columnId='correctedtime';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.correctedtime,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.correctedtime||'';}};}
var columnId='annotation';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.annotation,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.annotation||'';}};}
var columnId='perctempen';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.perctempen,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.perctempen||'';}};}
var columnId='score';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.score,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.score||'';}};}
var columnId='maxraces';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.maxraces,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.maxraces||'';}};}
var columnId='scorer01';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer01,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer01||'';}};}
var columnId='scorer02';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer02,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer02||'';}};}
var columnId='scorer03';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer03,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer03||'';}};}
var columnId='scorer04';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer04,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer04||'';}};}
var columnId='scorer05';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer05,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer05||'';}};}
var columnId='scorer06';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer06,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer06||'';}};}
var columnId='scorer07';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer07,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer07||'';}};}
var columnId='scorer08';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer08,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer08||'';}};}
var columnId='scorer09';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer09,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer09||'';}};}
var columnId='scorer10';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer10,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer10||'';}};}
var columnId='scorer11';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer11,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer11||'';}};}
var columnId='scorer12';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer12,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer12||'';}};}
var columnId='scorer13';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer13,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer13||'';}};}
var columnId='scorer14';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer14,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer14||'';}};}
var columnId='scorer15';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorer15,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer15||'';}};}
var columnId='scorern01';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern01,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern01||'';}};}
var columnId='scorern02';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern02,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern02||'';}};}
var columnId='scorern03';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern03,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern03||'';}};}
var columnId='scorern04';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern04,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern04||'';}};}
var columnId='scorern05';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern05,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern05||'';}};}
var columnId='scorern06';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern06,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern06||'';}};}
var columnId='scorern07';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern07,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern07||'';}};}
var columnId='scorern08';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern08,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern08||'';}};}
var columnId='scorern09';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern09,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern09||'';}};}
var columnId='scorern10';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern10,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern10||'';}};}
var columnId='scorern11';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern11,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern11||'';}};}
var columnId='scorern12';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern12,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern12||'';}};}
var columnId='scorern13';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern13,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern13||'';}};}
var columnId='scorern14';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern14,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern14||'';}};}
var columnId='scorern15';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.scorern15,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern15||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetail.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstancedetailview");org.r3.db.sailevent.rankinginstancedetailview.RankingInstanceDetailViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_rankinginstancedetailview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.rankentryid=aDataBean.rankentryid||null;this.eventid=aDataBean.eventid||null;this.instanceid=aDataBean.instanceid||null;this.applicationid=aDataBean.applicationid||null;this.pos=aDataBean.pos||null;this.sailnumber=aDataBean.sailnumber||null;this.yachtname=aDataBean.yachtname||null;this.owner=aDataBean.owner||null;this.club=aDataBean.club||null;this.model=aDataBean.model||null;this.racegroup=aDataBean.racegroup||null;this.division=aDataBean.division||null;this.timoniere=aDataBean.timoniere||null;this.arrivaldate=aDataBean.arrivaldate||null;this.realtime=aDataBean.realtime||null;this.drealtime=aDataBean.drealtime;this.correctedtime=aDataBean.correctedtime;this.annotation=aDataBean.annotation||null;this.perctempen=aDataBean.perctempen||null;this.score=aDataBean.score||null;this.maxraces=aDataBean.maxraces||null;this.scorer01=aDataBean.scorer01||null;this.scorer02=aDataBean.scorer02||null;this.scorer03=aDataBean.scorer03||null;this.scorer04=aDataBean.scorer04||null;this.scorer05=aDataBean.scorer05||null;this.scorer06=aDataBean.scorer06||null;this.scorer07=aDataBean.scorer07||null;this.scorer08=aDataBean.scorer08||null;this.scorer09=aDataBean.scorer09||null;this.scorer10=aDataBean.scorer10||null;this.scorer11=aDataBean.scorer11||null;this.scorer12=aDataBean.scorer12||null;this.scorer13=aDataBean.scorer13||null;this.scorer14=aDataBean.scorer14||null;this.scorer15=aDataBean.scorer15||null;this.scorern01=aDataBean.scorern01||null;this.scorern02=aDataBean.scorern02||null;this.scorern03=aDataBean.scorern03||null;this.scorern04=aDataBean.scorern04||null;this.scorern05=aDataBean.scorern05||null;this.scorern06=aDataBean.scorern06||null;this.scorern07=aDataBean.scorern07||null;this.scorern08=aDataBean.scorern08||null;this.scorern09=aDataBean.scorern09||null;this.scorern10=aDataBean.scorern10||null;this.scorern11=aDataBean.scorern11||null;this.scorern12=aDataBean.scorern12||null;this.scorern13=aDataBean.scorern13||null;this.scorern14=aDataBean.scorern14||null;this.scorern15=aDataBean.scorern15||null;this.rectimestamp=aDataBean.rectimestamp||null;this.yachtbsf=aDataBean.yachtbsf||null;this.yachtgph=aDataBean.yachtgph||null;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstancedetailview");org.r3.db.sailevent.rankinginstancedetailview.RankingInstanceDetailViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.rankinginstancedetailview.RankingInstanceDetailViewDTO(aDataBean));},getArrivaldate:function()
{return $.r3Utils.formatTimestampDataBeanFieldAsTime(this.dataBean.arrivaldate);},getRealtime:function()
{return $.r3Utils.formatSecondsToElapsedTime(this.dataBean.realtime);},getDrealtime:function()
{return $.r3Utils.formatSecondsToElapsedTime(this.dataBean.drealtime);},getCorrectedtime:function()
{return $.r3Utils.formatSecondsToElapsedTime(this.dataBean.correctedtime);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstancedetailview");org.r3.db.sailevent.rankinginstancedetailview.RankingInstanceDetailViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.rankinginstancedetailview.RankingInstanceDetailViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.sailevent.rankinginstancedetailview.RankingInstanceDetailViewQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.rankinginstancedetailview.RankingInstanceDetailViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.sailevent.rankinginstancedetailview.RankingInstanceDetailViewQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='rankentryid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.rankentryid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankentryid||'';}};}
var columnId='eventid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.eventid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};}
var columnId='instanceid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.instanceid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.instanceid||'';}};}
var columnId='applicationid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.applicationid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.applicationid||'';}};}
var columnId='pos';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.pos,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.pos||'';}};}
var columnId='boatinfo';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.boatinfo,"render":function(data,type,row,meta)
{var item=data;var s='<b>'+(item.dataBean.sailnumber||'')+'</b> '+'<b>'+(item.dataBean.yachtname||'')+'</b> - '+
(item.dataBean.model||'')+'<br />'+'<small class="text-muted">'+
(item.dataBean.owner||'')+' - '+
(item.dataBean.club||'')+'</small>';return s;}};}
var columnId='sailnumber';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.sailnumber,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sailnumber||'';}};}
var columnId='yachtname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.yachtname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtname||'';}};}
var columnId='owner';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.owner,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.owner||'';}};}
var columnId='club';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.club,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.club||'';}};}
var columnId='model';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.model,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.model||'';}};}
var columnId='racegroup';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.racegroup,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.racegroup||'';}};}
var columnId='division';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.division,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.division||'';}};}
var columnId='timoniere';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.timoniere,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.timoniere||'';}};}
var columnId='arrivaldate';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.arrivaldate,"render":function(data,type,row,meta)
{var item=data;return item.getArrivaldate()||'';}};}
var columnId='realtime';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.realtime,"render":function(data,type,row,meta)
{var item=data;return item.getRealtime()||'';}};}
var columnId='drealtime';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.drealtime,"render":function(data,type,row,meta)
{var item=data;return item.getDrealtime()||'';}};}
var columnId='correctedtime';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.correctedtime,"render":function(data,type,row,meta)
{var item=data;return item.getCorrectedtime()||'';}};}
var columnId='annotation';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.annotation,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.annotation||'';}};}
var columnId='perctempen';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.perctempen,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.perctempen||'';}};}
var columnId='score';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.score,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.score||'';}};}
var columnId='maxraces';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.maxraces,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.maxraces||'';}};}
var columnId='scorer01';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer01,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer01||'';}};}
var columnId='scorer02';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer02,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer02||'';}};}
var columnId='scorer03';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer03,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer03||'';}};}
var columnId='scorer04';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer04,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer04||'';}};}
var columnId='scorer05';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer05,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer05||'';}};}
var columnId='scorer06';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer06,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer06||'';}};}
var columnId='scorer07';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer07,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer07||'';}};}
var columnId='scorer08';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer08,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer08||'';}};}
var columnId='scorer09';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer09,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer09||'';}};}
var columnId='scorer10';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer10,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer10||'';}};}
var columnId='scorer11';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer11,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer11||'';}};}
var columnId='scorer12';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer12,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer12||'';}};}
var columnId='scorer13';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer13,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer13||'';}};}
var columnId='scorer14';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer14,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer14||'';}};}
var columnId='scorer15';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer15,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer15||'';}};}
var columnId='scorern01';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern01,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern01||'';}};}
var columnId='scorern02';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern02,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern02||'';}};}
var columnId='scorern03';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern03,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern03||'';}};}
var columnId='scorern04';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern04,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern04||'';}};}
var columnId='scorern05';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern05,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern05||'';}};}
var columnId='scorern06';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern06,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern06||'';}};}
var columnId='scorern07';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern07,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern07||'';}};}
var columnId='scorern08';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern08,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern08||'';}};}
var columnId='scorern09';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern09,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern09||'';}};}
var columnId='scorern10';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern10,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern10||'';}};}
var columnId='scorern11';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern11,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern11||'';}};}
var columnId='scorern12';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern12,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern12||'';}};}
var columnId='scorern13';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern13,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern13||'';}};}
var columnId='scorern14';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern14,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern14||'';}};}
var columnId='scorern15';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorern15,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorern15||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};}
var columnId='scoreoverall1';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer01,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer01||'';}};}
var columnId='scoreoverall2';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer02,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer02||'';}};}
var columnId='scoreoverall3';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer03,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer03||'';}};}
var columnId='scoreoverall4';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer04,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer04||'';}};}
var columnId='scoreoverall5';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer05,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer05||'';}};}
var columnId='scoreoverall6';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer06,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer06||'';}};}
var columnId='scoreoverall7';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer07,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer07||'';}};}
var columnId='scoreoverall8';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer08,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer08||'';}};}
var columnId='scoreoverall9';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer09,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer09||'';}};}
var columnId='scoreoverall10';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer10,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer10||'';}};}
var columnId='scoreoverall11';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer11,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer11||'';}};}
var columnId='scoreoverall12';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer12,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer12||'';}};}
var columnId='scoreoverall13';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer13,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer13||'';}};}
var columnId='scoreoverall14';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer14,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer14||'';}};}
var columnId='scoreoverall15';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.scorer15,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.scorer15||'';}};}
var columnId='yachtbsf';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.yachtbsf,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtbsf||'';}};}
var columnId='yachtgph';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.sailevent.rankinginstancedetailview.message.yachtgph,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.yachtgph||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstanceview");org.r3.db.sailevent.rankinginstanceview.RankingInstanceViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_rankinginstanceview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.rankid=aDataBean.rankid||null;this.ranktype=aDataBean.ranktype||null;this.ranktitle=aDataBean.ranktitle||null;this.racegroup=aDataBean.racegroup||null;this.raceclass=aDataBean.raceclass||null;this.rankrateorg=aDataBean.rankrateorg||null;this.instanceid=aDataBean.instanceid||null;this.instancetype=aDataBean.instancetype||null;this.racenumber=aDataBean.racenumber||null;this.racedate=aDataBean.racedate||null;this.racetime=aDataBean.racetime||null;this.racedistance=aDataBean.racedistance||null;this.racerating=aDataBean.racerating||null;this.racefiledmsurl=aDataBean.racefiledmsurl||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstanceview");org.r3.db.sailevent.rankinginstanceview.RankingInstanceViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.rankinginstanceview.RankingInstanceViewDTO(aDataBean));},getRacedate:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.racedate);},getRacetime:function()
{return this.dataBean.racetime;},getRacegroup:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_boatgroup',this.dataBean.racegroup);},getRaceclass:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_r3ea_raceclass',this.dataBean.raceclass);},isOverallInstance:function()
{return this.dataBean&&this.dataBean.instancetype&&this.dataBean.instancetype=='rank_overall';},getRectimestamp:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.rectimestamp);},isRankType:function(aRankType)
{return this.dataBean&&this.dataBean.ranktype&&this.dataBean.ranktype==aRankType;},isRankRateOrg:function(aRatingOrgType)
{return this.dataBean&&this.dataBean.rankrateorg&&this.dataBean.rankrateorg==aRatingOrgType;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankinginstanceview");org.r3.db.sailevent.rankinginstanceview.RankingInstanceViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.rankinginstanceview.RankingInstanceViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};var global_multiselector=this.dataTableId+"_all_instanceid";defaultColumnDefinitions['multiselector']={"aTargets":[-1],"sClass":"center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_instanceid' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var itemChecked="";var s="<input type='checkbox' name='instanceid' value='"+item.dataBean.instanceid+"' "+itemChecked+" />";return s;}};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['rankid']={"aTargets":[-1],"sClass":"left","sTitle":"rankid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankid||'';}};defaultColumnDefinitions['ranktitle']={"aTargets":[-1],"sClass":"left","sTitle":"ranktitle","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ranktitle||'';}};defaultColumnDefinitions['racegroup']={"aTargets":[-1],"sClass":"left","sTitle":"racegroup","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racegroup||'';}};defaultColumnDefinitions['raceclass']={"aTargets":[-1],"sClass":"left","sTitle":"raceclass","render":function(data,type,row,meta)
{var item=data;return item.dataBean.raceclass||'';}};defaultColumnDefinitions['rankrateorg']={"aTargets":[-1],"sClass":"left","sTitle":"rankrateorg","render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankrateorg||'';}};defaultColumnDefinitions['instanceid']={"aTargets":[-1],"sClass":"left","sTitle":"Id.","render":function(data,type,row,meta)
{var item=data;return item.dataBean.instanceid||'';}};defaultColumnDefinitions['instancetype']={"aTargets":[-1],"sClass":"left","sTitle":"instancetype","render":function(data,type,row,meta)
{var item=data;return item.dataBean.instancetype||'';}};defaultColumnDefinitions['racenumber']={"aTargets":[-1],"sClass":"center","sTitle":"N.Prova","render":function(data,type,row,meta)
{var item=data;if(item.dataBean.racenumber&&item.dataBean.racenumber==99)
return'Generale';return item.dataBean.racenumber||'';}};defaultColumnDefinitions['racedate']={"aTargets":[-1],"sClass":"center","sTitle":"Data","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racedate||'';}};defaultColumnDefinitions['racetime']={"aTargets":[-1],"sClass":"center","sTitle":"Ora","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racetime||'';}};defaultColumnDefinitions['racedistance']={"aTargets":[-1],"sClass":"center","sTitle":"Distanza","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racedistance||'';}};defaultColumnDefinitions['racerating']={"aTargets":[-1],"sClass":"left","sTitle":"Modo Calcolo","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racerating||'';}};defaultColumnDefinitions['racefiledmsurl']={"aTargets":[-1],"sClass":"left","sTitle":"racefiledmsurl","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racefiledmsurl||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"Ultima Mod.","render":function(data,type,row,meta)
{var item=data;return item.getRectimestamp()||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.rankinginstanceview.RankingInstanceViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankingview");org.r3.db.sailevent.rankingview.RankingViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_rankingview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.rankid=aDataBean.rankid||null;this.rankinggroup=aDataBean.rankinggroup||null;this.ranktitle=aDataBean.ranktitle||null;this.racegroup=aDataBean.racegroup||null;this.raceclass=aDataBean.raceclass||null;this.rankordering=aDataBean.rankordering||null;this.instanceid=aDataBean.instanceid||null;this.instancetype=aDataBean.instancetype||null;this.racenumber=aDataBean.racenumber||null;this.racefiledmsurl=aDataBean.racefiledmsurl||null;this.racedate=aDataBean.racedate||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankingview");org.r3.db.sailevent.rankingview.RankingViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.rankingview.RankingViewDTO(aDataBean));},isOverallInstance:function()
{return this.dataBean&&this.dataBean.instancetype&&this.dataBean.instancetype=='rank_overall';}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankingview");org.r3.db.sailevent.rankingview.RankingViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.sailevent.rankingview.RankingViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['eventid']={"aTargets":[-1],"sClass":"left","sTitle":"eventid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.eventid||'';}};defaultColumnDefinitions['rankid']={"aTargets":[-1],"sClass":"left","sTitle":"rankid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankid||'';}};defaultColumnDefinitions['rankinggroup']={"aTargets":[-1],"sClass":"left","sTitle":"rankinggroup","render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankinggroup||'';}};defaultColumnDefinitions['ranktitle']={"aTargets":[-1],"sClass":"left","sTitle":"ranktitle","render":function(data,type,row,meta)
{var item=data;return item.dataBean.ranktitle||'';}};defaultColumnDefinitions['racegroup']={"aTargets":[-1],"sClass":"left","sTitle":"racegroup","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racegroup||'';}};defaultColumnDefinitions['raceclass']={"aTargets":[-1],"sClass":"left","sTitle":"raceclass","render":function(data,type,row,meta)
{var item=data;return item.dataBean.raceclass||'';}};defaultColumnDefinitions['rankordering']={"aTargets":[-1],"sClass":"left","sTitle":"rankordering","render":function(data,type,row,meta)
{var item=data;return item.dataBean.rankordering||'';}};defaultColumnDefinitions['instanceid']={"aTargets":[-1],"sClass":"left","sTitle":"instanceid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.instanceid||'';}};defaultColumnDefinitions['racenumber']={"aTargets":[-1],"sClass":"left","sTitle":"racenumber","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racenumber||'';}};defaultColumnDefinitions['racefiledmsurl']={"aTargets":[-1],"sClass":"left","sTitle":"racefiledmsurl","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racefiledmsurl||'';}};defaultColumnDefinitions['racedate']={"aTargets":[-1],"sClass":"left","sTitle":"racedate","render":function(data,type,row,meta)
{var item=data;return item.dataBean.racedate||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.sailevent.rankingview.RankingViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankingview");org.r3.db.sailevent.rankingview.RankingViewSynopticDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_rankingview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.eventid=aDataBean.eventid||null;this.rankid=aDataBean.rankid||null;this.rankinggroup=aDataBean.rankinggroup||null;this.ranktitle=aDataBean.ranktitle||null;this.racegroup=aDataBean.racegroup||null;this.raceclass=aDataBean.raceclass||null;if(aDataBean.listOfInstances)
{this.listOfInstances=[];for(var k=0;k<aDataBean.listOfInstances.length;k++)
{this.listOfInstances.push(new org.r3.db.sailevent.rankingview.RankingViewDTOAdapter(aDataBean.listOfInstances[k]));}}
else
this.listOfInstances=null;this.formattedInstances=null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.sailevent.rankingview");org.r3.db.sailevent.rankingview.RankingViewSynopticDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.sailevent.rankingview.RankingViewSynopticDTO(aDataBean));},getNumberOfInstances:function()
{if(this.dataBean.listOfInstances&&this.dataBean.listOfInstances.length>0)
return this.dataBean.listOfInstances.length-(this.getOverallInstance()?1:0);return 0;},getOverallInstance:function()
{if(this.dataBean.listOfInstances&&this.dataBean.listOfInstances.length>0&&this.dataBean.listOfInstances[this.dataBean.listOfInstances.length-1].isOverallInstance())
return this.dataBean.listOfInstances[this.dataBean.listOfInstances.length-1];return null;},getSynopticItemData:function(maxNumberOfInstances)
{var formattedInstances=[];for(var i=0;i<this.getNumberOfInstances();i++)
{formattedInstances.push({"instanceid":this.dataBean.listOfInstances[i].dataBean.instanceid,"racenumber":this.dataBean.listOfInstances[i].dataBean.racenumber,"racedate":$.r3Utils.formatDataDataBeanField(this.dataBean.listOfInstances[i].dataBean.racedate),"overall":false,"linkIcon":null});}
if(maxNumberOfInstances>this.getNumberOfInstances())
{for(var i=0;i<(maxNumberOfInstances-this.getNumberOfInstances());i++)
{formattedInstances.push({"instanceid":'empty',"racenumber":-1,"racedate":null,"overall":false,"linkIcon":null});}}
var overall=this.getOverallInstance();var overallid='empty';if(overall)
{overallid=overall.dataBean.instanceid;}
formattedInstances.push({"instanceid":overallid,"racenumber":99,"racedate":null,"overall":true,"linkIcon":org.r3.Constants.applicationContext+'/resources/img/sailevent/classifica.gif'});return{"ranktitle":this.dataBean.ranktitle,"instances":formattedInstances};}});jQuery.r3Utils.namespace("org.r3.db.system.address");org.r3.db.system.address.AddressDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_address";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.addressid=aDataBean.addressid||null;this.entityid=aDataBean.entityid||null;this.countryid=aDataBean.countryid||null;this.ownerid=aDataBean.ownerid||null;this.addresstypeid=aDataBean.addresstypeid||null;this.state=aDataBean.state||null;this.city=aDataBean.city||null;this.zipcode=aDataBean.zipcode||null;this.address=aDataBean.address||null;this.phonecode1=aDataBean.phonecode1||null;this.phonecode2=aDataBean.phonecode2||null;this.phone1=aDataBean.phone1||null;this.phone2=aDataBean.phone2||null;this.website=aDataBean.website||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.address");org.r3.db.system.address.AddressDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.address.AddressDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.system.address");org.r3.db.system.address.AddressQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.address.AddressDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['addressid']={"aTargets":[-1],"sClass":"left","sTitle":"addressid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.addressid||'';}};defaultColumnDefinitions['entityid']={"aTargets":[-1],"sClass":"left","sTitle":"entityid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.entityid||'';}};defaultColumnDefinitions['countryid']={"aTargets":[-1],"sClass":"left","sTitle":"countryid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.countryid||'';}};defaultColumnDefinitions['ownerid']={"aTargets":[-1],"sClass":"left","sTitle":"ownerid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.ownerid||'';}};defaultColumnDefinitions['addresstypeid']={"aTargets":[-1],"sClass":"left","sTitle":"addresstypeid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.addresstypeid||'';}};defaultColumnDefinitions['state']={"aTargets":[-1],"sClass":"left","sTitle":"state","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.state||'';}};defaultColumnDefinitions['city']={"aTargets":[-1],"sClass":"left","sTitle":"city","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.city||'';}};defaultColumnDefinitions['zipcode']={"aTargets":[-1],"sClass":"left","sTitle":"zipcode","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.zipcode||'';}};defaultColumnDefinitions['address']={"aTargets":[-1],"sClass":"left","sTitle":"address","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.address||'';}};defaultColumnDefinitions['phonecode1']={"aTargets":[-1],"sClass":"left","sTitle":"phonecode1","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.phonecode1||'';}};defaultColumnDefinitions['phonecode2']={"aTargets":[-1],"sClass":"left","sTitle":"phonecode2","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.phonecode2||'';}};defaultColumnDefinitions['phone1']={"aTargets":[-1],"sClass":"left","sTitle":"phone1","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.phone1||'';}};defaultColumnDefinitions['phone2']={"aTargets":[-1],"sClass":"left","sTitle":"phone2","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.phone2||'';}};defaultColumnDefinitions['website']={"aTargets":[-1],"sClass":"left","sTitle":"website","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.website||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.address.AddressDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.system.classifier");org.r3.db.system.classifier.ClassifierDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_classifier";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.clsid=aDataBean.clsid||null;this.clsdescr=aDataBean.clsdescr||null;this.clstypecode=aDataBean.clstypecode||null;this.clsambitcode=aDataBean.clsambitcode||null;this.cacheinterval=aDataBean.cacheinterval||null;this.etag=aDataBean.etag||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.classifier");org.r3.db.system.classifier.ClassifierDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.classifier.ClassifierDTO(aDataBean));},isLinear:function()
{return!this.dataBean.clstypecode||this.dataBean.clstypecode=='linear';},isHierarchical:function()
{return!this.dataBean.clstypecode||this.dataBean.clstypecode=='hierarchical';}});jQuery.r3Utils.namespace("org.r3.db.system.classifier");org.r3.db.system.classifier.ClassifierQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.classifier.ClassifierDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['clsid']={"aTargets":[-1],"sClass":"left","sTitle":"clsid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.clsid||'';}};defaultColumnDefinitions['clsdescr']={"aTargets":[-1],"sClass":"left","sTitle":"clsdescr","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.clsdescr||'';}};defaultColumnDefinitions['clstypecode']={"aTargets":[-1],"sClass":"left","sTitle":"clstypecode","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.clstypecode||'';}};defaultColumnDefinitions['clsambitcode']={"aTargets":[-1],"sClass":"left","sTitle":"clsambitcode","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.clsambitcode||'';}};defaultColumnDefinitions['cacheinterval']={"aTargets":[-1],"sClass":"left","sTitle":"cacheinterval","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.cacheinterval||'';}};defaultColumnDefinitions['etag']={"aTargets":[-1],"sClass":"left","sTitle":"etag","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.etag||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"rectimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.classifier.ClassifierDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.system.classifieritem");org.r3.db.system.classifieritem.ClassifierItemDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_classifieritem";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.clsitemid=aDataBean.clsitemid||null;this.site=aDataBean.site||null;this.clsid=aDataBean.clsid||null;this.clsitembusid=aDataBean.clsitembusid||null;this.parentitemid=aDataBean.parentitemid||null;this.classifieritemdescr=aDataBean.classifieritemdescr||null;this.classifieritempath=aDataBean.classifieritempath||null;this.classifieritemdepth=aDataBean.classifieritemdepth||null;this.classifieritemorder=aDataBean.classifieritemorder||null;this.classifieritemiattr=aDataBean.classifieritemiattr||null;this.classifieritemsattr=aDataBean.classifieritemsattr||null;this.numberofchildren=aDataBean.numberofchildren||null;if(aDataBean.children&&aDataBean.children.length)
{this.children=[];for(var i=0;i<aDataBean.children.length;i++)
{this.children.push(new org.r3.db.system.classifieritem.ClassifierItemDTOAdapter(aDataBean.children[i]));}}
else this.children=null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.classifieritem");org.r3.db.system.classifieritem.ClassifierItemDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.classifieritem.ClassifierItemDTO(aDataBean));},getClassifierDTOKey:function()
{var s=this.dataBean.site+"_"+this.dataBean.clsid;return s;},getChildrenAsCSV:function()
{var s='';if(this.dataBean.children&&this.dataBean.children.length)
{for(var i=0;i<this.dataBean.children.length;i++)
{if(i)
s=s+', ';s=s+this.dataBean.children[i].dataBean.classifieritemdescr;}}
return s;}});jQuery.r3Utils.namespace("org.r3.db.system.classifieritem");org.r3.db.system.classifieritem.ClassifierItemQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.classifieritem.ClassifierItemDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['clsitemid']={"aTargets":[-1],"sClass":"left","sTitle":"Id.","render":function(data,type,row,meta)
{var item=data;return item.dataBean.clsitemid||'';}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['clsid']={"aTargets":[-1],"sClass":"left","sTitle":"clsid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.clsid||'';}};defaultColumnDefinitions['clsitembusid']={"aTargets":[-1],"sClass":"left","sTitle":"clsitembusid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.clsitembusid||'';}};defaultColumnDefinitions['parentitemid']={"aTargets":[-1],"sClass":"left","sTitle":"parentitemid","render":function(data,type,row,meta)
{var item=data;return item.dataBean.parentitemid||'';}};defaultColumnDefinitions['classifieritemdescr']={"aTargets":[-1],"sClass":"left","sTitle":"Etichetta","render":function(data,type,row,meta)
{var item=data;return item.dataBean.classifieritemdescr||'';}};defaultColumnDefinitions['classifieritempath']={"aTargets":[-1],"sClass":"left","sTitle":"classifieritempath","render":function(data,type,row,meta)
{var item=data;return item.dataBean.classifieritempath||'';}};defaultColumnDefinitions['classifieritemdepth']={"aTargets":[-1],"sClass":"left","sTitle":"classifieritemdepth","render":function(data,type,row,meta)
{var item=data;return item.dataBean.classifieritemdepth||'';}};defaultColumnDefinitions['classifieritemorder']={"aTargets":[-1],"sClass":"left","sTitle":"Ordine","render":function(data,type,row,meta)
{var item=data;return item.dataBean.classifieritemorder||'0';}};defaultColumnDefinitions['classifieritemiattr']={"aTargets":[-1],"sClass":"left","sTitle":"classifieritemiattr","render":function(data,type,row,meta)
{var item=data;return item.dataBean.classifieritemiattr||'';}};defaultColumnDefinitions['classifieritemsattr']={"aTargets":[-1],"sClass":"left","sTitle":"classifieritemsattr","render":function(data,type,row,meta)
{var item=data;return item.dataBean.classifieritemsattr||'';}};defaultColumnDefinitions['numberofchildren']={"aTargets":[-1],"sClass":"left","sTitle":"#","render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofchildren||'0';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.classifieritem.ClassifierItemDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.system.fileimport.fileimport");org.r3.db.system.fileimport.fileimport.FileImportDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_fileimport";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.importid=aDataBean.importid||null;this.importname=aDataBean.importname||null;this.importcontext=aDataBean.importcontext||null;this.majortype=aDataBean.majortype||null;this.minortype=aDataBean.minortype||null;this.withheader=aDataBean.withheader||null;this.numberofcolumns=aDataBean.numberofcolumns||null;this.numberofrecords=aDataBean.numberofrecords||null;this.uploaddate=aDataBean.uploaddate||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.fileimport.fileimport");org.r3.db.system.fileimport.fileimport.FileImportDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.fileimport.fileimport.FileImportDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.system.fileimport.fileimport");org.r3.db.system.fileimport.fileimport.FileImportQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.fileimport.fileimport.FileImportDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['importid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.importid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.importid||'';}};defaultColumnDefinitions['importname']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.importname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.importname||'';}};defaultColumnDefinitions['importcontext']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.importcontext,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.importcontext||'';}};defaultColumnDefinitions['majortype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.majortype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.majortype||'';}};defaultColumnDefinitions['minortype']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.minortype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.minortype||'';}};defaultColumnDefinitions['withheader']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.withheader,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.withheader||'';}};defaultColumnDefinitions['numberofcolumns']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.numberofcolumns,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofcolumns||'';}};defaultColumnDefinitions['numberofrecords']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.numberofrecords,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofrecords||'';}};defaultColumnDefinitions['uploaddate']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.uploaddate,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.uploaddate||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.fileimport.fileimport.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.fileimport.fileimport.FileImportDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.system.outmailspooler");org.r3.db.system.outmailspooler.OutMailSpoolerDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_outmailspooler";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.messageid=aDataBean.messageid||null;this.msgtitle=aDataBean.msgtitle||null;this.msgtext=aDataBean.msgtext||null;this.msgfrom=aDataBean.msgfrom||null;this.msgcc=aDataBean.msgcc||null;this.msgbcc=aDataBean.msgbcc||null;this.msgmode=aDataBean.msgmode||null;this.msgsendat=aDataBean.msgsendat||null;this.numberofattachments=aDataBean.numberofattachments||null;this.numberoftargets=aDataBean.numberoftargets||null;this.numberofsentitems=aDataBean.numberofsentitems||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;}});jQuery.r3Utils.namespace("org.r3.db.system.outmailspooler");org.r3.db.system.outmailspooler.OutMailSpoolerDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.outmailspooler.OutMailSpoolerDTO(aDataBean));},getRecstatus:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_sys_recstatus',this.dataBean.recstatus);},getRectimestamp:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.rectimestamp);},getMsgtext:function()
{var t=this.dataBean.msgtext;if(t)
{var s=org.r3.Constants.getDMSPublicCardFolderUrl('OUTMAIL');t=t.replace('cid:',s);}
return t;},getMsgmode:function()
{var s="UNKOWN";if(this.dataBean.msgmode)
{switch(this.dataBean.msgmode)
{case'msg_regular':s=org.r3.db.system.outmailspooler.message.msgmode_msg_regular;break;case'msg_undisclosed':s=org.r3.db.system.outmailspooler.message.msgmode_msg_undisclosed;break;}}
return s;}});jQuery.r3Utils.namespace("org.r3.db.system.outmailspooler");org.r3.db.system.outmailspooler.OutMailSpoolerQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.outmailspooler.OutMailSpoolerDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.system.outmailspooler.OutMailSpoolerQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.outmailspooler.OutMailSpoolerDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.system.outmailspooler.OutMailSpoolerQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='messageid';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='messageid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.messageid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.messageid||'';}};}
var columnId='msgtitle';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.msgtitle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.msgtitle||'';}};}
var columnId='msgtext';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.msgtext,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.msgtext||'';}};}
var columnId='msgfrom';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.msgfrom,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.msgfrom||'';}};}
var columnId='msgcc';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.msgcc,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.msgcc||'';}};}
var columnId='msgbcc';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.msgbcc,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.msgbcc||'';}};}
var columnId='msgmode';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.msgmode,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.msgmode||'';}};}
var columnId='msgsendat';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.msgsendat,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.msgsendat||'';}};}
var columnId='numberofattachments';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.numberofattachments,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofattachments||'0';}};}
var columnId='numberoftargets';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.numberoftargets,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberoftargets||'0';}};}
var columnId='numberofsentitems';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.numberofsentitems,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofsentitems||'0';}};}
var columnId='recstatus';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.getRecstatus()||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspooler.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.getRectimestamp()||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.system.outmailspoolerrecipient");org.r3.db.system.outmailspoolerrecipient.OutMailSpoolerRecipientDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_outmailspoolerrecipient";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.recipientid=aDataBean.recipientid||null;this.site=aDataBean.site||null;this.messageid=aDataBean.messageid||null;this.msgto=aDataBean.msgto||null;this.businesskey=aDataBean.businesskey||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;}});jQuery.r3Utils.namespace("org.r3.db.system.outmailspoolerrecipient");org.r3.db.system.outmailspoolerrecipient.OutMailSpoolerRecipientDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.outmailspoolerrecipient.OutMailSpoolerRecipientDTO(aDataBean));},getRecordStatusAsSemaphore:function()
{var semaphoreColor='gray';if(this.dataBean.recstatus&&this.dataBean.recstatus=='sys_recact')
semaphoreColor='gray';if(this.dataBean.recstatus&&this.dataBean.recstatus=='sys_recerr')
semaphoreColor='red';if(this.dataBean.recstatus&&this.dataBean.recstatus=='sys_recprocessed')
semaphoreColor='green';if(this.dataBean.recstatus&&this.dataBean.recstatus=='sys_recblock')
semaphoreColor='black';return $.r3Utils.formatSemaphore(semaphoreColor);}});jQuery.r3Utils.namespace("org.r3.db.system.outmailspoolerrecipient");org.r3.db.system.outmailspoolerrecipient.OutMailSpoolerRecipientQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.outmailspoolerrecipient.OutMailSpoolerRecipientDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.system.outmailspoolerrecipient.OutMailSpoolerRecipientQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.outmailspoolerrecipient.OutMailSpoolerRecipientDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.system.outmailspoolerrecipient.OutMailSpoolerRecipientQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='recipientid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspoolerrecipient.message.recipientid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recipientid||'';}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspoolerrecipient.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='messageid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspoolerrecipient.message.messageid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.messageid||'';}};}
var columnId='msgto';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspoolerrecipient.message.msgto,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.msgto||'';}};}
var columnId='businesskey';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspoolerrecipient.message.businesskey,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.businesskey||'';}};}
var columnId='recstatus';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspoolerrecipient.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.outmailspoolerrecipient.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.system.site");org.r3.db.system.site.SiteDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_site";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.parentsite=aDataBean.parentsite||null;this.sitedescr=aDataBean.sitedescr||null;this.sitelanguages=aDataBean.sitelanguages||null;this.sitesummary=aDataBean.sitesummary||null;this.sitedomain=aDataBean.sitedomain||null;this.calendarid=aDataBean.calendarid||null;this.hostname=aDataBean.hostname||null;this.homeurl=aDataBean.homeurl||null;this.consoleurl=aDataBean.consoleurl||null;this.sitetype=aDataBean.sitetype||null;this.sitelayout=aDataBean.sitelayout||null;this.siteresourcepath=aDataBean.siteresourcepath||null;this.sitecss=aDataBean.sitecss||null;this.siteconsolecss=aDataBean.siteconsolecss||null;this.sitetheme=aDataBean.sitetheme||null;this.refsitetype=aDataBean.refsitetype||null;this.refsite=aDataBean.refsite||null;this.refsitevisible=aDataBean.refsitevisible||null;this.refsitedescr=aDataBean.refsitedescr||null;this.admrefsitetype=aDataBean.admrefsitetype||null;this.admrefsite=aDataBean.admrefsite||null;this.admrefsitevisible=aDataBean.admrefsitevisible||null;this.admrefsitedescr=aDataBean.admrefsitedescr||null;this.cardid=aDataBean.cardid||null;this.options=aDataBean.options||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.site");org.r3.db.system.site.SiteDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.site.SiteDTO(aDataBean));},getOptions:function()
{var p=null;if(this.dataBean.options)
p=this.dataBean.options.split(',');return p;},isDomainController:function()
{return this.dataBean.sitedomain&&this.dataBean.sitedomain==this.dataBean.site;}});jQuery.r3Utils.namespace("org.r3.db.system.site");org.r3.db.system.site.SiteQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.site.SiteDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.system.site.SiteQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.site.SiteDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.system.site.SiteQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='<attributeid>';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='site';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};}
var columnId='sitedescr';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.sitedescr,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitedescr||'';}};}
var columnId='sitelanguages';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.sitelanguages,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitelanguages||'';}};}
var columnId='sitesummary';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.sitesummary,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitesummary||'';}};}
var columnId='sitedomain';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.sitedomain,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitedomain||'';}};}
var columnId='calendarid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.calendarid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.calendarid||'';}};}
var columnId='sitetype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.sitetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitetype||'';}};}
var columnId='sitelayout';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.sitelayout,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitelayout||'';}};}
var columnId='siteresourcepath';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.siteresourcepath,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.siteresourcepath||'';}};}
var columnId='sitecss';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.sitecss,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitecss||'';}};}
var columnId='siteconsolecss';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.siteconsolecss,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.siteconsolecss||'';}};}
var columnId='sitetheme';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.sitetheme,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.sitetheme||'';}};}
var columnId='refsitetype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.refsitetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.refsitetype||'';}};}
var columnId='refsite';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.refsite,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.refsite||'';}};}
var columnId='refsitevisible';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.refsitevisible,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.refsitevisible||'';}};}
var columnId='refsitedescr';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.refsitedescr,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.refsitedescr||'';}};}
var columnId='admrefsitetype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.admrefsitetype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.admrefsitetype||'';}};}
var columnId='admrefsite';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.admrefsite,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.admrefsite||'';}};}
var columnId='admrefsitevisible';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.admrefsitevisible,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.admrefsitevisible||'';}};}
var columnId='admrefsitedescr';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.admrefsitedescr,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.admrefsitedescr||'';}};}
var columnId='cardid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.cardid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.cardid||'';}};}
var columnId='options';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.site.message.options,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.options||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.system.siteportletcfg");org.r3.db.system.siteportletcfg.SitePortletConfigDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_siteportletconfig";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.pageid=aDataBean.pageid||null;this.positionid=aDataBean.positionid||null;this.jsclassname=aDataBean.jsclassname||null;this.cssclassname=aDataBean.cssclassname||null;this.datacardid=aDataBean.datacardid||null;this.dataoptions=aDataBean.dataoptions||null;this.dataonuserstatus=aDataBean.dataonuserstatus||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.siteportletcfg");org.r3.db.system.siteportletcfg.SitePortletConfigDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.siteportletcfg.SitePortletConfigDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.system.siteportletcfg");org.r3.db.system.siteportletcfg.SitePortletConfigQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.siteportletcfg.SitePortletConfigDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['pageid']={"aTargets":[-1],"sClass":"left","sTitle":"pageid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.pageid||'';}};defaultColumnDefinitions['positionid']={"aTargets":[-1],"sClass":"left","sTitle":"positionid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.positionid||'';}};defaultColumnDefinitions['jsclassname']={"aTargets":[-1],"sClass":"left","sTitle":"jsclassname","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.jsclassname||'';}};defaultColumnDefinitions['cssclassname']={"aTargets":[-1],"sClass":"left","sTitle":"cssclassname","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.cssclassname||'';}};defaultColumnDefinitions['datacardid']={"aTargets":[-1],"sClass":"left","sTitle":"datacardid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.datacardid||'';}};defaultColumnDefinitions['dataoptions']={"aTargets":[-1],"sClass":"left","sTitle":"dataoptions","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.dataoptions||'';}};defaultColumnDefinitions['dataonuserstatus']={"aTargets":[-1],"sClass":"left","sTitle":"dataonuserstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.dataonuserstatus||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.siteportletcfg.SitePortletConfigDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.system.siteproperty");org.r3.db.system.siteproperty.SitePropertyDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_siteproperty";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.propertyscope=aDataBean.propertyscope||null;this.propertykey=aDataBean.propertykey||null;this.propertyvalue=aDataBean.propertyvalue||null;},compareTo:function(anItemId)
{if(!this.propertykey)
return-99;var s=this.propertykey;if(this.propertykey.indexOf('.')<0)
{s=this.propertyscope+'.'+this.propertykey;}
if(s<anItemId)
return-1;else if(s>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.siteproperty");org.r3.db.system.siteproperty.SitePropertyDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.siteproperty.SitePropertyDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.system.siteproperty");org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter=org.r3.db.DTOTableAdapter.extend({init:function(queryResult,aDataBeanAdapterConstructor)
{this._super(queryResult,aDataBeanAdapterConstructor);},getPropertyByPropertyscopePropertykey:function(aPropertyScope,aPropertyKey)
{var p=this.findItem(aPropertyScope+'.'+aPropertyKey);return p;}});jQuery.r3Utils.namespace("org.r3.db.system.siteproperty");org.r3.db.system.siteproperty.SitePropertyQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['propertyscope']={"aTargets":[-1],"sClass":"left","sTitle":"propertyscope","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.propertyscope||'';}};defaultColumnDefinitions['propertykey']={"aTargets":[-1],"sClass":"left","sTitle":"propertykey","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.propertykey||'';}};defaultColumnDefinitions['propertyvalue']={"aTargets":[-1],"sClass":"left","sTitle":"propertyvalue","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.propertyvalue||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.system.smsqueue");org.r3.db.system.smsqueue.SMSQueueDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_smsqueue";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.smsid=aDataBean.smsid||null;this.smstext=aDataBean.smstext||null;this.smssender=aDataBean.smssender||null;this.smsopts=aDataBean.smsopts||null;this.smssendat=aDataBean.smssendat||null;this.numberofretries=aDataBean.numberofretries||null;this.numberoftargets=aDataBean.numberoftargets||null;this.numberofsentitems=aDataBean.numberofsentitems||null;this.gtwayresponsecode=aDataBean.gtwayresponsecode||null;this.gtwayresponsereason=aDataBean.gtwayresponsereason||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.smsqueue");org.r3.db.system.smsqueue.SMSQueueDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.smsqueue.SMSQueueDTO(aDataBean));},getRecstatus:function()
{return $.r3Utils.formatLUTDataBeanField('GET_classifier_sys_recstatus',this.dataBean.recstatus);},getRectimestamp:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.rectimestamp);},getGtwayresponsecodeAsSemaphore:function()
{if(this.dataBean.recstatus)
{if(this.dataBean.recstatus=='sys_recact')
return $.r3Utils.formatSemaphore('gray');if(this.dataBean.gtwayresponsecode&&this.dataBean.gtwayresponsecode=='OK')
return $.r3Utils.formatSemaphore('green');}
return $.r3Utils.formatSemaphore('red');},getSmsinfo:function()
{var m=this.dataBean.smstext;if(m&&m.length>30)
m=m.substring(0,30)+'...';if(this.dataBean.gtwayresponsereason)
{if(!m)
m=this.dataBean.gtwayresponsereason;else m=m+'<br />'+this.dataBean.gtwayresponsereason;}
return m;}});jQuery.r3Utils.namespace("org.r3.db.system.smsqueue");org.r3.db.system.smsqueue.SMSQueueQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.smsqueue.SMSQueueDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['smsid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.smsid,"render":function(data,type,row,meta)
{var item=data;return item.getGtwayresponsecodeAsSemaphore()+item.dataBean.smsid||'';}};defaultColumnDefinitions['smsinfo']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.smsinfo,"render":function(data,type,row,meta)
{var item=data;return item.getSmsinfo()||'';}};defaultColumnDefinitions['smstext']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.smstext,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.smstext||'';}};defaultColumnDefinitions['smssender']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.smssender,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.smssender||'';}};defaultColumnDefinitions['smsopts']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.smsopts,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.smsopts||'';}};defaultColumnDefinitions['smssendat']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.smssendat,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.smssendat||'';}};defaultColumnDefinitions['numberofretries']={"aTargets":[-1],"sClass":"center","sTitle":org.r3.db.system.smsqueue.message.numberofretries,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofretries||'0';}};defaultColumnDefinitions['numberoftargets']={"aTargets":[-1],"sClass":"center","sTitle":org.r3.db.system.smsqueue.message.numberoftargets,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberoftargets||'0';}};defaultColumnDefinitions['numberofsentitems']={"aTargets":[-1],"sClass":"center","sTitle":org.r3.db.system.smsqueue.message.numberofsentitems,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberofsentitems||'0';}};defaultColumnDefinitions['gtwayresponsecode']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.gtwayresponsecode,"render":function(data,type,row,meta)
{var item=data;return item.getGtwayresponsecodeAsSemaphore()||'';}};defaultColumnDefinitions['gtwayresponsereason']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.gtwayresponsereason,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.gtwayresponsereason||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.getRecstatus()||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.system.smsqueue.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.getRectimestamp()||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.smsqueue.SMSQueueDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.system.user.user");org.r3.db.system.user.user.UserDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_user";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.userid=aDataBean.userid||null;this.nickname=aDataBean.nickname||null;this.password=aDataBean.password||null;this.firstname=aDataBean.firstname||null;this.lastname=aDataBean.lastname||null;this.companyid=aDataBean.companyid||null;this.email=aDataBean.email||null;this.usertype=aDataBean.usertype||null;this.avatarrole=aDataBean.avatarrole||null;this.parentuserid=aDataBean.parentuserid||null;this.userphoto=aDataBean.userphoto||null;this.lastlogin=aDataBean.lastlogin||null;this.numberoflogins=aDataBean.numberoflogins||null;this.userconsent=aDataBean.userconsent||null;this.fbuserid=aDataBean.fbuserid||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;this.sitepermissions=aDataBean.sitePermissions||null;this.actorid=aDataBean.actorid||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.user.user");org.r3.db.system.user.user.UserDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.user.user.UserDTO(aDataBean));},isInRole:function(site,targetFunctionCode)
{if(!this.dataBean.sitepermissions)
return false;for(var i=0;i<this.dataBean.sitepermissions.length;i++)
{var sitePerm=this.dataBean.sitepermissions[i];if(sitePerm.site==site)
{if(sitePerm.roles)
{for(var k=0;k<sitePerm.roles.length;k++)
{var enabledFuncs=sitePerm.roles[k].functions;if(enabledFuncs&&enabledFuncs.length)
{if(targetFunctionCode=='__any__')
return true;for(var j=0;j<enabledFuncs.length;j++)
{if(enabledFuncs[j].functioncode==targetFunctionCode)
return true;}}}}}}
return false;},getUsername:function()
{return this.dataBean.nickname;},getUserFullname:function()
{var s=this.dataBean.lastname;if(s)
{if(this.dataBean.firstname)
s=this.dataBean.firstname+' '+s;}
else s=this.dataBean.nickname;return s;},isGuest:function()
{return this.isUsertype('guest');},isUser:function()
{return this.isUsertype('user');},isAvatar:function()
{return this.isUsertype('avatar');},isUsertype:function(aUsertype)
{return this.dataBean.usertype&&this.dataBean.usertype==aUsertype;},setRoles:function(aListOfRoles)
{if(!aListOfRoles||aListOfRoles.getNumberOfItems()==0)
this.dataBean.sitepermissions=null;this.dataBean.sitepermissions=[];for(var i=0;i<aListOfRoles.getNumberOfItems();i++)
{var theUserRoleViewDTOAdapter=aListOfRoles.getItem(i);var theSite=theUserRoleViewDTOAdapter.dataBean.site;var siteRoles=this.getRoles4Site(theSite);if(siteRoles&&siteRoles.length>0)
{siteRoles.push({"roleid":theUserRoleViewDTOAdapter.dataBean.roleid});}
else
{var rolesArray=[];rolesArray.push({"roleid":theUserRoleViewDTOAdapter.dataBean.roleid});this.dataBean.sitepermissions.push({"site":theSite,"roles":rolesArray});}}},setRoles4Site:function(aSite,anArrayOfRoleid)
{var rolesArray=null;if(anArrayOfRoleid&&anArrayOfRoleid.length>0)
{rolesArray=[];for(var i=0;i<anArrayOfRoleid.length;i++)
{rolesArray.push({"roleid":anArrayOfRoleid[i]});}}
for(var i=0;i<this.dataBean.sitepermissions.length;i++)
{var sitePerm=this.dataBean.sitepermissions[i];if(sitePerm.site==aSite)
{if(rolesArray)
sitePerm.roles=rolesArray;else
this.dataBean.sitepermissions.splice(i,1);return;}}
if(rolesArray)
{this.dataBean.sitepermissions.push({"site":aSite,"roles":rolesArray});}},getRoles4Site:function(site)
{if(this.dataBean.sitepermissions)
{for(var i=0;i<this.dataBean.sitepermissions.length;i++)
{var sitePerm=this.dataBean.sitepermissions[i];if(sitePerm.site==site)
{return sitePerm.roles;}}}
return[];},getRoles4SiteAsArrayOfRoleId:function(site)
{if(this.dataBean.sitepermissions)
{for(var i=0;i<this.dataBean.sitepermissions.length;i++)
{var sitePerm=this.dataBean.sitepermissions[i];if(sitePerm.site==site)
{var arrayOfRoleId=[];for(var j=0;j<sitePerm.roles.length;j++)
arrayOfRoleId.push(sitePerm.roles[j].roleid);return arrayOfRoleId;}}}
return null;},hasRole4Site:function(site,roleId)
{if(!site)
site=org.r3.Constants.site;var roles=this.getRoles4Site(site);if(!roles||roles.length==0)
return false;for(var i=0;i<roles.length;i++)
{if(roles[i].roleid==roleId)
return true;}
return false;},getSerializedSitePermissions:function()
{var serializedPermissions="";if(this.dataBean.sitepermissions)
{for(var i=0;i<this.dataBean.sitepermissions.length;i++)
{var sitePerm=this.dataBean.sitepermissions[i];serializedPermissions=serializedPermissions+sitePerm.site+"=";for(var j=0;j<sitePerm.roles.length;j++)
{if(j>0)
serializedPermissions=serializedPermissions+",";serializedPermissions=serializedPermissions+sitePerm.roles[j].roleid;}
serializedPermissions=serializedPermissions+";";}}
return serializedPermissions;},getCSVPermissions4Site:function(aSite)
{var serializedPermissions="";var roles4Site=this.getRoles4Site(aSite);if(roles4Site)
{for(var j=0;j<roles4Site.length;j++)
{if(j>0)
serializedPermissions=serializedPermissions+",";serializedPermissions=serializedPermissions+roles4Site[j].roleid;}}
return serializedPermissions;},isUserConsentRequired:function()
{return this.dataBean.userconsent&&(this.dataBean.userconsent=='nonblocking'||this.dataBean.userconsent=='required');},getUserPhoto:function()
{if(this.dataBean.userphoto)
{return $.r3Utils.formatDMSUrl4ClientAccess(this.dataBean.userphoto);}
return null;},getUserPhotoIconUrl:function()
{if(this.dataBean.userid)
{return org.r3.PageManager.getRESTUrl("GET_UserCollection_Photo",[this.dataBean.userid,'icon']);}
return null;}});org.r3.db.system.user.user.role_shkadmin='shkadmin';org.r3.db.system.user.user.role_shkowner='shkowner';org.r3.db.system.user.user.role_shkfollower='shkfollower';org.r3.db.system.user.user.role_shkmember='shkmember';jQuery.r3Utils.namespace("org.r3.db.system.user.user");org.r3.db.system.user.user.UserQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.user.user.UserDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{return org.r3.db.system.user.user.UserQueryActionFormView_ColumnDefinitions(this.dataTableId);},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.user.user.UserDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});org.r3.db.system.user.user.UserQueryActionFormView_ColumnDefinitions=function(theDataTableId,includeOnlyFieldList)
{var defaultColumnDefinitions={};var attributekey='userid';var global_multiselector=theDataTableId+"_all_"+attributekey;var selectorPrefix=theDataTableId;var columnId='singleselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='radio' name='"+attributekey+"' id='"+selectorPrefix+'_'+item.dataBean.dtokey+"' value='"+k+"' title='"+d+"' "+itemChecked+" />";return s;}};}
var columnId='multiselector';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"<input type='checkbox' id='"+global_multiselector+"' name='all_"+attributekey+"' value='btrue' />","render":function(data,type,row,meta)
{var item=data;var k=item.dataBean.dtokey;var d=item.dataBean.dtodescr;var itemChecked="";var s="<input type='checkbox' name='"+attributekey+"' value='"+k+"' "+itemChecked+" />";return s;}};}
var columnId='indexofitem';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};}
var columnId='queryformview-tools';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-center","sTitle":"","sWidth":"30px","render":function(data,type,row,meta)
{var item=data;var s='<div class="queryformview-tools"><i class="fa fa-file-o tools-icon toolid-file" style="margin: 2px"></i></div>';return s;}};}
var columnId='userid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.userid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userid||'';}};}
var columnId='nickname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.nickname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.nickname||'';}};}
var columnId='password';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.password,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.password||'';}};}
var columnId='firstname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.firstname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.firstname||'';}};}
var columnId='lastname';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.lastname,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastname||'';}};}
var columnId='companyid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.companyid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.companyid||'';}};}
var columnId='email';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.email,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.email||'';}};}
var columnId='usertype';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.usertype,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.usertype||'';}};}
var columnId='avatarrole';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.avatarrole,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.avatarrole||'';}};}
var columnId='parentuserid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.parentuserid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.parentuserid||'';}};}
var columnId='userphoto';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.userphoto,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userphoto||'';}};}
var columnId='lastlogin';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.lastlogin,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.lastlogin||'';}};}
var columnId='numberoflogins';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.numberoflogins,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.numberoflogins||'';}};}
var columnId='userconsent';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.userconsent,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.userconsent||'';}};}
var columnId='fbuserid';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.fbuserid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.fbuserid||'';}};}
var columnId='recstatus';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};}
var columnId='rectimestamp';if(!includeOnlyFieldList||includeOnlyFieldList.indexOf(columnId)>=0)
{defaultColumnDefinitions[columnId]={"aTargets":[-1],"sClass":"text-left","sTitle":org.r3.db.system.user.user.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};}
return defaultColumnDefinitions;};jQuery.r3Utils.namespace("org.r3.db.system.user.userrole");org.r3.db.system.user.userrole.UserRoleDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_userrole";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.userid=aDataBean.userid||null;this.roleid=aDataBean.roleid||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.system.user.userrole");org.r3.db.system.user.userrole.UserRoleDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.user.userrole.UserRoleDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.system.user.userrole");org.r3.db.system.user.userrole.UserRoleQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.user.userrole.UserRoleDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"left","sTitle":"userid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.userid||'';}};defaultColumnDefinitions['roleid']={"aTargets":[-1],"sClass":"left","sTitle":"roleid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.roleid||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.user.userrole.UserRoleDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.system.user.userroleview");org.r3.db.system.user.userroleview.UserRoleViewDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_userroleview";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.userid=aDataBean.userid||null;this.roleid=aDataBean.roleid||null;this.roledescr=aDataBean.roledescr||null;}});jQuery.r3Utils.namespace("org.r3.db.system.user.userroleview");org.r3.db.system.user.userroleview.UserRoleViewDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.system.user.userroleview.UserRoleViewDTO(aDataBean));}});jQuery.r3Utils.namespace("org.r3.db.system.user.userroleview");org.r3.db.system.user.userroleview.UserRoleViewQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.system.user.userroleview.UserRoleViewDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['userid']={"aTargets":[-1],"sClass":"left","sTitle":"userid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.userid||'';}};defaultColumnDefinitions['roleid']={"aTargets":[-1],"sClass":"left","sTitle":"roleid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.roleid||'';}};defaultColumnDefinitions['roledescr']={"aTargets":[-1],"sClass":"left","sTitle":"roledescr","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.roledescr||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.system.user.userroleview.UserRoleViewDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.wbs.wbs");org.r3.db.wbs.wbs.WBSDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_wbs";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.site=aDataBean.site||null;this.wbsid=aDataBean.wbsid||null;this.wbstitle=aDataBean.wbstitle||null;this.wbstext=aDataBean.wbstext||null;this.bbstopicid=aDataBean.bbstopicid||null;this.options=aDataBean.options||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;this.rootnode=null;if(aDataBean.rootnode)
{this.rootnode=new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(aDataBean.rootnode);}
this.actors=[];if(aDataBean.actors&&aDataBean.actors.length)
{for(var i=0;i<aDataBean.actors.length;i++)
{var a=new org.r3.db.wbs.wbsactor.WBSActorDTOAdapter(aDataBean.actors[i]);this.actors.push(a);}}},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.wbs.wbs");org.r3.db.wbs.wbs.WBSDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.wbs.wbs.WBSDTO(aDataBean));},getListOfWbsNodes:function()
{var listOfNodes=[];if(this.dataBean.rootnode)
{listOfNodes=this.dataBean.rootnode.visitTree();}
return listOfNodes;},getROI:function()
{var ROI=0.0;var listOfNodes=[];if(this.dataBean.rootnode)
{listOfNodes=this.dataBean.rootnode.visitTree();if(listOfNodes&&listOfNodes.length>0)
{for(var i=0;i<listOfNodes.length;i++)
{ROI+=listOfNodes[i].getROI();}}}
return ROI;},getOptionsAsArray:function()
{if(this.dataBean.options)
return this.dataBean.options.split(',');return null;},visit:function(aVisitor,rootLast)
{if(this.dataBean.rootnode)
{this.dataBean.rootnode.visit(aVisitor,rootLast);}},getActorByRole:function(aRole,aWbsId)
{var foundActor=0;if(this.dataBean.actors)
{for(var j=0;j<this.dataBean.actors.length;j++)
{var aWBSActorDTOAdapter=this.dataBean.actors[j];if(aRole==aWBSActorDTOAdapter.dataBean.actorrole)
{if(!aWBSActorDTOAdapter.dataBean.wbsid||aWBSActorDTOAdapter.dataBean.wbsid==aWbsId)
{foundActor=aWBSActorDTOAdapter;break;}}}}
return foundActor;},getManager:function()
{return this.getActorByRole('manager',this.dataBean.wbsid);},getManagerId:function()
{var o=this.getManager();return o&&o.dataBean.actorid;},getCoach:function()
{return this.getActorByRole('coach',this.dataBean.wbsid);},getCoachId:function()
{var o=this.getCoach();return o&&o.dataBean.actorid;},getSponsor:function()
{return this.getActorByRole('sponsor');},getSponsorId:function()
{var o=this.getSponsor();return o&&o.dataBean.actorid;},isExecutiveOrCoach:function()
{var actorUserProfile=org.r3.PageManager.actorUserProfileInfo;return actorUserProfile&&(actorUserProfile.isActor(this.getManagerId())||actorUserProfile.isActor(this.getSponsorId())||actorUserProfile.isActor(this.getCoachId()));},collectWbsStatInfo:function()
{var v={numberOfActions:0,numberOfCompleted:0,numberOfLateCompleted:0,numberOfNotStarted:0,numberOfStarted:0,numberOfLateIncomplete:0,visit:function(aWbsNodeDTOAdapter)
{console.log('Visiting WBSNode: '+aWbsNodeDTOAdapter.dataBean.wbsnodeid);if(aWbsNodeDTOAdapter.isAction())
{this.numberOfActions++;if(aWbsNodeDTOAdapter.hasBeenCompleted())
{this.numberOfCompleted++;if(aWbsNodeDTOAdapter.isCompletionLate())
{this.numberOfLateCompleted++;}}
else
{if(aWbsNodeDTOAdapter.hasExpired())
{this.numberOfLateIncomplete++;}
if(aWbsNodeDTOAdapter.hasBeenStarted())
this.numberOfStarted++;else
{this.numberOfNotStarted++;}}}
return true;}};this.visit(v);return v;}});jQuery.r3Utils.namespace("org.r3.db.wbs.wbs");org.r3.db.wbs.wbs.WBSQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.wbs.wbs.WBSDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","render":function(data,type,row,meta)
{var item=data;return item.indexOfItem;}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.wbs.wbs.message.site,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.site||'';}};defaultColumnDefinitions['wbsid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.wbs.wbs.message.wbsid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.wbsid||'';}};defaultColumnDefinitions['wbstitle']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.wbs.wbs.message.wbstitle,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.wbstitle||'';}};defaultColumnDefinitions['wbstext']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.wbs.wbs.message.wbstext,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.wbstext||'';}};defaultColumnDefinitions['bbstopicid']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.wbs.wbs.message.bbstopicid,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.bbstopicid||'';}};defaultColumnDefinitions['options']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.wbs.wbs.message.options,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.options||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.wbs.wbs.message.recstatus,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":org.r3.db.wbs.wbs.message.rectimestamp,"render":function(data,type,row,meta)
{var item=data;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.wbs.wbs.WBSDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});jQuery.r3Utils.namespace("org.r3.db.wbs.wbsactor");org.r3.db.wbs.wbsactor.WBSActorDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_wbsactor";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.wbsactorid=aDataBean.wbsactorid||null;this.site=aDataBean.site||null;this.actorid=aDataBean.actorid||null;this.actorrole=aDataBean.actorrole||null;this.wbsid=aDataBean.wbsid||null;this.wbsnodeid=aDataBean.wbsnodeid||null;},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.wbs.wbsactor");org.r3.db.wbs.wbsactor.WBSActorDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.wbs.wbsactor.WBSActorDTO(aDataBean));},isManager:function(aWbsId)
{return hasRole('manager',aWbsId);},isCoach:function(aWbsId)
{return hasRole('coach',aWbsId);},isSponsor:function()
{return hasRole('sponsor');},isUser:function(aWbsId)
{return hasRole('user',aWbsId);},hasRole:function(aRole_or_arrayOfROles,aWbsId)
{if(this.dataBean.actorrole&&(!this.dataBean.wbsid||this.dataBean.wbsid==aWbsId))
{if($.isArray(aRole_or_arrayOfROles))
{if(aRole_or_arrayOfROles.indexOf(this.dataBean.actorrole)>=0)
return true;}
else
{if(this.dataBean.actorrole==aRole_or_arrayOfROles)
return true;}}
return false;}});jQuery.r3Utils.namespace("org.r3.db.wbs.wbsnode");org.r3.db.wbs.wbsnode.WBSNodeDTO=Class.extend({init:function(aDataBean)
{this.dtrowclass="grade_wbsnode";this.dtokey=aDataBean.dtokey||null;this.dtodescr=aDataBean.dtodescr||null;this.wbsnodeid=aDataBean.wbsnodeid||null;this.site=aDataBean.site||null;this.wbsid=aDataBean.wbsid||null;this.nodetype=aDataBean.nodetype||null;this.nodeorder=aDataBean.nodeorder||null;this.nodesect=aDataBean.nodesect||null;this.nodename=aDataBean.nodename||null;this.nodesummary=aDataBean.nodesummary||null;this.nodetext=aDataBean.nodetext||null;this.nodeparentid=aDataBean.nodeparentid||null;this.nodepath=aDataBean.nodepath||null;this.assignedto=aDataBean.assignedto||null;this.duration=aDataBean.duration||0;this.startdate=aDataBean.startdate||null;this.enddate=aDataBean.enddate||null;this.completiontype=aDataBean.completiontype||null;this.completiondescr=aDataBean.completiondescr||'';this.completion=aDataBean.completion||0;this.completionfrom=aDataBean.completionfrom||0;this.completionto=aDataBean.completionto||0;this.completionstatus=aDataBean.completionstatus||null;this.completiondate=aDataBean.completiondate||null;this.completioneffort=aDataBean.completioneffort||null;this.completioneffunit=aDataBean.completioneffunit||null;this.economicvalue=aDataBean.economicvalue||0;this.economicvalue2=aDataBean.economicvalue2||0;this.economicvalue3=aDataBean.economicvalue3||0;this.remarks=aDataBean.remarks||null;this.stereotype=aDataBean.stereotype||null;this.recstatus=aDataBean.recstatus||null;this.rectimestamp=aDataBean.rectimestamp||null;this.nodesectdirtiness=aDataBean.nodesectdirtiness||null;this.children=[];if(aDataBean.children)
{for(var i=0;i<aDataBean.children.length;i++)
{this.children.push(new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(aDataBean.children[i]));}}},compareTo:function(anItemId)
{if(!this.dtokey)
return-99;if(this.dtokey<anItemId)
return-1;else if(this.dtokey>anItemId)
return 1;return 0;}});jQuery.r3Utils.namespace("org.r3.db.wbs.wbsnode");org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(new org.r3.db.wbs.wbsnode.WBSNodeDTO(aDataBean));},getNodeId:function()
{return this.dataBean.dtokey;},getNodeLabel:function(addSectionNumber)
{var s=this.dataBean.dtodescr;if(addSectionNumber&&this.dataBean.nodesect)
s=this.getNodesectFormatted()+' '+s;return s;},getNodesectFormatted:function()
{var ns=null;if(this.dataBean.nodesect)
{ns=this.dataBean.nodesect.replace(/\.0/g,'.');ns=ns.replace(/^0*/g,'');}
return ns;},getDuration:function(includeUnit)
{var d='0';if(this.dataBean.duration)
d=this.dataBean.duration+'';if(includeUnit)
{d=d+' '+org.r3.db.wbs.wbsnode.message.unit_duration;}
return d;},getStartdate:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.startdate);},getEnddate:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.enddate);},getCompletiondate:function()
{return $.r3Utils.formatDataDataBeanField(this.dataBean.completiondate);},getCutOffDateMoment:function()
{if(this.isAction())
{var theDate=moment(this.getEnddate(),"DD/MM/YYYY");return theDate;}
return null;},getCompletionDateMoment:function()
{if(this.isAction()&&this.dataBean.completiondate)
{var completionDate=moment(this.getCompletiondate(),"DD/MM/YYYY");return completionDate;}
return null;},isRoot:function()
{return!this.dataBean.nodeparentid;},isAction:function()
{return this.dataBean.nodetype&&this.dataBean.nodetype=='action';},getNodedepth:function()
{var p=this.dataBean.nodepath;return Math.floor((p.length-1)/16);},getNodeHSection:function()
{var d=this.getNodedepth()+1;if(d>4)
d=4;return 4;},visitTree:function()
{var listOfNodes=[];this.visitNode(listOfNodes);return listOfNodes;},visitNode:function(aListOfNodes)
{if(!this.isRoot())
aListOfNodes.push(this);if(this.dataBean.children)
{for(var i=0;i<this.dataBean.children.length;i++)
{this.dataBean.children[i].visitNode(aListOfNodes);}}},visit:function(aVisitor,rootLast)
{if(!rootLast)
{if(!aVisitor.visit(this))
return false;}
if(this.dataBean.children)
{for(var i=0;i<this.dataBean.children.length;i++)
{if(!this.dataBean.children[i].visit(aVisitor))
return false;}}
if(rootLast)
{if(!aVisitor.visit(this))
return false;}
return true;},isEditable:function()
{var b=this.dataBean.nodetype&&this.dataBean.nodetype=='action';if(b)
b=!(this.hasBeenCompleted());return b;},getAssignedToUserName:function()
{return this.dataBean.assignedto;},getNodetypeDescr:function()
{return this.dataBean.nodetype;},getCompletioneffort:function()
{var v=(this.dataBean.completioneffort||0);return v||'0';},getEconomicvalue:function()
{var v=(this.dataBean.economicvalue||0);return v||'0';},getEconomicvalue2:function()
{var v=(this.dataBean.economicvalue2||0);return v||'0';},getCompletioneffortEValue:function()
{var v=(this.dataBean.completioneffort||0)*(this.dataBean.economicvalue3||0);return v||'0';},getROI:function()
{var effortValue=(this.dataBean.completioneffort||0)*(this.dataBean.economicvalue3||0);var roi=(this.dataBean.economicvalue||0)+effortValue;roi=(this.dataBean.economicvalue2||0)-roi;return roi;},getCompletion:function(aCompletionValue)
{var c=((aCompletionValue)?aCompletionValue:this.dataBean.completion);if(this.dataBean.completiontype=='percentage')
c=c+'%';return c;},getCompletionAsPercentage:function()
{if(!(this.dataBean.completiontype&&this.dataBean.completionstatus&&this.dataBean.completion))
return'0%';if(this.dataBean.completionstatus=='empty')
return'0%';if(this.dataBean.completiontype=='percentage')
{return this.dataBean.completion+'%';}
else
{var f=100.0*(this.dataBean.completion-this.dataBean.completionfrom)/(this.dataBean.completionto-this.dataBean.completionfrom);return Math.round(f)+'%';}
return'Err';},getCompletionDescr:function(aCompletionValue)
{var c='';if(this.dataBean.completiondescr)
c=this.dataBean.completiondescr+' '+this.getCompletion(aCompletionValue);return c;},getCompletionMinValue:function()
{return this.dataBean.completion||(this.dataBean.completiontype=='percentage'?0:this.dataBean.completionfrom);},getCompletionMaxValue:function()
{return(this.dataBean.completiontype=='percentage'?100:this.dataBean.completionto);},getCompletionDate:function()
{return $.r3Utils.formatTimestampDataBeanField(this.dataBean.completiondate);},hasBeenCompleted:function()
{return this.dataBean.completionstatus&&this.dataBean.completionstatus=='completed';},isCompletionLate:function()
{var c=this.getCompletionDateMoment();if(c&&c.startOf('day').isAfter(this.getCutOffDateMoment()))
return true;return false;},hasBeenStarted:function()
{return this.dataBean.completionstatus&&this.dataBean.completionstatus=='partial';},hasExpired:function()
{var c=this.getCutOffDateMoment();if(c&&c.endOf('day').isBefore(moment()))
return true;return false;},getCustomCSSClassName:function()
{var c='wbsnode';if(this.dataBean.nodetype)
c+=' wbs_'+this.dataBean.nodetype;if(this.dataBean.stereotype)
c+=' wbs_'+this.dataBean.stereotype;return c;},getGanttSource:function()
{var s={name:this.getNodeLabel(true),desc:'',values:[]};if(this.isAction())
{var startDate=moment(this.getStartdate(),"DD/MM/YYYY");var endDate=moment(this.getEnddate(),"DD/MM/YYYY");var barCSSClass='ganttGrey';if(this.hasBeenCompleted())
barCSSClass='ganttGreen';else if(this.hasExpired())
barCSSClass='ganttRed';else if(this.hasBeenStarted())
barCSSClass='ganttOrange';s.values.push({from:"/Date("+startDate.valueOf()+")/",to:"/Date("+endDate.valueOf()+")/",customClass:barCSSClass});}
return s;},isAssignee:function()
{var actorUserProfile=org.r3.PageManager.actorUserProfileInfo;return(this.dataBean.assignedto&&actorUserProfile&&actorUserProfile.isActor(this.dataBean.assignedto));},getTemperatureClassForNode:function()
{if(this.isAction())
{if(this.hasBeenCompleted())
{if(this.isCompletionLate())
{return org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_lateCompleted;}
else
{return org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_onTimeCompleted;}}
else
{if(this.hasExpired())
{return org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_lateIncomplete;}
else
{if(this.hasBeenStarted())
{return org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_onTimeStarted;}
else
{return org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_onTimeNotStarted;}}}}
return org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_node;}});org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_node='wbsnode_temperature_node';org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_onTimeCompleted='wbsnode_temperature_onTimeCompleted';org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_onTimeStarted="wbsnode_temperature_onTimeStarted";org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_onTimeNotStarted="wbsnode_temperature_onTimeNotStarted";org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_lateCompleted="wbsnode_temperature_lateCompleted";org.r3.db.wbs.wbsnode.WBSNodeDTOTemperatureColor_lateIncomplete="wbsnode_temperature_lateIncomplete";jQuery.r3Utils.namespace("org.r3.db.wbs.wbsnode");org.r3.db.wbs.wbsnode.WBSNodeQueryActionFormView=org.r3.db.DataTableEntityActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionsHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager,optionsHash);},getAdapterFromServerData:function(serverResponseData)
{var adapter=new org.r3.db.DTOTableAdapter(serverResponseData,function(aRowDataBean){return new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(aRowDataBean);});return adapter;},_setupDefaultColumnDefinitions:function()
{var defaultColumnDefinitions={};defaultColumnDefinitions['indexofitem']={"aTargets":[-1],"sClass":"center","sTitle":"","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.indexOfItem;}};defaultColumnDefinitions['wbsnodeid']={"aTargets":[-1],"sClass":"left","sTitle":"wbsnodeid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.wbsnodeid||'';}};defaultColumnDefinitions['site']={"aTargets":[-1],"sClass":"left","sTitle":"site","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.site||'';}};defaultColumnDefinitions['wbsid']={"aTargets":[-1],"sClass":"left","sTitle":"wbsid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.wbsid||'';}};defaultColumnDefinitions['nodetype']={"aTargets":[-1],"sClass":"left","sTitle":"nodetype","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.nodetype||'';}};defaultColumnDefinitions['nodeorder']={"aTargets":[-1],"sClass":"left","sTitle":"nodeorder","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.nodeorder||'';}};defaultColumnDefinitions['nodesect']={"aTargets":[-1],"sClass":"left","sTitle":"nodesect","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.nodesect||'';}};defaultColumnDefinitions['nodename']={"aTargets":[-1],"sClass":"left","sTitle":"nodename","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.nodename||'';}};defaultColumnDefinitions['nodesummary']={"aTargets":[-1],"sClass":"left","sTitle":"nodesummary","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.nodesummary||'';}};defaultColumnDefinitions['nodetext']={"aTargets":[-1],"sClass":"left","sTitle":"nodetext","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.nodetext||'';}};defaultColumnDefinitions['nodeparentid']={"aTargets":[-1],"sClass":"left","sTitle":"nodeparentid","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.nodeparentid||'';}};defaultColumnDefinitions['nodepath']={"aTargets":[-1],"sClass":"left","sTitle":"nodepath","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.nodepath||'';}};defaultColumnDefinitions['assignedto']={"aTargets":[-1],"sClass":"left","sTitle":"assignedto","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.assignedto||'';}};defaultColumnDefinitions['duration']={"aTargets":[-1],"sClass":"left","sTitle":"duration","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.duration||'';}};defaultColumnDefinitions['startdate']={"aTargets":[-1],"sClass":"left","sTitle":"startdate","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.startdate||'';}};defaultColumnDefinitions['enddate']={"aTargets":[-1],"sClass":"left","sTitle":"enddate","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.enddate||'';}};defaultColumnDefinitions['completiontype']={"aTargets":[-1],"sClass":"left","sTitle":"completiontype","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completiontype||'';}};defaultColumnDefinitions['completionstatus']={"aTargets":[-1],"sClass":"left","sTitle":"completionstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completionstatus||'';}};defaultColumnDefinitions['completiondescr']={"aTargets":[-1],"sClass":"left","sTitle":"completiondescr","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completiondescr||'';}};defaultColumnDefinitions['completion']={"aTargets":[-1],"sClass":"left","sTitle":"completion","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completion||'';}};defaultColumnDefinitions['completionfrom']={"aTargets":[-1],"sClass":"left","sTitle":"completionfrom","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completionfrom||'';}};defaultColumnDefinitions['completionto']={"aTargets":[-1],"sClass":"left","sTitle":"completionto","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completionto||'';}};defaultColumnDefinitions['completiondate']={"aTargets":[-1],"sClass":"left","sTitle":"completiondate","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completiondate||'';}};defaultColumnDefinitions['completioneffort']={"aTargets":[-1],"sClass":"left","sTitle":"completioneffort","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completioneffort||'';}};defaultColumnDefinitions['completioneffunit']={"aTargets":[-1],"sClass":"left","sTitle":"completioneffunit","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.completioneffunit||'';}};defaultColumnDefinitions['economicvalue']={"aTargets":[-1],"sClass":"left","sTitle":"economicvalue","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.economicvalue||'';}};defaultColumnDefinitions['economicvalue2']={"aTargets":[-1],"sClass":"left","sTitle":"economicvalue2","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.economicvalue2||'';}};defaultColumnDefinitions['economicvalue3']={"aTargets":[-1],"sClass":"left","sTitle":"economicvalue3","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.economicvalue3||'';}};defaultColumnDefinitions['remarks']={"aTargets":[-1],"sClass":"left","sTitle":"remarks","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.remarks||'';}};defaultColumnDefinitions['stereotype']={"aTargets":[-1],"sClass":"left","sTitle":"stereotype","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.stereotype||'';}};defaultColumnDefinitions['recstatus']={"aTargets":[-1],"sClass":"left","sTitle":"recstatus","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.recstatus||'';}};defaultColumnDefinitions['rectimestamp']={"aTargets":[-1],"sClass":"left","sTitle":"rectimestamp","fnRender":function(oObj,sVal)
{var item=oObj.aData;return item.dataBean.rectimestamp||'';}};return defaultColumnDefinitions;},addRawItem:function(anItem)
{var adaptedItem=new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(anItem);this.addItem(adaptedItem);},addAdaptedItem:function(anAdaptedItem)
{this.addItem(anAdaptedItem);}});$.r3Utils.namespace("org.r3.discussion");org.r3.discussion.NavigatorActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.discussion.NavigatorActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(pageInfo,cardInfo,topicInfo,anOptionsHash)
{var defaults={newThread:false};var options=$.extend({},defaults,anOptionsHash);this.detailView.open(pageInfo,cardInfo,topicInfo,options);},openThreadDetailActionFormPanel:function(aTopicId,aThreadId)
{this.pageManager.openThreadDetailActionFormPanel(aTopicId,aThreadId);},openTopicInfoActionFormPanel:function(aTopicDTOAdapter)
{this.pageManager.openTopicInfoActionFormPanel(aTopicDTOAdapter);}});$.r3Utils.namespace("org.r3.discussion");org.r3.discussion.NavigatorActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.gmenubarInitialized=false;this.topicDTOAdapter=null;},close:function()
{this.hide();},open:function(pageInfo,cardInfo,aTopicInfo,options)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];var threadUrl=org.r3.PageManager.getRESTUrl("GET_BBSThreads_InTopic",[aTopicInfo.topicid]);networkRequestsQueue.push({id:"threads",type:"Get",url:threadUrl,dataType:"json"});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_BBSTopicDetail",[aTopicInfo.topicid]);networkRequestsQueue.push({id:"topic_detail",type:"Get",url:resolvedUrl,dataType:"json"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_Page'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var threads=responseData["threads"];if(threads)
{threads=new org.r3.db.DTOTableAdapter(threads,function(aRowDataBean){return new org.r3.db.bbs.bbsthread.BBSThreadDTOAdapter(aRowDataBean);});}
var topicDTOAdapter=responseData["topic_detail"];if(topicDTOAdapter)
{this.topicDTOAdapter=new org.r3.db.bbs.bbstopic.BBSTopicDTOAdapter(topicDTOAdapter);}
this.createGMenuBar(threads,options);var resolvedUrl=org.r3.PageManager.getRESTUrl("LUT_CMS_Page");var lutItem=org.r3.PageManager.lutManager.getLUTItem(resolvedUrl,org.r3.Constants.site+'_'+pageInfo.pageid);if(lutItem)
{this.pageDTOAdapter=new org.r3.db.cms.page.PageDTOAdapter(lutItem);this.pageDTOAdapter.loadPageImage('#page_image');}
if(topicDTOAdapter)
{this.openTopicInfoActionFormPanel(this.topicDTOAdapter);}
this.show();}),function(d)
{console.error("controller did not load");});},createGMenuBar:function(aListOfBBSThreadDTOAdapter,options)
{var gemnubarCfg={};gemnubarCfg.sections=[];if(options.newThread)
{gemnubarCfg.mainaction={id:'gmenubar_act_newthread',actionId:'gmenubar_act_newthread',title:"Report",onClick:$.r3Utils.hitch(this,this._onGMenuBarClick)};}
var threadDTOAdapter=null;if(aListOfBBSThreadDTOAdapter.getNumberOfItems()>0)
{var sectBBS={type:'section',id:'gmenubar_sect_bbs',bottom_border:true,items:[]};gemnubarCfg.sections.push(sectBBS);for(var i=0;i<aListOfBBSThreadDTOAdapter.getNumberOfItems();i++)
{var aBBSThreadDTOAdapter=aListOfBBSThreadDTOAdapter.getItem(i);sectBBS.items.push({id:aBBSThreadDTOAdapter.dataBean.threadid,actionId:'bbs_thread',topicId:aBBSThreadDTOAdapter.dataBean.topicid,title:aBBSThreadDTOAdapter.dataBean.threadtitle,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:(i==0)});if(i==0)
threadDTOAdapter=aBBSThreadDTOAdapter;}}
$('#gmenubar').gmenubar(gemnubarCfg);this.gmenubarInitialized=true;if(threadDTOAdapter)
this.openThreadDetailActionFormPanel(this.topicDTOAdapter,threadDTOAdapter.dataBean.threadid);},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.actionId=='gmenubar_act_fullreport')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gmenubar').gmenubar('select',e.id);this.openFullReportPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{this.deleteActorGroup(e.id);}
else
{$('#gmenubar').gmenubar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.actionId)
{case'bbs_thread':this.openThreadDetailActionFormPanel(this.topicDTOAdapter,e.id);break;}}}},openThreadDetailActionFormPanel:function(aTopicDTOAdapter,aThreadId)
{$('#gmenubar').gmenubar('select',aThreadId);this.actionFormManager.openThreadDetailActionFormPanel(aTopicDTOAdapter,aThreadId);},openTopicInfoActionFormPanel:function(aTopicDTOAdapter)
{this.actionFormManager.openTopicInfoActionFormPanel(aTopicDTOAdapter);}});$.r3Utils.namespace("org.r3.discussion");org.r3.discussion.PageManager={init:function(pageInfo,cardInfo,topicInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.navigator=new org.r3.discussion.NavigatorActionForm(this,"#navigatorActionForm");this.bbsThreadPortletActionForm=new org.r3.jsportlet.timeline.BBSThreadPortletActionForm(this,"#threadActionForm");org.r3.PageManager.pushHomeBreadCrumb();this.openNavigator(pageInfo,cardInfo,topicInfo);},openNavigator:function(pageInfo,cardInfo,topicInfo)
{var _self=this;this.navigator.open(pageInfo,cardInfo,topicInfo);},openThreadDetailActionFormPanel:function(aTopicDTOAdapter,aBBSThreadId)
{org.r3.PageManager.pushBreadCrumb({"title":aTopicDTOAdapter.dataBean.topictitle,"actionForm":this.bbsThreadPortletActionForm});this.bbsThreadPortletActionForm.open(aTopicDTOAdapter.dataBean.topicid,aBBSThreadId,{});},openTopicInfoActionFormPanel:function(aTopicDTOAdapter)
{console.log("Display Card: "+aTopicDTOAdapter.dataBean.cardid);$("#topicCmsPageActionForm").cmsCard({card_tmpl:'cms_tpl_simple',cardid:aTopicDTOAdapter.dataBean.cardid,onComplete:function(aCardDTOAdapter,numberOfItems)
{if(numberOfItems)
{var listOfGalleryImages=aCardDTOAdapter.getListOfPropertiesByPropertyrole('cms_img_gallery');if(listOfGalleryImages&&listOfGalleryImages.length)
{_self.cardGalleryView=new org.r3.jsportlet.cms.CMSPage_GalleryView(_self.documentListDivLocator+' #'+aCardId+'_cms_gallery_canvas',aCardId,listOfGalleryImages,25);_self.cardGalleryView.open();}}}});}};$.r3Utils.namespace("org.r3.home.defaultsite");org.r3.home.defaultsite.HomePageActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.home.defaultsite.HomePageActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(siteTypeFilter)
{this.detailView.open(siteTypeFilter);}});$.r3Utils.namespace("org.r3.home.defaultsite");org.r3.home.defaultsite.HomePageActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(siteTypeFilter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/home/defaultsite/HomePageActionForm.html.jsp'),dataType:"html"});if(siteTypeFilter)
{networkRequestsQueue.push({id:"events",type:"Get",url:org.r3.PageManager.getRESTUrl('LUT_Site_OfType',[siteTypeFilter]),dataType:"json"});}
else
{networkRequestsQueue.push({id:"events",type:"Get",url:org.r3.PageManager.getRESTUrl('LUT_Site'),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var events=responseData["events"];var templatedHtml=tmpl(responseData['view'],events);$(this.htmlContainerId).html(templatedHtml);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.home.defaultsite");org.r3.home.defaultsite.PageManager={init:function(siteTypeFilter)
{org.r3.PageManager.googleAnalyticsSendPageView();this.homePageActionForm=new org.r3.home.defaultsite.HomePageActionForm(this,'#homePageActionForm');this.homePageActionForm.open(siteTypeFilter);}};$.r3Utils.namespace("org.r3.home.mastersite");org.r3.home.mastersite.HomePageActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.home.mastersite.HomePageActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(siteTypeFilter)
{this.detailView.open(siteTypeFilter);}});$.r3Utils.namespace("org.r3.home.mastersite");org.r3.home.mastersite.HomePageActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(siteTypeFilter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/home/mastersite/HomePageActionForm.html.jsp'),dataType:"html"});if(siteTypeFilter)
{networkRequestsQueue.push({id:"events",type:"Get",url:org.r3.PageManager.getRESTUrl('LUT_Site_Children'),dataType:"json"});}
else
{networkRequestsQueue.push({id:"events",type:"Get",url:org.r3.PageManager.getRESTUrl('LUT_Site'),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var events=responseData["events"];var templatedHtml=tmpl(responseData['view'],events);$(this.htmlContainerId).html(templatedHtml);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.home.mastersite");org.r3.home.mastersite.PageManager={init:function(siteTypeFilter)
{org.r3.PageManager.googleAnalyticsSendPageView();this.homePageActionForm=new org.r3.home.mastersite.HomePageActionForm(this,'#homePageActionForm');this.homePageActionForm.open(siteTypeFilter);}};$.r3Utils.namespace("org.r3.home.shakeus");org.r3.home.shakeus.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();this.mapExplorerActionForm=new org.r3.jsportlet.mapexplore.MapExplorerActionForm(this,'#JSPortlet_MapExplorerActionForm');this.mapExplorerActionForm.open();}};$.r3Utils.namespace("org.r3.home.shakeus_guest");org.r3.home.shakeus_guest.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();this.loginActionForm=new org.r3.jsportlet.login.LoginActionForm(this,'#JSPortlet_LoginActionForm',{"templateFileName":"ShakeUsLoginActionForm.html"});if(!org.r3.PageManager.isSmallDevice())
{$('#ShakeUSSplash').cmsCard({pageid:'CMSCARD_PAGEID_PARAM',card_tmpl:"cms_tpl_embeddedfragments",cardid:"SHKSPLASH",site:org.r3.SiteConstants.sitedomain,onComplete:function(responseInfo,totalNumberOfItems)
{}});$('#ShakeUSSplash2').cmsCard({pageid:'CMSCARD_PAGEID_PARAM',card_tmpl:"cms_tpl_embeddedfragments",cardid:"SHKSPLASH2",site:org.r3.SiteConstants.sitedomain,onComplete:function(responseInfo,totalNumberOfItems)
{}});}
$('#ShakeUSSplash3').cmsCard({pageid:'CMSCARD_PAGEID_PARAM',card_tmpl:"cms_tpl_embeddedfragments",cardid:"SHKSPLASH3",site:org.r3.SiteConstants.sitedomain,onComplete:function(responseInfo,totalNumberOfItems)
{}});this.registrationActionForm=new org.r3.jsportlet.registration.RegistrationActionForm(this,'#JSPortlet_RegistrationActionForm');this.loginActionForm.open();this.registrationActionForm.open({templateHtml:'RegistrationActionForm_Mod2.html'});}};$.r3Utils.namespace("org.r3.home.shakeusneighb");org.r3.home.shakeusneighb.PageManager={init:function(aPostId)
{var _self=this;org.r3.PageManager.googleAnalyticsSendPageView();this.mongoTimelineTunerActionForm=new org.r3.jsportlet.mongotimeline.tuner.TimelineTunerActionForm(this,'#jsportlet_mongo_timelinetuner');this.mongoTimelineActionForm=new org.r3.jsportlet.mongotimeline.TimelineActionForm(this,'#jsportlet_mongo_timeline');this.mongoPostActionForm=new org.r3.jsportlet.mongotimeline.PostActionForm(this,'#jsportlet_mongo_timeline');if(aPostId)
this.openPostActionForm(aPostId);else this.mongoTimelineTunerActionForm.open(this.mongoTimelineActionForm);this.siteMembersActionForm=new org.r3.jsportlet.site.sitemember.SiteMemberPortletActionForm(this,'#JSPortlet_SiteMembers');var pleaseLoginCanvas="#JSPortlet_PleaseLogInOrRegister";this.pleaseLogInOrRegisterActionForm=new org.r3.jsportlet.site.please_login_or_register.PleaseLogInOrRegisterPortletActionForm(this,pleaseLoginCanvas);this.photoSideBar=new org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionForm(this,'#JSPortlet_RandomPhotoSideBar');this.pleaseLogInOrRegisterActionForm.open();this.siteMembersActionForm.open();this.photoSideBar.open();$('.timeline-action').unbind().click(function(e)
{var dataTimelineId=$(e.currentTarget).attr('data-timelineid');switch(dataTimelineId)
{case'tuner':_self.mongoTimelineTunerActionForm.open(_self.mongoTimelineActionForm);break;case'news':var timelineParams={timelineURL:org.r3.PageManager.getRESTUrl("GET_TimelineOfPosts",[org.r3.Constants.site,org.r3.Constants.language])+"&status=published&groups=news"};_self.mongoTimelineTunerActionForm.close();_self.mongoTimelineActionForm.open(null,timelineParams);break;}});},activateMongoTimeline:function(aSetOfTimelineOpeningParams)
{this.mongoTimelineActionForm.open(this.mongoTimelineTunerActionForm,aSetOfTimelineOpeningParams);},openPostActionForm:function(aPostId)
{this.mongoPostActionForm.open(aPostId);}};$.r3Utils.namespace("org.r3.home.shkshop");org.r3.home.shkshop.PageManager={init:function(aPostId)
{org.r3.PageManager.googleAnalyticsSendPageView();this.execute();this.mongoTimelineTunerActionForm=new org.r3.jsportlet.mongotimeline.tuner.TimelineTunerActionForm(this,'#jsportlet_mongo_timelinetuner');this.mongoTimelineActionForm=new org.r3.jsportlet.mongotimeline.TimelineActionForm(this,'#jsportlet_mongo_timeline');this.mongoPostActionForm=new org.r3.jsportlet.mongotimeline.PostActionForm(this,'#jsportlet_mongo_timeline');if(aPostId)
this.openPostActionForm(aPostId);else this.mongoTimelineTunerActionForm.open(this.mongoTimelineActionForm);this.siteMembersActionForm=new org.r3.jsportlet.site.sitemember.SiteMemberPortletActionForm(this,'#JSPortlet_SiteMembers');var pleaseLoginCanvas="#JSPortlet_PleaseLogInOrRegister";this.pleaseLogInOrRegisterActionForm=new org.r3.jsportlet.site.please_login_or_register.PleaseLogInOrRegisterPortletActionForm(this,pleaseLoginCanvas);this.pleaseLogInOrRegisterActionForm.open();this.siteMembersActionForm.open();$('.timeline-action').unbind().click(function(e)
{var dataTimelineId=$(e.currentTarget).attr('data-timelineid');switch(dataTimelineId)
{case'tuner':_self.mongoTimelineTunerActionForm.open(_self.mongoTimelineActionForm);break;case'news':var timelineParams={timelineURL:org.r3.PageManager.getRESTUrl("GET_TimelineOfPosts",[org.r3.Constants.site,org.r3.Constants.language])+"&status=published&groups=news"};_self.mongoTimelineTunerActionForm.close();_self.mongoTimelineActionForm.open(null,timelineParams);break;}});},activateMongoTimeline:function(aSetOfTimelineOpeningParams)
{this.mongoTimelineActionForm.open(this.mongoTimelineTunerActionForm,aSetOfTimelineOpeningParams);},openPostActionForm:function(aPostId)
{this.mongoPostActionForm.open(aPostId);},execute:function()
{var colour=["rgb(142, 68, 173)","rgb(243, 156, 18)","rgb(211, 84, 0)","rgb(0, 106, 63)","rgb(41, 128, 185)","rgb(192, 57, 43)","rgb(135, 0, 0)","rgb(39, 174, 96)"];var wall=new Freewall("#freewall");wall.reset({selector:'.brick',animate:true,fixSize:null,cellW:100,cellH:100,delay:50,onResize:function(){wall.fitWidth();}});wall.fitWidth();var temp='<div class="brick {size}" style="background-color: {color}"><div class="cover"></div></div>';var size="size33 size32 size31 size23 size22 size21 size13 size12 size11".split(" ");$(".add-more").click(function(){var html="";for(var i=0;i<1;++i){html+=temp.replace('{size}',size[size.length*Math.random()<<0]).replace('{color}',colour[colour.length*Math.random()<<0]);}
wall.appendBlock(html);});}};$.r3Utils.namespace("org.r3.home.site");org.r3.home.site.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();if(org.r3.PageManager.userInfo.isGuest())
{this.loginActionForm=this._initializeSlots('JSPortlet_HomeLoginActionForm');this.wbsesActionForms=null;}
else
{this.loginActionForm=null;this.wbsesActionForms=this._initializeSlots('JSPortlet_MyWbsesPortletActionForm');}
this.myFlowPlayerActionForm=this._initializeSlots('JSPortlet_FlowPlayerPortletActionForm');this.myWbsActionsActionForms=this._initializeSlots('JSPortlet_MyWbsActionsPortletActionForm');this.myappActionForm=this._initializeSlots('JSPortlet_MyAppActionForm');this.homeEntryListActionForm=this._initializeSlots('JSPortlet_HomeEntryListActionForm');this.homeCalendarActionForm=this._initializeSlots('JSPortlet_HomeCalendarActionForm');this.homeNORActionForm=this._initializeSlots('JSPortlet_HomeNORActionForm');this.homeCardActionForms=this._initializeSlots('JSPortlet_HomeCardActionForm');this.homeComunicatiActionForm=this._initializeSlots('JSPortlet_HomeComunicatiActionForm');this.homeTrackerActionForm=this._initializeSlots('JSPortlet_HomeTrackerActionForm');this.homeRankingActionForm=this._initializeSlots('JSPortlet_HomeRankingActionForm');this.homeYachtClubActionForm=this._initializeSlots('JSPortlet_HomeYachtClubActionForm');this.homeChannelActionForm=this._initializeSlots('JSPortlet_HomeChannelsActionForm');this.homeVideoActionForms=this._initializeSlots('JSPortlet_HomeVideoActionForm');this.homeTwitterActionForms=this._initializeSlots('JSPortlet_HomeTwitterActionForm');this.homeFaceBookActionForms=this._initializeSlots('JSPortlet_HomeFaceBookActionForm');this.homeQuizActionForms=this._initializeSlots('JSPortlet_HomeQuizActionForm');if($('#JSPortlet_HomeIconMenuActionForm').length)
this.homeIconMenuActionForm=new org.r3.jsportlet.sev.homeiconmenu.HomeIconMenuActionForm(this,'#JSPortlet_HomeIconMenuActionForm');org.r3.PageManager.pushHomeBreadCrumb();var actionForms=null;actionForms=this.loginActionForm;this._openSlot(actionForms);actionForms=this.myFlowPlayerActionForm;this._openSlot(actionForms);actionForms=this.myWbsActionsActionForms;this._openSlot(actionForms);actionForms=this.myappActionForm;this._openSlot(actionForms);actionForms=this.homeEntryListActionForm;this._openSlot(actionForms);actionForms=this.homeCalendarActionForm;this._openSlot(actionForms);actionForms=this.homeNORActionForm;this._openSlot(actionForms);actionForms=this.homeCardActionForms;this._openSlot(actionForms);actionForms=this.homeComunicatiActionForm;this._openSlot(actionForms);actionForms=this.homeTrackerActionForm;this._openSlot(actionForms);actionForms=this.homeRankingActionForm;this._openSlot(actionForms);actionForms=this.homeYachtClubActionForm;this._openSlot(actionForms);actionForms=this.homeVideoActionForms;this._openSlot(actionForms);actionForms=this.homeTwitterActionForms;this._openSlot(actionForms);actionForms=this.homeFaceBookActionForms;this._openSlot(actionForms);actionForms=this.wbsesActionForms;this._openSlot(actionForms);actionForms=this.homeQuizActionForms;this._openSlot(actionForms);if(this.homeIconMenuActionForm)
this.homeIconMenuActionForm.open();},_openSlot:function(actionFormArray)
{if(actionFormArray&&actionFormArray.length)
{for(var i=0;i<actionFormArray.length;i++)
actionFormArray[i].open();}},_initializeSlots:function(className)
{var actionforms=[];var jsPortletFactory=new org.r3.jsportlet.JSPortletFactory();var portletJsClassName=$('.'+className);for(var i=0;i<portletJsClassName.length;i++)
{var item=$(portletJsClassName[i]);var slotId=item.attr("id");var dataCardId=item.attr("data-cardid");var dataOptions=item.attr("data-options");switch(className)
{case'JSPortlet_HomeVideoActionForm':if(!dataOptions)
dataOptions='cms_tpl_embeddedfragments';break;}
var portletActionForm=jsPortletFactory.newPortlet(this,className,slotId,dataCardId,dataOptions);if(portletActionForm)
actionforms.push(portletActionForm);}
return actionforms;}};$.r3Utils.namespace("org.r3.home.speedsails");org.r3.home.speedsails.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();this.newsletterSubscriptionActionForm=new org.r3.jsportlet.newslettersubscription.NewsletterSubscriptionActionForm(this,'#JSPortlet_NewsLetterActionForm');this.newsletterSubscriptionActionForm.open({template:"Home_NewsletterSubscriptionActionForm.html"});this.pageId='__HOME__';$("#homecarouselview").cmsCard({card_tmpl:"cms_tpl_homecarouselview",cardquery:"groupid=c_homecarousel",pageid:this.pageId,onComplete:function()
{$("#homecarouselview_canvas").carouFredSel({responsive:true,scroll:{fx:"crossfade"},items:{visible:1,height:"25%",width:1690}});}});$("#JSPortlet_HomeChannelsActionForm").cmsCard({card_tmpl:"cms_tpl_channelportlet",cardquery:"channelid=CHN09&channelfilter=none",pageid:this.pageId,onComplete:function(responseData,numberOfCards)
{if(numberOfCards)
$("#JSPortlet_HomeChannelsActionForm").show();}});$('#home_splash').cmsCard({card_tmpl:"cms_tpl_simple",cardid:"HOME_SPLASH",});$("#homearticles").cmsCard({card_tmpl:"cms_tpl_homearticles",cardquery:"groupid=homearticles&orderby=refdate desc",iDisplayStart:0,iDisplayLength:10,fetchmode:'partial',pageid:this.pageId,onComplete:function()
{}});}};$.r3Utils.namespace("org.r3.home.speedsails");org.r3.home.speedsails.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();this.newsletterSubscriptionActionForm=new org.r3.jsportlet.newslettersubscription.NewsletterSubscriptionActionForm(this,'#JSPortlet_NewsLetterActionForm');this.newsletterSubscriptionActionForm.open({template:"Home_NewsletterSubscriptionActionForm.html"});this.pageId='__HOME__';$("#homecarouselview").cmsCard({card_tmpl:"cms_tpl_homecarouselview",cardquery:"groupid=c_homecarousel",pageid:this.pageId,onComplete:function()
{$("#homecarouselview_canvas").carouFredSel({responsive:true,scroll:{fx:"crossfade"},items:{visible:1,height:"25%",width:1690}});}});$("#JSPortlet_HomeChannelsActionForm").cmsCard({card_tmpl:"cms_tpl_channelportlet",cardquery:"channelid=CHN09&channelfilter=none",pageid:this.pageId,onComplete:function(responseData,numberOfCards)
{if(numberOfCards)
$("#JSPortlet_HomeChannelsActionForm").show();}});$('#home_splash').cmsCard({card_tmpl:"cms_tpl_simple",cardid:"HOME_SPLASH",});$("#homearticles").cmsCard({card_tmpl:"cms_tpl_homearticles",cardquery:"groupid=homearticles&orderby=refdate desc",iDisplayStart:0,iDisplayLength:10,fetchmode:'partial',pageid:this.pageId,onComplete:function()
{}});}};$.r3Utils.namespace("org.r3.home.workshop");org.r3.home.workshop.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();if(org.r3.PageManager.userInfo.isGuest())
{this.loginActionForm=this._initializeSlots('JSPortlet_HomeLoginActionForm');this.wbsesActionForms=null;}
else
{this.loginActionForm=null;this.wbsesActionForms=this._initializeSlots('JSPortlet_MyWbsesPortletActionForm');}
this.myFlowPlayerActionForm=this._initializeSlots('JSPortlet_FlowPlayerPortletActionForm');this.myWbsActionsActionForms=this._initializeSlots('JSPortlet_MyWbsActionsPortletActionForm');this.myappActionForm=this._initializeSlots('JSPortlet_MyAppActionForm');this.homeEntryListActionForm=this._initializeSlots('JSPortlet_HomeEntryListActionForm');this.homeCalendarActionForm=this._initializeSlots('JSPortlet_HomeCalendarActionForm');this.homeNORActionForm=this._initializeSlots('JSPortlet_HomeNORActionForm');this.homeCardActionForms=this._initializeSlots('JSPortlet_HomeCardActionForm');this.homeComunicatiActionForm=this._initializeSlots('JSPortlet_HomeComunicatiActionForm');this.homeTrackerActionForm=this._initializeSlots('JSPortlet_HomeTrackerActionForm');this.homeRankingActionForm=this._initializeSlots('JSPortlet_HomeRankingActionForm');this.homeYachtClubActionForm=this._initializeSlots('JSPortlet_HomeYachtClubActionForm');this.homeChannelActionForm=this._initializeSlots('JSPortlet_HomeChannelsActionForm');this.homeVideoActionForms=this._initializeSlots('JSPortlet_HomeVideoActionForm');this.homeTwitterActionForms=this._initializeSlots('JSPortlet_HomeTwitterActionForm');this.homeFaceBookActionForms=this._initializeSlots('JSPortlet_HomeFaceBookActionForm');if($('#JSPortlet_HomeIconMenuActionForm').length)
this.homeIconMenuActionForm=new org.r3.jsportlet.sev.homeiconmenu.HomeIconMenuActionForm(this,'#JSPortlet_HomeIconMenuActionForm');org.r3.PageManager.pushHomeBreadCrumb();var actionForms=null;actionForms=this.loginActionForm;this._openSlot(actionForms);actionForms=this.myFlowPlayerActionForm;this._openSlot(actionForms);actionForms=this.myWbsActionsActionForms;this._openSlot(actionForms);actionForms=this.myappActionForm;this._openSlot(actionForms);actionForms=this.homeEntryListActionForm;this._openSlot(actionForms);actionForms=this.homeCalendarActionForm;this._openSlot(actionForms);actionForms=this.homeNORActionForm;this._openSlot(actionForms);actionForms=this.homeCardActionForms;this._openSlot(actionForms);actionForms=this.homeComunicatiActionForm;this._openSlot(actionForms);actionForms=this.homeTrackerActionForm;this._openSlot(actionForms);actionForms=this.homeRankingActionForm;this._openSlot(actionForms);actionForms=this.homeYachtClubActionForm;this._openSlot(actionForms);actionForms=this.homeVideoActionForms;this._openSlot(actionForms);actionForms=this.homeTwitterActionForms;this._openSlot(actionForms);actionForms=this.homeFaceBookActionForms;this._openSlot(actionForms);actionForms=this.wbsesActionForms;this._openSlot(actionForms);if(this.homeIconMenuActionForm)
this.homeIconMenuActionForm.open();},_openSlot:function(actionFormArray)
{if(actionFormArray&&actionFormArray.length)
{for(var i=0;i<actionFormArray.length;i++)
actionFormArray[i].open();}},_initializeSlots:function(className)
{var actionforms=[];var jsPortletFactory=new org.r3.jsportlet.JSPortletFactory();var portletJsClassName=$('.'+className);for(var i=0;i<portletJsClassName.length;i++)
{var item=$(portletJsClassName[i]);var slotId=item.attr("id");var dataCardId=item.attr("data-cardid");var dataOptions=item.attr("data-options");switch(className)
{case'JSPortlet_HomeVideoActionForm':if(!dataOptions)
dataOptions='cms_tpl_embeddedfragments';break;}
var portletActionForm=jsPortletFactory.newPortlet(this,className,slotId,dataCardId,dataOptions);if(portletActionForm)
actionforms.push(portletActionForm);}
return actionforms;}};$.r3Utils.namespace("org.r3.home.yachtclubsite");org.r3.home.yachtclubsite.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();if(org.r3.Constants.isI18NTranslationRequired())
{$.i18n.loadNamespace("org.r3.home.yachtclubsite",function(){var start=$.r3Utils.logElapsedTime();$("body").i18n();$.r3Utils.logElapsedTime(start);});}
this.newsletterSubscriptionActionForm=new org.r3.jsportlet.newslettersubscription.NewsletterSubscriptionActionForm(this,'#JSPortlet_NewsLetterActionForm');this.newsletterSubscriptionActionForm.open({template:"Home_NewsletterSubscriptionActionForm.html"});this.pageId='__HOME__';$("#homecarouselview").cmsCard({card_tmpl:"cms_tpl_homecarouselview",cardquery:"groupid=c_homecarousel",pageid:this.pageId,onComplete:function()
{$("#homecarouselview_canvas").carouFredSel({responsive:true,scroll:{fx:"crossfade"},items:{visible:1,height:"25%",width:1690}});}});$("#sponsorcarouselview").cmsCard({card_tmpl:"cms_tpl_sponsorsview",cardquery:"groupid=sponsorcarousel",pageid:this.pageId,onComplete:function()
{$("#sponsorcarouselview_canvas").carouFredSel({width:"100%",scroll:2});}});$("#friendcarouselview").cmsCard({card_tmpl:"cms_tpl_friendsview",cardquery:"groupid=friendcarousel",pageid:this.pageId});$("#JSPortlet_HomeChannelsActionForm").cmsCard({card_tmpl:"cms_tpl_channelportlet",cardquery:"channelid=CHN09&channelfilter=none",pageid:this.pageId,onComplete:function(responseData,numberOfCards)
{if(numberOfCards)
$("#JSPortlet_HomeChannelsActionForm").show();}});$("#homearticles").cmsCard({card_tmpl:"cms_tpl_homearticles",cardquery:"groupid=homearticles&orderby=refdate desc",iDisplayStart:0,iDisplayLength:10,fetchmode:'partial',pageid:this.pageId,onComplete:function()
{}});$("#homesailevent").cmsCard({card_tmpl:"cms_tpl_homesailevent",cardquery:"groupid=homesailevent&orderby=refdate desc",iDisplayStart:0,iDisplayLength:10,fetchmode:'partial',pageid:this.pageId,onComplete:function()
{}});$.getScript('http://platform.twitter.com/widgets.js');}};$.r3Utils.namespace("org.r3.jsportlet");org.r3.jsportlet.JSPortletFactory=Class.extend({init:function()
{},newPortlet:function(aPageManager,className,slotId,cmsCardId,portletOptions)
{var portletActionForm=null;switch(className)
{case'JSPortlet_HomeCardActionForm':portletActionForm=new org.r3.jsportlet.sev.homecard.HomeCardActionForm(aPageManager,'#'+slotId,cmsCardId,portletOptions);break;case'JSPortlet_HomeVideoActionForm':portletActionForm=new org.r3.jsportlet.sev.homecard.HomeCardActionForm(aPageManager,'#'+slotId,cmsCardId,portletOptions);break;case'JSPortlet_HomeTwitterActionForm':portletActionForm=new org.r3.jsportlet.sev.hometwitter.HomeTwitterActionForm(aPageManager,'#'+slotId,cmsCardId,portletOptions);break;case'JSPortlet_HomeFaceBookActionForm':portletActionForm=new org.r3.jsportlet.sev.homefacebook.HomeFaceBookActionForm(aPageManager,'#'+slotId,cmsCardId,portletOptions);break;case'JSPortlet_MyAppActionForm':portletActionForm=new org.r3.jsportlet.sev.myapp.MyAppActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeEntryListActionForm':portletActionForm=new org.r3.jsportlet.sev.homeentrylist.HomeEntryListActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeCalendarActionForm':portletActionForm=new org.r3.jsportlet.sev.homecalendar.HomeCalendarActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeNORActionForm':portletActionForm=new org.r3.jsportlet.sev.homenorlist.HomeNORActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeComunicatiActionForm':portletActionForm=new org.r3.jsportlet.sev.homecomunicati.HomeComunicatiActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeRankingActionForm':portletActionForm=new org.r3.jsportlet.sev.homeranking.HomeRankingActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeYachtClubActionForm':portletActionForm=new org.r3.jsportlet.sev.homeyachtclub.HomeYachtClubActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeTrackerActionForm':portletActionForm=new org.r3.jsportlet.sev.hometracker.HomeTrackerActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeLoginActionForm':portletActionForm=new org.r3.jsportlet.sev.homelogin.HomeLoginActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeChannelsActionForm':$('#'+slotId).cmsCard({card_tmpl:"cms_tpl_regatta_channelshomeportlet",cardquery:"channelid=CHN09",pageid:aPageManager.pageId,onComplete:function()
{}});break;case'JSPortlet_MyWbsesPortletActionForm':portletActionForm=new org.r3.jsportlet.wbs.MyWbsesPortletActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_MyWbsActionsPortletActionForm':portletActionForm=new org.r3.jsportlet.wbs.mytodolist.MyWbsNodesToDoListPortletActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_FlowPlayerPortletActionForm':portletActionForm=new org.r3.jsportlet.flowplayer.FlowPlayerPortletActionForm(aPageManager,'#'+slotId);break;case'JSPortlet_HomeQuizActionForm':portletActionForm=new org.r3.jsportlet.sev.homequiz.HomeQuizActionForm(aPageManager,'#'+slotId,portletOptions);break;}
return portletActionForm;}});$.r3Utils.namespace("org.r3.jsportlet.address");org.r3.jsportlet.address.AddressActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.addressMarkerIcon=L.AwesomeMarkers.icon({icon:'user',markerColor:'green'})
this.dummyGeoInfo2={"results":[{"address_components":[{"long_name":"30","short_name":"30","types":["street_number"]},{"long_name":"Via Roma","short_name":"Via Roma","types":["route"]},{"long_name":"Terracina","short_name":"Terracina","types":["locality","political"]},{"long_name":"Terracina","short_name":"Terracina","types":["administrative_area_level_3","political"]},{"long_name":"Provincia di Latina","short_name":"LT","types":["administrative_area_level_2","political"]},{"long_name":"Lazio","short_name":"Lazio","types":["administrative_area_level_1","political"]},{"long_name":"Italia","short_name":"IT","types":["country","political"]},{"long_name":"04019","short_name":"04019","types":["postal_code"]}],"formatted_address":"Via Roma, 30, 04019 Terracina LT, Italia","geometry":{"location":{"lat":41.2896711,"lng":13.2502455},"location_type":"ROOFTOP","viewport":{"northeast":{"lat":41.2910200802915,"lng":13.2515944802915},"southwest":{"lat":41.2883221197085,"lng":13.2488965197085}}},"place_id":"ChIJNwYq6mkjJRMR80SzzRlDGi4","types":["street_address"]}],"status":"OK"};},close:function()
{this.hide();},open:function(anAddressDTOAdapter,isTabbedLayoutFlag)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/address/AddressActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{isTabbedLayout:isTabbedLayoutFlag}));$("#addressform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.address.addressform_form_validationRules,messages:org.r3.jsportlet.address.addressform_form_validationMessages});$('#addressform_action_save').unbind().click($.r3Utils.hitch(this,this.onAddressFormSave));$('#addressform_fieldset_message').formmessage({});$("#addressform_address").unbind().blur(function(e){if($("#addressform_form").valid()){org.r3.GoogleMapsUtils.geoCodeAddress($("#addressform_address").val(),null,$('#addressform_zipcode').val(),$("#addressform_administrative_area_level_1_id option:selected").text(),$("#addressform_administrative_area_level_2_id option:selected").text().substring(0,2),$("#addressform_administrative_area_level_3_id option:selected").text(),"Italia",$.r3Utils.hitch(_self,_self.onGeoCodeAddress));}});$('#addressform_form select').cascadingSelect({lutManager:org.r3.PageManager.lutManager,withNullOption:true,ajaxUrlMode:'restful',widgetConfig:[{'widgetId':'addressform_administrative_area_level_1_id','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_ita_regione'),'value':anAddressDTOAdapter&&anAddressDTOAdapter.getAdministrative_area_level_1_id()},{'widgetId':'addressform_administrative_area_level_2_id','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_ita_regione_provincia'),'value':anAddressDTOAdapter&&anAddressDTOAdapter.getAdministrative_area_level_2_id()},{'widgetId':'addressform_administrative_area_level_3_id','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_ita_regione_provincia_localita'),'value':anAddressDTOAdapter&&anAddressDTOAdapter.getAdministrative_area_level_3_id(),'onChange':function(itemVal)
{var widgetData=$('#addressform_administrative_area_level_3_id').data('cascadingSelect');var selectInfo=widgetData.cascadingInfo.selectInfo[widgetData.widgetIndex];if(selectInfo.resolvedAjaxSource)
{var theLUTItem=org.r3.PageManager.getLUTItem(selectInfo.resolvedAjaxSource,itemVal);if(theLUTItem)
$('#addressform_zipcode').val(theLUTItem.classifieritemsattr);$('#addressform_address').focus();}}}]});this.initializeFormFields(anAddressDTOAdapter);this.initializeMap(anAddressDTOAdapter&&anAddressDTOAdapter.getLocationAsCoordsArray());}),function(d)
{console.error("controller did not load");});},initializeMap:function(anAddressLocation)
{var geoLoc=org.r3.PageManager.clientGeoLocation;if(anAddressLocation)
geoLoc=anAddressLocation;this.map=L.map('addressform_leafletmap').setView(geoLoc,13);L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map);if(anAddressLocation)
{this.marker=L.marker(anAddressLocation,{icon:this.addressMarkerIcon});this.marker.addTo(this.map);}
else this.marker=null;},initializeFormFields:function(anAddressDTOAdapter)
{if(!anAddressDTOAdapter)
return;$('#addressform_street_number').val(anAddressDTOAdapter.dataBean.snumber);$('#addressform_locality').val(anAddressDTOAdapter.dataBean.locality);$('#addressform_route').val(anAddressDTOAdapter.dataBean.route);$('#addressform_administrative_area_level_3').val(anAddressDTOAdapter.getSerializedAdminarea_l3());$('#addressform_administrative_area_level_2').val(anAddressDTOAdapter.getSerializedAdminarea_l2());$('#addressform_administrative_area_level_1').val(anAddressDTOAdapter.getSerializedAdminarea_l1());$('#addressform_country').val(anAddressDTOAdapter.getSerializedCountry());$('#addressform_postal_code').val(anAddressDTOAdapter.dataBean.postcode);$('#addressform_zipcode').val(anAddressDTOAdapter.dataBean.postcode);$('#addressform_location').val(anAddressDTOAdapter.getSerializedLocation());$('#addressform_northeast').val(anAddressDTOAdapter.getSerializedNortheast());$('#addressform_southwest').val(anAddressDTOAdapter.getSerializedSouthwest());$('#addressform_place_id').val(anAddressDTOAdapter.dataBean.gmapplaceid);$('#addressform_formatted_address').val(anAddressDTOAdapter.dataBean.formatted);$('#addressform_address').val(anAddressDTOAdapter.getRouteStreetNumber());},onAddressFormSave:function(event)
{var _self=this;if(_self.actionFormManager&&_self.actionFormManager.onAddressFormSave)
{_self.actionFormManager.onAddressFormSave();}
event.preventDefault();},onGeoCodeAddress:function(geoInfo)
{console.log("org.r3.GoogleMapsUtils::geoCodeAddress",geoInfo);var ndx=org.r3.GoogleMapsUtils.getGeoCodeStreetAddressResultIndex(geoInfo);if(ndx!=-1)
{var c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'street_number');var w=$('#addressform_street_number');if(c)
w.val(c.long_name);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'locality');w=$('#addressform_locality');if(c)
w.val(c.long_name);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'route');w=$('#addressform_route');if(c)
w.val(c.long_name);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'administrative_area_level_3');w=$('#addressform_administrative_area_level_3');if(c)
{if(c.long_name!=c.short_name)
w.val(c.short_name+'#'+c.long_name);else w.val(c.long_name);}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'administrative_area_level_2');w=$('#addressform_administrative_area_level_2');if(c)
{if(c.long_name!=c.short_name)
w.val(c.short_name+'#'+c.long_name);else w.val(c.long_name);}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'administrative_area_level_1');w=$('#addressform_administrative_area_level_1');if(c)
{if(c.long_name!=c.short_name)
w.val(c.short_name+'#'+c.long_name);else w.val(c.long_name);}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'country');w=$('#addressform_country');if(c)
{if(c.long_name!=c.short_name)
w.val(c.short_name+'#'+c.long_name);else w.val(c.long_name);}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'postal_code');w=$('#addressform_postal_code');if(c)
w.val(c.long_name);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'location');w=$('#addressform_location');if(c)
{w.val(c.lat+'#'+c.lng);var aLatLng=new L.LatLng(c.lat,c.lng);this.map.setView(aLatLng,13);if(this.marker)
{this.marker.setLatLng(aLatLng);}
else
{this.marker=L.marker(aLatLng,{icon:this.addressMarkerIcon});this.marker.addTo(this.map);}}
else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'northeast');w=$('#addressform_northeast');if(c)
w.val(c.lat+'#'+c.lng);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'southwest');w=$('#addressform_southwest');if(c)
w.val(c.lat+'#'+c.lng);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'place_id');w=$('#addressform_place_id');if(c)
w.val(c);else w.val(null);c=org.r3.GoogleMapsUtils.getGeoCodeAddressComponent(geoInfo,ndx,'formatted_address');w=$('#addressform_formatted_address');if(c)
w.val(c);else w.val(null);}}});$.r3Utils.namespace("org.r3.jsportlet.address",window,function(aNamespace)
{aNamespace.addressform_form_validationRules={administrative_area_level_1_id:{required:true},administrative_area_level_2_id:{required:true},administrative_area_level_3_id:{required:true},zipcode:{required:true,maxlength:5},address:{required:true,maxlength:40}};aNamespace.addressform_form_validationMessages={administrative_area_level_1_id:{required:org.r3.message.field_required},administrative_area_level_2_id:{required:org.r3.message.field_required},administrative_area_level_3_id:{required:org.r3.message.field_required},address:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},zipcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.bbs");org.r3.jsportlet.bbs.BBSThreadPortletActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.bbs.BBSThreadPortletView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(aTopicId,aThreadId,anOptionsHash)
{this.detailView.open(aTopicId,aThreadId);}});$.r3Utils.namespace("org.r3.jsportlet.bbs");org.r3.jsportlet.bbs.BBSThreadPortletView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.bbsTopicDTOAdapter=null;this.bbsThreadDTOAdapter=null;this.threadProfile=null;this.hasCkEditorField=false;},close:function()
{this.hide();},open:function(aBBSTopicId,aBBSThreadId)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"bbstopicdetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_BBSTopicDetail",[aBBSTopicId]),dataType:"json"});networkRequestsQueue.push({id:"bbsthreaddetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_BBSThreadDetail",[aBBSTopicId,aBBSThreadId]),dataType:"json"});networkRequestsQueue.push({id:"bbsthreadnodes",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_BBSThreadNodes_InThread",[aBBSTopicId,aBBSThreadId]),dataType:"json"});networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/bbs/BBSThreadPortletView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var bbsTopicDTOAdapter=responseData['bbstopicdetail'];if(bbsTopicDTOAdapter)
{this.bbsTopicDTOAdapter=new org.r3.db.bbs.bbstopic.BBSTopicDTOAdapter(bbsTopicDTOAdapter);}
var bbsThreadDTOAdapter=responseData['bbsthreaddetail'];if(bbsThreadDTOAdapter)
{this.bbsThreadDTOAdapter=new org.r3.db.bbs.bbsthread.BBSThreadDTOAdapter(bbsThreadDTOAdapter);}
this.threadProfile=this.bbsThreadDTOAdapter.getThreadProfile();var bbsThreadNodesDTOAdapter=responseData['bbsthreadnodes'];if(bbsThreadNodesDTOAdapter)
{this.bbsThreadNodesDTOAdapter=new org.r3.db.DTOTableAdapter(bbsThreadNodesDTOAdapter,function(aRowDataBean){return new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTOAdapter(aRowDataBean);});}
$(this.htmlContainerId).html(tmpl(responseData['view'],{threadProfile:this.threadProfile}));$('#bbsthreadportletviewactionform_threadtitle').html(this.bbsThreadDTOAdapter.dataBean.threadtitle);$("#bbsthreadportletviewactionform_form_template").load(org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+this.threadProfile.getNewPostTemplate()),function(){$('#bbsthreadportletviewactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.bbs.bbsthreadportletviewactionform_form_validationRules,messages:org.r3.jsportlet.bbs.bbsthreadportletviewactionform_form_validationMessages});if($("#bbsthreadportletviewactionform_nodetext[class=ckeditor]").length>0)
{$('#bbsthreadportletviewactionform_nodetext').ckeditor();_self.hasCkEditorField=true;}});for(var i=0;i<this.bbsThreadNodesDTOAdapter.getNumberOfItems();i++)
{this._appendPost(this.bbsTopicDTOAdapte,this.bbsThreadDTOAdapter,this.bbsThreadNodesDTOAdapter.getItem(i));}
this._showNumberOfComments(this.bbsThreadNodesDTOAdapter.getNumberOfItems());$('#bbsthreadportletviewactionform_fieldset_message').formmessage({});$('#bbsthreadportletviewactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onSaveItem));$('#bbsthreadportletviewactionform_action_startnew').unbind().click($.r3Utils.hitch(this,this._onOpenSubmissionForm));$('#bbsthreadportletviewactionform_action_clearform').click($.r3Utils.hitch(this,this._onCancelSubmission));$('#bbsthreadportletviewactionform_threadposts_cnt').click($.r3Utils.hitch(this,this._onClickOnThreadPosts));if(org.r3.PageManager.userInfo.isGuest())
{$('#bbsthreadportletviewactionform_action_startnew_actionbar').hide();}
this.show();}),function(d)
{console.error("controller did not load");});},_showNumberOfComments:function(numberOfPosts)
{var m=numberOfPosts+' '+this.threadProfile.getLabels().multiplePosts;if(numberOfPosts==1)
m=numberOfPosts+' '+this.threadProfile.getLabels().singlePost;$('#bbsthreadportletviewactionform_threadposts_summary').html(m);},_onCancelSubmission:function()
{this._closeSubmissionForm();this._resetPostForm();},_onOpenSubmissionForm:function()
{$('#bbsthreadportletviewactionform_form_canvas').show();$('#bbsthreadportletviewactionform_action_startnew_actionbar').hide();},_closeSubmissionForm:function()
{$('#bbsthreadportletviewactionform_form_canvas').hide();$('#bbsthreadportletviewactionform_action_startnew_actionbar').show();},_onClickOnThreadPosts:function(e)
{var target=$(e.target);var dataAction=target.attr('data-action');var dataActionTarget=target;var ps=null;if(!dataAction)
{ps=target.parents('[data-action]');if(ps.length>0)
{dataActionTarget=$(ps[0]);dataAction=dataActionTarget.attr('data-action');}}
if(dataAction!=null)
{switch(dataAction)
{case'close':case'open-close':ps=dataActionTarget.parents('.comment');if(ps.length>0)
{$(ps[0]).toggleClass('open');}
break;case'reply':case'reply-with-citation':this._onOpenSubmissionForm();ps=dataActionTarget.parents('.comment-wrapper');if(ps.length>0)
{this._startReply($(ps[0]).attr('id'),dataAction=='reply-with-citation'?true:false);}
break;case'edit':this._onOpenSubmissionForm();ps=dataActionTarget.parents('.comment-wrapper');if(ps.length>0)
{this._startModify($(ps[0]).attr('id'));}
break;default:console.log("Data Action: ",dataAction);}}
return true;},_startReply:function(aPostId,includeCitation)
{var threadNodeId=aPostId.substring(4);console.log("Start Reply: ",aPostId,threadNodeId,includeCitation);var dtoAdapter=this.bbsThreadNodesDTOAdapter.findItem(threadNodeId);if(dtoAdapter)
{$('#bbsthreadportletviewactionform_nodeparentid').val(dtoAdapter.dataBean.threadnodeid);var nt="Re: "+dtoAdapter.dataBean.nodetitle;if(nt.length>80)
nt=nt.substring(0,nt.length);$('#bbsthreadportletviewactionform_nodetitle').val(nt);if(includeCitation)
{$('#bbsthreadportletviewactionform_nodetext').val('[quote]'+dtoAdapter.dataBean.nodetext+'[/quote].');}
else $('#bbsthreadportletviewactionform_nodetext').val('');}
else this._resetPostForm();location.href='#bbsthreadportletviewactionform_anchor';for(instance in CKEDITOR.instances)
CKEDITOR.instances[instance].focus();},_startModify:function(aPostId)
{var threadNodeId=aPostId.substring(4);console.log("Start Modify: ",aPostId,threadNodeId);var dtoAdapter=this.bbsThreadNodesDTOAdapter.findItem(threadNodeId);if(dtoAdapter)
{$('#bbsthreadportletviewactionform_threadnodeid').val(dtoAdapter.dataBean.threadnodeid);$('#bbsthreadportletviewactionform_nodeparentid').val(dtoAdapter.dataBean.nodeparentid);this.threadProfile.initializeForm(dtoAdapter);}
else this._resetPostForm();location.href='#bbsthreadportletviewactionform_anchor';if(this.hasCkEditorField)
{for(instance in CKEDITOR.instances)
CKEDITOR.instances[instance].focus();}},_updatePost:function(aBBSTopic,aBBSThread,aPost)
{var thnode_info=$('#thn_'+aPost.dataBean.threadnodeid+' > .comment > .info');thnode_info.html(this.threadProfile.postInfoRenderer(aBBSTopic,aBBSThread,aPost));var thnode_content=$('#thn_'+aPost.dataBean.threadnodeid+' > .comment > .content');thnode_content.html(this.threadProfile.postContentRenderer(aBBSTopic,aBBSThread,aPost));},_appendPost:function(aBBSTopic,aBBSThread,aPost,appendMode)
{var renderedPost=this.threadProfile.postRenderer(aBBSTopic,aBBSThread,aPost);$('#bbsthreadportletviewactionform_threadposts_cnt').append(renderedPost);},_resetPostForm:function()
{console.log("Fields: ",$('#bbsthreadportletviewactionform_form input'));$('#bbsthreadportletviewactionform_form')[0].reset();$('#bbsthreadportletviewactionform_nodetext').val('');},_onSaveItem:function()
{var _self=this;var threadNodeId=$('#bbsthreadportletviewactionform_threadnodeid').val();var theForm=$('#bbsthreadportletviewactionform_form');if(theForm.valid())
{if(this.hasCkEditorField)
{if(!this._validateCKEditorField())
return;}
this.threadProfile.serializePost();if(org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var topicId=this.bbsTopicDTOAdapter.dataBean.topicid;var threadId=this.bbsThreadDTOAdapter.dataBean.threadid;var method=null;var restUrl=null;if(threadNodeId)
{restUrl=org.r3.PageManager.getRESTUrl('PUT_BBSThreadNode',[topicId,threadId,threadNodeId]);method="put";}
else
{restUrl=org.r3.PageManager.getRESTUrl('POST_BBSThreadNode',[topicId,threadId]);method="post";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var threadNodeDataBean=new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTOAdapter(responseData);var thnode=$('#thn_'+threadNodeDataBean.dataBean.threadnodeid);if(thnode.length)
{_self.bbsThreadNodesDTOAdapter.replaceItem(threadNodeDataBean.dataBean.threadnodeid,threadNodeDataBean);_self._updatePost(_self.bbsTopicDTOAdapte,_self.bbsThreadDTOAdapter,threadNodeDataBean);}
else
{_self.bbsThreadNodesDTOAdapter.addItem(threadNodeDataBean);_self._showNumberOfComments(_self.bbsThreadNodesDTOAdapter.getNumberOfItems());_self._appendPost(_self.bbsTopicDTOAdapte,_self.bbsThreadDTOAdapter,threadNodeDataBean);}
_self._closeSubmissionForm();_self._resetPostForm();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();$('#bbsthreadportletviewactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}}},_validateCKEditorField:function()
{var postText=$('#bbsthreadportletviewactionform_nodetext').val();if(!postText)
{org.r3.PageManager.alert("org.r3.jsportlet.bbs.message.bbsPostIsEmpty");return false;}
if(postText.length>80)
{org.r3.PageManager.alert("org.r3.jsportlet.bbs.message.bbsPostTextMaxLength");return false;}
return true;}});$.r3Utils.namespace("org.r3.jsportlet.bbs",window,function(aNamespace)
{aNamespace.bbsthreadportletviewactionform_form_validationRules={nodetitle:{required:true,maxlength:80},crewrole:{required:false},crewlevel:{required:false},ownername:{required:true,maxlength:60},crewname:{required:true,maxlength:60},owneremail:{required:true,email:true,maxlength:60},crewemail:{required:true,email:true,maxlength:60},ownerphone:{required:true,digits:true,maxlength:15},crewphone:{required:true,digits:true,maxlength:15},crewweight:{required:false,digits:true,maxlength:6},crewheight:{required:false,digits:true,maxlength:6},crewage:{required:false,digits:true,maxlength:6},crewinfo:{required:false,maxlength:255},yachtinfo:{required:false,maxlength:255},yachtname:{required:true,maxlength:30},yachtmodel:{required:true,maxlength:30}};aNamespace.bbsthreadportletviewactionform_form_validationMessages={nodetitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewrole:{required:org.r3.message.field_required},crewlevel:{required:org.r3.message.field_required},ownername:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},ownermail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},crewemail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},ownerphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewweight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewheight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewage:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtmodel:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.calendar");org.r3.jsportlet.calendar.CalendarActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,aCalendarEventHtmlActionFormContainerId,anActionFormManager,anAgendaOptions)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.agendaOptions=$.extend({},org.r3.message.default_calendar_options,anAgendaOptions);this.calendarEventActionForm=new org.r3.jsportlet.calendar.CalendarEventActionFormView(aCalendarEventHtmlActionFormContainerId,anActionFormManager);this.calendarEventActionForm.open();this.calendarWidget=null;},close:function()
{$('#calendar_canvas').fullCalendar('destroy');this.hide();},refresh:function()
{},open:function(anAgendaOptions)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");if(anAgendaOptions)
this.agendaOptions=$.extend(this.agendaOptions,anAgendaOptions);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/calendar/CalendarActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this.show();this.calendarWidget=$('#'+this.agendaOptions.calendarCanvasId);var calendarEventsUrl=org.r3.PageManager.getRESTUrl('GET_AgendaEntries_AsCalendarEvents',[org.r3.Constants.site]);var calendarOptions=$.extend(this.agendaOptions,{dayRender:function(aDate,aCell)
{},viewRender:function(aView,anElement)
{if(aView.name=='agendaWeek')
{console.log('fc-view-agendaWeek',aView,anElement);var selectedItems=anElement.find('.fc-col0');if(selectedItems.length>0)
{for(var i=0;i<selectedItems.length;i++)
{var runningDay=moment(aView.start);var theItem=$(selectedItems[i]);for(var j=0;j<7;j++)
{theItem.addClass('fc-'+runningDay.format('YYYY-MM-DD'));runningDay.add(1,'d');theItem=theItem.next();}}}}
if(aView.name=='agendaDay')
{console.log('fc-view-agendaDay',aView,anElement);var selectedItems=anElement.find('.fc-col0');if(selectedItems.length>0)
{for(var i=0;i<selectedItems.length;i++)
{var theItem=$(selectedItems[i]);theItem.addClass('fc-'+aView.start.format('YYYY-MM-DD'));}}}},select:function(start,end,jsEvent,view){_self.calendarEventActionForm.onNewEvent(_self.calendarWidget,start,end,view);_self.calendarWidget.fullCalendar('unselect');},eventDrop:function(event,delta,revertFunc)
{console.debug(event,delta,event.start.format(),event.start.hasTime());if(!confirm(org.r3.message.calendar_confirmmove)){revertFunc();}
else
{_self.onMoveEvent(_self.calendarWidget,event,delta);}},eventResize:function(event,delta,revertFunc)
{console.debug("Resize:: - "+event.title+" end is now "+event.end.format());if(!confirm(org.r3.message.calendar_confirmresize)){revertFunc();}
else
{_self.onResizeEvent(_self.calendarWidget,event,delta);}},eventClick:function(calEvent,jsEvent,view)
{_self.calendarEventActionForm.onUpdateEvent(_self.calendarWidget,calEvent);},events:{url:this.agendaOptions.urls.queryevents,error:function(){console.log("Widget Got Error");}},editable:this.agendaOptions.editable});$('#calendar_canvas').fullCalendar(calendarOptions);}),function(d)
{console.error("controller did not load");});},onMoveEvent:function(calWidget,anEvent,delta)
{console.debug('CalendarActionForm::onMoveEvent id:'+anEvent.id+' start:'+(anEvent.start&&anEvent.start.format())+' end:'+(anEvent.end&&anEvent.end.format())+' allDay? '+anEvent.allDay);if(!anEvent.allDay)
{if(!anEvent.end)
{console.error("Moving OUT of ALL DAY but end is not set");anEvent.end=moment(anEvent.start).add(30,'m');calWidget.fullCalendar('updateEvent',anEvent);}}
this._populateHiddenFormWithEventData(anEvent.id,anEvent.allDay,anEvent.start,anEvent.end,delta);var restUrl=org.r3.PageManager.getRESTUrl("PUT_Move_AgendaEntry",[org.r3.Constants.site,anEvent.id]);this.actionFormManager.submitForm("PUT",restUrl,$('#calendar_form'),false);},onResizeEvent:function(calWidget,anEvent,delta)
{console.debug('CalendarActionForm::onResizeEvent id:'+anEvent.id+' start:'+(anEvent.start&&anEvent.start.format())+' end:'+(anEvent.end&&anEvent.end.format())+' allDay? '+anEvent.allDay);this._populateHiddenFormWithEventData(anEvent.id,anEvent.allDay,anEvent.start,anEvent.end,delta);var restUrl=org.r3.PageManager.getRESTUrl("PUT_Resize_AgendaEntry",[org.r3.Constants.site,anEvent.id]);this.actionFormManager.submitForm("PUT",restUrl,$('#calendar_form'),false);},_populateHiddenFormWithEventData:function(id,allDayFlag,start,end,delta)
{$('#calendar_form_calendarid').val(id);var s=null;var e=null;if(!allDayFlag)
{s=start&&start.format("DD/MM/YYYY HH:mm");e=end&&end.format("DD/MM/YYYY HH:mm");}
$('#calendar_form_allday').val(allDayFlag?'btrue':'bfalse');if(s)
{$('#calendar_form_startdate_date').val(s.substr(0,10));$('#calendar_form_startdate_time').val(s.substr(11,5));}
else
{$('#calendar_form_startdate_date').val('');$('#calendar_form_startdate_time').val('');}
if(e)
{$('#calendar_form_enddate_date').val(e.substr(0,10));$('#calendar_form_enddate_time').val(e.substr(11,5));}
else
{$('#calendar_form_enddate_date').val('');$('#calendar_form_enddate_time').val('');}}});$.r3Utils.namespace("org.r3.jsportlet.calendar",window,function(aNamespace)
{aNamespace.portletcalendar_form_validationRules={clsitemid:{required:false,maxlength:15,identifier:true,texttransform:'uppercase'},clsitembusid:{required:false,maxlength:15},classifieritemorder:{required:false,maxlength:5,digits:true},classifieritemdescr:{required:true,maxlength:255},classifieritemsattr:{required:false,maxlength:80},classifieritemiattr:{required:false,maxlength:5,digits:true},subgroups:{required:false,maxlength:255}};aNamespace.portletcalendar_form_validationMessages={clsitemid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},clsitembusid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},classifieritemorder:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},classifieritemdescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},classifieritemsattr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},classifieritemiattr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},subgroups:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.calendar");org.r3.jsportlet.calendar.CalendarEventActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.calendarWidget=null;},close:function()
{$("#calendarevent-dialog-form").modal('hide');},show:function(anExecuteSearchFunction)
{$("#calendarevent-dialog-form").modal();},onNewEvent:function(calWidget,start,end,theView)
{this.calendarWidget=calWidget;$("#calendarevent-dialog-form").modal();var validator=$("#calendarevent_form").data('validator');validator.resetForm();$("#calendarevent_form .error").removeClass("error");this._allDayInitialization(false);$('#calendarevent_form_calendarid').val('');$('#calendarevent_form_startdate_date').val(start.format("DD/MM/YYYY"));if(theView.name=='month')
this._hoursDefaultInitialization();else this._hoursInitialization(start,end);$('#calendarevent_action_delete').hide();},onUpdateEvent:function(calWidget,theEvent)
{this.calendarWidget=calWidget;var validator=$("#calendarevent_form").data('validator');validator.resetForm();$("#calendarevent_form .error").removeClass("error");$("#calendarevent-dialog-form").modal();this._allDayInitialization(theEvent.allDay);$('#calendarevent_form_title').val(theEvent.title);$('#calendarevent_form_calendarid').val(theEvent.id);$('#calendarevent_form_startdate_date').val(theEvent.start.format("DD/MM/YYYY"));if(theEvent.start.hasTime())
{$('#calendarevent_form_startdate_time').val(theEvent.start.format("HH:mm"));$('#calendarevent_form_enddate_time').val(theEvent.end.format("HH:mm"));}
this.updatingEvent=theEvent;$('#calendarevent_action_delete').show();},_allDayInitialization:function(isAllDay)
{$('#calendarevent_form_allday').prop('checked',isAllDay);if(isAllDay)
{$('#calendarevent_form .r3_timepicker_cnt').hide();}
else
{$('#calendarevent_form .r3_timepicker_cnt').show();}},_hoursInitialization:function(aStartMoment,anEndMoment)
{$('#calendarevent_form_startdate_time').timepicker('setTime',aStartMoment.format("HH:mm"));$('#calendarevent_form_enddate_time').timepicker('setTime',anEndMoment.format("HH:mm"));},_hoursDefaultInitialization:function()
{var now=moment();var hourOfDay=now.hour();var nextHourOfDay=hourOfDay+1;if(hourOfDay==24)
{nextHourOfDay=23;}
$('#calendarevent_form_startdate_time').timepicker('setTime',hourOfDay+':00');$('#calendarevent_form_enddate_time').timepicker('setTime',nextHourOfDay+':00');},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkInitializationQueue=[];networkInitializationQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/calendar/CalendarEventActionFormView.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkInitializationQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$('.r3_datepicker').datepicker(org.r3.message.default_datepickerOptions);$('.r3_timepicker').timepicker(org.r3.message.default_timepickerOptions);$('#calendarevent_form_allday').unbind().click(function(e)
{var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$('.r3_timepicker_cnt').hide();}
else
{$('.r3_timepicker_cnt').show();}});var actionFormView=this;$('#calendarevent_action_save').unbind().click($.r3Utils.hitch(actionFormView,actionFormView.onSaveItem));$('#calendarevent_action_delete').unbind().click($.r3Utils.hitch(actionFormView,actionFormView.onDeleteItem));$("#calendarevent_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.calendar.calendarevent_form_validationRules,messages:org.r3.jsportlet.calendar.calendarevent_form_validationMessages});$('#calendarevent_fieldset_message').formmessage({});}),function(d)
{console.error("controller did not load");});},dismissDialog:function()
{$("#calendarevent-dialog-form").modal("hide");},onDeleteItem:function()
{var _self=this;var restUrl=null;var method="DELETE";var calendarid=$('#calendarevent_form_calendarid').val();restUrl=org.r3.PageManager.getRESTUrl("DELETE_AgendaEntry",[org.r3.Constants.site,calendarid]);this.actionFormManager.deleteItem(method,restUrl,function(responseData){_self.dismissDialog();_self.calendarWidget.fullCalendar('refetchEvents');},function(jqXHR,timeout,message){$('#calendarevent_fieldset_message').formmessage('setText',{text:message,category:'error'});});},onSaveItem:function()
{var theForm=$('#calendarevent_form');if(!theForm.valid())
return;var _self=this;var restUrl=null;var method="POST";restUrl=org.r3.PageManager.getRESTUrl("POST_AgendaEntry",[org.r3.Constants.site]);var calendarid=$('#calendarevent_form_calendarid').val();if(calendarid&&calendarid.length>0)
{restUrl=org.r3.PageManager.getRESTUrl("PUT_AgendaEntry",[org.r3.Constants.site,calendarid]);method="PUT";}
this.actionFormManager.submitForm(method,restUrl,$("#calendarevent_form"),true,function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('calendarevent_fieldset_message');}
else
{_self.dismissDialog();if(method=='POST')
{var eventData={id:responseData.id,title:responseData.title,start:responseData.start,end:responseData.end};_self.calendarWidget.fullCalendar('renderEvent',eventData,false);}
else
{_self.updatingEvent.title=responseData.title;_self.updatingEvent.start=$.fullCalendar.moment(responseData.start);_self.updatingEvent.end=$.fullCalendar.moment(responseData.end);$('#calendar_canvas').fullCalendar('updateEvent',_self.updatingEvent);}}},function(jqXHR,timeout,message){$('#calendarevent_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.jsportlet.calendar",window,function(aNamespace)
{aNamespace.calendarevent_form_validationRules={title:{required:true,maxlength:80},startdate_date:{required:true,dpDate:true},enddate_date:{required:true,dpDate:true,dpCompareDate:['notBefore','#calendarevent_form_startdate_date']},startdate_time:{required:false,timevalue:true},enddate_time:{required:false,timevalue:true,gdatetime_range:['#calendarevent_form_startdate','#calendarevent_form_enddate']}};aNamespace.calendarevent_form_validationMessages={title:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},startdate_date:{required:org.r3.message.field_required,dpDate:org.r3.message.field_dpDate},enddate_date:{required:org.r3.message.field_required,dpDate:org.r3.message.field_dpDate,dpCompareDate:org.r3.message.field_dpDateRange},startdate_time:{required:org.r3.message.field_required,timevalue:org.r3.message.field_timevalue},enddate_time:{required:org.r3.message.field_required,timevalue:org.r3.message.field_timevalue}};});$.r3Utils.namespace("org.r3.jsportlet.changeuserpwd");org.r3.jsportlet.changeuserpwd.ChangeUserPasswordActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.changeuserpwd.ChangeUserPasswordActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},doChangeUserPassword:function()
{var _self=this;if($('#changeuserpwdform_form').valid())
{org.r3.PageManager.wait("org.r3.message.waiting");var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_User_ChangeMyPassword');$('#changeuserpwdform_form').ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{org.r3.PageManager.closeNotifier();var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isOk())
{console.info($(_self.detailView.htmlContainerId+" .panel-body"),_self.detailView.htmlContainerId+" .panel-body");$(_self.detailView.htmlContainerId+" .panel-body").cmsCard({card_tmpl:"cms_tpl_simple",cardid:"HLP_CHANGEPWDOK"});$(_self.detailView.htmlContainerId+" .action-bar").hide();restDto.showMessage('changeuserpwdform_fieldset_message');}
else restDto.showMessage('changeuserpwdform_fieldset_message');}
else
{org.r3.PageManager.redirectToHomePage();}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();$('#changeuserpwdform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}}});$.r3Utils.namespace("org.r3.jsportlet.changeuserpwd");org.r3.jsportlet.changeuserpwd.ChangeUserPasswordActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/changeuserpwd/ChangeUserPasswordActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$("#changeuserpwdform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.changeuserpwd.changeuserpwdform_form_validationRules,messages:org.r3.jsportlet.changeuserpwd.changeuserpwdform_form_validationMessages});$('#changeuserpwdButton').unbind().click($.r3Utils.hitch(this,this.onChangeUserPasswordClick));$('#changeuserpwdform_fieldset_message').formmessage({});}),function(d)
{console.error("controller did not load");});},onChangeUserPasswordClick:function(event)
{console.log("I'm clicked2.... ",this,event);this.actionFormManager.doChangeUserPassword();event.preventDefault();}});$.r3Utils.namespace("org.r3.jsportlet.changeuserpwd",window,function(aNamespace)
{aNamespace.changeuserpwdform_form_validationRules={currentpassword:{required:true,maxlength:10},password:{required:true,maxlength:10,minlength:org.r3.Constants.passwordValidationMinLength},confpasswd:{required:true,maxlength:10,minlength:org.r3.Constants.passwordValidationMinLength,equalTo:'#changeuserpwdform_password'}};aNamespace.changeuserpwdform_form_validationMessages={currentpassword:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},password:{required:org.r3.message.field_required,minlength:org.r3.message.field_minlength,maxlength:org.r3.message.field_maxlength},confpasswd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,minlength:org.r3.message.field_minlength,equalTo:"La parola chiave di conferma non corrisponde alla parola chiave inserita"}};});$.r3Utils.namespace("org.r3.jsportlet.classifier");org.r3.jsportlet.classifier.ClassifierActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aItemContainerId,aItemDetailViewContainerId,aItemsViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.classifier.ClassifierActionFormView(aDetailViewContainerId,this);this.itemInfoContainerId=aItemContainerId;this.itemDetailView=new org.r3.jsportlet.classifier.ClassifierItemActionFormView(aItemDetailViewContainerId,this);this.itemListView=new org.r3.db.system.classifieritem.ClassifierItemQueryActionFormView(aItemsViewContainerId,this,{dataTableId:'ClassifierItemQueryActionFormView',showTemplateOnOpen:false,canvasType:'list-group',gradeLevel:'grade_level1',iDisplayLength:-1,legend:'Elementi',dataTableColumns:"classifieritemorder,clsitemid,classifieritemdescr,numberofchildren",onSelected:$.r3Utils.hitch(this,function(aClassifierItemDTOAdapter)
{$('#classifieritem_deleteItem').prop('disabled',false);this.itemDetailView.classifierItemDetail(aClassifierItemDTOAdapter);}),onDblClick:$.r3Utils.hitch(this,function(aClassifierItemDTOAdapter)
{$('#classifieritem_deleteItem').prop('disabled',true);}),buttons:[{id:'classifieritem_deleteItem',label:'Elimina',disabled:true,onClick:$.r3Utils.hitch(this,this._onClassifierItemDelete)}],onClearSelection:function()
{$('#classifieritem_deleteItem').prop('disabled',true);},onInitializationComplete:$.r3Utils.hitch(this,function()
{this.itemListView.show();})});},close:function()
{this.detailView.close();this.itemDetailView.close();this.itemListView.close();$(this.itemInfoContainerId).hide();},hide:function()
{this.detailView.hide();this.itemDetailView.hide();this.itemListView.hide();$(this.itemInfoContainerId).hide();},show:function()
{this.detailView.show();this.itemDetailView.show();this.itemListView.show();$(this.itemInfoContainerId).show();},refresh:function()
{this.itemDetailView.refresh();this.itemListView.refresh();$('#classifieritem_deleteItem').prop('disabled',true);},open:function(aClsId)
{var _self=this;var method="GET";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('GET_classifierdetail',[aClsId]),org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var classifierDataBean=null;if(responseData)
{classifierDataBean=new org.r3.db.system.classifier.ClassifierDTOAdapter(responseData);_self.setDataBeanInfo(classifierDataBean);_self.detailView.open(classifierDataBean);_self.itemDetailView.open(classifierDataBean);var dataTableColumns="classifieritemorder,clsitemid,classifieritemdescr,numberofchildren";if(classifierDataBean.isLinear())
dataTableColumns="classifieritemorder,clsitemid,classifieritemdescr";var dataTableSource=org.r3.PageManager.getRESTUrl('GET_classifieritems',[classifierDataBean.dataBean.clsid]);_self.itemListView.open({"dataTableSource":dataTableSource,"dataTableColumns":dataTableColumns,"onInitializationCompleteArgs":arguments});}
else _self.detailView.open(classifierDataBean);$(_self.itemInfoContainerId).show();},"error":function(jqXHR,timeout,message)
{console.error("org.r3.jsportlet.classifier.ClassifierActionForm: ",message);}});},submitForm:function(method,restUrl,theForm,onSuccess,onError)
{var _self=this;if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.refresh();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onError)
onError(message);}});}},_onClassifierItemDelete:function()
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var selectedItem=this.itemListView.fnGetSelectedDataBean();this.deleteClassifierItem(selectedItem,function(responseData){_self.refresh();},function(jqXHR,timeout,message){console.log("org.r3.jsportlet.classifier.ClassifierActionForm::"+message);});}},deleteClassifierItem:function(aClassifierDTOAdapter,onSuccess,onError)
{var _self=this;var method="DELETE";var restUrl=null;var site=aClassifierDTOAdapter.dataBean.site;var clsid=aClassifierDTOAdapter.dataBean.clsid;var clsitemid=aClassifierDTOAdapter.dataBean.clsitemid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_classifieritems',[clsid,clsitemid]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{if(onError)
onError(message);}});}});$.r3Utils.namespace("org.r3.jsportlet.classifier");org.r3.jsportlet.classifier.ClassifierActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();$('#classifier_infoLine').infoLine('destroy');},refresh:function()
{},open:function(aClassifierDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/classifier/ClassifierActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$("#classifierform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.classifier.classifier_form_validationRules,messages:org.r3.jsportlet.classifier.classifier_form_validationMessages});$('#classifierform_action_save').unbind().click($.r3Utils.hitch(this,this.onSaveItem));$('#classifierform_fieldset_message').formmessage({});var clsid=(aClassifierDTOAdapter&&aClassifierDTOAdapter.dataBean.clsid)||'n.d.';var clsdescr=(aClassifierDTOAdapter&&aClassifierDTOAdapter.dataBean.clsdescr)||'Non Presente';$('#classifierform_clsid').html(clsid);$('#classifierform_clsdescr').val(clsdescr);$('#classifierform_form_panel_legend_close').unbind().click(function(){$('#classifierform_form_panel').hide();$('#classifier_infoLine').show();});if(aClassifierDTOAdapter)
{$('#classifier_infoLine').infoLine({groupId:"classifier",items:[{id:"infoline_clsid",label:"<i class='fa fa-caret-square-o-down' ></i> Id.",value:clsid},{id:"infoline_clsdescr",label:"Nome",value:clsdescr}]});$('#classifier_infoLine').unbind().click(function(){$('#classifierform_form_panel').show();$('#classifier_infoLine').hide();});}
else
{$('#classifier_infoLine').infoLine({groupId:"classifier",items:[{id:"infoline_clsid",label:"Id.",value:clsid},{id:"infoline_clsdescr",label:"Nome",value:clsdescr}]});}
this.show();}),function(d)
{console.error("controller did not load");});},onSaveItem:function()
{var _self=this;var method="PUT";var clsid=this.actionFormManager.dataBeanInfo.dataBean.clsid;var restUrl=org.r3.PageManager.getRESTUrl("PUT_classifier",[clsid]);this.actionFormManager.submitForm(method,restUrl,$("#classifierform_form"),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('classifierform_fieldset_message');}
else
{$('#classifier_infoLine').infoLine('update',{groupId:"classifier",items:[{id:"infoline_clsid",label:"<i class='fa fa-caret-square-o-down' ></i> Id.",value:responseData.clsid},{id:"infoline_clsdescr",label:"Nome",value:responseData.clsdescr}]});$('#classifierform_fieldset_message').formmessage('clear');$('#classifierform_form_panel').hide();$('#classifier_infoLine').show();}
_self.refresh();},function(jqXHR,timeout,message){$('#classifierform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.jsportlet.classifier",window,function(aNamespace)
{aNamespace.classifier_form_validationRules={clsdescr:{required:true,maxlength:255}};aNamespace.classifier_form_validationMessages={clsdescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.classifier");org.r3.jsportlet.classifier.ClassifierItemActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.subgroupsEnabled=false;},close:function()
{this.hide();},refresh:function()
{$("#classifieritemform_form").resetForm();$('#classifieritemform_clsitemid').prop('disabled',false);},open:function(aClassifierDTOAdapter)
{if(aClassifierDTOAdapter&&aClassifierDTOAdapter.isHierarchical())
{this.subgroupsEnabled=true;}
else this.subgroupsEnabled=false;org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/classifier/ClassifierItemActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);if(this.subgroupsEnabled)
{$('#classifieritemform_subgroups_cnt').show();}
else
$('#classifieritemform_subgroups_cnt').hide();$("#classifieritemform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.classifier.classifieritem_form_validationRules,messages:org.r3.jsportlet.classifier.classifieritem_form_validationMessages});$('#classifieritemform_action_save').unbind().click($.r3Utils.hitch(this,this.onSaveItem));$('#classifieritemform_action_clear').unbind().click($.r3Utils.hitch(this,function(e){$('#classifieritemform_form').resetForm();$('#classifieritemform_clsitemid').val("");$('#classifieritemform_clsitemid').prop("disabled",false);}));$('#classifieritemform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},classifierItemDetail:function(aClassifierItemDTOAdapter)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"item",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_classifieritemdetail',[aClassifierItemDTOAdapter.dataBean.clsid,aClassifierItemDTOAdapter.dataBean.clsitemid]),dataType:"json"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_classifiers'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var itemDataBean=responseData['item'];if(itemDataBean!=null)
{aClassifierItemDTOAdapter=new org.r3.db.system.classifieritem.ClassifierItemDTOAdapter(itemDataBean);}
$('#classifieritemform_clsitemid').val(aClassifierItemDTOAdapter.dataBean.clsitemid);$('#classifieritemform_clsitemid').prop('disabled',true);$('#classifieritemform_clsitembusid').val(aClassifierItemDTOAdapter.dataBean.clsitembusid);$('#classifieritemform_classifieritemorder').val(aClassifierItemDTOAdapter.dataBean.classifieritemorder);$('#classifieritemform_classifieritemdescr').val(aClassifierItemDTOAdapter.dataBean.classifieritemdescr);$('#classifieritemform_classifieritemsattr').val(aClassifierItemDTOAdapter.dataBean.classifieritemsattr);$('#classifieritemform_classifieritemiattr').val(aClassifierItemDTOAdapter.dataBean.classifieritemiattr);if(this.subgroupsEnabled)
{$('#classifieritemform_subgroups').val(aClassifierItemDTOAdapter.getChildrenAsCSV());}}));},onSaveItem:function()
{var _self=this;var restUrl=null;var method="POST";var clsid=this.actionFormManager.dataBeanInfo.dataBean.clsid;if($('#classifieritemform_clsitemid').prop("disabled"))
{restUrl=org.r3.PageManager.getRESTUrl("PUT_classifieritems",[clsid,$('#classifieritemform_clsitemid').val()]);method="PUT";}
else
{restUrl=org.r3.PageManager.getRESTUrl("POST_classifieritems",[clsid]);}
this.actionFormManager.submitForm(method,restUrl,$("#classifieritemform_form"),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('classifieritemform_fieldset_message');}
else $('#classifieritemform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#classifieritemform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.jsportlet.classifier",window,function(aNamespace)
{aNamespace.classifieritem_form_validationRules={clsitemid:{required:false,maxlength:15,identifier:true,texttransform:'uppercase'},clsitembusid:{required:false,maxlength:15},classifieritemorder:{required:false,maxlength:5,digits:true},classifieritemdescr:{required:true,maxlength:255},classifieritemsattr:{required:false,maxlength:80},classifieritemiattr:{required:false,maxlength:5,digits:true},subgroups:{required:false,maxlength:255}};aNamespace.classifieritem_form_validationMessages={clsitemid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},clsitembusid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},classifieritemorder:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},classifieritemdescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},classifieritemsattr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},classifieritemiattr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},subgroups:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSHTMLPageViewerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,instancePrintableFlag)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.cms.CMSHTMLPageViewerActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(aDmsUrl)
{this.detailView.open(aDmsUrl);}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSHTMLPageViewerActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aDMSUrl)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cms/CMSHTMLPageViewerActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:$.r3Utils.formatDMSUrl4ClientAccess(aDMSUrl),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$('#cmsHTMLPageViewerActionForm_htmlcanvas').html(responseData['content']);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_CardDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.cms.CMSPage_CardDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(pageInfo,cardInfo,options)
{this.detailView.open(pageInfo,cardInfo,options);}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_CardDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.defaultOptions={"cardtemplate":"cms_tpl_cardview_type1","cardIndexDivLocator":anHtmlActionFormContainerId+" .cms_cardIndex","cardDetailDivLocator":anHtmlActionFormContainerId+" .cms_card_canvas","downloadCanvas":true};this.cmsCardOptions=null;this.pageId='__ND__::CMSPage_CardDetailActionFormView';this.cardGalleryView=null;},close:function()
{this.hide();},open:function(pageInfo,cardInfo,options)
{var _self=this;this.pageId=pageInfo.pageid,this.cmsCardOptions=$.extend({},this.defaultOptions,options);if(this.cmsCardOptions.downloadCanvas)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cms/CMSPage_CardDetailActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{$(this.htmlContainerId).html(responseData['view']);this._fetchCardDetail(this.pageId,cardInfo.cardid);this.show();}),function(d)
{console.error("controller did not load");});}
else
{this._fetchCardDetail(this.pageId,cardInfo.cardid);this.show();}},_fetchCardDetail:function(aPageId,aCardId)
{var _self=this;$(this.cmsCardOptions.cardDetailDivLocator).cmsCard({card_tmpl:_self.cmsCardOptions.cardtemplate,cardid:aCardId,pageid:aPageId,onComplete:function(aCardDTOAdapter,numberOfItems)
{if(numberOfItems)
{var listOfGalleryImages=aCardDTOAdapter.getListOfPropertiesByPropertyrole('cms_img_gallery');if(listOfGalleryImages&&listOfGalleryImages.length)
{_self.cardGalleryView=new org.r3.jsportlet.cms.CMSPage_GalleryView(_self.cmsCardOptions.cardDetailDivLocator+' #'+aCardId+'_cms_gallery_canvas',aCardId,listOfGalleryImages,25);_self.cardGalleryView.open();}}}});}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(pageInfo,cardInfo,options)
{this.detailView.open(pageInfo,cardInfo,options);}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.defaultOptions={"cardtemplate":"cms_tpl_cardview_type3","cardIndexDivLocator":anHtmlActionFormContainerId+" .cms_cardIndex","cardDetailDivLocator":anHtmlActionFormContainerId+" .cms_cardDetail","downloadCanvas":true};this.cmsCardOptions=null;this.pageId='__ND__::CMSPage_CardIndexDetailActionFormView';this.cardGalleryView=null;},close:function()
{this.hide();},open:function(pageInfo,cardInfo,options)
{var _self=this;this.pageId=pageInfo.pageid;this.cmsCardOptions=$.extend({},this.defaultOptions,options);if(this.cmsCardOptions.downloadCanvas)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cms/CMSPage_CardIndexDetailActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{$(this.htmlContainerId).html(responseData['view']);this._fetchCardIndex(pageInfo,cardInfo,_self.cmsCardOptions);this.show();}),function(d)
{console.error("controller did not load");});}
else
{this._fetchCardIndex(pageInfo,cardInfo,_self.cmsCardOptions);this.show();}},_fetchCardIndex:function(pageInfo,cardInfo,options)
{var _self=this;$(this.cmsCardOptions.cardIndexDivLocator).cmsCard({card_tmpl:"cms_tpl_cardgroup_index",cardquery:_self.cmsCardOptions.cardindexquery,pageid:pageInfo.pageid,onComplete:function(responseInfo,numberOfItems)
{$(_self.cmsCardOptions.cardIndexDivLocator+' .cmsCard_link2carddetail').unbind().click($.r3Utils.hitch(_self,_self._onCMSCardLink2CardDetail));var card2Fetch=null;if(cardInfo&&cardInfo.cardid)
{card2Fetch=cardInfo.cardid;}
else if(numberOfItems)
{if(numberOfItems==1&&responseInfo.dataBean)
{card2Fetch=responseInfo.dataBean.cardid;}
else
{card2Fetch=responseInfo.getItem(0).dataBean.cardid;}}
if(card2Fetch)
_self._fetchCardDetail(pageInfo.pageid,card2Fetch);}});},_fetchCardDetail:function(aPageId,aCardId)
{var _self=this;$(this.cmsCardOptions.cardDetailDivLocator).cmsCard({card_tmpl:_self.cmsCardOptions.cardtemplate,pageid:aPageId,cardid:aCardId,onComplete:function(aCardDTOAdapter,numberOfItems)
{if(numberOfItems)
{var listOfGalleryImages=aCardDTOAdapter.getListOfPropertiesByPropertyrole('cms_img_gallery');if(listOfGalleryImages&&listOfGalleryImages.length)
{_self.cardGalleryView=new org.r3.jsportlet.cms.CMSPage_GalleryView(_self.cmsCardOptions.cardDetailDivLocator+' #'+aCardId+'_cms_gallery_canvas',aCardId,listOfGalleryImages,25);_self.cardGalleryView.open();}}}});},_onCMSCardLink2CardDetail:function(e)
{org.r3.PageManager.googleAnalyticsSendPageView();var theItem=$(e.currentTarget);var cardId=theItem.attr('data-cardid');this._fetchCardDetail(this.pageId,cardId);}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_CardPagedIndexActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aDetailViewCMSCardIndexContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.cms.CMSPage_CardPagedIndexActionFormView(aDetailViewContainerId,aDetailViewCMSCardIndexContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(pageInfo,cardInfo,options)
{this.detailView.open(pageInfo,cardInfo,options);},openCMSCardDetailByPageIdCardId:function(pageId,cardId)
{this.hide();this.pageManager.openCMSCardDetailByPageIdCardId(pageId,cardId);}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_CardPagedIndexActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,aCMSCardIndexContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.defaultOptions={"cardindextemplate":"cms_tpl_cardgroup_index","iDisplayStart":0,"iDisplayLength":10,"fetchmode":'partial',"cardIndexDivLocator":aCMSCardIndexContainerId+" .cms_cardIndex","downloadCanvas":true};this.options=null;this.pageId='__ND__::CMSPage_CardPagedIndexActionFormView';this.cmsCardIndexContainerId=aCMSCardIndexContainerId;this.paginationHelper=new org.r3.jsportlet.cms.CMSPage_PaginationHelper(aCMSCardIndexContainerId+' .cms_pagination_container');},close:function()
{this.hide();},open:function(pageInfo,cardInfo,options)
{var _self=this;this.pageId=pageInfo.pageid;this.options=$.extend({},this.defaultOptions,options);if(this.options.downloadCanvas)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cms/CMSPage_CardPagedIndexActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{$(this.cmsCardIndexContainerId).html(responseData['view']);this._fetchDataPage(this.pageId,this.options.iDisplayStart,this.options.iDisplayLength,$.r3Utils.hitch(this,this._onPreviousPage),$.r3Utils.hitch(this,this._onNextPage));this.show();}),function(d)
{console.error("controller did not load");});}
else
{this._fetchDataPage(this.pageId,this.options.iDisplayStart,this.options.iDisplayLength,$.r3Utils.hitch(this,this._onPreviousPage),$.r3Utils.hitch(this,this._onNextPage));this.show();}},_fetchDataPage:function(aPageId,startRecord,pageSize,onPreviousPage,onNextPage)
{var _self=this;$(this.options.cardIndexDivLocator).cmsCard({pageid:aPageId,card_tmpl:this.options.cardindextemplate,cardquery:this.options.cardindexquery,iDisplayStart:startRecord,iDisplayLength:pageSize,fetchmode:this.options.fetchmode,onComplete:function(responseInfo,totalNumberOfItems)
{_self.show();_self.paginationHelper.render(startRecord,(totalNumberOfItems>0)?responseInfo.getNumberOfItems():0,totalNumberOfItems,pageSize,onPreviousPage,onNextPage);var cardsInnerLinks=$(_self.options.cardIndexDivLocator+' .cmsCard_link2carddetail');$(_self.options.cardIndexDivLocator+' .cmsCard_link2carddetail').unbind().click($.r3Utils.hitch(_self,_self._onCMSCardLink2CardDetail));}});},_onNextPage:function(startRecord)
{this._fetchDataPage(this.pageId,startRecord,this.options.iDisplayLength);},_onPreviousPage:function(startRecord)
{this._fetchDataPage(this.pageId,startRecord,this.options.iDisplayLength);},_onCMSCardLink2CardDetail:function(e)
{var theItem=$(e.currentTarget);var cardId=theItem.attr('data-cardid');this.actionFormManager.openCMSCardDetailByPageIdCardId(this.pageId,cardId);}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_GalleryView=Class.extend({init:function(aGalleryCanvasLocator,aCardId,aListOfGalleryImageProperties,aPageSize)
{this.galleryCanvasLocator=aGalleryCanvasLocator;this.cardId=aCardId;this.listOfGalleryImageProperties=aListOfGalleryImageProperties;this.pageSize=aPageSize;this.cardGalleryPaginatorHelper=new org.r3.jsportlet.cms.CMSPage_PaginationHelper(aGalleryCanvasLocator+' .cms_pagination_container');},open:function()
{this._renderData(0,this._computeDisplayLength(0,this.pageSize,this.listOfGalleryImageProperties.length));},_renderData:function(iDisplayStart,iDisplayLength)
{var templatedGallery=tmpl('cms_tpl_cardview_gallery',{"listOfGalleryImages":this.listOfGalleryImageProperties,"cardid":this.cardId,"iDisplayStart":iDisplayStart,"iDisplayLength":iDisplayLength});$(this.galleryCanvasLocator+' .cms_gallery').html(templatedGallery);this.cardGalleryPaginatorHelper.render(iDisplayStart,(iDisplayLength>0)?iDisplayLength:0,this.listOfGalleryImageProperties.length,this.pageSize,$.r3Utils.hitch(this,this._onPreviousPage),$.r3Utils.hitch(this,this._onNextPage));$(this.galleryCanvasLocator).show();var wall=new Freewall(this.galleryCanvasLocator+" .freewall-gallery");wall.reset({selector:'.brick',animate:true,fixSize:null,cellW:50,cellH:50,delay:50,onResize:function(){wall.fitWidth();}});wall.fitWidth();$("a[rel='lightbox-"+this.cardId+"']").slimbox();},_computeDisplayLength:function(startRecord,pageSize,totalNumberOfItems)
{var length=pageSize;if((startRecord+pageSize)>totalNumberOfItems)
length=totalNumberOfItems-startRecord;return length;},_onNextPage:function(startRecord)
{console.log("Next Page: "+startRecord);this._renderData(startRecord,this._computeDisplayLength(startRecord,this.pageSize,this.listOfGalleryImageProperties.length));},_onPreviousPage:function(startRecord)
{console.log("Prev Page: "+startRecord);this._renderData(startRecord,this._computeDisplayLength(startRecord,this.pageSize,this.listOfGalleryImageProperties.length));}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_PageDecoratorActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(pageInfo,cardInfo,options)
{this.detailView.open(pageInfo,cardInfo,options);}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_PageDecoratorActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.pageId='__ND__::CMSPage_PageDecoratorActionFormView';},close:function()
{this.hide();},open:function(pageInfo,cardInfo,options)
{var _self=this;if(pageInfo)
this.pageId=pageInfo.pageid;$("#iconic_menu_carousel_canvas").carouFredSel({auto:false,align:'center',width:'100%',pagination:{container:"#iconic_menu_carousel_pagination",keys:true,easing:"easeOutBounce",duration:3000}});$("#sponsorcarouselview").cmsCard({card_tmpl:"cms_tpl_sponsorsview",cardquery:"groupid=sponsorcarousel",pageid:this.pageId,onComplete:function()
{$("#sponsorcarouselview_canvas").carouFredSel({width:"100%",scroll:2});}});}});$.r3Utils.namespace("org.r3.jsportlet.cms");org.r3.jsportlet.cms.CMSPage_PaginationHelper=Class.extend({init:function(containerJQueryPath)
{this.containerJQueryPath=containerJQueryPath;this.displayStart=0;this.displayLength=0;this.totalNumberOfRecords=0;this.pageSize=0;this.currentCSSClassActionPrevious='disabled';this.currentCSSClassActionNext='disabled';this.onPreviousActionCallBack=null;this.onNextActionCallBack=null;},_initializeFields:function(displayStart,displayLength,totalNumberOfRecords,pageSize)
{this.displayStart=displayStart;this.displayLength=displayLength;this.totalNumberOfRecords=totalNumberOfRecords;this.pageSize=pageSize;},render:function(displayStart,displayLength,totalNumberOfRecords,pageSize,onPreviousActionCallBack,onNextActionCallBack)
{this._initializeFields(displayStart,displayLength,totalNumberOfRecords,pageSize);$(this.containerJQueryPath+' .cms_pagination_info').html(this.getPaginationInfo());var previousAction=$(this.containerJQueryPath+' .pager li.previous');if(this.previousActionEnabled())
previousAction.removeClass('disabled');else previousAction.addClass('disabled');var nextAction=$(this.containerJQueryPath+' .pager li.next');if(this.nextActionEnabled())
nextAction.removeClass('disabled');else nextAction.addClass('disabled');if(onPreviousActionCallBack)
{this.onPreviousActionCallBack=onPreviousActionCallBack;previousAction.unbind().click($.r3Utils.hitch(this,this._onPreviousAction));}
if(onNextActionCallBack)
{this.onNextActionCallBack=onNextActionCallBack;nextAction.unbind().click($.r3Utils.hitch(this,this._onNextAction));}},_onPreviousAction:function()
{console.info("_onPreviousAction");if(this.previousActionEnabled()&&this.onPreviousActionCallBack)
{this.onPreviousActionCallBack((this.getStartRecord()-1)-this.pageSize);}},_onNextAction:function()
{console.info("_onNextAction");if(this.nextActionEnabled()&&this.onNextActionCallBack)
{this.onNextActionCallBack(this.displayStart+this.pageSize);}},getStartRecord:function()
{if(this.totalNumberOfRecords>0)
return this.displayStart+1;return 0;},getEndRecord:function()
{if(this.totalNumberOfRecords>0)
return this.displayStart+this.displayLength;return 0;},getTotalNumberOfRecords:function()
{return this.totalNumberOfRecords;},previousActionEnabled:function()
{return this.getTotalNumberOfRecords()>0&&this.getStartRecord()>1;},nextActionEnabled:function()
{return this.getTotalNumberOfRecords()>0&&this.getEndRecord()<this.getTotalNumberOfRecords();},getPaginationInfo:function()
{if(this.getTotalNumberOfRecords()>0)
return"Record visualizzati da "+this.getStartRecord()+" a "+this.getEndRecord()+"  di "+this.getTotalNumberOfRecords();return"Non sono presenti schede da visualizzare";}});$.r3Utils.namespace("org.r3.jsportlet.cms.indexdetail");org.r3.jsportlet.cms.indexdetail.CMSPage_CardIndexDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.cms.indexdetail.CMSPage_CardIndexDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(aPageDTOAdapter,cardInfo,options)
{this.detailView.open(aPageDTOAdapter,cardInfo,options);}});$.r3Utils.namespace("org.r3.jsportlet.cms.indexdetail");org.r3.jsportlet.cms.indexdetail.CMSPage_CardIndexDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.defaultOptions={"cardtemplate":"cms_tpl_cardview_type3","cardIndexDivLocator":anHtmlActionFormContainerId+" .cms_cardIndex","cardDetailDivLocator":anHtmlActionFormContainerId+" .cms_cardDetail","downloadCanvas":true};this.cmsCardOptions=null;this.pageId='__ND__::CMSPage_CardIndexDetailActionFormView';this.cardGalleryView=null;},close:function()
{this.hide();},open:function(aPageDTOAdapter,cardInfo,options)
{var _self=this;this.pageId=aPageDTOAdapter.dataBean.pageid;this.cmsCardOptions=$.extend({},this.defaultOptions,options);if(this.cmsCardOptions.downloadCanvas)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cms/indexdetail/CMSPage_CardIndexDetailActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var templatedCanvas=tmpl(responseData['view'],{"pageDTOAdapter":aPageDTOAdapter});$(this.htmlContainerId).html(templatedCanvas);this._fetchCardIndex(aPageDTOAdapter,cardInfo,_self.cmsCardOptions);this.show();}),function(d)
{console.error("controller did not load");});}
else
{this._fetchCardIndex(aPageDTOAdapter,cardInfo,_self.cmsCardOptions);this.show();}},_fetchCardIndex:function(aPageDTOAdapter,cardInfo,options)
{var _self=this;$(this.cmsCardOptions.cardIndexDivLocator).cmsCard({card_tmpl:"cms_tpl_cardgroup_index",cardquery:_self.cmsCardOptions.cardindexquery,pageid:aPageDTOAdapter.dataBean.pageid,onComplete:function(responseInfo,numberOfItems)
{$(_self.cmsCardOptions.cardIndexDivLocator+' .cmsCard_link2carddetail').unbind().click($.r3Utils.hitch(_self,_self._onCMSCardLink2CardDetail));var card2Fetch=null;if(cardInfo&&cardInfo.cardid)
{card2Fetch=cardInfo.cardid;}
else if(numberOfItems)
{if(numberOfItems==1&&responseInfo.dataBean)
{card2Fetch=responseInfo.dataBean.cardid;}
else
{card2Fetch=responseInfo.getItem(0).dataBean.cardid;}}
if(card2Fetch)
_self._fetchCardDetail(aPageDTOAdapter.dataBean.pageid,card2Fetch);}});},_fetchCardDetail:function(aPageId,aCardId)
{var _self=this;$(this.cmsCardOptions.cardDetailDivLocator).cmsCard({card_tmpl:_self.cmsCardOptions.cardtemplate,pageid:aPageId,cardid:aCardId,onComplete:function(aCardDTOAdapter,numberOfItems)
{if(numberOfItems)
{var listOfGalleryImages=aCardDTOAdapter.getListOfPropertiesByPropertyrole('cms_img_gallery');if(listOfGalleryImages&&listOfGalleryImages.length)
{_self.cardGalleryView=new org.r3.jsportlet.cms.CMSPage_GalleryView(_self.cmsCardOptions.cardDetailDivLocator+' #'+aCardId+'_cms_gallery_canvas',aCardId,listOfGalleryImages,25);_self.cardGalleryView.open();}}}});},_onCMSCardLink2CardDetail:function(e)
{org.r3.PageManager.googleAnalyticsSendPageView();var theItem=$(e.currentTarget);var cardId=theItem.attr('data-cardid');this._fetchCardDetail(this.pageId,cardId);}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.CardDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.cmsconsole.CardDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{this.detailView.refresh();},open:function(aCardDTOAdapter)
{console.log("CardDetailActionForm::open",aCardDTOAdapter);this.setDataBeanInfo(aCardDTOAdapter);this.detailView.open(aCardDTOAdapter);},updateItem:function()
{this._saveItem(true);},createItem:function()
{this._saveItem(false);},_saveItem:function(isUpdate)
{var _self=this;var theForm=$('#carddetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_Card');if(isUpdate)
{var idCard=this.dataBeanInfo.dataBean.cardid;restUrl=org.r3.PageManager.getRESTUrl('PUT_Card',[idCard]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('carddetailactionform_fieldset_message');}
else
{if(isUpdate)
{$('#carddetailactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}
else
_self.closeNewCardPanel();}},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();$('#carddetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},deleteItem:function()
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var method="DELETE";var restUrl=null;var cardId=this.dataBeanInfo.dataBean.cardid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_Card',[cardId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{$('#carddetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},closeNewCardPanel:function()
{this.pageManager.closeNewCardPanel();},listaCards:function()
{org.r3.PageManager.back();},uploadFile:function(aCardDTOAdapter)
{this.hide();this.pageManager.uploadFile(this.dataBeanInfo);},updateCardDescr4Language:function(aLanguageCode)
{var theForm=$('#cardtextactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="put";var idCard=this.dataBeanInfo.dataBean.cardid;var restUrl=org.r3.PageManager.getRESTUrl('PUT_CardDescr_Detail',[idCard,aLanguageCode]);org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('cardtextactionform_fieldset_message');}
else
{$('#cardtextactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();$('#cardtextactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},retrieveCardDescr:function(aLanguageCode,onComplete,onError)
{var method="GET";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('GET_CardDescr_Detail',[this.dataBeanInfo.dataBean.cardid,aLanguageCode]),org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var cardDescrDataBean=null;if(responseData)
{cardDescrDataBean=new org.r3.db.cms.carddescr.CardDescrDTOAdapter(responseData);}
if(onComplete)
onComplete(cardDescrDataBean);},"error":function(jqXHR,timeout,message)
{console.error("org.r3.jsportlet.cmsconsole.CardDetailActionForm: ",message);if(onError)
onError(message);}});},updateFileProperty:function(aPropertyid,onSuccess)
{var theForm=$('#cardfileactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="put";var idCard=this.dataBeanInfo.dataBean.cardid;var restUrl=org.r3.PageManager.getRESTUrl('PUT_CardProperty_File',[idCard,aPropertyid]);org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('cardfileactionform_fieldset_message');}
else
{$('#cardfileactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});if(onSuccess)
onSuccess();}},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();$('#cardfileactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},updateLinkProperty:function(aPropertyId,onSuccess,onError)
{var method="put";var idCard=this.dataBeanInfo.dataBean.cardid;var restUrl=org.r3.PageManager.getRESTUrl('PUT_CardProperty_Link',[idCard,aPropertyId]);this.submitProperty('#cardlinkactionform_form',restUrl,method,onSuccess,onError);},addLinkProperty:function(onSuccess,onError)
{var method="post";var idCard=this.dataBeanInfo.dataBean.cardid;var restUrl=org.r3.PageManager.getRESTUrl('POST_CardProperty_Link',[idCard]);this.submitProperty('#cardlinkactionform_form',restUrl,method,onSuccess,onError);},submitProperty:function(formId,restUrl,method,onSuccess,onError)
{var _self=this;var theForm=$(formId);if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.detailView.refresh();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onError)
onError(message);}});}},deleteProperty:function(aCardPropertyDTOAdapter)
{var _self=this;var method="DELETE";var restUrl=null;var site=aCardPropertyDTOAdapter.dataBean.site;var cardId=aCardPropertyDTOAdapter.dataBean.cardid;var propertyId=aCardPropertyDTOAdapter.dataBean.propertyid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_CardProperty',[cardId,propertyId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();_self.detailView.refresh();},"error":function(jqXHR,timeout,message)
{console.error("GruppoDetailActionForm: ",message);}});}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.CardDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.tabGenerale=null;this.tabCardText=null;this.tabCardFile=null;this.tabCardLink=null;},close:function()
{this.hide();},refresh:function()
{if(this.tabCardFile)
this.tabCardFile.refresh();if(this.tabGenerale)
this.tabGenerale.refresh();if(this.tabCardLink)
this.tabCardLink.refresh();},open:function(aCardDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];if(aCardDTOAdapter)
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cmsconsole/CardDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_Card_Detail',[aCardDTOAdapter.dataBean.cardid]),dataType:"json"});networkRequestsQueue.push({id:"view_tabcardtext",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cmsconsole/CardDetailActionFormView_TabCardText.html'),dataType:"html"});networkRequestsQueue.push({id:"content_descr",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_CardDescr_Detail',[aCardDTOAdapter.dataBean.cardid,org.r3.Constants.language]),dataType:"json"});}
else
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cmsconsole/CardDetailActionFormView.html.jsp?mode=create'),dataType:"html"});}
networkRequestsQueue.push({id:"view_tabgenerale",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cmsconsole/CardDetailActionFormView_TabGenerale.html'),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_sys_recstatus'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_locale'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var cardDataBean=responseData['content'];if(cardDataBean)
{cardDataBean=new org.r3.db.cms.card.CardDTOAdapter(cardDataBean);}
var cardDescrDataBean=responseData['content_descr'];if(cardDescrDataBean)
{cardDescrDataBean=new org.r3.db.cms.carddescr.CardDescrDTOAdapter(cardDescrDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#cardDetailActionForm_tab_generale').html(tmpl(responseData['view_tabgenerale'],{}));this.tabGenerale=new org.r3.jsportlet.cmsconsole.CardDetailActionFormView_TabGenerale('__UNUSED__',this.actionFormManager,cardDataBean);if(cardDataBean)
{$('#cardDetailActionForm_tab_cardtext').html(tmpl(responseData['view_tabcardtext'],{}));this.tabCardText=new org.r3.jsportlet.cmsconsole.CardDetailActionFormView_TabCardText('__UNUSED__',this.actionFormManager,cardDataBean,cardDescrDataBean);this.tabCardFile=new org.r3.jsportlet.cmsconsole.CardDetailActionFormView_TabCardFile('#cardDetailActionForm_tab_cardfile',this.actionFormManager,cardDataBean);this.tabCardLink=new org.r3.jsportlet.cmsconsole.CardDetailActionFormView_TabCardLink('#cardDetailActionForm_tab_cardlink',this.actionFormManager,cardDataBean);}
this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.CardDetailActionFormView_TabCardFile=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.fileView=new org.r3.db.cms.cardproperty.CardPropertyQueryActionFormView(anHtmlActionFormContainerId,this.actionFormManager,{dataTableId:'CardFileQueryActionFormView',showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/jsportlet/cmsconsole/CardDetailActionFormView_TabCardFile.html",gradeLevel:'grade_level1',legend:org.r3.jsportlet.cmsconsole.message.cardfileactionform_form_legend,dataTableSource:org.r3.PageManager.getRESTUrl('GET_CardFiles',[aCardDataBean.dataBean.cardid]),dataTableColumns:"propertyid,propertytypecode,propertyname,propertyrole,contenttype,propertysize,imagesize,iconsize",requiredLUTs:["GET_classifier_sys_recstatus"],onSelected:$.r3Utils.hitch(this,function(aCardPropertyDTOAdapter){$('#tabfile_deleteItem').prop('disabled',false);this.propertyDetail(aCardPropertyDTOAdapter);}),onDblClick:null,buttons:[{id:'tabfile_uploadfile',label:org.r3.message.action_upload,disabled:false,onClick:$.r3Utils.hitch(this.actionFormManager,this.actionFormManager.uploadFile)},{id:'tabfile_deleteItem',label:org.r3.message.action_delete,disabled:true,onClick:$.r3Utils.hitch(this,this.propertyDelete)}],onClearSelection:function(){$('#tabfile_deleteItem').prop('disabled',true);},onInitializationComplete:$.r3Utils.hitch(this,function(){$('#cardfileactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.cmsconsole.cardfileactionform_form_validationRules,messages:org.r3.jsportlet.cmsconsole.cardfileactionform_form_validationMessages});$('#cardfileactionform_fieldset_message').formmessage({});$('#cardfileactionform_form_cardid_label').html('['+aCardDataBean.dataBean.cardid+']');console.info("SaveItem: ",$('#cardfileactionform_action_saveitem'));$('#cardfileactionform_action_saveitem').unbind().click($.r3Utils.hitch(_self,_self.updateProperty));$('#cardfileactionform_action_cancel').unbind().click(function(e){org.r3.PageManager.back();});$('#cardfileactionform_action_ctlcurl').unbind().click(function(e){window.prompt("Per copiare premere i tasti Ctrl+C e successivamente Invio",$('#cardfileactionform_form_url').html());});})});this.fileView.open();},propertyDetail:function(aCardPropertyAdapterDTO)
{$('#cardfileactionform_form_propertyid').attr('value',aCardPropertyAdapterDTO.dataBean.propertyid);$('#cardfileactionform_form_propertytypecode').attr('value',aCardPropertyAdapterDTO.dataBean.propertytypecode);this.showDetail(aCardPropertyAdapterDTO);$('#cardfileactionform_form_propertyname').val(aCardPropertyAdapterDTO.dataBean.propertyname);var s=aCardPropertyAdapterDTO.dataBean.contenttype+' - '+aCardPropertyAdapterDTO.dataBean.propertysize;$('#cardfileactionform_form_propertytypesize').html(s);$('#cardfileactionform_form_propertyvalue').html(aCardPropertyAdapterDTO.dataBean.propertyvalue);$('#cardfileactionform_form_propertyvalue').unbind().click(function(e){org.r3.PageManager.viewDocument(aCardPropertyAdapterDTO.dataBean.propertyvalue);});$('#cardfileactionform_form_url').html($.r3Utils.formatDMSUrl4ClientAccess(aCardPropertyAdapterDTO.dataBean.propertyvalue));var iconUrl=org.r3.Constants.cms_default_icon;if(aCardPropertyAdapterDTO.isImage())
{if(aCardPropertyAdapterDTO.hasIcon())
{iconUrl=aCardPropertyAdapterDTO.dataBean.iconurl;}}
org.r3.PageManager.loadImage(iconUrl,{maxWidth:100,maxHeight:100},function(img){$('#cardfileactionform_form_icon').html(img);});},refresh:function()
{this.fileView.refresh();},propertyDelete:function()
{if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{this.hideDetail();var selectedItem=this.fileView.fnGetSelectedDataBean();this.actionFormManager.deleteProperty(selectedItem,$.r3Utils.hitch(this,function(e)
{this.actionFormManager.refresh();}));}},updateProperty:function()
{console.log("Whatever: ",this);this.actionFormManager.updateFileProperty($('#cardfileactionform_form_propertyid').val(),$.r3Utils.hitch(this,function(e)
{this.actionFormManager.refresh();}));},hideDetail:function()
{$('#cardfileactionform_action_bar').hide();$('#cardfileactionform_detail_container').hide();},showDetail:function(aCardPropertyAdapterDTO)
{$('#cardfileactionform_fieldset_message').formmessage('clear');$('#cardfileactionform_detail_container').show();$('#cardfileactionform_action_bar').show();}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole",window,function(aNamespace)
{aNamespace.cardfileactionform_form_validationRules={propertyname:{required:true,maxlength:80}};aNamespace.cardfileactionform_form_validationMessages={propertyname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.CardDetailActionFormView_TabCardLink=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.linkView=new org.r3.db.cms.cardproperty.CardPropertyQueryActionFormView(anHtmlActionFormContainerId,this.actionFormManager,{dataTableId:'CardLinkQueryActionFormView',showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/jsportlet/cmsconsole/CardDetailActionFormView_TabCardLink.html",gradeLevel:'grade_level1',legend:org.r3.jsportlet.cmsconsole.message.cardlinkactionform_form_legend,dataTableSource:org.r3.PageManager.getRESTUrl('GET_CardPropertyLinks',[aCardDataBean.dataBean.cardid]),dataTableColumns:"propertyid,propertyname,propertyvalue,propertyrole",requiredLUTs:["GET_classifier_sys_recstatus"],onSelected:$.r3Utils.hitch(this,function(aCardPropertyDTOAdapter){$('#tablink_deleteItem').prop('disabled',false);this.propertyDetail(aCardPropertyDTOAdapter);}),onDblClick:null,buttons:[{id:'tablink_deleteItem',label:org.r3.message.action_delete,disabled:true,onClick:$.r3Utils.hitch(this,this.propertyDelete)}],onClearSelection:function(){$('#tablink_deleteItem').prop('disabled',true);},onInitializationComplete:$.r3Utils.hitch(this,function(){var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_CardImages",[aCardDataBean.dataBean.cardid]);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#cardlinkactionform_form_refpropertyid')});$('#cardlinkactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.cmsconsole.cardlinkactionform_form_validationRules,messages:org.r3.jsportlet.cmsconsole.cardlinkactionform_form_validationMessages});$('#cardlinkactionform_form_cardid_label').html('['+aCardDataBean.dataBean.cardid+']');$('#cardlinkactionform_fieldset_message').formmessage({});$('#cardlinkactionform_action_additem').unbind().click($.r3Utils.hitch(_self,_self.addProperty));$('#cardlinkactionform_action_updateitem').unbind().click($.r3Utils.hitch(_self,_self.updateProperty));$('#cardlinkactionform_action_cancel_updateitem').unbind().click($.r3Utils.hitch(_self,_self.cancelUpdateProperty));$('#cardlinkactionform_action_cancel').unbind().click(function(e){org.r3.PageManager.back();});_self._setInsertMode();})});this.linkView.open();},propertyDetail:function(aCardPropertyAdapterDTO)
{$('#cardlinkactionform_form_propertyid').attr('value',aCardPropertyAdapterDTO.dataBean.propertyid);this._setUpdateMode();$('#cardlinkactionform_form_propertyname').val(aCardPropertyAdapterDTO.dataBean.propertyname);$('#cardlinkactionform_form_propertyvalue').val(aCardPropertyAdapterDTO.dataBean.propertyvalue);$('#cardlinkactionform_form_refpropertyid').val(aCardPropertyAdapterDTO.dataBean.refpropertyid);},refresh:function()
{var aCardDataBean=this.actionFormManager.dataBeanInfo;this.linkView.refresh();var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_CardImages",[aCardDataBean.dataBean.cardid]);org.r3.PageManager.lutManager.invalidateLUT(resolvedUrl);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#cardlinkactionform_form_refpropertyid')});this._setInsertMode();},propertyDelete:function()
{if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{this._setInsertMode();var selectedItem=this.linkView.fnGetSelectedDataBean();this.actionFormManager.deleteProperty(selectedItem);}},addProperty:function()
{this.actionFormManager.addLinkProperty($.r3Utils.hitch(this,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('cardlinkactionform_fieldset_message');}
else
{$('#cardlinkactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}
this._setInsertMode();}),$.r3Utils.hitch(this,function(message)
{$('#cardlinkactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}));},updateProperty:function()
{this.actionFormManager.updateLinkProperty($('#cardlinkactionform_form_propertyid').val(),$.r3Utils.hitch(this,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('cardlinkactionform_fieldset_message');}
else
{$('#cardlinkactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}
this.linkView.refresh();this._setInsertMode();}),$.r3Utils.hitch(this,function(message)
{$('#cardlinkactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}));},cancelUpdateProperty:function()
{this._setInsertMode();},_setInsertMode:function()
{$('#cardlinkactionform_form_propertyid').attr('value',"");$('#cardlinkactionform_action_additem').show();$('#cardlinkactionform_action_updateitem').hide();$('#cardlinkactionform_action_cancel_updateitem').hide();$('#cardlinkactionform_form').resetForm();},_setUpdateMode:function()
{$('#cardlinkactionform_action_additem').hide();$('#cardlinkactionform_action_updateitem').show();$('#cardlinkactionform_action_cancel_updateitem').show();}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole",window,function(aNamespace)
{aNamespace.cardlinkactionform_form_validationRules={propertyname:{required:true,maxlength:80},propertyvalue:{required:true,maxlength:255},refpropertyid:{required:false}};aNamespace.cardlinkactionform_form_validationMessages={propertyname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},propertyvalue:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},refpropertyid:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.CardDetailActionFormView_TabCardText=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean,aCardDescrDataBean)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);$('#cardtextactionform_fieldset_message').formmessage({});$('#cardtextactionform_form_languagecode').unbind().change(function(e)
{var currentTarget=$(e.currentTarget);var l=currentTarget.val();_self.actionFormManager.retrieveCardDescr(l,$.r3Utils.hitch(_self,_self.initializeFields),function(message)
{$('#cardtextactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_locale'),"selectWidget":$('#cardtextactionform_form_languagecode'),"selectedValue":org.r3.Constants.language});$('#cardtextactionform_form_textbody').ckeditor();this.initializeFields(aCardDescrDataBean);$('#cardtextactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this.updateItem));$('#cardtextactionform_action_cancel').click(function(e){org.r3.PageManager.back();});$('#cardtextactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.cmsconsole.cardtextactionform_form_validationRules,messages:org.r3.jsportlet.cmsconsole.cardtextactionform_form_validationMessages});},updateItem:function()
{this.actionFormManager.updateCardDescr4Language($('#cardtextactionform_form_languagecode').val());},initializeFields:function(aCardDescrDataBean)
{$('#cardtextactionform_fieldset_message').formmessage('clear');if(aCardDescrDataBean!=null)
{$('#cardtextactionform_form_cardid_label').html('['+aCardDescrDataBean.dataBean.cardid+']');$('#cardtextactionform_form_title').val(aCardDescrDataBean.dataBean.title);$('#cardtextactionform_form_summary').val(aCardDescrDataBean.dataBean.summary);$('#cardtextactionform_form_textbody').val(aCardDescrDataBean.dataBean.textbody);}
else
{$('#cardtextactionform_form_title').val(null);$('#cardtextactionform_form_summary').val(null);$('#cardtextactionform_form_textbody').val("");}}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole",window,function(aNamespace)
{aNamespace.cardtextactionform_form_validationRules={title:{required:true,maxlength:80},summary:{required:true,maxlength:255}};aNamespace.cardtextactionform_form_validationMessages={title:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},summary:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.CardDetailActionFormView_TabGenerale=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#carddetailactionform_form .r3_datepicker').datepicker({format:"dd/mm/yyyy"});$('#carddetailactionform_form_validityrule_always, #carddetailactionform_form_validityrule_never, #carddetailactionform_form_validityrule_date').click(function(e)
{var currentTarget=$(e.currentTarget);var currentTargetId=currentTarget.attr('id');if(currentTarget.prop('checked'))
{switch(currentTargetId)
{case'carddetailactionform_form_validityrule_always':$('#carddetailactionform_form_validfrom').prop('disabled',true);$('#carddetailactionform_form_validfrom').val('');$('#carddetailactionform_form_validto').prop('disabled',true);$('#carddetailactionform_form_validto').val('');break;case'carddetailactionform_form_validityrule_never':$('#carddetailactionform_form_validfrom').prop('disabled',true);$('#carddetailactionform_form_validfrom').val('');$('#carddetailactionform_form_validto').prop('disabled',true);$('#carddetailactionform_form_validto').val('');break;case'carddetailactionform_form_validityrule_date':$('#carddetailactionform_form_validfrom').prop('disabled',false);$('#carddetailactionform_form_validto').prop('disabled',false);break;}}});$('#carddetailactionform_form_pagelinktype_none, #carddetailactionform_form_pagelinktype_page, #carddetailactionform_form_pagelinktype_custom').click(function(e)
{var currentTarget=$(e.currentTarget);var currentTargetId=currentTarget.attr('id');if(currentTarget.prop('checked'))
{switch(currentTargetId)
{case'carddetailactionform_form_pagelinktype_none':$('#carddetailactionform_form_pagelink').prop('disabled',true);$('#carddetailactionform_form_pagelink').val('');$('#carddetailactionform_form_pageid').prop('disabled',true);$('#carddetailactionform_form_pageid').val('');break;case'carddetailactionform_form_pagelinktype_page':$('#carddetailactionform_form_pagelink').prop('disabled',true);$('#carddetailactionform_form_pagelink').val('');$('#carddetailactionform_form_pageid').prop('disabled',false);$('#carddetailactionform_form_pageid').val('');break;case'carddetailactionform_form_pagelinktype_custom':$('#carddetailactionform_form_pagelink').prop('disabled',false);$('#carddetailactionform_form_pagelink').val('');$('#carddetailactionform_form_pageid').prop('disabled',true);$('#carddetailactionform_form_pageid').val('');break;}}});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_CMS_Page'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#carddetailactionform_form_pageid'),"selectedValue":aCardDataBean&&aCardDataBean.dataBean.pageid&&(aCardDataBean.dataBean.site+'_'+aCardDataBean.dataBean.pageid)});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_CMS_Category'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#carddetailactionform_form_categoryid'),"selectedValue":aCardDataBean&&aCardDataBean.dataBean.categoryid});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_CMS_Channels'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#carddetailactionform_form_pubchannels'),"selectedValue":aCardDataBean&&aCardDataBean.getChannelsAsCSV()});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_CMS_Group'),"selectWidget":$('#carddetailactionform_form_cardgroup'),"selectedValue":aCardDataBean&&aCardDataBean.getCardgroupsAsArray(),"onComplete":function(){$('#carddetailactionform_form_cardgroup').multiselect();}});if(aCardDataBean==null)
{$('#carddetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.createItem));$('.hideOnNewItem').hide();$('#carddetailactionform_form_validfrom').prop('disabled',true);$('#carddetailactionform_form_validto').prop('disabled',true);$('#carddetailactionform_form_pagelink').prop('disabled',true);$('#carddetailactionform_form_pageid').prop('disabled',true);$('#carddetailactionform_form_refdate').val($.r3Utils.getToday());$('#carddetailactionform_action_delete').hide();}
else
{var resolvedUrl=null;$('#carddetailactionform_form_cardid_label').html('['+aCardDataBean.dataBean.cardid+']');$('#carddetailactionform_form_cardid').val(aCardDataBean.dataBean.cardid);$('#carddetailactionform_form_cardid').prop('disabled',true);$('#carddetailactionform_form_categoryid').prop('disabled',true);$('.hideOnNewItem').show();$('#carddetailactionform_form_systemtitle').val(aCardDataBean.dataBean.systemtitle);$('#carddetailactionform_form_validityrule_'+aCardDataBean.dataBean.validityrule).prop('checked',true);if(aCardDataBean.isValidityRuleDate())
{$('#carddetailactionform_form_validfrom').prop('disabled',false);$('#carddetailactionform_form_validfrom').val(aCardDataBean.getValidfrom());$('#carddetailactionform_form_validto').prop('disabled',false);$('#carddetailactionform_form_validto').val(aCardDataBean.getValidto());}
else
{$('#carddetailactionform_form_validfrom').prop('disabled',true);$('#carddetailactionform_form_validto').prop('disabled',true);}
$('#carddetailactionform_form_pagelinktype_'+aCardDataBean.dataBean.pagelinktype).prop('checked',true);switch(aCardDataBean.dataBean.pagelinktype)
{case'none':$('#carddetailactionform_form_pagelink').prop('disabled',true);$('#carddetailactionform_form_pageid').prop('disabled',true);break;case'page':$('#carddetailactionform_form_pagelink').prop('disabled',true);break;case'custom':$('#carddetailactionform_form_pageid').prop('disabled',true);$('#carddetailactionform_form_pagelink').val(aCardDataBean.dataBean.pagelink);break;}
$('#carddetailactionform_form_refdate').val(aCardDataBean.getRefdate());$('#carddetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.updateItem));$('#carddetailactionform_action_delete').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.deleteItem));$('#carddetailactionform_action_delete').show();}
$('#carddetailactionform_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.closeNewCardPanel));$('#carddetailactionform_fieldset_message').formmessage({});$('#carddetailactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.cmsconsole.carddetailactionform_form_validationRules,messages:org.r3.jsportlet.cmsconsole.carddetailactionform_form_validationMessages});},refresh:function()
{}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole",window,function(aNamespace)
{aNamespace.carddetailactionform_form_validationRules={cardid:{required:false,maxlength:25,identifier:true},systemtitle:{required:true,maxlength:80},categoryid:{required:true},validityrule:{required:true},validfrom:{required:true,},validto:{required:true},pagelinktype:{required:true},pagelink:{required:true,maxlength:255},pageid:{required:true},refdate:{required:true}};aNamespace.carddetailactionform_form_validationMessages={cardid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},systemtitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},categoryid:{required:org.r3.message.field_required},validityrule:{required:org.r3.message.field_required},validfrom:{required:org.r3.message.field_required},validto:{required:org.r3.message.field_required},pagelinktype:{required:org.r3.message.field_required},pagelink:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},pageid:{required:org.r3.message.field_required},refdate:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.CardPickerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.advancedSearchForm=new org.r3.jsportlet.cmsconsole.CardQueryAdvancedSearchActionFormView(anAdvancedSearchHtmlActionFormContainerId,this);this.advancedSearchForm.open();this.pickedValue=null;this.listView=new org.r3.db.cms.card.CardQueryActionFormView(anHtmlActionFormContainerId,this,{dataTableId:'CardQueryActionFormView',gradeLevel:'grade_level2 grade_clickable',legend:org.r3.db.cms.card.message.queryactionformview_legend,sortable:true,layout:'fullWidth',actionBarOnTop:true,dataTableColumns:"singleselector,valid,cardid;sort,systemtitle;sort,categoryid,refdate;sort,queryformview-tools",onToolsIconSelected:$.r3Utils.hitch(this,this.detailItem),onSelected:$.r3Utils.hitch(this,this._onRowSelected),onClearSelection:null,onDblClick:null,onPageChange:$.r3Utils.hitch(this,function(){$('#cardpickeractionform_action_selectcard').prop('disabled',true);}),searchInfo:{widget:'select',widgetInitialization:{url:org.r3.PageManager.getRESTUrl('LUT_CMS_Category'),blankOptionText:org.r3.PageManager.getMessageFromDict("org.r3.jsportlet.cmsconsole.message.any")},label:org.r3.jsportlet.cmsconsole.message.search_category,validationRules:org.r3.jsportlet.cmsconsole.CardQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.jsportlet.cmsconsole.CardQueryActionFormView_filter_searchform_validationMessages,autoStart:true},advancedSearchInfo:[{label:org.r3.jsportlet.cmsconsole.message.search_advanced,actionView:this.advancedSearchForm,autoOpen:false}],buttons:[{id:'cardpickeractionform_action_selectcard',label:org.r3.message.action_select,disabled:true,onClick:$.r3Utils.hitch(this,this.onItemSelected)}],onInitializationComplete:$.r3Utils.hitch(this,function()
{var matchExpr='input[name="cardid"]';$('#CardQueryActionFormView_tableform').off('click',matchExpr).on('click',matchExpr,$.r3Utils.hitch(this,function(e)
{$('#cardpickeractionform_action_selectcard').prop('disabled',false);var currentTarget=$(e.currentTarget);this.pickedValue={dtokey:currentTarget.val(),dtodescr:currentTarget.val()+' - '+currentTarget.attr('title')};e.stopPropagation();}));})});},close:function()
{this.hide();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{},open:function(options)
{this.srcPickerWidget=options.pickerWidget;var dataTableSourceRestUrlReference='GET_Cards';if(options.queryUrl)
dataTableSourceRestUrlReference=options.queryUrl;var dataTableSource=org.r3.PageManager.getRESTUrl(dataTableSourceRestUrlReference);this.listView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});},onItemSelected:function(){console.info("actionForm:pickerWidget is: ",this.srcPickerWidget);this.srcPickerWidget.addVal(this.pickedValue);org.r3.PageManager.back();},_onRowSelected:function(aCardDTOAdapter)
{$('#CardQueryActionFormView_'+aCardDTOAdapter.dataBean.cardid).prop('checked',true);$('#cardpickeractionform_action_selectcard').prop('disabled',false);this.pickedValue={dtokey:aCardDTOAdapter.dataBean.cardid,dtodescr:aCardDTOAdapter.dataBean.cardid+' - '+aCardDTOAdapter.dataBean.systemtitle};},detailItem:function(aCardDTOAdapter)
{this._onRowSelected(aCardDTOAdapter);this.hide();this.pageManager.openCardDetailPanel(aCardDTOAdapter);}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.CardQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.advancedSearchForm=new org.r3.jsportlet.cmsconsole.CardQueryAdvancedSearchActionFormView(anAdvancedSearchHtmlActionFormContainerId,this);this.advancedSearchForm.open();this.listView=new org.r3.db.cms.card.CardQueryActionFormView(anHtmlActionFormContainerId,this,{dataTableId:'CardQueryActionFormView',layout:'fullWidth',iDisplayLength:25,gradeLevel:'grade_level2 grade_clickable',legend:org.r3.db.cms.card.message.queryactionformview_legend,sortable:true,dataTableColumns:"cardid;sort,systemtitle;sort,categoryid,refdate;sort",onSelected:$.r3Utils.hitch(this,this.detailItem),onDblClick:null,onClearSelection:function(){$('#cardqueryactionform_action_deleteItem').prop('disabled',true);},searchInfo:{widget:'select',widgetInitialization:{url:org.r3.PageManager.getRESTUrl('LUT_CMS_Category'),blankOptionText:org.r3.PageManager.getMessageFromDict("org.r3.jsportlet.cmsconsole.message.any")},label:org.r3.jsportlet.cmsconsole.message.search_category,validationRules:org.r3.jsportlet.cmsconsole.CardQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.jsportlet.cmsconsole.CardQueryActionFormView_filter_searchform_validationMessages,autoStart:true},advancedSearchInfo:[{label:org.r3.jsportlet.cmsconsole.message.search_advanced,actionView:this.advancedSearchForm,autoOpen:false}]});},close:function()
{this.listView.hide();},open:function(aCategoryId)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Cards');if(aCategoryId)
{dataTableSource=org.r3.PageManager.getRESTUrl('GET_CardsByCategory',[aCategoryId]);}
this.listView.open({"dataTableSource":dataTableSource});},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},newItem:function()
{this.listView.hide();this.pageManager.newCard();},detailItem:function(aDataBean)
{this.listView.hide();this.pageManager.detailCard(aDataBean);}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole",window,function(aNamespace)
{aNamespace.CardQueryActionFormView_filter_searchform_validationRules={filter_item:{required:false}};aNamespace.CardQueryActionFormView_filter_searchform_validationMessages={filter_item:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.CardQueryAdvancedSearchActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.executeSearch=null;},close:function()
{$("#dialog-form").modal("hide");},show:function(anExecuteSearchFunction)
{$("#dialog-form").modal();this.executeSearch=anExecuteSearchFunction;},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkInitializationQueue=[];networkInitializationQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cmsconsole/CardQueryAdvancedSearchActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkInitializationQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);var actionFormView=this;$("#userquery_advancedsearchform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.cmsconsole.advancedsearchform_form_validationRules,messages:org.r3.jsportlet.cmsconsole.advancedsearchform_form_validationMessages});$('#cardquery_advancedsearchform_action_search').unbind().click($.r3Utils.hitch(actionFormView,actionFormView.executeAdvancedSearch));}),function(d)
{console.error("controller did not load");});},dismissAdvancedSearchDialog:function()
{$("#dialog-form").modal("hide");},executeAdvancedSearch:function()
{var theForm=$('#cardquery_advancedsearchform_form');if(!theForm.valid())
return;var qparams=[];qparams.push({"name":"cardid","value":$('#cardquery_advancedsearchform_form_cardid').val()});this.executeSearch(qparams);this.dismissAdvancedSearchDialog();}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole",window,function(aNamespace)
{aNamespace.advancedsearchform_form_validationRules={cardid:{required:false,maxlength:15}};aNamespace.advancedsearchform_form_validationMessages={cardid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.UploadFileActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anUploadFileViewContainerId)
{this.setPageManager(aPageManager);this.uploadFileView=new org.r3.jsportlet.cmsconsole.UploadFileActionFormView(anUploadFileViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.uploadFileView.hide();},show:function()
{this.uploadFileView.show();},open:function(aCardDTOAdapter)
{this.setDataBeanInfo(aCardDTOAdapter);this.uploadFileView.open(aCardDTOAdapter);},uploadFile:function()
{},releaseSession:function()
{if(this.uploadFileView.isPendingUpload())
{if(!org.r3.PageManager.confirmation("org.r3.jsportlet.cmsconsole.message.pendingUploads"))
return;}}});$.r3Utils.namespace("org.r3.jsportlet.cmsconsole");org.r3.jsportlet.cmsconsole.UploadFileActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.uploadedFiles=[];},close:function()
{this.hide();},isPendingUpload:function()
{if(this.uploadedFiles&&this.uploadedFiles.length)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(this.uploadedFiles[i].pending)
return true;}
return false;},_clearFilenamesQueue:function()
{this.uploadedFiles.length=0;},_findEnqueuedFilename:function(aFileName)
{if(this.uploadedFiles&&this.uploadedFiles.length&&aFileName)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(aFileName==this.uploadedFiles[i].fname)
return i;}
return-1;},_enqueueFilename4Uploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Enqueue: "+aFileName);this.uploadedFiles.push({fname:aFileName,pending:true});}},_markEnqueuedFileAsCompleted:function(aFileName)
{if(aFileName)
{console.info("Trying to Mark File as Completed: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Mark: "+aFileName);this.uploadedFiles[fileNdx].pending=false;}}},_dequeueFilenameFromUploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Dequeue: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Dequeuing: "+aFileName);this.uploadedFiles.splice(fileNdx,1);}}},open:function(aCardDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");this._clearFilenamesQueue();var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cmsconsole/UploadFileActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var this_actionFormView=this;org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_CMS_Attachtype_default'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#uploadfileactionform_form_cms_attachtype')});$("#uploadfileactionform_form").validate({meta:"validate"});var aRestUrl=org.r3.PageManager.getRESTUrl('POST_Card_File',[aCardDTOAdapter.dataBean.cardid]);if(r3_IE)
aRestUrl=org.r3.PageManager.getRESTUrl('POST_Card_File_IE',[aCardDTOAdapter.dataBean.cardid]);console.info('CardDTOAdapter: ',aCardDTOAdapter);var fileTypes=org.r3.message.getDefaultAcceptedCMSFileTypes();var acceptedType='png';if(fileTypes&&fileTypes.length>0)
{if(fileTypes.length==1)
acceptedType=fileTypes[0];else
{acceptedType='';for(var i=0;i<fileTypes.length;i++)
{if(i>0)
acceptedType+='|';acceptedType=acceptedType+fileTypes[i];}}}
var rexp=new RegExp(".+\\.("+acceptedType+")$","i");$('#uploadfileactionform_form').fileupload({"acceptFileTypes":rexp,"url":aRestUrl,"dataType":'json',"sequentialUploads":true,"formAcceptCharset":"utf-8","submit":function(e,data)
{console.info("Submitting: ",e,data,data.files[0].name);if(!$("#uploadfileactionform_form").valid())
return false;return true;},"failed":function(e,data)
{console.info("Failing: ",e,data);console.info("Should Dequeue: ",data.files.valid,data.files[0].name);if(data.files.valid)
this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);return true;},"completed":function(e,data)
{console.info("Done: ",e,data);if(data.result&&data.result.files&&data.result.files[0]&&data.result.files[0].error)
{console.info("Done: is Error? "+data.result.files[0].error);this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
else this_actionFormView._markEnqueuedFileAsCompleted(data.files[0].name);return true;}}).bind('fileuploaddestroy',function(e,data){console.log("Should Delete: ",data);});$('#uploadfileactionform_form_action_releasesession').button().unbind().click($.r3Utils.hitch(org.r3.PageManager,org.r3.PageManager.back));this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.cookielaw");org.r3.jsportlet.cookielaw.CookieLawActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.cookielaw.CookieLawActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},provideConsent:function()
{var restUrl=org.r3.PageManager.getRESTUrl('PUT_User_Consent',['CURRENT']);$.ajax({"type":"PUT","url":restUrl,"dataType":"json","success":function()
{},"error":function(jqXHR,timeout,message)
{console.error("Errore Sending Consent: ",jqXHR,timeout,message);}});}});$.r3Utils.namespace("org.r3.jsportlet.cookielaw");org.r3.jsportlet.cookielaw.CookieLawActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{var _self=this;var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/cookielaw/CookieLawActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{$(this.htmlContainerId).html(responseData['view']);$('#cookieLawConsent_action_close').unbind().click(function(e){console.info("Accepting CookieLaw Consent");$(_self.htmlContainerId).hide();_self.actionFormManager.provideConsent();});this.loadIubendaScript();this.show();}),function(d)
{console.error("controller did not load");});},loadIubendaScript:function()
{var s=document.createElement("script"),tag=document.getElementsByTagName("script")[0];s.src="//cdn.iubenda.com/iubenda.js";tag.parentNode.insertBefore(s,tag);}});$.r3Utils.namespace("org.r3.jsportlet.dialog");org.r3.jsportlet.dialog.DialogConfirmationActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.dialog.DialogConfirmationActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function(optionsHash)
{this.detailView.show(optionsHash);},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.dialog");org.r3.jsportlet.dialog.DialogConfirmationActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.dialogId="#org_r3_jsportlet_dialog_confirmationdialog";this.options=null;},close:function()
{$(this.dialogId).modal("hide");},show:function(optionsHash)
{$(this.dialogId).modal();this.options=optionsHash;$('#org_r3_jsportlet_dialog_confirmationdialog #org_r3_jsportlet_dialog_confirmationdialog_opt_delete').prop('checked',false);},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkInitializationQueue=[];networkInitializationQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/dialog/DialogConfirmationActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkInitializationQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);var actionFormView=this;$('#org_r3_jsportlet_dialog_confirmationdialog_actionconfirm').unbind().click($.r3Utils.hitch(actionFormView,actionFormView.confirmDialog));}),function(d)
{console.error("controller did not load");});},dismissDialog:function()
{$(this.dialogId).modal("hide");},confirmDialog:function()
{var checkField=$('#org_r3_jsportlet_dialog_confirmationdialog_opt_delete');$(this.dialogId).modal("hide");if(this.options.onConfirmed)
{this.options.onConfirmed(checkField.prop('checked')?'btrue':'bfalse');}}});$.r3Utils.namespace("org.r3.jsportlet.fileupload");org.r3.jsportlet.fileupload.FileImportDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,uploadOptions)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.fileupload.FileImportDetailActionFormView(aDetailViewContainerId,this,uploadOptions);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(aFileImportDTOAdapter)
{this.setDataBeanInfo(aFileImportDTOAdapter);this.detailView.open(aFileImportDTOAdapter);},closeFileUpload:function(onCloseActionForm)
{var _self=this;onCloseActionForm();},deleteFileImport:function(aMethod,dictionaryUrl,onSuccess,onError)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var method=aMethod;var restUrl=org.r3.PageManager.getRESTUrl(dictionaryUrl,[this.dataBeanInfo.dataBean.importid]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});},processFileImport:function(theForm,dictionaryUrl,onSuccess,onError)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var method='put';var restUrl=org.r3.PageManager.getRESTUrl(dictionaryUrl,[this.dataBeanInfo.dataBean.importid]);theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});}});$.r3Utils.namespace("org.r3.jsportlet.fileupload");org.r3.jsportlet.fileupload.FileImportDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,options)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.configOptions=options;},_hasBack:function()
{return this.configOptions.onCloseUploadFileActionForm;},_getOnCloseUploadFileActionForm:function()
{return this.configOptions.onCloseUploadFileActionForm;},close:function()
{this.hide();},open:function(aFileImportDTOAdpater,options)
{var _self=this;if(options)
this.configOptions=$.extend(this.configOptions,options);org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/fileupload/FileImportDetailActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"importdata",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_FileImportData',[aFileImportDTOAdpater.dataBean.importid]),dataType:"json"});if(this.configOptions.formfragment)
{networkRequestsQueue.push({id:"formfragment_extension_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(this.configOptions.formfragment),dataType:"html"});}
networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_fileimport_actor'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var templatedHtml=tmpl(responseData['view'],{fileImportDTOAdapter:aFileImportDTOAdpater,fileImportData:responseData['importdata']});$(this.htmlContainerId).html(templatedHtml);var fview=responseData['formfragment_extension_view'];if(fview)
{console.log("Adding Extension Fields to: ",$('#formfragment_fields'));$('#jsportletfileimportform_extension_fields').html(tmpl(fview,{}));}
if(this.configOptions.formFragmentInit)
{this.configOptions.formFragmentInit();}
if(aFileImportDTOAdpater.dataBean.numberofcolumns>0)
{var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_classifier_fileimport_actor");for(var i=1;i<=aFileImportDTOAdpater.dataBean.numberofcolumns;i++)
{var selectWidget=$('#jsportletfileimportform_fileimport_match4col'+i);if(selectWidget&&selectWidget.length>0)
{org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"selectWidget":selectWidget});}}}
$('#jsportletfileimportform_fieldset_message').formmessage({});$('#jsportletfileimportform_action_cancel').unbind().click(function(e){org.r3.PageManager.back();});$('#jsportletfileimportform_action_delete').unbind().click($.r3Utils.hitch(this,this.onDeleteFileImportClick));$('#jsportletfileimportform_action_saveitem').unbind().click($.r3Utils.hitch(this,this.onSaveFileImportClick));this.show();}),function(d)
{console.error("controller did not load");});},onDeleteFileImportClick:function(event)
{if(!org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
return;this.actionFormManager.deleteFileImport('delete','DELETE_FileImport',function(responseData){},function(jqXHR,timeout,message){$('#jsportletfileimportform_fieldset_message').formmessage('setText',{text:message,category:'error'});});event.preventDefault();},onSaveFileImportClick:function(event)
{event.preventDefault();if(!this.checkColumnMappings())
{$('#jsportletfileimportform_fieldset_message').formmessage('setText',{text:org.r3.jsportlet.fileupload.message.checkcolumnmappingsfailed,category:'error'});return;}
if(!org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
return;$('#jsportletfileimportform_action_saveitem').prop('disabled',true);var theForm=$('#jsportletfileimportform_form');var processUrl='PUT_ProcessFileImport';if(this.configOptions.processURL)
processUrl=this.configOptions.processURL;this.actionFormManager.processFileImport(theForm,processUrl,function(responseData)
{},function(jqXHR,timeout,message){$('#jsportletfileimportform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},checkColumnMappings:function()
{var rc=false;var colMatch=$("select[name='columnmatch']");if(colMatch&&colMatch.length>0)
{var numberOfNones=0;var numberOfDups=0;var mappings="";for(var i=0;i<colMatch.length;i++)
{var selValue=$(colMatch[i]).val();if(selValue=='fimp_none')
numberOfNones++;else
{if(mappings.indexOf(selValue)>=0)
{numberOfDups++;}
else
{mappings=mappings+", "+selValue;}}}
if(numberOfNones<colMatch.length&&numberOfDups==0)
rc=true;}
return rc;}});$.r3Utils.namespace("org.r3.jsportlet.fileupload",window,function(aNamespace)
{aNamespace.jsportletfileimportform_form_validationRules={documenttype:{required:true}};aNamespace.jsportletfileimportform_form_validationMessages={documenttype:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.fileupload");org.r3.jsportlet.fileupload.FileImportQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.system.fileimport.fileimport.FileImportQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'FileImportQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.system.fileimport.fileimport.message.queryactionform_caption,iDisplayLength:25,dataTableSource:'GET_FileImports',layout:'fullWidth',sortable:true,dataTableColumns:"importname,recstatus,rectimestamp",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.fileImportDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_fileimport_action_refresh',label:org.r3.message.action_refresh,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},fileImportDetail:function(aDTOAdapter)
{this.listView.hide();org.r3.console.contacts.PageManager.openFileImportDetailPanel(aDTOAdapter);}});$.r3Utils.namespace("org.r3.jsportlet.fileupload");org.r3.jsportlet.fileupload.UploadFileActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.fileupload.UploadFileActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(fileUploadOptions)
{this.detailView.open(fileUploadOptions);},closeFileUpload:function(onCloseActionForm)
{var _self=this;onCloseActionForm();}});$.r3Utils.namespace("org.r3.jsportlet.fileupload");org.r3.jsportlet.fileupload.UploadFileActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.uploadedFiles=[];this.configOptions={};},_getRestUrl:function()
{var aRestUrl=this.configOptions.uploadfile_resturl;if(r3_IE)
aRestUrl=this.configOptions.uploadfile_resturl_ie;return aRestUrl;},_getAcceptedType:function()
{var acceptedType=null;if(this.configOptions.fileTypes&&this.configOptions.fileTypes.length>0)
{if(this.configOptions.fileTypes.length==1)
acceptedType=this.configOptions.fileTypes[0];else
{acceptedType='';for(var i=0;i<this.configOptions.fileTypes.length;i++)
{if(i>0)
acceptedType+='|';acceptedType=acceptedType+this.configOptions.fileTypes[i];}}}
return acceptedType;},_hasBack:function()
{return this.configOptions.onCloseUploadFileActionForm;},_getOnCloseUploadFileActionForm:function()
{return this.configOptions.onCloseUploadFileActionForm;},close:function()
{this.hide();},isPendingUpload:function()
{if(this.uploadedFiles&&this.uploadedFiles.length)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(this.uploadedFiles[i].pending)
return true;}
return false;},_clearFilenamesQueue:function()
{this.uploadedFiles.length=0;},_findEnqueuedFilename:function(aFileName)
{if(this.uploadedFiles&&this.uploadedFiles.length&&aFileName)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(aFileName==this.uploadedFiles[i].fname)
return i;}
return-1;},_enqueueFilename4Uploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Enqueue: "+aFileName);this.uploadedFiles.push({fname:aFileName,pending:true});}},_markEnqueuedFileAsCompleted:function(aFileName)
{if(aFileName)
{console.info("Trying to Mark File as Completed: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Mark: "+aFileName);this.uploadedFiles[fileNdx].pending=false;}}},_dequeueFilenameFromUploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Dequeue: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Dequeuing: "+aFileName);this.uploadedFiles.splice(fileNdx,1);}}},open:function(options)
{var _self=this;if(options)
this.configOptions=$.extend(this.configOptions,options);org.r3.PageManager.wait("org.r3.message.waiting");this._clearFilenamesQueue();var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/fileupload/UploadFileActionForm.html'),dataType:"html"});if(this.configOptions.formfragment)
{networkRequestsQueue.push({id:"formfragment_extension_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(this.configOptions.formfragment),dataType:"html"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var this_actionFormView=this;org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));var fview=responseData['formfragment_extension_view'];if(fview)
{$('#formfragment_fields').html(tmpl(fview,{}));}
if(_self.configOptions.formFragmentInit)
{this.configOptions.formFragmentInit();}
if(this._hasBack())
{$('#jsportletfileuploadform_action_back').button().unbind().click($.r3Utils.hitch(this,function(e){this.hide();this.actionFormManager.closeFileUpload(this._getOnCloseUploadFileActionForm());}));}
else $('#jsportletfileuploadform_action_back').hide();var aRestUrl=this._getRestUrl();var acceptedType=this._getAcceptedType();var rexp=new RegExp(".+\\.("+acceptedType+")$","i");$('#jsportletfileuploadform_form').fileupload({"acceptFileTypes":rexp,"url":aRestUrl,"dataType":'json',"sequentialUploads":true,"formAcceptCharset":"utf-8","submit":function(e,data)
{console.info("Submitting: ",e,data,data.files[0].name);if(!$("#jsportletfileuploadform_form").valid())
return false;return true;},"failed":function(e,data)
{console.info("Failing: ",e,data);if(data.files&&data.files.valid)
{console.info("Should Dequeue: ",data.files.valid,data.files[0].name);this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
return true;},"completed":function(e,data)
{console.info("Done: ",e,data);if(data.result&&data.result.files&&data.result.files[0].error)
{console.info("Done: is Error? "+data.result.files[0].error);this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
else this_actionFormView._markEnqueuedFileAsCompleted(data.files[0].name);return true;}});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.fileupload",window,function(aNamespace)
{aNamespace.jsportletfileuploadform_form_validationRules={documenttype:{required:true}};aNamespace.jsportletfileuploadform_form_validationMessages={documenttype:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.flowplayer");org.r3.jsportlet.flowplayer.FlowPlayerPortletActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.flowplayer.FlowPlayerPortletActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.flowplayer");org.r3.jsportlet.flowplayer.FlowPlayerPortletActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/flowplayer/FlowPlayerPortletActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$('#webcamplayer').flowplayer({live:true,ratio:9/16,wmode:'direct',embed:false,time:false,muted:false,volume:1.0,wmode:"direct",clip:{sources:[{type:"application/x-mpegurl",src:"http://95.110.157.56:1935/streamfiumicino(rm)/streamfiumicino(rm).stream/playlist.m3u8"},{type:"video/webm",src:"rtmp://"},{type:"video/mp4",src:"rtmp://"}],accelerated:true,title:"Nautilus - Fiumicino"}});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.imageupload");org.r3.jsportlet.imageupload.ImageUploadActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.defaultConfigOptions={};this.configOptions=null;this.imageUploader=null;},close:function()
{this.hide();},open:function(aConfigHash)
{var _self=this;if(aConfigHash)
this.configOptions=$.extend({},this.defaultConfigOptions,aConfigHash);else this.configOptions=this.defaultConfigOptions;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/imageupload/'+this.configOptions.templateFile),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{viewConfigOptions:_self.configOptions}));this.imageUploader=org.r3.jsportlet.imageupload.ImageUploader({img_selector:this.configOptions.imageCanvasIdHash+' .photoimage',inputfile_selector:this.configOptions.inputFileTriggerSelector,overlay_selector:this.configOptions.imageCanvasIdHash+' .overlay',selectiontrigger_selector:this.configOptions.imageCanvasIdHash+' .photoselectiontrigger',modaldialog_selector:'#photo_dialog',aspect_ratio:this.configOptions.aspectRatio,max_size:this.configOptions.maxSize,upload_url:this.configOptions.uploadUrl,current_image_url:this.configOptions.currentImageUrl,extra_info:this.configOptions.extraInfo});this.imageUploader.setup();if(this.configOptions.currentImageUrl)
{var u=$.r3Utils.formatDMSUrl4ClientAccess(this.configOptions.currentImageUrl);loadImage(u,function(img){$(_self.configOptions.imageCanvasIdHash+' .photoimage')[0].src=img.src;});}
$(this.configOptions.inputFileTriggerSelector).on('change',$.r3Utils.hitch(this,this.onFileSelected));$(this.configOptions.imageCanvasIdHash+' .overlay').hide();$(document).on('dragover',function(e){e.preventDefault();e=e.originalEvent;e.dataTransfer.dropEffect='copy';}).on('drop',$.r3Utils.hitch(this,this.onFileSelected));$(this.configOptions.imageCanvasIdHash+' .photoselectiontrigger').unbind().click(function(e){$(_self.configOptions.inputFileTriggerSelector).trigger('click');});}),function(d)
{console.error("controller did not load");});},onFileSelected:function(e)
{e.preventDefault();e=e.originalEvent;var target=e.dataTransfer||e.target,file=target&&target.files&&target.files[0];if(!file){return;}
this.processFile(file);},processFile:function(aFile)
{$(this.configOptions.inputFileTriggerSelector).val("");var _self=this;var options={canvas:true};$('#photo_dialog').loadImage1({file:aFile,aspectRatio:this.configOptions.aspectRatio,maxSize:this.configOptions.maxSize,processImage:function(img_or_canvas,exifData)
{$(_self.configOptions.imageCanvasIdHash+' .photoimage')[0].src=img_or_canvas.toDataURL(aFile.type);img_or_canvas.toBlob(function(blob){console.log(blob);var fd=new FormData();fd.append('file',blob,aFile.name);if(exifData)
{for(var prop in exifData){if(exifData.hasOwnProperty(prop)){fd.append('exif_'+prop,exifData[prop]);}}}
if(img_or_canvas.height)
fd.append("height",img_or_canvas.height);if(img_or_canvas.width)
fd.append("width",img_or_canvas.width);if(_self.configOptions.extraInfo&&_self.configOptions.extraInfo.length)
{for(var k=0;k<_self.configOptions.extraInfo.length;k++)
fd.append(_self.configOptions.extraInfo[k].name,_self.configOptions.extraInfo[k].value);}
var restUrl=_self.configOptions.uploadUrl;$(_self.configOptions.imageCanvasIdHash+' .overlay').show();org.r3.AjaxUtils.submitFormData("PUT",restUrl,fd,function(e){console.log("Success");$(_self.configOptions.imageCanvasIdHash+' .overlay').hide();if(_self.configOptions.onSubmission)
_self.configOptions.onSubmission('photo');},null,false,true);},aFile.type);}});}});$.r3Utils.namespace("org.r3.jsportlet.imageupload");org.r3.jsportlet.imageupload.FileUploader=Class.extend({init:function(anOptionsHash)
{this.defaultConfigOptions={upload_method:"POST"};this.configOptions=null;if(anOptionsHash)
this.configOptions=$.extend({},this.defaultConfigOptions,anOptionsHash);else this.configOptions=this.defaultConfigOptions;$(this.configOptions.inputfile_selector).on('change',$.r3Utils.hitch(this,this.onFileSelected));},open:function(anOptionsHash)
{this.configOptions=$.extend({},this.configOptions,anOptionsHash);if(this.configOptions.accept)
{$(this.configOptions.inputfile_selector).attr("accept",this.configOptions.accept);}
$(this.configOptions.inputfile_selector).trigger('click');},_getFileExtension:function(fName)
{if(!fName||fName.indexOf('.')<0)
return null;var ext=fName.match(/\.([^\.]+)$/)[1];return ext;},isFileAccepted:function(fName,fType)
{console.log("FileName: "+fName+"/"+fType);if(!this.configOptions.accept||!this.configOptions.accept.length)
return true;var fext=this._getFileExtension(fName);if(fext)
fext='.'+fext;var accepts=this.configOptions.accept.split(',');for(var i=0;i<accepts.length;i++)
{var a=accepts[i].trim();if(a==fType||(fext&&a==fext))
return true;if(a=='audio/*'&&fType.indexOf('audio/')==0)
return true;if(a=='video/*'&&fType.indexOf('video/')==0)
return true;if(a=='image/*'&&fType.indexOf('image/')==0)
return true;}
return false;},isFileImage:function(fType)
{if(fType&&fType.indexOf('image/')==0)
{return true;}
return false;},onFileSelected:function(e)
{e.preventDefault();e=e.originalEvent;var target=e.dataTransfer||e.target,file=target&&target.files&&target.files[0];if(!file){return;}
if(this.isFileAccepted(file.name,file.type))
this.processFile(file);},uploadNonImageFile:function(aFile)
{var _self=this;var fd=new FormData();fd.append('file',aFile,aFile.name);if(_self.configOptions.extra_info&&_self.configOptions.extra_info.length)
{for(var k=0;k<_self.configOptions.extra_info.length;k++)
fd.append(_self.configOptions.extra_info[k].name,_self.configOptions.extra_info[k].value);}
var restUrl=_self.configOptions.upload_url;org.r3.AjaxUtils.submitFormData(this.configOptions.upload_method,restUrl,fd,function(responseData)
{console.log("Success");if(_self.configOptions.onUploadedCallback)
{_self.configOptions.onUploadedCallback(responseData);}},null,false,true);},uploadImageFile:function(aFile)
{var _self=this;var exifInfo=null;loadImage.parseMetaData(aFile,function(data){var anOptionHash={canvas:true,aspectRatio:_self.configOptions.aspect_ratio,maxWidth:_self.configOptions.max_size[0],maxHeight:_self.configOptions.max_size[1]};if(data.exif){anOptionHash.orientation=data.exif.get('Orientation');exifInfo=data.exif;}
loadImage(aFile,function(img_or_canvas)
{if(_self.configOptions.onUploadCallback)
{_self.configOptions.onUploadCallback(img_or_canvas.toDataURL(aFile.type));}
img_or_canvas.toBlob($.r3Utils.hitch(_self,function(aBlob){this.uploadImageBLOB(aBlob,aFile.name,img_or_canvas.width,img_or_canvas.height,exifInfo&&exifInfo.getAll());}),aFile.type);},anOptionHash);});},uploadImageBLOB:function(aBlob,aFileName,aWidth,anHeight,exifData)
{var _self=this;var fd=new FormData();fd.append('file',aBlob,aFileName);if(exifData)
{for(var prop in exifData){if(exifData.hasOwnProperty(prop)){fd.append('exif_'+prop,exifData[prop]);}}}
if(anHeight)
fd.append("height",anHeight);if(aWidth)
fd.append("width",aWidth);if(this.configOptions.extra_info&&this.configOptions.extra_info.length)
{for(var k=0;k<this.configOptions.extra_info.length;k++)
fd.append(this.configOptions.extra_info[k].name,this.configOptions.extra_info[k].value);}
var restUrl=this.configOptions.upload_url;org.r3.AjaxUtils.submitFormData(this.configOptions.upload_method,restUrl,fd,function(responseData)
{if(_self.configOptions.onUploadedCallback)
{_self.configOptions.onUploadedCallback(responseData);}},null,false,true);},processFile:function(aFile)
{$(this.configOptions.inputfile_selector).val("");var _self=this;var options={canvas:true};if(!this.isFileImage(aFile.type))
{this.uploadNonImageFile(aFile);return;}
if(org.r3.PageManager.isSmallOrTabletDevice())
{this.uploadImageFile(aFile);return;}
$(this.configOptions.modaldialog_selector).loadImage1({file:aFile,aspectRatio:this.configOptions.aspect_ratio,maxSize:this.configOptions.max_size,processImage:function(img_or_canvas,exifData)
{if(_self.configOptions.onUploadCallback)
{_self.configOptions.onUploadCallback(img_or_canvas.toDataURL(aFile.type));}
img_or_canvas.toBlob($.r3Utils.hitch(_self,function(aBlob){this.uploadImageBLOB(aBlob,aFile.name,img_or_canvas.width,img_or_canvas.height,exifData);}),aFile.type);}});}});$.r3Utils.namespace("org.r3.jsportlet.imageupload");org.r3.jsportlet.imageupload.ImageUploadActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aGraphicCanvasSelector)
{this.setPageManager(aPageManager);this.actionFormTopCanvasId=aDetailViewContainerId;this.detailView=new org.r3.jsportlet.imageupload.ImageUploadActionFormView(aGraphicCanvasSelector,this);},close:function()
{this.hide();},hide:function()
{$(this.actionFormTopCanvasId).hide();},show:function()
{$(this.actionFormTopCanvasId).show();},refresh:function()
{},open:function(aGraphicType,aMongoImage)
{var _self=this;var currentSite=org.r3.Constants.site;this.detailView.open(this._getGraphicsUploadFor(aGraphicType,aMongoImage));this.show();},_getGraphicsUploadFor:function(aGraphicType,mongoImage)
{var cfg=org.r3.db.mongo.sitecollection.SiteCollectionGraphicsConfig;if(cfg&&cfg.length)
{for(var i=0;i<cfg.length;i++)
{if(cfg[i].name==aGraphicType)
{var actualValue={"cssClassName":"css_"+aGraphicType,"extraInfo":cfg[i].extraInfo,"aspectRatio":cfg[i].aspectRatio,"maxSize":cfg[i].maxSize,"templateFile":cfg[i].templateFile,"uploadUrl":org.r3.PageManager.getRESTUrl(cfg[i].uploadUrl,[org.r3.Constants.site]),"currentImageUrl":cfg[i].currentImageUrl,"imageCanvasIdHash":cfg[i].imageCanvasIdHash,"inputFileTriggerSelector":cfg[i].inputFileTriggerSelector};var u=mongoImage&&mongoImage.getUrl();if(u)
{actualValue.currentImageUrl=mongoImage&&mongoImage.getUrl();}
return actualValue;}}}
return null;}});$.r3Utils.namespace("org.r3.jsportlet.imageupload");org.r3.jsportlet.imageupload.ImageUploadActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.defaultConfigOptions={};this.configOptions=null;this.imageUploader=null;},close:function()
{this.hide();},open:function(aConfigHash)
{var _self=this;if(aConfigHash)
this.configOptions=$.extend({},this.defaultConfigOptions,aConfigHash);else this.configOptions=this.defaultConfigOptions;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/imageupload/'+this.configOptions.templateFile),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{viewConfigOptions:_self.configOptions}));this.imageUploader=new org.r3.jsportlet.imageupload.ImageUploader({img_selector:this.configOptions.imageCanvasIdHash+' .loadimage_canvas_img',inputfile_selector:this.configOptions.inputFileTriggerSelector,overlay_selector:this.configOptions.imageCanvasIdHash+' .overlay',selectiontrigger_selector:this.configOptions.imageCanvasIdHash+' .loadimage_canvas_selectiontrigger',modaldialog_selector:'#photo_dialog',aspect_ratio:this.configOptions.aspectRatio,max_size:this.configOptions.maxSize,upload_url:this.configOptions.uploadUrl,current_image_url:this.configOptions.currentImageUrl,extra_info:this.configOptions.extraInfo});this.imageUploader.setup();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.imageupload");org.r3.jsportlet.imageupload.ImageUploader=Class.extend({init:function(anOptionsHash)
{this.defaultConfigOptions={overlay_selector:'_NOT_SET_OVERLAY_',selectiontrigger_selector:'_NOT_SET_SELECTIONTRIGGER_'};this.configOptions=null;if(anOptionsHash)
this.configOptions=$.extend({},this.defaultConfigOptions,anOptionsHash);else this.configOptions=this.defaultConfigOptions;},_displayImage:function(imgData)
{if($.isFunction(this.configOptions.img_selector))
this.configOptions.img_selector(imgData);else
$(this.configOptions.img_selector)[0].src=imgData;},setup:function()
{var _self=this;if(this.configOptions.current_image_url)
{var u=$.r3Utils.formatDMSUrl4ClientAccess(this.configOptions.current_image_url);loadImage(u,function(img){_self._displayImage(img.src);});}
$(this.configOptions.inputfile_selector).on('change',$.r3Utils.hitch(this,this.onFileSelected));$(this.configOptions.overlay_selector).hide();$(document).on('dragover',function(e){e.preventDefault();e=e.originalEvent;e.dataTransfer.dropEffect='copy';}).on('drop',$.r3Utils.hitch(this,this.onFileSelected));$(this.configOptions.selectiontrigger_selector).unbind().click(function(e){$(_self.configOptions.inputfile_selector).trigger('click');});},onFileSelected:function(e)
{e.preventDefault();e=e.originalEvent;var target=e.dataTransfer||e.target,file=target&&target.files&&target.files[0];if(!file){return;}
this.processFile(file);},processFile:function(aFile)
{$(this.configOptions.inputfile_selector).val("");var _self=this;var options={canvas:true};$(this.configOptions.modaldialog_selector).loadImage1({file:aFile,aspectRatio:this.configOptions.aspect_ratio,maxSize:this.configOptions.max_size,processImage:function(img_or_canvas,exifData)
{_self._displayImage(img_or_canvas.toDataURL(aFile.type));img_or_canvas.toBlob(function(blob){console.log(blob);var fd=new FormData();fd.append('file',blob,aFile.name);if(exifData)
{for(var prop in exifData){if(exifData.hasOwnProperty(prop)){fd.append('exif_'+prop,exifData[prop]);}}}
if(img_or_canvas.height)
fd.append("height",img_or_canvas.height);if(img_or_canvas.width)
fd.append("width",img_or_canvas.width);if(_self.configOptions.extra_info&&_self.configOptions.extra_info.length)
{for(var k=0;k<_self.configOptions.extra_info.length;k++)
fd.append(_self.configOptions.extra_info[k].name,_self.configOptions.extra_info[k].value);}
var restUrl=_self.configOptions.upload_url;$(_self.configOptions.overlay_selector).show();org.r3.AjaxUtils.submitFormData("PUT",restUrl,fd,function(e){console.log("Success");$(_self.configOptions.overlay_selector).hide();if(_self.configOptions.onSubmission)
_self.configOptions.onSubmission('photo');},null,false,true);},aFile.type);}});}});$.r3Utils.namespace("org.r3.jsportlet.imageupload");org.r3.jsportlet.imageupload.UserPhotoActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.imageupload.UserPhotoActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.imageupload");org.r3.jsportlet.imageupload.UserPhotoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.defaultConfigOptions={"extraInfo":[{"name":"cms_attachtype","value":"userphoto"}],"aspectratio":1,"maxsize":[300,300],"templateFile":"UserPhotoActionFormView.html.jsp"};this.configOptions=null;},close:function()
{this.hide();},open:function(aConfigHash)
{if(aConfigHash)
this.configOptions=$.extend({},this.defaultConfigOptions,aConfigHash);else this.configOptions=this.defaultConfigOptions;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/imageupload/'+this.configOptions.templateFile),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));var userPhotoUrl=org.r3.PageManager.userInfo.getUserPhoto();if(userPhotoUrl)
{loadImage(userPhotoUrl,function(img){var userphoto_avatar_image=$('#cmsattachment_userphoto_canvas .loadimage_canvas_img');$('#cmsattachment_userphoto_canvas .loadimage_canvas_img')[0].src=img.src;});}
$('#cmsattachment_userphoto_input_file').on('change',$.r3Utils.hitch(this,this.onFileSelected));$('#cmsattachment_userphoto_canvas .overlay').hide();$(document).on('dragover',function(e){e.preventDefault();e=e.originalEvent;e.dataTransfer.dropEffect='copy';}).on('drop',$.r3Utils.hitch(this,this.onFileSelected));$('#cmsattachment_userphoto_canvas .loadimage_canvas_selectiontrigger').unbind().click(function(e){$('#cmsattachment_userphoto_input_file').trigger('click');});this.show();}),function(d)
{console.error("controller did not load");});},onFileSelected:function(e)
{e.preventDefault();e=e.originalEvent;var target=e.dataTransfer||e.target,file=target&&target.files&&target.files[0];if(!file){return;}
this.processFile(file);},processFile:function(aFile)
{$('#cmsattachment_userphoto_input_file').val("");var _self=this;var options={canvas:true};$('#photo_dialog').loadImage1({file:aFile,aspectRatio:1,maxSize:[300,300],processImage:function(img_or_canvas,exifData)
{$('#cmsattachment_userphoto_canvas .loadimage_canvas_img')[0].src=img_or_canvas.toDataURL(aFile.type);img_or_canvas.toBlob(function(blob){console.log(blob);var fd=new FormData();fd.append('file',blob,aFile.name);if(exifData)
{for(var prop in exifData){if(exifData.hasOwnProperty(prop)){fd.append('exif_'+prop,exifData[prop]);}}}
if(img_or_canvas.height)
fd.append("height",img_or_canvas.height);if(img_or_canvas.width)
fd.append("width",img_or_canvas.width);if(_self.configOptions.extraInfo&&_self.configOptions.extraInfo.length)
{for(var k=0;k<_self.configOptions.extraInfo.length;k++)
fd.append(_self.configOptions.extraInfo[k].name,_self.configOptions.extraInfo[k].value);}
var restUrl=org.r3.PageManager.getRESTUrl('PUT_UserCollection_Photo',[org.r3.PageManager.userInfo.dataBean.userid]);$('#cmsattachment_userphoto_canvas .overlay').show();org.r3.AjaxUtils.submitFormData("PUT",restUrl,fd,function(e){console.log("Success");$('#cmsattachment_userphoto_canvas .overlay').hide();},null,false,true);},aFile.type);}});},doUploadUserPhoto:function()
{var _self=this;if(true)
{org.r3.PageManager.wait("org.r3.message.waiting");var method="post";var restUrl="/r3ng/was/cvfxxxvchamp/it/cms/cards/00_METEO/files";$('#userphoto_actionform').ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();console.log(responseData);},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();}});}},demo:function()
{$('#photo_dialog').modal('show');$(function(){'use strict';var result=$('#result'),exifNode=$('#exif'),thumbNode=$('#thumbnail'),actionsNode=$('#actions'),currentFile,replaceResults=function(img){var content;if(!(img.src||img instanceof HTMLCanvasElement)){content=$('<span>Loading image file failed</span>');}else{content=$('<a target="_blank">').append(img).attr('download',currentFile.name).attr('href',img.src||img.toDataURL());}
result.html(img);if(img.getContext){actionsNode.show();}},displayImage=function(file,options){currentFile=file;if(!loadImage(file,replaceResults,options)){result.children().replaceWith($('<span>Your browser does not support the URL or FileReader API.</span>'));}},displayExifData=function(exif){var thumbnail=exif.get('Thumbnail'),tags=exif.getAll(),table=exifNode.find('table').empty(),row=$('<tr></tr>'),cell=$('<td></td>'),prop;if(thumbnail){thumbNode.empty();loadImage(thumbnail,function(img){thumbNode.append(img).show();},{orientation:exif.get('Orientation')});}
for(prop in tags){if(tags.hasOwnProperty(prop)){table.append(row.clone().append(cell.clone().text(prop)).append(cell.clone().text(tags[prop])));}}
exifNode.show();},dropChangeHandler=function(e){e.preventDefault();e=e.originalEvent;var target=e.dataTransfer||e.target,file=target&&target.files&&target.files[0],options={maxWidth:result.width(),canvas:true};if(!file){return;}
exifNode.hide();thumbNode.hide();loadImage.parseMetaData(file,function(data){if(data.exif){options.orientation=data.exif.get('Orientation');displayExifData(data.exif);}
displayImage(file,options);});},coordinates;if(window.createObjectURL||window.URL||window.webkitURL||window.FileReader){result.children().hide();}
$('#file-input').on('change',dropChangeHandler);$('#edit').on('click',function(event){event.preventDefault();var imgNode=result.find('img, canvas'),img=imgNode[0];imgNode.Jcrop({minSize:[img.width-80,img.height-80],maxSize:[img.width-80,img.height-80],setSelect:[40,40,img.width-40,img.height-40],onSelect:function(coords){coordinates=coords;},onRelease:function(){coordinates=null;}}).parent().on('click',function(event){event.preventDefault();});});$('#crop').on('click',function(event){event.preventDefault();var img=result.find('img, canvas')[0];if(img&&coordinates){replaceResults(loadImage.scale(img,{left:coordinates.x,top:coordinates.y,sourceWidth:coordinates.w,sourceHeight:coordinates.h,minWidth:result.width()}));coordinates=null;}});});}});$.r3Utils.namespace("org.r3.jsportlet.login");org.r3.jsportlet.login.LoginActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,optionsHash)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.login.LoginActionFormView(aDetailViewContainerId,this);this.options=optionsHash;if(optionsHash&&optionsHash.onLoginRedirect)
{this.onLoginRedirect=optionsHash.onLoginRedirect;}
else this.onLoginRedirect=org.r3.Constants.getStrutsActionContext()+"/org/r3/home.do";},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open(this.options);},doLogin:function()
{var _self=this;org.r3.AjaxUtils.doLogin(org.r3.PageManager.getRESTUrl('POST_User_Login',[$('#loginform_form_nickname').val()]),_self.onLoginRedirect);}});$.r3Utils.namespace("org.r3.jsportlet.login");org.r3.jsportlet.login.LoginActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.faceBookLoginStatus=null;},close:function()
{this.hide();},open:function(aConfigHash)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];var templateHtml=org.r3.Constants.applicationContext+'/org/r3/jsportlet/login/LoginActionForm_'+org.r3.Constants.language+'.html';if(aConfigHash&&aConfigHash.templateFileName)
{templateHtml=org.r3.Constants.applicationContext+'/org/r3/jsportlet/login/'+aConfigHash.templateFileName;}
networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(templateHtml),dataType:"html"});fbEnsureInit(function(){FB.getLoginStatus(function(response){_self.onFaceBookLoginStatus(response);});});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$('#loginform_form_nickname').focus();$.r3Utils.onEnter('#loginform_form_password',this.actionFormManager,this.actionFormManager.doLogin,true);$("#loginform_form").validate
({errorPlacement:function(error,element){},rules:org.r3.jsportlet.login.loginform_form_validationRules,messages:org.r3.jsportlet.login.loginform_form_validationMessages});$('#loginactionform_link_registration').attr('href',org.r3.PageManager.buildURL2Page('/org/r3/registration/register.do'));$('#loginactionform_link_resetuserpwd').attr('href',org.r3.PageManager.buildURL2Page('/org/r3/user/resetpwd.do'));$('#loginButton').unbind().click($.r3Utils.hitch(this,this.onLoginClick));$('#loginform_form_fieldset_message').formmessage({});$('#FBLoginAction').unbind().click($.r3Utils.hitch(this,this.onFaceBookLogin));this.show();}),function(d)
{console.error("controller did not load");});},onLoginClick:function(event)
{console.log("I'm clicked2.... ",this,event);this.actionFormManager.doLogin();event.preventDefault();},onFaceBookLoginStatus:function(response)
{this.faceBookLoginStatus=response;},onFaceBookLogin:function(e)
{var _self=this;e.preventDefault();if(!this.faceBookLoginStatus||this.faceBookLoginStatus.status!='connected')
{FB.login(function(response)
{_self.faceBookLoginStatus=response;if(response.status==='connected')
{_self.onConnected();}},{scope:'public_profile,email',return_scopes:true});}
else _self.onConnected();},onConnected:function()
{var _self=this;console.log('Successful login for: ',this.faceBookLoginStatus);FB.api('/me',{fields:'email,name,first_name,last_name'},function(response)
{_self.doFBLogin(_self.faceBookLoginStatus,response);});},doFBLogin:function(aLoginStatus,aUserInformation)
{console.log("FBLogin: ",aLoginStatus,aUserInformation);if(!aUserInformation.email)
return;var formData={fbuserid:aUserInformation.id,accesstoken:aLoginStatus.authResponse.accessToken,email:aUserInformation.email,firstname:aUserInformation.first_name,lastname:aUserInformation.last_name};var formPayload=$.param(formData);console.log(formPayload);org.r3.AjaxUtils.doPostLoginFormData(org.r3.PageManager.getRESTUrl('POST_FBLogin',[aUserInformation.email]),formPayload,this.actionFormManager.onLoginRedirect);}});$.r3Utils.namespace("org.r3.jsportlet.login",window,function(aNamespace)
{aNamespace.loginform_form_validationRules={nickname:{required:true,maxlength:60},password:{required:true,maxlength:10}};aNamespace.loginform_form_validationMessages={nickname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},password:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.mapexplore");org.r3.jsportlet.mapexplore.MapExplorerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.mapexplore.MapExplorerActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.mapexplore");org.r3.jsportlet.mapexplore.MapExplorerActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.dummyGeoInfo={"results":[{"address_components":[{"long_name":"30","short_name":"30","types":["street_number"]},{"long_name":"Via Roma","short_name":"Via Roma","types":["route"]},{"long_name":"Terracina","short_name":"Terracina","types":["locality","political"]},{"long_name":"Terracina","short_name":"Terracina","types":["administrative_area_level_3","political"]},{"long_name":"Provincia di Latina","short_name":"LT","types":["administrative_area_level_2","political"]},{"long_name":"Lazio","short_name":"Lazio","types":["administrative_area_level_1","political"]},{"long_name":"Italia","short_name":"IT","types":["country","political"]},{"long_name":"04019","short_name":"04019","types":["postal_code"]}],"formatted_address":"Via Roma, 30, 04019 Terracina LT, Italia","geometry":{"location":{"lat":41.2896711,"lng":13.2502455},"location_type":"ROOFTOP","viewport":{"northeast":{"lat":41.2910200802915,"lng":13.2515944802915},"southwest":{"lat":41.2883221197085,"lng":13.2488965197085}}},"place_id":"ChIJNwYq6mkjJRMR80SzzRlDGi4","types":["street_address"]}],"status":"OK"};this.shakeUsMarkers={"shkneighb":L.AwesomeMarkers.icon({icon:'users',markerColor:'red'}),"shkshop":L.AwesomeMarkers.icon({icon:'shopping-cart',markerColor:'orange'})}},close:function()
{this.hide();},open:function(aConfigHash)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mapexplore/MapExplorerActionForm.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_MapExplorerNeighborhoods',['10']),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var siteCollectionDataTableAdapter=responseData['content'];if(siteCollectionDataTableAdapter)
{siteCollectionDataTableAdapter=new org.r3.db.DTOTableAdapter(siteCollectionDataTableAdapter,function(aRowDataBean){return new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(aRowDataBean);});}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#mapexplorerform_fieldsetmessage').formmessage({});this.initializeMap(siteCollectionDataTableAdapter);this.map.invalidateSize();$('#mapexplorerform_queryneighborhoods').unbind().click($.r3Utils.hitch(this,this.searchNeighborhoods));$('#mapexplorerform_limit2favsites').unbind().click(function(e){var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$('#mapexplorerform_sitetype').prop('disabled',true);$('#mapexplorerform_sitetype').val('');}
else $('#mapexplorerform_sitetype').prop('disabled',false);});$('#mapexplorerform_address select').cascadingSelect({lutManager:org.r3.PageManager.lutManager,withNullOption:true,ajaxUrlMode:'restful',widgetConfig:[{'widgetId':'mapexplorerform_area_level_1_id','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_ita_regione'),'value':null},{'widgetId':'mapexplorerform_area_level_2_id','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_ita_regione_provincia'),'value':null},{'widgetId':'mapexplorerform_area_level_3_id','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_ita_regione_provincia_localita'),'value':null}]});$('#mapexplorerform_fieldsetmessage').formmessage({});}),function(d)
{console.error("controller did not load");});},initializeMap:function(aSiteCollectionDataTableAdapter)
{var geoLoc=org.r3.PageManager.clientGeoLocation;this.map=L.map('mapexplorer-leafletmap').setView(geoLoc,13);L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map);this._createNeighborhoodsMarkers(aSiteCollectionDataTableAdapter);;this.sidebar=L.control.sidebar('mapexplorer-sidebar').addTo(this.map);this.map.on('click',$.r3Utils.hitch(this,this.onMapClicked));},_createNeighborhoodsMarkers:function(aSiteCollectionDataTableAdapter)
{var queryOk=false;if(aSiteCollectionDataTableAdapter)
{var numItems=aSiteCollectionDataTableAdapter.getNumberOfItems();if(numItems>0)
{var markers=[];var firstMarkerCoords=null;for(var i=0;i<numItems;i++)
{var item=aSiteCollectionDataTableAdapter.getItem(i);var address=item.getAddressDTOAdapter();var coords=address&&address.getLocationAsCoordsArray();if(coords)
{var m=L.marker(coords,{icon:this.shakeUsMarkers[item.dataBean.sitetype]});m.site=item.dataBean.site;m.on('click',$.r3Utils.hitch(this,this.onSelectNeighborhood));markers.push(m);if(!firstMarkerCoords)
firstMarkerCoords=coords;}}
if(markers.length)
{this.sitesMarkers=L.layerGroup(markers);this.sitesMarkers.addTo(this.map);this.map.setView(firstMarkerCoords,13);queryOk=true;}}}
if(queryOk)
{$('#mapexplorerform_fieldsetmessage').formmessage('clear');}
else
{$('#mapexplorerform_fieldsetmessage').formmessage('setText',{text:"Nessun risultato trovato",category:'error'});}},onMapClicked:function(e)
{this.sidebar.close();},onSelectNeighborhood:function(e)
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl('GET_SiteCollection_Detail',[e.target.site]);$.ajax({"type":"get","url":restUrl,"dataType":"json","success":function(responseData)
{siteCollectionDTOAdapter=new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(responseData);_self.sidebar.open('mapexplorer-neib');$('#mapexplorer-tab-neib').removeClass('disabled');$('#mapexplorer-tab-neib-news').removeClass('disabled');$('#mapexplorer-neib-news .sidebar-pane-body').cmsCard({pageid:null,site:siteCollectionDTOAdapter.dataBean.site,card_tmpl:"cms_tpl_shakeusmapexplorer_news",cardquery:"status=published&includecomments=bfalse&groups=news&iDisplayLength=10&iDisplayStart=0&iSortingCols=1&iSortCol_0=0&sColumns=postid&sSortDir_0=DESC",fetchmode:"full",adapterFactory:function(aRowDataBean)
{return new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(aRowDataBean);},url_bycardquery:'CMSCardPlugin_GETPosts',onComplete:function(responseInfo,totalNumberOfItems)
{}});$('#mapexplorer-neib .sidebar-header .title').html(siteCollectionDTOAdapter.dataBean.description||"Not Provided");$('#mapexplorer-neib .sidebar-pane-body').html(tmpl("cms_tpl_shakeusmapexplorer",{"siteCollectionDTOAdapter":siteCollectionDTOAdapter}));$('#shakeus_mapexplorer_enter').unbind().click(function(e){org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(siteCollectionDTOAdapter.dataBean.site)+"/org/r3/home.do")});},"error":function(jqXHR,timeout,message)
{console.error("Errore Deleting Actor Group: ",message);}});},searchNeighborhoods:function()
{var _self=this;_self.sitesMarkers.clearLayers();org.r3.AjaxUtils.submitForm("get",org.r3.PageManager.getRESTUrl('GET_SiteCollections'),$('#mapexplorerform_form'),function(responseData)
{var siteCollectionDataTableAdapter=null;if(responseData)
{siteCollectionDataTableAdapter=new org.r3.db.DTOTableAdapter(responseData,function(aRowDataBean){return new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(aRowDataBean);});var numItems=siteCollectionDataTableAdapter.getNumberOfItems();if(numItems>0)
_self.sidebar.close();_self._createNeighborhoodsMarkers(siteCollectionDataTableAdapter);}},function(jqXHR,timeout,message){$('#mapexplorerform_fieldsetmessage').formmessage('setText',{text:message,category:'error'});},null,false);}});$.r3Utils.namespace("org.r3.jsportlet.mapexplore",window,function(aNamespace)
{aNamespace.mapexploreform_form_validationRules={};aNamespace.mapexploreform_form_validationMessages={};});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.mongocms.CardDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{this.detailView.refresh();},open:function(aCardDTOAdapter)
{console.log("CardDetailActionForm::open",aCardDTOAdapter);this.setDataBeanInfo(aCardDTOAdapter);this.detailView.open(aCardDTOAdapter);},_getContentClassDefinition:function(aCardDataBean)
{var contentClass=aCardDataBean?aCardDataBean.dataBean.contentclass:this.dataBeanInfo.dataBean.contentclass;var contentClassLUTResolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_contentclassdef');var lutItem=org.r3.PageManager.lutManager.getLUTItem(contentClassLUTResolvedUrl,contentClass);if(lutItem!=null)
lutItem=new org.r3.db.mongo.contentdefinitioncollection.ContentDefinitionDTOAdapter(lutItem);return lutItem;},_getPhotoGraphicContentDefinition:function(aCardDataBean)
{var contentClassDef=this._getContentClassDefinition(aCardDataBean);var graphicContentDefinitionLUTResolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_graphcontentdef');var lutItem=org.r3.PageManager.lutManager.getLUTItem(graphicContentDefinitionLUTResolvedUrl,contentClassDef.dataBean.photographictype);return lutItem;},deleteItem:function()
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var method="DELETE";var restUrl=null;var cardId=this.dataBeanInfo.dataBean.postid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_Post',[this.dataBeanInfo.dataBean.site,org.r3.Constants.language,cardId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{$('#carddetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},closeCardPanel:function()
{this.pageManager.closeCardPanel();},onNewCardCreated:function(postDTOAdapter)
{this.pageManager.onNewCardCreated(postDTOAdapter);},listaCards:function()
{org.r3.PageManager.back();},uploadFile:function(aCardDTOAdapter)
{this.hide();this.pageManager.uploadFile(this.dataBeanInfo);},retrieveCardDescr:function(aLanguageCode,onComplete,onError)
{var method="GET";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('GET_CardDescr_Detail',[this.dataBeanInfo.dataBean.cardid,aLanguageCode]),org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var cardDescrDataBean=null;if(responseData)
{cardDescrDataBean=new org.r3.db.cms.carddescr.CardDescrDTOAdapter(responseData);}
if(onComplete)
onComplete(cardDescrDataBean);},"error":function(jqXHR,timeout,message)
{console.error("org.r3.jsportlet.mongocms.CardDetailActionForm: ",message);if(onError)
onError(message);}});},submitProperty:function(formId,restUrl,method,onSuccess,onError)
{var _self=this;var theForm=$(formId);if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.detailView.refresh();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onError)
onError(message);}});}}});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.tabGenerale=null;this.tabCardText=null;this.tabCardFile=null;this.tabCardLink=null;this.tabCardPhoto=null;this.tabCardContent=null;this.tabPublishing=null;},close:function()
{this.hide();},refresh:function()
{if(this.tabCardFile)
this.tabCardFile.refresh();if(this.tabGenerale)
this.tabGenerale.refresh();if(this.tabCardLink)
this.tabCardLink.refresh();if(this.tabCardPhoto)
this.tabCardPhoto.refresh();if(this.tabCardContent)
this.tabCardContent.refresh();if(this.tabPublishing)
this.tabPublishing.refresh();},open:function(aCardDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];if(aCardDTOAdapter)
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/CardDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_Post_Detail',[aCardDTOAdapter.dataBean.site,org.r3.Constants.language,aCardDTOAdapter.dataBean.postid]),dataType:"json"});networkRequestsQueue.push({id:"view_tabcardtext",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/CardDetailActionFormView_TabCardText.html'),dataType:"html"});networkRequestsQueue.push({id:"pkg_facebookconfig_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_FacebookConfig_SiteProperties'),dataType:"json"});}
else
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/CardDetailActionFormView.html.jsp?mode=create'),dataType:"html"});}
networkRequestsQueue.push({id:"view_tabgenerale",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/CardDetailActionFormView_TabGenerale.html'),dataType:"html"});networkRequestsQueue.push({id:"view_tabphoto",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/CardDetailActionFormView_TabCardPhoto.html'),dataType:"html"});networkRequestsQueue.push({id:"view_tabcontent",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/CardDetailActionFormView_TabCardContent.html'),dataType:"html"});networkRequestsQueue.push({id:"view_tabpublishing",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/CardDetailActionFormView_TabPublishing.html'),dataType:"html"});var contentdefinition=null;if(aCardDTOAdapter)
{contentdefinition=this.actionFormManager._getContentClassDefinition(aCardDTOAdapter);if(contentdefinition.isSectionEnabledInMongoCMS("customcontent"))
{networkRequestsQueue.push({id:"view_tabcontentedittemplate",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+contentdefinition.getEditTemplateURL()),dataType:"html"});}}
networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_sys_recstatus'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_locale'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_graphcontentdef'));if(!org.r3.PageManager.lutManager.isLUTLoaded(org.r3.PageManager.getRESTUrl('GET_classifier_contentclassdef')))
{console.error("LUT GET_classifier_contentclassdef Has Not Been Loaded But Is Required");}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var cardDataBean=responseData['content'];if(cardDataBean)
{cardDataBean=new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(cardDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{"contentdefinition":contentdefinition}));$('#cardDetailActionForm_tab_generale').html(tmpl(responseData['view_tabgenerale'],{}));this.tabGenerale=new org.r3.jsportlet.mongocms.CardDetailActionFormView_TabGenerale('__UNUSED__',this.actionFormManager,cardDataBean);if(cardDataBean)
{if(contentdefinition.isSectionEnabledInMongoCMS("customcontent"))
{$('#cardDetailActionForm_tab_cardcontent').html(tmpl(responseData['view_tabcontent'],{}));$('#cardDetailActionForm_tab_cardcontent .contentcanvas').html(tmpl(responseData['view_tabcontentedittemplate'],{}));this.tabCardContent=new org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardContent('__UNUSED__',this.actionFormManager,cardDataBean,contentdefinition.getModelObject());}
if(contentdefinition.isSectionEnabledInMongoCMS("richtext"))
{$('#cardDetailActionForm_tab_cardtext').html(tmpl(responseData['view_tabcardtext'],{}));this.tabCardText=new org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardText('__UNUSED__',this.actionFormManager,cardDataBean);}
if(contentdefinition.isSectionEnabledInMongoCMS("photo"))
{$('#cardDetailActionForm_tab_cardphoto').html(tmpl(responseData['view_tabphoto'],{}));this.tabCardPhoto=new org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardPhoto('#cardDetailActionForm_tab_cardphoto',this.actionFormManager,cardDataBean);this.graphicActionFormView=new org.r3.jsportlet.imageupload.ImageUploadActionFormView('#cardphotoactionform_uploadimage_canvas',this);this.graphicActionFormView.open(this._getCardPhotoUploadOptions(cardDataBean));}
if(contentdefinition.isSectionEnabledInMongoCMS("fileattachments"))
{this.tabCardFile=new org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardFile('#cardDetailActionForm_tab_cardfile',this.actionFormManager,cardDataBean);}
if(contentdefinition.isSectionEnabledInMongoCMS("links"))
{this.tabCardLink=new org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardLink('#cardDetailActionForm_tab_cardlink',this.actionFormManager,cardDataBean);}
if(contentdefinition.isSectionEnabledInMongoCMS("publishing"))
{var pkg_facebookconfig_properties=responseData['pkg_facebookconfig_properties'];if(pkg_facebookconfig_properties)
{pkg_facebookconfig_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_facebookconfig_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
$('#cardDetailActionForm_tab_publishing').html(tmpl(responseData['view_tabpublishing'],{}));this.tabPublishing=new org.r3.jsportlet.mongocms.CardDetailActionFormView_TabPublishing('#cardDetailActionForm_tab_publishing',this.actionFormManager,cardDataBean,pkg_facebookconfig_properties);}}
this.show();}),function(d)
{console.error("controller did not load");});},_getCardPhotoUploadOptions:function(aCardDataBean)
{var graphicContentDefinition=this.actionFormManager._getPhotoGraphicContentDefinition(aCardDataBean);var actualValue={"cssClassName":"css_"+graphicContentDefinition.dtokey,"extraInfo":graphicContentDefinition.extrainfo,"aspectRatio":graphicContentDefinition.aspectratio,"maxSize":graphicContentDefinition.maxsize,"templateFile":"ImageUploadActionFormView2.html.jsp","uploadUrl":org.r3.PageManager.getRESTUrl("POST_PostPhoto",[aCardDataBean.dataBean.site,org.r3.Constants.language,aCardDataBean.dataBean.postid]),"currentImageUrl":graphicContentDefinition.currentimageurl,"imageCanvasIdHash":'#loadimage_canvas',"inputFileTriggerSelector":'#loadimage_input_file'};var u=aCardDataBean.getPhotoUrl();if(u)
{actualValue.currentImageUrl=u;}
return actualValue;}});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardContent=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean,aContentModelObject)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.modelObject=aContentModelObject;var resolvedUrl=null;$('#cardcustomcontentactionform_cardid_label').html('['+aCardDataBean.dataBean.postid+']');$('#cardcustomcontentactionform_form_authoricon').attr('src',aCardDataBean.getAuthorImgUrl());$('#cardcustomcontentactionform_form_authorname').html(aCardDataBean.dataBean.authorname);$('#cardcustomcontentactionform_form_refdate').html(aCardDataBean.getLastmodifiedAsElapsed()+' - '+aCardDataBean.getLastmodified());this.modelObject.setupForm($.r3Utils.hitch(this,this.handleActions));this.modelObject.initializeForm({targetnode_or_id:aCardDataBean});var photoConfigInfo=anActionFormManager._getPhotoGraphicContentDefinition(aCardDataBean);this.imageUploader=new org.r3.jsportlet.imageupload.ImageUploader({img_selector:this.modelObject.displayPhoto,inputfile_selector:'#cardcustomcontentactionform_input_file',modaldialog_selector:'#photo_dialog',aspect_ratio:photoConfigInfo.aspectratio,max_size:photoConfigInfo.maxsize,upload_url:org.r3.PageManager.getRESTUrl("POST_PostPhoto",[aCardDataBean.dataBean.site,org.r3.Constants.language,aCardDataBean.dataBean.postid]),current_image_url:false,extra_info:photoConfigInfo.extrainfo});this.imageUploader.setup();},refresh:function()
{},handleActions:function(e)
{var target=$(e.target);var dataAction=target.attr('data-action');var dataActionTarget=target;var ps=null,cm=null;if(!dataAction)
{ps=target.parents('[data-action]');if(ps.length>0)
{dataActionTarget=$(ps[0]);dataAction=dataActionTarget.attr('data-action');}}
if(dataAction!=null)
{var dataActionPath=dataAction.split(':');switch(dataActionPath[0])
{case'primarypost-submit':this.onSubmit();break;case'image-selection':$('#cardcustomcontentactionform_input_file').trigger('click');break;}}
return true;},onSubmit:function()
{var _self=this;var site=this.actionFormManager.dataBeanInfo.dataBean.site;var postId=this.actionFormManager.dataBeanInfo.dataBean.postid;var theForm=this.modelObject.getForm();if(theForm.valid())
{this.modelObject.serializeContent();org.r3.AjaxUtils.submitForm("put",org.r3.PageManager.getRESTUrl('PUT_PostContent_Detail',[site,org.r3.Constants.language,postId]),theForm,function(responseData)
{_self.modelObject.showMessage({text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message)
{console.log(arguments);_self.modelObject.showMessage({text:message,category:'error'});},"org.r3.message.saveconfirm",true);}}});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardFile=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.postDTOAdapter=aCardDataBean;this.fileView=new org.r3.db.mongo.MongoFileAttachmentQueryActionFormView(anHtmlActionFormContainerId,this.actionFormManager,{dataTableId:'MongoFileAttachmentQueryActionFormView',showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/jsportlet/mongocms/CardDetailActionFormView_TabCardFile.html",gradeLevel:'grade_level1',legend:org.r3.jsportlet.mongocms.message.cardfileactionform_form_legend,dataTableSource:org.r3.PageManager.getRESTUrl('GET_PostFileAttachments',[aCardDataBean.dataBean.site,org.r3.Constants.language,aCardDataBean.dataBean.postid]),dataTableColumns:"fileid,attachmenttype,name,ctype",requiredLUTs:["GET_classifier_sys_recstatus"],onSelected:$.r3Utils.hitch(this,function(aCardPropertyDTOAdapter){$('#tabfile_deleteItem').prop('disabled',false);this.propertyDetail(aCardPropertyDTOAdapter);}),onDblClick:null,buttons:[{id:'tabfile_uploadfile',label:org.r3.message.action_upload,disabled:false,onClick:$.r3Utils.hitch(this.actionFormManager,this.actionFormManager.uploadFile)},{id:'tabfile_deleteItem',label:org.r3.message.action_delete,disabled:true,onClick:$.r3Utils.hitch(this,this.propertyDelete)}],onClearSelection:function(){$('#tabfile_deleteItem').prop('disabled',true);},onInitializationComplete:$.r3Utils.hitch(this,function(){$('#cardfileactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.mongocms.cardfileactionform_form_validationRules,messages:org.r3.jsportlet.mongocms.cardfileactionform_form_validationMessages});$('#cardfileactionform_fieldset_message').formmessage({});$('#cardfileactionform_authoricon').attr('src',aCardDataBean.getAuthorImgUrl());$('#cardfileactionform_authorname').html(aCardDataBean.dataBean.authorname);$('#cardfileactionform_refdate').html(aCardDataBean.getLastmodifiedAsElapsed()+' - '+aCardDataBean.getLastmodified());$('#cardfileactionform_cardid_label').html('['+aCardDataBean.dataBean.postid+']');console.info("SaveItem: ",$('#cardfileactionform_action_saveitem'));$('#cardfileactionform_action_saveitem').unbind().click($.r3Utils.hitch(_self,_self.updateProperty));$('#cardfileactionform_action_cancel').unbind().click(function(e){org.r3.PageManager.back();});$('#cardfileactionform_action_ctlcurl').unbind().click(function(e){window.prompt("Per copiare premere i tasti Ctrl+C e successivamente Invio",$('#cardfileactionform_url').html());});})});this.fileView.open();},propertyDetail:function(aCardPropertyAdapterDTO)
{$('#cardfileactionform_fileid').attr('value',aCardPropertyAdapterDTO.dataBean.fileid);$('#cardfileactionform_attachmenttype').attr('value',aCardPropertyAdapterDTO.dataBean.attachmenttype);this.showDetail(aCardPropertyAdapterDTO);$('#cardfileactionform_name').val(aCardPropertyAdapterDTO.dataBean.name);var s=aCardPropertyAdapterDTO.dataBean.ctype+' - '+aCardPropertyAdapterDTO.dataBean.size;$('#cardfileactionform_ctypesize').html(s);$('#cardfileactionform_value').html(aCardPropertyAdapterDTO.dataBean.url);$('#cardfileactionform_url').unbind().click(function(e)
{org.r3.PageManager.viewDocument($.r3Utils.formatDMSUrl4ClientAccess(aCardPropertyAdapterDTO.dataBean.url));});$('#cardfileactionform_url').html($.r3Utils.formatDMSUrl4ClientAccess(aCardPropertyAdapterDTO.dataBean.url));var iconUrl=org.r3.Constants.cms_default_icon;if(aCardPropertyAdapterDTO.hasIcon())
{iconUrl=$.r3Utils.formatDMSUrl4ClientAccess(aCardPropertyAdapterDTO.getIcon().dataBean.url);}
org.r3.PageManager.loadImage(iconUrl,{maxWidth:100,maxHeight:100},function(img){$('#cardfileactionform_icon').html(img);});},refresh:function()
{this.fileView.refresh();},propertyDelete:function()
{var _self=this;this.hideDetail();var selectedItem=this.fileView.fnGetSelectedDataBean();var cardId=this.postDTOAdapter.dataBean.postid;var attachmentId=selectedItem.dataBean.fileid;org.r3.AjaxUtils.ajaxInvoke('delete',org.r3.PageManager.getRESTUrl('DELETE_PostFileAttachment',[this.postDTOAdapter.dataBean.site,org.r3.Constants.language,cardId,attachmentId]),function(responseData)
{_self.actionFormManager.refresh();},false,"org.r3.message.deleteconfirm",true);},updateProperty:function()
{var _self=this;var cardId=this.postDTOAdapter.dataBean.postid;var attachmentId=$('#cardfileactionform_fileid').val();org.r3.AjaxUtils.submitForm('put',org.r3.PageManager.getRESTUrl('PUT_PostFileAttachment',[this.postDTOAdapter.dataBean.site,org.r3.Constants.language,cardId,attachmentId]),$('#cardfileactionform_form'),function(responseData)
{_self.actionFormManager.refresh();},false,"org.r3.message.saveconfirm",true);},hideDetail:function()
{$('#cardfileactionform_action_bar').hide();$('#cardfileactionform_detail_container').hide();},showDetail:function(aCardPropertyAdapterDTO)
{$('#cardfileactionform_fieldset_message').formmessage('clear');$('#cardfileactionform_detail_container').show();$('#cardfileactionform_action_bar').show();}});$.r3Utils.namespace("org.r3.jsportlet.mongocms",window,function(aNamespace)
{aNamespace.cardfileactionform_form_validationRules={propertyname:{required:true,maxlength:80}};aNamespace.cardfileactionform_form_validationMessages={propertyname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardLink=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.linkView=new org.r3.db.mongo.MongoLinkQueryActionFormView(anHtmlActionFormContainerId,this.actionFormManager,{dataTableId:'MongoLinkQueryActionFormView',showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/jsportlet/mongocms/CardDetailActionFormView_TabCardLink.html",gradeLevel:'grade_level1',legend:org.r3.jsportlet.mongocms.message.postlinkactionform_form_legend,dataTableSource:org.r3.PageManager.getRESTUrl('GET_PostLinks',[aCardDataBean.dataBean.site,org.r3.Constants.language,aCardDataBean.dataBean.postid]),dataTableColumns:"linkid,name,href",requiredLUTs:["GET_classifier_sys_recstatus"],onSelected:$.r3Utils.hitch(this,function(aCardPropertyDTOAdapter){$('#tablink_deleteItem').prop('disabled',false);this.propertyDetail(aCardPropertyDTOAdapter);}),onDblClick:null,buttons:[{id:'tablink_deleteItem',label:org.r3.message.action_delete,disabled:true,onClick:$.r3Utils.hitch(this,this.propertyDelete)}],onClearSelection:function(){$('#tablink_deleteItem').prop('disabled',true);},onInitializationComplete:$.r3Utils.hitch(this,function(){var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_PostFileImageAttachments",[aCardDataBean.dataBean.site,org.r3.Constants.language,aCardDataBean.dataBean.postid]);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#postlinkactionform_refattachmentid'),"fnRenderKey":function(itemDTO){return itemDTO.fileid;},"fnRenderText":function(itemDTO){return itemDTO.name;}});$('#postlinkactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.mongocms.postlinkactionform_validationRules,messages:org.r3.jsportlet.mongocms.postlinkactionform_validationMessages});$('#postlinkactionform_fieldset_message').formmessage({});$('#postlinkactionform_authoricon').attr('src',aCardDataBean.getAuthorImgUrl());$('#postlinkactionform_authorname').html(aCardDataBean.dataBean.authorname);$('#postlinkactionform_refdate').html(aCardDataBean.getLastmodifiedAsElapsed()+' - '+aCardDataBean.getLastmodified());$('#postlinkactionform_cardid_label').html('['+aCardDataBean.dataBean.postid+']');$('#postlinkactionform_action_additem').unbind().click($.r3Utils.hitch(_self,_self.addProperty));$('#postlinkactionform_action_updateitem').unbind().click($.r3Utils.hitch(_self,_self.updateProperty));$('#postlinkactionform_action_cancel_updateitem').unbind().click($.r3Utils.hitch(_self,_self.cancelUpdateProperty));$('#postlinkactionform_action_cancel').unbind().click(function(e){org.r3.PageManager.back();});_self._setInsertMode();})});this.linkView.open();},propertyDetail:function(aCardPropertyAdapterDTO)
{$('#postlinkactionform_linkid').attr('value',aCardPropertyAdapterDTO.dataBean.linkid);this._setUpdateMode();$('#postlinkactionform_name').val(aCardPropertyAdapterDTO.dataBean.name);$('#postlinkactionform_href').val(aCardPropertyAdapterDTO.dataBean.href);$('#postlinkactionform_refattachmentid').val(aCardPropertyAdapterDTO.dataBean.refattachmentid);},refresh:function()
{var aCardDataBean=this.actionFormManager.dataBeanInfo;this.linkView.refresh();var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_PostFileImageAttachments",[aCardDataBean.dataBean.site,org.r3.Constants.language,aCardDataBean.dataBean.postid]);org.r3.PageManager.lutManager.invalidateLUT(resolvedUrl);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#postlinkactionform_refattachmentid'),"fnRenderKey":function(itemDTO){return itemDTO.dataBean.linkid;},"fnRenderText":function(itemDTO){return itemDTO.dataBean.text;}});this._setInsertMode();},propertyDelete:function()
{var _self=this;var selectedItem=this.linkView.fnGetSelectedDataBean();var cardId=this.actionFormManager.dataBeanInfo.dataBean.postid;var attachmentId=selectedItem.dataBean.linkid;org.r3.AjaxUtils.ajaxInvoke('delete',org.r3.PageManager.getRESTUrl('DELETE_PostLink',[this.actionFormManager.dataBeanInfo.dataBean.site,org.r3.Constants.language,cardId,attachmentId]),function(responseData)
{_self.actionFormManager.refresh();$('#postlinkactionform_form').resetForm();},false,"org.r3.message.deleteconfirm",true);},addProperty:function()
{var _self=this;var cardId=this.actionFormManager.dataBeanInfo.dataBean.postid;org.r3.AjaxUtils.submitForm('post',org.r3.PageManager.getRESTUrl('POST_PostLink',[this.actionFormManager.dataBeanInfo.dataBean.site,org.r3.Constants.language,cardId]),$('#postlinkactionform_form'),function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('postlinkactionform_fieldset_message');}
else
{$('#postlinkactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}
_self.linkView.refresh();$('#postlinkactionform_form').resetForm();},$.r3Utils.hitch(this,function(message)
{$('#postlinkactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}),"org.r3.message.saveconfirm",true);},updateProperty:function()
{var _self=this;var cardId=this.actionFormManager.dataBeanInfo.dataBean.postid;org.r3.AjaxUtils.submitForm('put',org.r3.PageManager.getRESTUrl('PUT_PostLink',[this.actionFormManager.dataBeanInfo.dataBean.site,org.r3.Constants.language,cardId,$('#postlinkactionform_linkid').val()]),$('#postlinkactionform_form'),function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('postlinkactionform_fieldset_message');}
else
{$('#postlinkactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}
_self.linkView.refresh();_self._setInsertMode();},$.r3Utils.hitch(this,function(message)
{$('#postlinkactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});}),"org.r3.message.saveconfirm",true);},cancelUpdateProperty:function()
{this._setInsertMode();},_setInsertMode:function()
{$('#postlinkactionform_form_linkid').attr('value',"");$('#postlinkactionform_action_additem').show();$('#postlinkactionform_action_updateitem').hide();$('#postlinkactionform_action_cancel_updateitem').hide();$('#postlinkactionform_form').resetForm();},_setUpdateMode:function()
{$('#postlinkactionform_action_additem').hide();$('#postlinkactionform_action_updateitem').show();$('#postlinkactionform_action_cancel_updateitem').show();}});$.r3Utils.namespace("org.r3.jsportlet.mongocms",window,function(aNamespace)
{aNamespace.postlinkactionform_validationRules={name:{required:true,maxlength:80},href:{required:true,maxlength:255},refattachmentid:{required:false}};aNamespace.postlinkactionform_validationMessages={name:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},href:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},refattachmentid:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardPhoto=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean)
{this._super(anHtmlActionFormContainerId,anActionFormManager);var resolvedUrl=null;$('#cardphotoactionform_cardid_label').html('['+aCardDataBean.dataBean.postid+']');$('#cardphotoactionform_form_authoricon').attr('src',aCardDataBean.getAuthorImgUrl());$('#cardphotoactionform_form_authorname').html(aCardDataBean.dataBean.authorname);$('#cardphotoactionform_form_refdate').html(aCardDataBean.getLastmodifiedAsElapsed()+' - '+aCardDataBean.getLastmodified());},refresh:function()
{}});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardDetailActionFormView_TabCardText=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.postDataBean=aCardDataBean;$('#cardtextactionform_fieldset_message').formmessage({});$('#cardtextactionform_form_languagecode').unbind().change(function(e)
{var currentTarget=$(e.currentTarget);var l=currentTarget.val();_self.initializeFields(_self.postDataBean,l);});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_locale'),"selectWidget":$('#cardtextactionform_form_languagecode'),"selectedValue":org.r3.Constants.language});var ckeditor_uploadfile_resturl=org.r3.PageManager.getRESTUrl('POST_PostCKEditorImageAttachment',[aCardDataBean.dataBean.site,org.r3.Constants.language,aCardDataBean.dataBean.postid,"upload","imgshkmessage"]);$('#cardtextactionform_form_textbody').ckeditor({extraPlugins:'uploadimage',uploadUrl:ckeditor_uploadfile_resturl,imageUploadUrl:ckeditor_uploadfile_resturl});this.initializeFields(this.postDataBean,org.r3.Constants.language);$('#cardtextactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this.updateItem));$('#cardtextactionform_action_cancel').click(function(e){org.r3.PageManager.back();});$('#cardtextactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.mongocms.cardtextactionform_form_validationRules,messages:org.r3.jsportlet.mongocms.cardtextactionform_form_validationMessages});},updateItem:function()
{var _self=this;var method="put";var theForm=$('#cardtextactionform_form');var idCard=this.postDataBean.dataBean.postid;var restUrl=org.r3.PageManager.getRESTUrl('PUT_PostTextBody_Detail',[this.postDataBean.dataBean.site,org.r3.Constants.language,idCard,$('#cardtextactionform_form_languagecode').val()]);org.r3.AjaxUtils.submitForm(method,restUrl,theForm,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('cardtextactionform_fieldset_message');}
else
{_self.postDataBean=new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(responseData);$('#cardtextactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#cardtextactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},initializeFields:function(aCardDataBean,aLanguageCode)
{$('#cardtextactionform_fieldset_message').formmessage('clear');if(aCardDataBean!=null)
{$('#cardtextactionform_form_cardid_label').html('['+aCardDataBean.dataBean.postid+']');var aCardDescrDataBean=aCardDataBean.getTextBody4Language(aLanguageCode);if(aCardDescrDataBean!=null)
{$('#cardtextactionform_form_title').val(aCardDescrDataBean.dataBean.title);$('#cardtextactionform_form_summary').val(aCardDescrDataBean.dataBean.summary);$('#cardtextactionform_form_textbody').val(aCardDescrDataBean.dataBean.body);}
else
{this._clearFields();}}
else
{this._clearFields();}
$('#cardtextactionform_authoricon').attr('src',aCardDataBean.getAuthorImgUrl());$('#cardtextactionform_authorname').html(aCardDataBean.dataBean.authorname);$('#cardtextactionform_refdate').html(aCardDataBean.getLastmodifiedAsElapsed()+' - '+aCardDataBean.getLastmodified());},_clearFields:function()
{$('#cardtextactionform_form_title').val(null);$('#cardtextactionform_form_summary').val(null);$('#cardtextactionform_form_textbody').val("");}});$.r3Utils.namespace("org.r3.jsportlet.mongocms",window,function(aNamespace)
{aNamespace.cardtextactionform_form_validationRules={title:{required:true,maxlength:80},summary:{required:true,maxlength:255}};aNamespace.cardtextactionform_form_validationMessages={title:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},summary:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardDetailActionFormView_TabGenerale=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#carddetailactionform_form .r3_datepicker').datepicker({format:"dd/mm/yyyy"});$('#carddetailactionform_contenttype_cascade select').cascadingSelect({lutManager:org.r3.PageManager.lutManager,ajaxUrlMode:'restful',withNullOption:true,widgetConfig:[{'widgetId':'carddetailactionform_form_contentcategory','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_m_contentclass_category'),'value':aCardDataBean&&aCardDataBean.dataBean.contentcategory},{'widgetId':'carddetailactionform_form_contentclass','ajaxSource':org.r3.PageManager.getRESTUrl('GET_classifier_m_contentclass_contentclassdef'),'value':aCardDataBean&&aCardDataBean.dataBean.contentclass}]});if(aCardDataBean==null)
{$('#carddetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this.createItem));$('.hideOnNewItem').hide();$('#carddetailactionform_form_authoricon').attr('src',org.r3.SiteConstants.getSiteCollectionIconUrl());$('#carddetailactionform_form_authorname').html(org.r3.SiteConstants.targetSiteName);$('#carddetailactionform_author').val(org.r3.Constants.site);$('#carddetailactionform_authorname').val(org.r3.SiteConstants.targetSiteName);$('#carddetailactionform_authortype').val('neighborhood');$('#carddetailactionform_action_delete').hide();}
else
{var resolvedUrl=null;$('#carddetailactionform_form_cardid_label').html('['+aCardDataBean.dataBean.postid+']');$('#carddetailactionform_form_postid').val(aCardDataBean.dataBean.postid);$('#carddetailactionform_form_postid').prop('disabled',true);$('#carddetailactionform_form_contentcategory').prop('disabled',true);$('#carddetailactionform_form_contentclass').prop('disabled',true);$('.hideOnNewItem').show();$('#carddetailactionform_form_title').val(aCardDataBean.dataBean.title);$('#carddetailactionform_form_authoricon').attr('src',aCardDataBean.getAuthorImgUrl());$('#carddetailactionform_form_authorname').html(aCardDataBean.dataBean.authorname);$('#carddetailactionform_form_refdate').html(aCardDataBean.getLastmodifiedAsElapsed()+' - '+aCardDataBean.getLastmodified());$('#carddetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this.updateItem));$('#carddetailactionform_action_delete').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.deleteItem));$('#carddetailactionform_action_delete').show();}
$('#carddetailactionform_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.closeCardPanel));$('#carddetailactionform_fieldset_message').formmessage({});$('#carddetailactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.mongocms.carddetailactionform_form_validationRules,messages:org.r3.jsportlet.mongocms.carddetailactionform_form_validationMessages});},refresh:function()
{},updateItem:function()
{this._saveItem(true);},createItem:function()
{this._saveItem(false);},_saveItem:function(isUpdate)
{var _self=this;var theForm=$('#carddetailactionform_form');var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_AddPost',[org.r3.Constants.site,org.r3.Constants.language]);if(isUpdate)
{var idCard=this.actionFormManager.dataBeanInfo.dataBean.postid;restUrl=org.r3.PageManager.getRESTUrl('PUT_PostGeneralInfo_Detail',[this.actionFormManager.dataBeanInfo.dataBean.site,org.r3.Constants.language,idCard]);method="put";}
org.r3.AjaxUtils.submitForm(method,restUrl,theForm,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('carddetailactionform_fieldset_message');}
else
{if(isUpdate)
{$('#carddetailactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}
else
{var pdb=new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(responseData);_self.actionFormManager.onNewCardCreated(pdb);}}},function(jqXHR,timeout,message)
{console.log(arguments);$('#carddetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);}});$.r3Utils.namespace("org.r3.jsportlet.mongocms",window,function(aNamespace)
{aNamespace.carddetailactionform_form_validationRules={postid:{required:false,maxlength:25,identifier:true},title:{required:true,maxlength:80},contentcategory:{required:true},contentclass:{required:true}};aNamespace.carddetailactionform_form_validationMessages={postid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},title:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},contentcategory:{required:org.r3.message.field_required},contentclass:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardDetailActionFormView_TabPublishing=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aCardDataBean,siteProperties)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.postDataBean=aCardDataBean;$('#cardpublishingactionform_form .r3_datepicker').datepicker({format:"dd/mm/yyyy"});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_Timelines'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#cardpublishingactionform_timeline'),"selectedValue":aCardDataBean&&aCardDataBean.dataBean.timeline});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_contentclassgrp'),"selectWidget":$('#cardpublishingactionform_contentclassgrp'),"selectedValue":aCardDataBean&&aCardDataBean.getGroupsAsArray(),"onComplete":function(){$('#cardpublishingactionform_contentclassgrp').multiselect();}});var property=null;if(siteProperties)
{property=siteProperties.getPropertyByPropertyscopePropertykey("facebook.page.pub","fbpagename");}
if(property)
{$('.facebook_publishing').show();$('#cardpublishingactionform_facebookpub_btrue').prop('checked',true);$('.facebook_publishing .facebookpub_targetpage').html(property.dataBean.propertyvalue);}
else
{$('#cardpublishingactionform_facebookpub_btrue').prop('checked',false);$('.facebook_publishing').hide();}
var resolvedUrl=null;$('#cardpublishingactionform_authoricon').attr('src',aCardDataBean.getAuthorImgUrl());$('#cardpublishingactionform_authorname').html(aCardDataBean.dataBean.authorname);$('#cardpublishingactionform_refdate').html(aCardDataBean.getLastmodifiedAsElapsed()+' - '+aCardDataBean.getLastmodified());var saveButton=$('#cardpublishingactionform_action_saveitem');var pubButton=$('#cardpublishingactionform_action_publish');pubButton.unbind().click($.r3Utils.hitch(this,this.updateItem));saveButton.unbind().click($.r3Utils.hitch(this,this.updateItem));this.setupActionBar(aCardDataBean);$('#cardpublishingactionform_fieldset_message').formmessage({});$('#cardpublishingactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.mongocms.cardpublishingactionform_validationRules,messages:org.r3.jsportlet.mongocms.cardpublishingactionform_validationMessages});},refresh:function()
{},setupActionBar:function(aCardDataBean)
{var saveButton=$('#cardpublishingactionform_action_saveitem');var pubButton=$('#cardpublishingactionform_action_publish');if(aCardDataBean.isDraft())
{pubButton.show();saveButton.hide();}
else
{pubButton.hide();saveButton.show();}},updateItem:function()
{var _self=this;var method="put";var theForm=$('#cardpublishingactionform_form');var idCard=this.postDataBean.dataBean.postid;var restUrl=org.r3.PageManager.getRESTUrl('PUT_PostPublish',[this.postDataBean.dataBean.site,org.r3.Constants.language,idCard]);org.r3.AjaxUtils.submitForm(method,restUrl,theForm,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('cardpublishingactionform_fieldset_message');}
else
{_self.postDataBean=new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(responseData);_self.onPublishPost(_self.postDataBean);$('#cardpublishingactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#cardpublishingactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},onPublishPost:function(aPostDataBean)
{this.actionFormManager.setDataBeanInfo(aPostDataBean);this.setupActionBar(aPostDataBean);}});$.r3Utils.namespace("org.r3.jsportlet.mongocms",window,function(aNamespace)
{aNamespace.cardpublishingactionform_validationRules={};aNamespace.cardpublishingactionform_validationMessages={};});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardPickerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.advancedSearchForm=new org.r3.jsportlet.mongocms.CardQueryAdvancedSearchActionFormView(anAdvancedSearchHtmlActionFormContainerId,this);this.advancedSearchForm.open();this.pickedValue=null;this.listView=new org.r3.db.cms.card.CardQueryActionFormView(anHtmlActionFormContainerId,this,{dataTableId:'CardQueryActionFormView',gradeLevel:'grade_level2 grade_clickable',legend:org.r3.db.cms.card.message.queryactionformview_legend,sortable:true,layout:'fullWidth',actionBarOnTop:true,dataTableColumns:"singleselector,valid,cardid;sort,systemtitle;sort,categoryid,refdate;sort,queryformview-tools",onToolsIconSelected:$.r3Utils.hitch(this,this.detailItem),onSelected:$.r3Utils.hitch(this,this._onRowSelected),onClearSelection:null,onDblClick:null,onPageChange:$.r3Utils.hitch(this,function(){$('#cardpickeractionform_action_selectcard').prop('disabled',true);}),searchInfo:{widget:'select',widgetInitialization:{url:org.r3.PageManager.getRESTUrl('LUT_CMS_Category'),blankOptionText:org.r3.PageManager.getMessageFromDict("org.r3.jsportlet.mongocms.message.any")},label:org.r3.jsportlet.mongocms.message.search_category,validationRules:org.r3.jsportlet.mongocms.CardQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.jsportlet.mongocms.CardQueryActionFormView_filter_searchform_validationMessages,autoStart:true},advancedSearchInfo:[{label:org.r3.jsportlet.mongocms.message.search_advanced,actionView:this.advancedSearchForm,autoOpen:false}],buttons:[{id:'cardpickeractionform_action_selectcard',label:org.r3.message.action_select,disabled:true,onClick:$.r3Utils.hitch(this,this.onItemSelected)}],onInitializationComplete:$.r3Utils.hitch(this,function()
{var matchExpr='input[name="cardid"]';$('#CardQueryActionFormView_tableform').off('click',matchExpr).on('click',matchExpr,$.r3Utils.hitch(this,function(e)
{$('#cardpickeractionform_action_selectcard').prop('disabled',false);var currentTarget=$(e.currentTarget);this.pickedValue={dtokey:currentTarget.val(),dtodescr:currentTarget.val()+' - '+currentTarget.attr('title')};e.stopPropagation();}));})});},close:function()
{this.hide();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{},open:function(options)
{this.srcPickerWidget=options.pickerWidget;var dataTableSourceRestUrlReference='GET_Cards';if(options.queryUrl)
dataTableSourceRestUrlReference=options.queryUrl;var dataTableSource=org.r3.PageManager.getRESTUrl(dataTableSourceRestUrlReference);this.listView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});},onItemSelected:function(){console.info("actionForm:pickerWidget is: ",this.srcPickerWidget);this.srcPickerWidget.addVal(this.pickedValue);org.r3.PageManager.back();},_onRowSelected:function(aCardDTOAdapter)
{$('#CardQueryActionFormView_'+aCardDTOAdapter.dataBean.cardid).prop('checked',true);$('#cardpickeractionform_action_selectcard').prop('disabled',false);this.pickedValue={dtokey:aCardDTOAdapter.dataBean.cardid,dtodescr:aCardDTOAdapter.dataBean.cardid+' - '+aCardDTOAdapter.dataBean.systemtitle};},detailItem:function(aCardDTOAdapter)
{this._onRowSelected(aCardDTOAdapter);this.hide();this.pageManager.openCardDetailPanel(aCardDTOAdapter);}});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.advancedSearchForm=new org.r3.jsportlet.mongocms.CardQueryAdvancedSearchActionFormView(anAdvancedSearchHtmlActionFormContainerId,this);this.advancedSearchForm.open();this.listView=new org.r3.db.mongo.postcollection.PostCollectionQueryActionFormView(anHtmlActionFormContainerId,this,{dataTableId:'PostCollectionQueryActionFormView',layout:'fullWidth',iDisplayLength:25,gradeLevel:'grade_level2 grade_clickable',legend:org.r3.db.mongo.postcollection.message.queryactionformview_legend,sortable:true,dataTableColumns:"postid;sort,title;sort,contentclass,authorname,lastmodified;sort",requiredLUTs:["GET_classifier_contentclassdef"],onSelected:$.r3Utils.hitch(this,this.detailItem),onDblClick:null,onClearSelection:function(){$('#cardqueryactionform_action_deleteItem').prop('disabled',true);},searchInfo:{widget:'select',widgetInitialization:{url:org.r3.PageManager.getRESTUrl('GET_classifier_m_contentclass'),blankOptionText:org.r3.PageManager.getMessageFromDict("org.r3.jsportlet.mongocms.message.any")},label:org.r3.jsportlet.mongocms.message.search_category,validationRules:org.r3.jsportlet.mongocms.CardQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.jsportlet.mongocms.CardQueryActionFormView_filter_searchform_validationMessages,autoStart:true},advancedSearchInfo:[{label:org.r3.jsportlet.mongocms.message.search_advanced,actionView:this.advancedSearchForm,autoOpen:false}]});},close:function()
{this.listView.hide();},open:function(aCategoryId)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Posts',[org.r3.Constants.site,org.r3.Constants.language]);if(aCategoryId)
{dataTableSource=org.r3.PageManager.getRESTUrl('GET_PostsByContentClass',[org.r3.Constants.site,org.r3.Constants.language,aCategoryId]);}
this.listView.open({"dataTableSource":dataTableSource});},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},newItem:function()
{this.listView.hide();this.pageManager.newCard();},detailItem:function(aDataBean)
{this.listView.hide();this.pageManager.detailCard(aDataBean);}});$.r3Utils.namespace("org.r3.jsportlet.mongocms",window,function(aNamespace)
{aNamespace.CardQueryActionFormView_filter_searchform_validationRules={filter_item:{required:false}};aNamespace.CardQueryActionFormView_filter_searchform_validationMessages={filter_item:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.CardQueryAdvancedSearchActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.executeSearch=null;},close:function()
{$("#dialog-form").modal("hide");},show:function(anExecuteSearchFunction)
{$("#dialog-form").modal();this.executeSearch=anExecuteSearchFunction;},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkInitializationQueue=[];networkInitializationQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/CardQueryAdvancedSearchActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkInitializationQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);var actionFormView=this;$("#userquery_advancedsearchform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.mongocms.advancedsearchform_form_validationRules,messages:org.r3.jsportlet.mongocms.advancedsearchform_form_validationMessages});$('#cardquery_advancedsearchform_action_search').unbind().click($.r3Utils.hitch(actionFormView,actionFormView.executeAdvancedSearch));}),function(d)
{console.error("controller did not load");});},dismissAdvancedSearchDialog:function()
{$("#dialog-form").modal("hide");},executeAdvancedSearch:function()
{var theForm=$('#cardquery_advancedsearchform_form');if(!theForm.valid())
return;var qparams=[];qparams.push({"name":"postid","value":$('#cardquery_advancedsearchform_form_postid').val()});this.executeSearch(qparams);this.dismissAdvancedSearchDialog();}});$.r3Utils.namespace("org.r3.jsportlet.mongocms",window,function(aNamespace)
{aNamespace.advancedsearchform_form_validationRules={postid:{required:false,maxlength:24}};aNamespace.advancedsearchform_form_validationMessages={postid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.TimelineDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.mongocms.TimelineDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(aTimelineDataBean)
{this.setDataBeanInfo(aTimelineDataBean);this.detailView.open(aTimelineDataBean);},onNewTimelineCreated:function(timelineDataBean)
{this.pageManager.onNewTimelineCreated(timelineDataBean);},closeTimelinePanel:function()
{this.pageManager.closeTimelinePanel();}});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.TimelineDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aTimelineDataBean)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/TimelineDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(aTimelineDataBean)
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_TimelineCollection_Detail',[aTimelineDataBean.dataBean.site,org.r3.Constants.language,aTimelineDataBean.dataBean.timelineid]),dataType:"json"});}
networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_m_contentclass_category'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_contentclassdef'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var timelineDataBean=responseData['content'];if(timelineDataBean)
{timelineDataBean=new org.r3.db.mongo.timelinecollection.TimelineCollectionDTOAdapter(timelineDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{timelineDTOAdapter:timelineDataBean}));$('#timelinedetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.mongocms.timelinedetailactionform_validationRules,messages:org.r3.jsportlet.mongocms.timelinedetailactionform_validationMessages});$('#timelinedetailactionform_fieldset_message').formmessage({});this._initializeFormFields(timelineDataBean);if(timelineDataBean)
{if(timelineDataBean.isDeletable())
$('#timelinedetailactionform_action_delete').show();else
$('#timelinedetailactionform_action_delete').hide();$('#timelinedetailactionform_action_delete').click($.r3Utils.hitch(this,this._onDeleteItem));$('#timelinedetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));}
else
{$('#timelinedetailactionform_action_delete').hide();$('#timelinedetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));}
$('#timelinedetailactionform_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.closeTimelinePanel));this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{var _self=this;var theForm=$('#timelinedetailactionform_form');org.r3.AjaxUtils.submitForm("POST",org.r3.PageManager.getRESTUrl('POST_Timelines',[org.r3.Constants.site,org.r3.Constants.language]),theForm,function(responseData){var dto=new org.r3.db.mongo.timelinecollection.TimelineCollectionDTOAdapter(responseData);_self.actionFormManager.onNewTimelineCreated(dto);},function(jqXHR,timeout,message){$('#timelinedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},_onUpdateItem:function()
{var _self=this;var theForm=$('#timelinedetailactionform_form');org.r3.AjaxUtils.submitForm("PUT",org.r3.PageManager.getRESTUrl('PUT_TimelineCollectionDetail',[this.actionFormManager.dataBeanInfo.dataBean.site,org.r3.Constants.language,this.actionFormManager.dataBeanInfo.dataBean.timelineid]),theForm,function(responseData){$('#timelinedetailactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#timelinedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},_onDeleteItem:function()
{var _self=this;var theForm=$('#timelinedetailactionform_form');org.r3.AjaxUtils.ajaxInvoke("DELETE",org.r3.PageManager.getRESTUrl('DELETE_TimelineCollectionDetail',[this.actionFormManager.dataBeanInfo.dataBean.site,org.r3.Constants.language,this.actionFormManager.dataBeanInfo.dataBean.timelineid]),function(responseData){_self.actionFormManager.closeTimelinePanel();},function(jqXHR,timeout,message){$('#timelinedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},_initializeFormFields:function(aTimelineDTOAdapter)
{if(aTimelineDTOAdapter)
{$('#timelinedetailactionform_timelineid').val(aTimelineDTOAdapter.dataBean.timelineid);$('#timelinedetailactionform_title').val(aTimelineDTOAdapter.dataBean.title);$('#timelinedetailactionform_description').val(aTimelineDTOAdapter.dataBean.description);}}});$.r3Utils.namespace("org.r3.jsportlet.mongocms",window,function(aNamespace)
{aNamespace.timelinedetailactionform_validationRules={title:{required:true,maxlength:80},description:{required:true,maxlength:512}};aNamespace.timelinedetailactionform_validationMessages={title:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},description:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.TimelineQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.mongo.timelinecollection.TimelineCollectionQueryActionFormView(anHtmlActionFormContainerId,this,{dataTableId:'TimelineCollectionQueryActionFormView',layout:'fullWidth',iDisplayLength:25,gradeLevel:'grade_level2 grade_clickable',legend:org.r3.db.mongo.timelinecollection.message.queryactionformview_legend,sortable:true,dataTableColumns:"timelineid;sort,title;sort,lastmodified;sort",requiredLUTs:["GET_classifier_contentclassdef","GET_classifier_m_contentclass_category","GET_classifier_contentclassdef"],onSelected:$.r3Utils.hitch(this,this.detailItem)});},close:function()
{this.listView.hide();},open:function(aCategoryId)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Timelines',[org.r3.Constants.site,org.r3.Constants.language]);this.listView.open({"dataTableSource":dataTableSource});},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},detailItem:function(aDataBean)
{this.listView.hide();this.pageManager.detailTimeline(aDataBean);}});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.UploadFileActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anUploadFileViewContainerId)
{this.setPageManager(aPageManager);this.uploadFileView=new org.r3.jsportlet.mongocms.UploadFileActionFormView(anUploadFileViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.uploadFileView.hide();},show:function()
{this.uploadFileView.show();},open:function(aCardDTOAdapter)
{this.setDataBeanInfo(aCardDTOAdapter);this.uploadFileView.open(aCardDTOAdapter);},uploadFile:function()
{},releaseSession:function()
{if(this.uploadFileView.isPendingUpload())
{if(!org.r3.PageManager.confirmation("org.r3.jsportlet.mongocms.message.pendingUploads"))
return;}}});$.r3Utils.namespace("org.r3.jsportlet.mongocms");org.r3.jsportlet.mongocms.UploadFileActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.uploadedFiles=[];},close:function()
{this.hide();},isPendingUpload:function()
{if(this.uploadedFiles&&this.uploadedFiles.length)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(this.uploadedFiles[i].pending)
return true;}
return false;},_clearFilenamesQueue:function()
{this.uploadedFiles.length=0;},_findEnqueuedFilename:function(aFileName)
{if(this.uploadedFiles&&this.uploadedFiles.length&&aFileName)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(aFileName==this.uploadedFiles[i].fname)
return i;}
return-1;},_enqueueFilename4Uploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Enqueue: "+aFileName);this.uploadedFiles.push({fname:aFileName,pending:true});}},_markEnqueuedFileAsCompleted:function(aFileName)
{if(aFileName)
{console.info("Trying to Mark File as Completed: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Mark: "+aFileName);this.uploadedFiles[fileNdx].pending=false;}}},_dequeueFilenameFromUploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Dequeue: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Dequeuing: "+aFileName);this.uploadedFiles.splice(fileNdx,1);}}},open:function(aCardDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");this._clearFilenamesQueue();var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/UploadFileActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var this_actionFormView=this;org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_CMS_Attachtype_default'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#uploadfileactionform_form_cms_attachtype')});$("#uploadfileactionform_form").validate({meta:"validate"});var aRestUrl=org.r3.PageManager.getRESTUrl('POST_Card_File',[aCardDTOAdapter.dataBean.cardid]);if(r3_IE)
aRestUrl=org.r3.PageManager.getRESTUrl('POST_Card_File_IE',[aCardDTOAdapter.dataBean.cardid]);console.info('CardDTOAdapter: ',aCardDTOAdapter);var fileTypes=org.r3.message.getDefaultAcceptedCMSFileTypes();var acceptedType='png';if(fileTypes&&fileTypes.length>0)
{if(fileTypes.length==1)
acceptedType=fileTypes[0];else
{acceptedType='';for(var i=0;i<fileTypes.length;i++)
{if(i>0)
acceptedType+='|';acceptedType=acceptedType+fileTypes[i];}}}
var rexp=new RegExp(".+\\.("+acceptedType+")$","i");$('#uploadfileactionform_form').fileupload({"acceptFileTypes":rexp,"url":aRestUrl,"dataType":'json',"sequentialUploads":true,"formAcceptCharset":"utf-8","submit":function(e,data)
{console.info("Submitting: ",e,data,data.files[0].name);if(!$("#uploadfileactionform_form").valid())
return false;return true;},"failed":function(e,data)
{console.info("Failing: ",e,data);console.info("Should Dequeue: ",data.files.valid,data.files[0].name);if(data.files.valid)
this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);return true;},"completed":function(e,data)
{console.info("Done: ",e,data);if(data.result&&data.result.files&&data.result.files[0]&&data.result.files[0].error)
{console.info("Done: is Error? "+data.result.files[0].error);this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
else this_actionFormView._markEnqueuedFileAsCompleted(data.files[0].name);return true;}}).bind('fileuploaddestroy',function(e,data){console.log("Should Delete: ",data);});$('#uploadfileactionform_form_action_releasesession').button().unbind().click($.r3Utils.hitch(org.r3.PageManager,org.r3.PageManager.back));this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.mongotimeline");org.r3.jsportlet.mongotimeline.PostActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aPostViewContainerId)
{this.setPageManager(aPageManager);this.postView=new org.r3.jsportlet.mongotimeline.PostActionFormView(aPostViewContainerId,this);},close:function()
{this.postView.close();},hide:function()
{this.postView.hide();},show:function()
{this.postView.show();},refresh:function()
{},open:function(aPostId)
{var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_graphcontentdef'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_contentclassdef'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{this.postView.open(aPostId);}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.mongotimeline");org.r3.jsportlet.mongotimeline.PostCommentScrollInfo=Class.extend({init:function(aPageSize)
{this.pageSize=aPageSize;this.pageOffset=0;this.keepLoading=false;this.loadingInProgress=false;},update:function(dataSize)
{if(dataSize<this.pageSize)
{this.keepLoading=false;}
else
{this.keepLoading=true;this.pageOffset+=dataSize;}},fixOffsetOnPostAddedDeleted:function(incrementDecrementCount)
{this.pageOffset+=incrementDecrementCount;}});org.r3.jsportlet.mongotimeline.PostActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.timelineSelector=anHtmlActionFormContainerId;this.contentClassForms=null;$.fn.toggleBox=function(){$.AdminLTE.boxWidget.collapse(this);};},close:function()
{this.hide();},_getContentClassDefinitionById:function(contentClassDefId)
{var cdefobj=this.contentClassDefinitionDictionary[contentClassDefId];return cdefobj;},_getUserRoleById:function(aRoleId)
{if(this.inputContext&&this.inputContext.currentUserEnabledRoles)
{for(var i=0;i<this.inputContext.currentUserEnabledRoles.listofroles.length;i++)
{if(this.inputContext.currentUserEnabledRoles.listofroles[i].author==aRoleId)
return this.inputContext.currentUserEnabledRoles.listofroles[i];}}
return null;},_getSelector:function(aSelector)
{return $(this.timelineSelector+' '+aSelector);},_getEditForm:function(aContentClass)
{var editableContentWrapperId=aContentClass+"_edit_wrapper";return $('#'+editableContentWrapperId);},_onOpenInitialization:function()
{this.contentClassDefinitionDictionary={};this.viewPostCanvasTemplate=null;this.viewCommentCanvasTemplate=null;this.newCommentCanvasTemplate=null;this.inputContext={mode:'none',targetObj:null,currentUserEnabledRoles:null,imageSelectionContext:null};this.fetchPostInfo=new org.r3.jsportlet.mongotimeline.PostCommentScrollInfo(20);},_getRetrieveURL4PageOfPostComments:function(aPostId,aPageSize,aPageOffset)
{var r=org.r3.PageManager.getRESTUrl("POST_GetPostComments",[org.r3.Constants.site,org.r3.Constants.language,aPostId,aPageSize+'',aPageOffset+'']);return r;},open:function(aPostId)
{var _self=this;this._onOpenInitialization();org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"postdetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_Post_Detail",[org.r3.Constants.site,org.r3.Constants.language,aPostId]),dataType:"json"});networkRequestsQueue.push({id:"postcomments",type:"Get",url:this._getRetrieveURL4PageOfPostComments(aPostId,this.fetchPostInfo.pageSize,this.fetchPostInfo.pageOffset),dataType:"json"});networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/PostActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_viewpostcanvas",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/PostActionFormView_ViewPostCanvas.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_viewcommentcanvas",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/PostActionFormView_ViewCommentCanvas.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_newcommentcanvas",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/PostActionFormView_NewCommentCanvas.html.jsp'),dataType:"html"});var contentDefLUTUrl=org.r3.PageManager.getRESTUrl('GET_classifier_contentclassdef');var contentDefLUT=org.r3.PageManager.lutManager.getLUT(contentDefLUTUrl);if(contentDefLUT&&contentDefLUT.aaData.length)
{for(var i=0;i<contentDefLUT.aaData.length;i++)
{var contentDefinitionDTOAdapter=new org.r3.db.mongo.contentdefinitioncollection.ContentDefinitionDTOAdapter(contentDefLUT.aaData[i]);networkRequestsQueue.push({id:contentDefinitionDTOAdapter.dataBean.dtokey+'_edit',type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+contentDefinitionDTOAdapter.getTimelineEditTemplateURL()),dataType:"html"});networkRequestsQueue.push({id:contentDefinitionDTOAdapter.dataBean.dtokey+'_view',type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+contentDefinitionDTOAdapter.getTimelineViewTemplateURL()),dataType:"html"});this.contentClassDefinitionDictionary[contentDefinitionDTOAdapter.dataBean.dtokey]=contentDefinitionDTOAdapter;}}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));this.contentClassForms=this._getSelector(' .mongotimeline_edit_content');this.viewPostCanvasTemplate=responseData['view_viewpostcanvas'];this.viewCommentCanvasTemplate=responseData['view_viewcommentcanvas'];this.newCommentCanvasTemplate=responseData['view_newcommentcanvas'];if(contentDefLUT&&contentDefLUT.aaData.length)
{for(var i=0;i<contentDefLUT.aaData.length;i++)
{var cdefobj=_self.contentClassDefinitionDictionary[contentDefLUT.aaData[i].dtokey];this.contentClassForms.append(tmpl(responseData[cdefobj.dataBean.dtokey+'_edit'],{contentDefinitionDTOAdapter:cdefobj}));cdefobj.setViewTemplate(responseData[cdefobj.dataBean.dtokey+'_view']);cdefobj.initializeModelObject();}}
_self.postDtoAdapter=new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(responseData['postdetail']);_self._appendPost(_self.postDtoAdapter);this._processPageOfComments(_self.postDtoAdapter,responseData['postcomments']);this._getSelector(' .mongotimeline_posts_cnt').unbind().click($.r3Utils.hitch(this,this._onClickHandler));this.show();if(this.fetchPostInfo.keepLoading)
org.r3.PageManager.setScrollToBottomCallback($.r3Utils.hitch(this,this._onLoadMorePostCommentsOnScroll));this.fileUploader=new org.r3.jsportlet.imageupload.FileUploader({inputfile_selector:'#mongotimeline_input_file'});}),function(d)
{console.error("controller did not load");});},_onLoadMorePostCommentsOnScroll:function()
{if(this.fetchPostInfo.loadingInProgress||!this.fetchPostInfo.keepLoading)
return;this.fetchPostInfo.loadingInProgress=true;this._getSelector(' .mongotimeline_loadmorecontentprogress').show();this._loadPageOfPostComments(this.fetchPostInfo.pageSize,this.fetchPostInfo.pageOffset);},_loadPageOfPostComments:function(aPageSize,anOffset)
{var resolvedUrl=this._getRetrieveURL4PageOfPostComments(this.postDtoAdapter.dataBean.postid,aPageSize,anOffset);org.r3.AjaxUtils.ajaxInvoke("GET",resolvedUrl,$.r3Utils.hitch(this,function(responseData)
{this._resetInputContext();this._processPageOfComments(this.postDtoAdapter,responseData);this.fetchPostInfo.loadingInProgress=false;this._getSelector(' .mongotimeline_loadmorecontentprogress').hide();}),$.r3Utils.hitch(this,function(jqXHR,timeout,message)
{console.log(arguments);this._getSelector(' .mongotimeline_loadmorecontentprogress').hide();this.fetchPostInfo.loadingInProgress=false;}));},_processPageOfComments:function(aPostDtoAdapter,aPageComments)
{var numberOfPrimaryPosts=0;var lastPrimaryPost=null;if(aPageComments&&aPageComments.aaData&&aPageComments.aaData.length>0)
{this.fetchPostInfo.update(aPageComments.aaData.length);$.each(aPageComments.aaData,$.r3Utils.hitch(this,function(entryIndex,aRowDataBean)
{var commentDtoAdapter=new org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTOAdapter(aRowDataBean);aPostDtoAdapter.addComment(commentDtoAdapter);this._appendComment(aPostDtoAdapter,commentDtoAdapter,false);}));}},_appendPost:function(aPost)
{var tp=this._getContentClassDefinitionById(aPost.dataBean.contentclass);var postCanvasHtml=tmpl(this.viewPostCanvasTemplate,{post:aPost,contentClassObj:tp});var renderedPost=tp.applyViewTemplate(aPost);this._getSelector(' .mongotimeline_posts_cnt').append(postCanvasHtml);$("#post_"+aPost.dataBean.postid+"_viewcanvas").html(renderedPost);},_updatePost:function(aPost)
{var thnode_info=$('#post_'+aPost.dataBean.postid+' .user-block > .description ');var thnode_content=$('#post_'+aPost.dataBean.postid+'_viewcanvas');var tp=this._getContentClassDefinitionById(aPost.dataBean.contentclass);thnode_info.html(aPost.getCreationDateAsBadge()+' - '+
aPost.getCreationdateAsElapsed()+' - '+aPost.dataBean.title);thnode_content.html(tp.applyViewTemplate(aPost));},_appendComment:function(aPost,aComment,prependMode)
{var tp=this._getContentClassDefinitionById(aComment.dataBean.contentclass);var postCanvasHtml=tmpl(this.viewCommentCanvasTemplate,{post:aPost,comment:aComment,contentClassObj:tp});var renderedPost=tp.applyViewTemplate(aComment);var postCommentCanvas=$("#post_"+aComment.dataBean.postid+" .comments-canvas");if(prependMode)
postCommentCanvas.prepend(postCanvasHtml);else
postCommentCanvas.append(postCanvasHtml);postCommentCanvas.find("#comm_"+aComment.dataBean.commentid+" .comment-content-viewcanvas").html(renderedPost);},_replaceComment:function(aPost,aComment)
{var tp=this._getContentClassDefinitionById(aComment.dataBean.contentclass);var postCanvasHtml=tmpl(this.viewCommentCanvasTemplate,{post:aPost,comment:aComment,contentClassObj:tp});var renderedPost=tp.applyViewTemplate(aComment);var postCommentCanvas=$("#comm_"+aComment.dataBean.commentid);postCommentCanvas.replaceWith(postCanvasHtml);$("#comm_"+aComment.dataBean.commentid+" .comment-content-viewcanvas").html(renderedPost);},_updateComment:function(aComment)
{var tp=this._getContentClassDefinitionById(aComment.dataBean.contentclass);var renderedPost=tp.applyViewTemplate(aComment);var commentDOMNode=$("#comm_"+aComment.dataBean.commentid);commentDOMNode.find(".comment-content-viewcanvas").html(renderedPost);commentDOMNode.find(".authorname").html(aComment.dataBean.authorname);commentDOMNode.find(".lastmodified").html(aComment.getCreationDateAsBadge()+' - '+aComment.getCreationdateAsElapsed());},_resetInputContext:function()
{switch(this.inputContext.mode)
{case'none':break;case'editprimarypost':$('#post_'+this.inputContext.targetObj.dataBean.postid+'_editcanvas  > div').appendTo(this.contentClassForms);$('#post_'+this.inputContext.targetObj.dataBean.postid+'_viewcanvas').show();$('#post_'+this.inputContext.targetObj.dataBean.postid+' .box-footer').show();$('#post_'+this.inputContext.targetObj.dataBean.postid+' .box-tools .view-mode').show();$('#post_'+this.inputContext.targetObj.dataBean.postid+' .box-tools .edit-mode').hide();this._getContentClassDefinitionById(this.inputContext.targetObj.dataBean.contentclass).getModelObject().resetForm();break;case'newchild':$('#post_'+this.inputContext.targetObj.dataBean.postid+'_newchildcanvas  .mongotimeline_postcomment_content > div').appendTo(this.contentClassForms);$('#post_'+this.inputContext.targetObj.dataBean.postid+'_newchildcanvas > div').appendTo(this._getSelector(' .mongotimeline_childpost_canvas'));$('#post_'+this.inputContext.targetObj.dataBean.postid+' .new-child-actionbar').show();this._getContentClassDefinitionById(this.inputContext.contentClass).getModelObject().resetForm();break;case'editchild':$('#comm_'+this.inputContext.targetObj.dataBean.commentid+' .comment-content-editcanvas > div').appendTo(this.contentClassForms);$('#comm_'+this.inputContext.targetObj.dataBean.commentid+' .comment-content-viewcanvas').show();$('#comm_'+this.inputContext.targetObj.dataBean.commentid+'  .view-mode').show();$('#comm_'+this.inputContext.targetObj.dataBean.commentid+'  .edit-mode').hide();this._getContentClassDefinitionById(this.inputContext.targetObj.dataBean.contentclass).getModelObject().resetForm();break;}
this.inputContext.mode='none';this.inputContext.timelineConfig=null;this.inputContext.contentClass='none';this.inputContext.targetObj=null;this.inputContext.currentUserEnabledRoles=null;if(this.timelineEventListener)
this.timelineEventListener.onTimelineEvent({event:this.inputContext.mode});},_setInputContext:function(aNewMode,aTimelineid,aProfileId,aTargetNodeDTOAdapter,currentUserEnabledRoles)
{this._resetInputContext();this.inputContext.mode=aNewMode;if(this.timelineEventListener)
this.timelineEventListener.onTimelineEvent({event:this.inputContext.mode});this.inputContext.contentClass=aProfileId;this.inputContext.targetObj=aTargetNodeDTOAdapter;var postViewCanvas=null;switch(aNewMode)
{case'newprimarypost':this.inputContext.currentUserEnabledRoles=currentUserEnabledRoles;this._getSelector(' .mongotimeline_newpost_canvas').html(tmpl(this.newPostCanvasTemplate,{contentClassObj:this._getContentClassDefinitionById(aProfileId),currentUserEnabledRoles:this.inputContext.currentUserEnabledRoles}));this._getEditForm(aProfileId).appendTo(this._getSelector(' .mongotimeline_primarypost_content'));this._getSelector(' .mongotimeline_newpost_canvas > div').show();this._getContentClassDefinitionById(aProfileId).getModelObject().initializeForm({targetnode_or_id:null,timelineid:aTimelineid,authorinfo:this.inputContext.currentUserEnabledRoles.current});break;case'editprimarypost':postRootCanvas=$('#post_'+aTargetNodeDTOAdapter.dataBean.postid);if(postRootCanvas.hasClass('collapsed-box'))
{postRootCanvas.find("button[data-widget='collapse']").toggleBox();}
this._getEditForm(aTargetNodeDTOAdapter.dataBean.contentclass).appendTo($('#post_'+aTargetNodeDTOAdapter.dataBean.postid+'_editcanvas'));$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+'_viewcanvas').hide();$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+' .box-footer').hide();$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+' .box-tools .view-mode').hide();$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+' .box-tools .edit-mode').show();this._getContentClassDefinitionById(aTargetNodeDTOAdapter.dataBean.contentclass).getModelObject().initializeForm({targetnode_or_id:aTargetNodeDTOAdapter,timelineid:null,authorinfo:null});break;case'newchild':this.inputContext.currentUserEnabledRoles=currentUserEnabledRoles;this._getSelector(' .mongotimeline_childpost_canvas').html(tmpl(this.newCommentCanvasTemplate,{currentUserEnabledRoles:this.inputContext.currentUserEnabledRoles}));this._getSelector(' .mongotimeline_childpost_canvas > div').appendTo($('#post_'+aTargetNodeDTOAdapter.dataBean.postid+'_newchildcanvas'));this._getEditForm(aProfileId).appendTo(this._getSelector(' .mongotimeline_postcomment_content'));$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+' .new-child-actionbar').hide();this._getContentClassDefinitionById(aProfileId).getModelObject().initializeForm({targetnode_or_id:aTargetNodeDTOAdapter.dataBean.postid,timelineid:aTargetNodeDTOAdapter.dataBean.timeline,authorinfo:this.inputContext.currentUserEnabledRoles.current});break;case'editchild':this._getEditForm(aTargetNodeDTOAdapter.dataBean.contentclass).appendTo($('#comm_'+aTargetNodeDTOAdapter.dataBean.commentid+' .comment-content-editcanvas'));$('#comm_'+aTargetNodeDTOAdapter.dataBean.commentid+' .comment-content-viewcanvas').hide();$('#comm_'+aTargetNodeDTOAdapter.dataBean.commentid+'  .view-mode').hide();$('#comm_'+aTargetNodeDTOAdapter.dataBean.commentid+'  .edit-mode').show();this._getContentClassDefinitionById(aTargetNodeDTOAdapter.dataBean.contentclass).getModelObject().initializeForm({targetnode_or_id:aTargetNodeDTOAdapter,timelineid:null,authorinfo:null});break;}},_extractPostId:function(anId)
{if(anId&&anId.substring(0,5)=='post_')
anId=anId.substring(5);return anId;},_extractCommentId:function(anId)
{if(anId&&anId.substring(0,5)=='comm_')
anId=anId.substring(5);return anId;},newPost:function(aContentDefinitionId,aTimelineId)
{var ur=this._getContentClassDefinitionById(aContentDefinitionId).getCurrentUserEnabledRoles4NewPost("new-post");this._setInputContext('newprimarypost',aTimelineId,aContentDefinitionId,null,ur);},_onClickHandler:function(e)
{var target=$(e.target);var dataAction=target.attr('data-action');var dataActionTarget=target;var ps=null,cm=null;if(!dataAction)
{ps=target.parents('[data-action]');if(ps.length>0)
{dataActionTarget=$(ps[0]);dataAction=dataActionTarget.attr('data-action');}}
if(dataAction!=null)
{var dataActionPath=dataAction.split(':');switch(dataActionPath[0])
{case'child-edit-cancel':case'primary-edit-cancel':this._resetInputContext();break;case'primarypost-submit':this._onSubmit(dataActionPath[1]);break;case'childpost-submit':this._onChildSubmit(dataActionPath[1]);break;case'edit-primary':ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{var dtoAdapter=this.postDtoAdapter;this._setInputContext('editprimarypost',dtoAdapter.dataBean.timeline,dtoAdapter.dataBean.contentclass,dtoAdapter);}
break;case'new-child1':case'new-child':ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{var dtoAdapter=this.postDtoAdapter;var ur=this._getContentClassDefinitionById(dtoAdapter.dataBean.contentclass).getCurrentUserEnabledRoles4NewPost(dataActionPath[0],dtoAdapter);this._setInputContext('newchild',dtoAdapter.dataBean.timeline,dataActionPath[1],dtoAdapter,ur);}
break;case'edit-child':cm=dataActionTarget.parents('.timelinecomment');ps=cm.parents('.timelinepost');if(ps.length>0)
{var dtoAdapter=this.postDtoAdapter.getComment(this._extractCommentId($(cm[0]).attr('id')));this._setInputContext('editchild',dtoAdapter.dataBean.timeline,dtoAdapter.dataBean.contentclass,dtoAdapter);}
break;case'delete-child':this._resetInputContext();cm=dataActionTarget.parents('.timelinecomment');ps=cm.parents('.timelinepost');if(ps.length>0&&cm.length>0)
{this._doDeleteChild(ps,cm);}
break;case'image-selection':var fileUploadOptions=$.extend({},this._getContentClassDefinitionById(dataActionPath[1]).getTimelinePhotoUploadOptions(),{onUploadErrorCallback:function(){console.log('On Upload ERROR CallBack');},modaldialog_selector:'#mongotimeline_photo_dialog',upload_url:org.r3.PageManager.getRESTUrl('POST_PostTemporaryFileInTimeline',[org.r3.Constants.site,org.r3.Constants.language]),upload_method:'POST',"accept":"image/png,image/jpeg"});this.fileUploader.open(fileUploadOptions);break;case'shakeit':this._resetInputContext();cm=dataActionTarget.parents('.timelinecomment');ps=cm.parents('.timelinepost');if(ps.length>0&&cm.length>0)
{this._doShakeit(ps,cm);}
break;case'unshakeit':this._resetInputContext();cm=dataActionTarget.parents('.timelinecomment');ps=cm.parents('.timelinepost');if(ps.length>0&&cm.length>0)
{this._doUnshakeit(ps,cm);}
break;case'switch-user-role':console.log("Switch Role With: ",dataActionPath[1]);var userRole=this._getUserRoleById(dataActionPath[1]);if(userRole!=null)
{var contentClassObj=this._getContentClassDefinitionById(this.inputContext.contentClass);contentClassObj.setAuhtorInfo(userRole);cm=dataActionTarget.parents('.timelinecomment');if(cm.length>0)
{cm.find(".postauthorname").html('<a href="#">'+userRole.authorname+' <i class="fa fa-caret-down"></i></a>');cm.find(".postauthorphoto")[0].src=userRole.getAuthorphotourl();}
else
{ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{ps.find(".postauthorname").html('<a href="#">'+userRole.authorname+' <i class="fa fa-caret-down"></i></a>');ps.find(".postauthorphoto")[0].src=userRole.getAuthorphotourl();}}}
break;default:console.log("Data Action: ",dataAction);}}
return true;},_onSubmit:function(aProfileId)
{var _self=this;var profileObj=this._getContentClassDefinitionById(aProfileId);var theForm=profileObj.getModelObject().getForm();var threadNodeId=theForm.find("input[name='postid']").val();if(theForm.valid())
{profileObj.getModelObject().serializeContent();var method=null;var restUrl=null;if(threadNodeId)
{restUrl=org.r3.PageManager.getRESTUrl('PUT_UpdatePostInTimeline',[org.r3.Constants.site,org.r3.Constants.language,threadNodeId]);method="put";}
else
{restUrl=org.r3.PageManager.getRESTUrl('POST_AddPostInTimeline',[org.r3.Constants.site,org.r3.Constants.language]);method="post";}
org.r3.AjaxUtils.submitForm(method,restUrl,theForm,function(responseData)
{_self._processPostSubmitResponse(responseData);},function(jqXHR,timeout,message){console.log(arguments);profileObj.showMessage({text:message,category:'error'});},"org.r3.message.saveconfirm",true);}},_processPostSubmitResponse:function(responseData)
{var timelinePostDataBean=new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(responseData);this.postDtoAdapter=timelinePostDataBean;var profileObj=this._getContentClassDefinitionById(timelinePostDataBean.dataBean.contentclass);var thnode=$('#post_'+timelinePostDataBean.dataBean.postid);if(thnode.length)
{this._updatePost(timelinePostDataBean);}
else
{this._appendPost(timelinePostDataBean,true);org.r3.PageManager.userCollectionProfileInfo.setUserAnalyticsLastpostauthor(timelinePostDataBean.dataBean.author,timelinePostDataBean.dataBean.authortype);}
this.fetchPostInfo.fixOffsetOnPostAddedDeleted(1);this._resetInputContext();},_doDeleteChild:function(aPostWrapperObj,aCommentWrapperObj)
{var _self=this;var postTargetWrapper=$(aPostWrapperObj[0]);var aPostId=postTargetWrapper.attr('id');if(aPostId)
aPostId=aPostId.substring(5);var commentTargetWrapper=$(aCommentWrapperObj[0]);var aCommentId=commentTargetWrapper.attr('id');if(aCommentId)
aCommentId=aCommentId.substring(5);org.r3.AjaxUtils.ajaxInvoke('DELETE',org.r3.PageManager.getRESTUrl('DELETE_CommentFromPost',[org.r3.Constants.site,org.r3.Constants.language,aPostId,aCommentId]),function(responseData){commentTargetWrapper.remove();_self.postDtoAdapter.removeComment(aCommentId);},function(jqXHR,timeout,message){},false,false);},_doShakeit:function(aPostWrapperObj,aCommentWrapperObj)
{return this._doShakeUnshakeit('SHAKE_PostComment',aPostWrapperObj,aCommentWrapperObj);},_doUnshakeit:function(aPostWrapperObj,aCommentWrapperObj)
{return this._doShakeUnshakeit('UNSHAKE_PostComment',aPostWrapperObj,aCommentWrapperObj);},_doShakeUnshakeit:function(aUrlAction,aPostWrapperObj,aCommentWrapperObj)
{var _self=this;var postTargetWrapper=$(aPostWrapperObj[0]);var aPostId=postTargetWrapper.attr('id');if(aPostId)
aPostId=aPostId.substring(5);var commentTargetWrapper=$(aCommentWrapperObj[0]);var aCommentId=commentTargetWrapper.attr('id');if(aCommentId)
aCommentId=aCommentId.substring(5);org.r3.AjaxUtils.submitForm('PUT',org.r3.PageManager.getRESTUrl(aUrlAction,[org.r3.Constants.site,org.r3.Constants.language,aPostId,aCommentId]),org.r3.PageManager.jsAppVersionForm,function(responseData){_self._processCommentSubmitResponse(responseData,true);},function(jqXHR,timeout,message){},false,false);},_onChildSubmit:function(aProfileId)
{var _self=this;var profileObj=this._getContentClassDefinitionById(aProfileId);var theForm=profileObj.getModelObject().getForm();var parentPostId=theForm.find("input[name='parentpostid']").val();var timelineId=theForm.find("input[name='timeline']").val();var threadNodeId=theForm.find("input[name='postid']").val();if(theForm.valid())
{profileObj.getModelObject().serializeContent();var method=null;var restUrl=null;if(threadNodeId)
{restUrl=org.r3.PageManager.getRESTUrl('PUT_ModifyPostComment',[org.r3.Constants.site,org.r3.Constants.language,parentPostId,threadNodeId]);method="put";}
else
{restUrl=org.r3.PageManager.getRESTUrl('POST_AddPostComment',[org.r3.Constants.site,org.r3.Constants.language,parentPostId]);method="post";}
org.r3.AjaxUtils.submitForm(method,restUrl,theForm,function(responseData){_self._processCommentSubmitResponse(responseData);},function(jqXHR,timeout,message){console.log(arguments);profileObj.showMessage({text:message,category:'error'});},"org.r3.message.saveconfirm",true);}},_processCommentSubmitResponse:function(responseData,replaceFlag)
{var timelinePostCommentDataBean=new org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTOAdapter(responseData);var cid=timelinePostCommentDataBean.dataBean.commentid;var pid=timelinePostCommentDataBean.dataBean.postid;var postDtoAdapter=this.postDtoAdapter;var commentDtoAdapter=this.postDtoAdapter.addOrUpdateComment(timelinePostCommentDataBean);var postnode=$('#post_'+pid);var commentnode=postnode.find('#comm_'+cid);if(commentnode.length)
{if(!replaceFlag)
this._updateComment(timelinePostCommentDataBean);else
this._replaceComment(postDtoAdapter,timelinePostCommentDataBean);}
else
{this._appendComment(postDtoAdapter,timelinePostCommentDataBean,true);org.r3.PageManager.userCollectionProfileInfo.setUserAnalyticsLastpostauthor(timelinePostCommentDataBean.dataBean.author,timelinePostCommentDataBean.dataBean.authortype);}
this._resetInputContext();}});$.r3Utils.namespace("org.r3.jsportlet.mongotimeline");org.r3.jsportlet.mongotimeline.TimelineActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aTimeLineViewContainerId)
{this.setPageManager(aPageManager);this.timelineView=new org.r3.jsportlet.mongotimeline.TimelineActionFormView(aTimeLineViewContainerId,this);},close:function()
{this.timelineView.close();},hide:function()
{this.timelineView.hide();},show:function()
{this.timelineView.show();},refresh:function()
{},open:function(aTimelineEventListener,aSetOfTimelineParams)
{var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_graphcontentdef'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_contentclassdef'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{this.timelineView.open(aTimelineEventListener,aSetOfTimelineParams);}),function(d)
{console.error("controller did not load");});},newPost:function(aContentDefinitionId,aTimelineId)
{this.timelineView.newPost(aContentDefinitionId,aTimelineId);}});$.r3Utils.namespace("org.r3.jsportlet.mongotimeline");org.r3.jsportlet.mongotimeline.timelineScrollInfo=Class.extend({init:function(aPageSize)
{this.pageSize=aPageSize;this.pageOffset=0;this.keepLoading=false;this.loadingInProgress=false;this.timelineEventListener=null;},update:function(dataSize)
{if(dataSize<this.pageSize)
{this.keepLoading=false;}
else
{this.keepLoading=true;this.pageOffset+=dataSize;}},fixOffsetOnPostAddedDeleted:function(incrementDecrementCount)
{this.pageOffset+=incrementDecrementCount;}});org.r3.jsportlet.mongotimeline.MapOfPosts=Class.extend({init:function()
{this.theMapOfPosts={};},addPost:function(aTimelineCollectionDTOAdapter)
{this.theMapOfPosts[aTimelineCollectionDTOAdapter.dataBean.postid]=aTimelineCollectionDTOAdapter;},getPost:function(aPostId)
{return this.theMapOfPosts[aPostId];},removePost:function(aPostId)
{this.theMapOfPosts[aPostId]=null;},updatePost:function(aTimelineCollectionDTOAdapter)
{this.theMapOfPosts[aTimelineCollectionDTOAdapter.dataBean.postid]=aTimelineCollectionDTOAdapter;},addOrUpdatePost:function(aTimelineCollectionDTOAdapter)
{this.theMapOfPosts[aTimelineCollectionDTOAdapter.dataBean.postid]=aTimelineCollectionDTOAdapter;},addComment2Post:function(aPostId,aTimelineCommentCollectionDTOAdapter)
{var p=this.getPost(aPostId);if(p)
return p.addComment(aTimelineCommentCollectionDTOAdapter);return false;},updateCommentInPost:function(aPostId,aTimelineCommentCollectionDTOAdapter)
{var p=this.getPost(aPostId);if(p)
return p.updateComment(aTimelineCommentCollectionDTOAdapter);return false;},addOrUpdateCommentInPost:function(aPostId,aTimelineCommentCollectionDTOAdapter)
{var p=this.getPost(aPostId);if(p)
return p.addOrUpdateComment(aTimelineCommentCollectionDTOAdapter);return false;},removeCommentFromPost:function(aPostId,aCommentId)
{var p=this.getPost(aPostId);if(p)
return p.removeComment(aCommentId);return false;},getCommentFromPost:function(aPostId,aCommentId)
{var p=this.getPost(aPostId);if(p)
return p.getComment(aCommentId);return false;}});org.r3.jsportlet.mongotimeline.TimelineActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.timelineParams=null;this.timelineSelector=anHtmlActionFormContainerId;this.contentClassForms=null;$.fn.toggleBox=function(){$.AdminLTE.boxWidget.collapse(this);};},close:function()
{this.hide();if(this.timelineEventListener)
this.timelineEventListener.onTimelineEvent({event:'close'});},_getContentClassDefinitionById:function(contentClassDefId)
{var cdefobj=this.contentClassDefinitionDictionary[contentClassDefId];return cdefobj;},_getUserRoleById:function(aRoleId)
{if(this.inputContext&&this.inputContext.currentUserEnabledRoles)
{for(var i=0;i<this.inputContext.currentUserEnabledRoles.listofroles.length;i++)
{if(this.inputContext.currentUserEnabledRoles.listofroles[i].author==aRoleId)
return this.inputContext.currentUserEnabledRoles.listofroles[i];}}
return null;},_getSelector:function(aSelector)
{return $(this.timelineSelector+' '+aSelector);},_getEditForm:function(aContentClass)
{var editableContentWrapperId=aContentClass+"_edit_wrapper";return $('#'+editableContentWrapperId);},_onOpenInitialization:function()
{this.mapOfPosts=new org.r3.jsportlet.mongotimeline.MapOfPosts();this.contentClassDefinitionDictionary={};this.viewPostCanvasTemplate=null;this.newPostCanvasTemplate=null;this.viewCommentCanvasTemplate=null;this.newCommentCanvasTemplate=null;this.inputContext={mode:'none',targetObj:null,currentUserEnabledRoles:null,imageSelectionContext:null};this.fetchPostInfo=new org.r3.jsportlet.mongotimeline.timelineScrollInfo(20);},_getRetrieveURL4PageOfPosts:function(aPageSize,aPageOffset)
{restUrl=$.r3Utils.stringFormat(this.timelineParams.timelineURL,[aPageSize+'',aPageOffset+'']);return restUrl;},open:function(aTimelineEventListener,aConfigHash)
{var _self=this;this.timelineEventListener=aTimelineEventListener;this.timelineParams=aConfigHash;this._onOpenInitialization();org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"timelineposts",type:"Get",url:this._getRetrieveURL4PageOfPosts(this.fetchPostInfo.pageSize,this.fetchPostInfo.pageOffset),dataType:"json"});networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/TimelineActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_viewpostcanvas",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/TimelineActionFormView_ViewPostCanvas.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_newpostcanvas",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/TimelineActionFormView_NewPostCanvas.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_viewcommentcanvas",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/TimelineActionFormView_ViewCommentCanvas.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_newcommentcanvas",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/TimelineActionFormView_NewCommentCanvas.html.jsp'),dataType:"html"});var contentDefLUTUrl=org.r3.PageManager.getRESTUrl('GET_classifier_contentclassdef');var contentDefLUT=org.r3.PageManager.lutManager.getLUT(contentDefLUTUrl);if(contentDefLUT&&contentDefLUT.aaData.length)
{for(var i=0;i<contentDefLUT.aaData.length;i++)
{var contentDefinitionDTOAdapter=new org.r3.db.mongo.contentdefinitioncollection.ContentDefinitionDTOAdapter(contentDefLUT.aaData[i]);networkRequestsQueue.push({id:contentDefinitionDTOAdapter.dataBean.dtokey+'_edit',type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+contentDefinitionDTOAdapter.getTimelineEditTemplateURL()),dataType:"html"});networkRequestsQueue.push({id:contentDefinitionDTOAdapter.dataBean.dtokey+'_view',type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+contentDefinitionDTOAdapter.getTimelineViewTemplateURL()),dataType:"html"});this.contentClassDefinitionDictionary[contentDefinitionDTOAdapter.dataBean.dtokey]=contentDefinitionDTOAdapter;}}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));this.contentClassForms=this._getSelector(' .mongotimeline_edit_content');this.viewPostCanvasTemplate=responseData['view_viewpostcanvas'];this.newPostCanvasTemplate=responseData['view_newpostcanvas'];this.viewCommentCanvasTemplate=responseData['view_viewcommentcanvas'];this.newCommentCanvasTemplate=responseData['view_newcommentcanvas'];if(contentDefLUT&&contentDefLUT.aaData.length)
{for(var i=0;i<contentDefLUT.aaData.length;i++)
{var cdefobj=_self.contentClassDefinitionDictionary[contentDefLUT.aaData[i].dtokey];this.contentClassForms.append(tmpl(responseData[cdefobj.dataBean.dtokey+'_edit'],{contentDefinitionDTOAdapter:cdefobj}));cdefobj.setViewTemplate(responseData[cdefobj.dataBean.dtokey+'_view']);cdefobj.initializeModelObject();}}
this._processPageOfPosts(responseData['timelineposts']);this._getSelector(' .mongotimeline_posts_cnt').unbind().click($.r3Utils.hitch(this,this._onClickHandler));this._getSelector(' .mongotimeline_newpost_canvas').unbind().click($.r3Utils.hitch(this,this._onClickHandler));this.show();if(this.fetchPostInfo.keepLoading)
org.r3.PageManager.setScrollToBottomCallback($.r3Utils.hitch(this,this._onLoadMorePostsOnScroll));this.fileUploader=new org.r3.jsportlet.imageupload.FileUploader({inputfile_selector:'#mongotimeline_input_file'});}),function(d)
{console.error("controller did not load");});},_onLoadMorePostsOnScroll:function()
{if(this.fetchPostInfo.loadingInProgress||!this.fetchPostInfo.keepLoading)
return;this.fetchPostInfo.loadingInProgress=true;this._getSelector(' .mongotimeline_loadmorecontentprogress').show();this._loadPageOfPosts(this.fetchPostInfo.pageSize,this.fetchPostInfo.pageOffset);},_loadPageOfPosts:function(aPageSize,anOffset)
{var resolvedUrl=this._getRetrieveURL4PageOfPosts(aPageSize,anOffset);org.r3.AjaxUtils.ajaxInvoke("GET",resolvedUrl,$.r3Utils.hitch(this,function(responseData)
{this._resetInputContext();this._processPageOfPosts(responseData);this.fetchPostInfo.loadingInProgress=false;this._getSelector(' .mongotimeline_loadmorecontentprogress').hide();}),$.r3Utils.hitch(this,function(jqXHR,timeout,message)
{console.log(arguments);this._getSelector(' .mongotimeline_loadmorecontentprogress').hide();this.fetchPostInfo.loadingInProgress=false;}));},_processPageOfPosts:function(aPagePosts)
{var numberOfPrimaryPosts=0;var lastPrimaryPost=null;if(aPagePosts&&aPagePosts.aaData&&aPagePosts.aaData.length>0)
{this.fetchPostInfo.update(aPagePosts.aaData.length);$.each(aPagePosts.aaData,$.r3Utils.hitch(this,function(entryIndex,aRowDataBean)
{var dtoAdapter=new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(aRowDataBean);if(!dtoAdapter.dataBean.parentpostid)
{lastPrimaryPost=dtoAdapter.dataBean.postid;numberOfPrimaryPosts++;}
this.mapOfPosts.addPost(dtoAdapter);this._appendPost(dtoAdapter,false);if(dtoAdapter.hasComments())
{for(var j=0;j<dtoAdapter.dataBean.comments.length;j++)
{var commentDtoAdapter=new org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTOAdapter(dtoAdapter.dataBean.comments[j]);commentDtoAdapter.setTimelinePostid(dtoAdapter.dataBean.timeline,dtoAdapter.dataBean.postid);this._appendComment(dtoAdapter,commentDtoAdapter,true);}}}));}},_appendPost:function(aPost,appendMode)
{var tp=this._getContentClassDefinitionById(aPost.dataBean.contentclass);var postCanvasHtml=tmpl(this.viewPostCanvasTemplate,{post:aPost,contentClassObj:tp});var renderedPost=tp.applyViewTemplate(aPost);if(aPost.dataBean.parentpostid)
{if(appendMode)
$('#post_'+aPost.dataBean.parentpostid+'_childlist').prepend('<li>'+renderedPost+'</li>');else
$('#post_'+aPost.dataBean.parentpostid+'_childlist').append('<li>'+renderedPost+'</li>');}
else
{if(appendMode)
this._getSelector(' .mongotimeline_posts_cnt').prepend(postCanvasHtml);else
this._getSelector(' .mongotimeline_posts_cnt').append(postCanvasHtml);$("#post_"+aPost.dataBean.postid+"_viewcanvas").html(renderedPost);}},_updatePost:function(aPost)
{var thnode_info=$('#post_'+aPost.dataBean.postid+' .user-block > .description ');var thnode_content=$('#post_'+aPost.dataBean.postid+'_viewcanvas');var tp=this._getContentClassDefinitionById(aPost.dataBean.contentclass);thnode_info.html(aPost.getCreationDateAsBadge()+' - '+
aPost.getCreationdateAsElapsed()+' - '+aPost.dataBean.title);thnode_content.html(tp.applyViewTemplate(aPost));},_appendComment:function(aPost,aComment,prependMode)
{var tp=this._getContentClassDefinitionById(aComment.dataBean.contentclass);var postCanvasHtml=tmpl(this.viewCommentCanvasTemplate,{post:aPost,comment:aComment,contentClassObj:tp});var renderedPost=tp.applyViewTemplate(aComment);var postCommentCanvas=$("#post_"+aComment.dataBean.postid+" .comments-canvas");if(prependMode)
postCommentCanvas.prepend(postCanvasHtml);else
postCommentCanvas.append(postCanvasHtml);postCommentCanvas.find("#comm_"+aComment.dataBean.commentid+" .comment-content-viewcanvas").html(renderedPost);},_replaceComment:function(aPost,aComment)
{var tp=this._getContentClassDefinitionById(aComment.dataBean.contentclass);var postCanvasHtml=tmpl(this.viewCommentCanvasTemplate,{post:aPost,comment:aComment,contentClassObj:tp});var renderedPost=tp.applyViewTemplate(aComment);var postCommentCanvas=$("#comm_"+aComment.dataBean.commentid);postCommentCanvas.replaceWith(postCanvasHtml);$("#comm_"+aComment.dataBean.commentid+" .comment-content-viewcanvas").html(renderedPost);},_updateComment:function(aComment)
{var tp=this._getContentClassDefinitionById(aComment.dataBean.contentclass);var renderedPost=tp.applyViewTemplate(aComment);var commentDOMNode=$("#comm_"+aComment.dataBean.commentid);commentDOMNode.find(".comment-content-viewcanvas").html(renderedPost);commentDOMNode.find(".authorname").html(aComment.dataBean.authorname);commentDOMNode.find(".lastmodified").html(aComment.getCreationDateAsBadge()+' - '+aComment.getCreationdateAsElapsed());},_resetInputContext:function()
{switch(this.inputContext.mode)
{case'none':break;case'newprimarypost':this._getSelector(' .mongotimeline_primarypost_content > div').appendTo(this.contentClassForms);this._getSelector(' .mongotimeline_newpost_canvas > div').hide();this._getContentClassDefinitionById(this.inputContext.contentClass).getModelObject().resetForm();break;case'editprimarypost':$('#post_'+this.inputContext.targetObj.dataBean.postid+'_editcanvas  > div').appendTo(this.contentClassForms);$('#post_'+this.inputContext.targetObj.dataBean.postid+'_viewcanvas').show();$('#post_'+this.inputContext.targetObj.dataBean.postid+' .box-footer').show();$('#post_'+this.inputContext.targetObj.dataBean.postid+' .box-tools .view-mode').show();$('#post_'+this.inputContext.targetObj.dataBean.postid+' .box-tools .edit-mode').hide();this._getContentClassDefinitionById(this.inputContext.targetObj.dataBean.contentclass).getModelObject().resetForm();break;case'newchild':$('#post_'+this.inputContext.targetObj.dataBean.postid+'_newchildcanvas  .mongotimeline_postcomment_content > div').appendTo(this.contentClassForms);$('#post_'+this.inputContext.targetObj.dataBean.postid+'_newchildcanvas > div').appendTo(this._getSelector(' .mongotimeline_childpost_canvas'));$('#post_'+this.inputContext.targetObj.dataBean.postid+' .new-child-actionbar').show();this._getContentClassDefinitionById(this.inputContext.contentClass).getModelObject().resetForm();break;case'editchild':$('#comm_'+this.inputContext.targetObj.dataBean.commentid+' .comment-content-editcanvas > div').appendTo(this.contentClassForms);$('#comm_'+this.inputContext.targetObj.dataBean.commentid+' .comment-content-viewcanvas').show();$('#comm_'+this.inputContext.targetObj.dataBean.commentid+'  .view-mode').show();$('#comm_'+this.inputContext.targetObj.dataBean.commentid+'  .edit-mode').hide();this._getContentClassDefinitionById(this.inputContext.targetObj.dataBean.contentclass).getModelObject().resetForm();break;}
this.inputContext.mode='none';this.inputContext.timelineConfig=null;this.inputContext.contentClass='none';this.inputContext.targetObj=null;this.inputContext.currentUserEnabledRoles=null;if(this.timelineEventListener)
this.timelineEventListener.onTimelineEvent({event:this.inputContext.mode});},_setInputContext:function(aNewMode,aTimelineid,aProfileId,aTargetNodeDTOAdapter,currentUserEnabledRoles)
{this._resetInputContext();this.inputContext.mode=aNewMode;if(this.timelineEventListener)
this.timelineEventListener.onTimelineEvent({event:this.inputContext.mode});this.inputContext.contentClass=aProfileId;this.inputContext.targetObj=aTargetNodeDTOAdapter;var postViewCanvas=null;switch(aNewMode)
{case'newprimarypost':this.inputContext.currentUserEnabledRoles=currentUserEnabledRoles;this._getSelector(' .mongotimeline_newpost_canvas').html(tmpl(this.newPostCanvasTemplate,{contentClassObj:this._getContentClassDefinitionById(aProfileId),currentUserEnabledRoles:this.inputContext.currentUserEnabledRoles}));this._getEditForm(aProfileId).appendTo(this._getSelector(' .mongotimeline_primarypost_content'));this._getSelector(' .mongotimeline_newpost_canvas > div').show();this._getContentClassDefinitionById(aProfileId).getModelObject().initializeForm({targetnode_or_id:null,timelineid:aTimelineid,authorinfo:this.inputContext.currentUserEnabledRoles.current,objectcanvas:this._getSelector(' .mongotimeline_newpost_canvas')});break;case'editprimarypost':postRootCanvas=$('#post_'+aTargetNodeDTOAdapter.dataBean.postid);if(postRootCanvas.hasClass('collapsed-box'))
{postRootCanvas.find("button[data-widget='collapse']").toggleBox();}
this._getEditForm(aTargetNodeDTOAdapter.dataBean.contentclass).appendTo($('#post_'+aTargetNodeDTOAdapter.dataBean.postid+'_editcanvas'));$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+'_viewcanvas').hide();$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+' .box-footer').hide();$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+' .box-tools .view-mode').hide();$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+' .box-tools .edit-mode').show();this._getContentClassDefinitionById(aTargetNodeDTOAdapter.dataBean.contentclass).getModelObject().initializeForm({targetnode_or_id:aTargetNodeDTOAdapter,timelineid:null,authorinfo:null,objectcanvas:$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+'_editcanvas')});break;case'newchild':this.inputContext.currentUserEnabledRoles=currentUserEnabledRoles;this._getSelector(' .mongotimeline_childpost_canvas').html(tmpl(this.newCommentCanvasTemplate,{currentUserEnabledRoles:this.inputContext.currentUserEnabledRoles}));this._getSelector(' .mongotimeline_childpost_canvas > div').appendTo($('#post_'+aTargetNodeDTOAdapter.dataBean.postid+'_newchildcanvas'));this._getEditForm(aProfileId).appendTo(this._getSelector(' .mongotimeline_postcomment_content'));$('#post_'+aTargetNodeDTOAdapter.dataBean.postid+' .new-child-actionbar').hide();this._getContentClassDefinitionById(aProfileId).getModelObject().initializeForm({targetnode_or_id:aTargetNodeDTOAdapter.dataBean.postid,timelineid:aTargetNodeDTOAdapter.dataBean.timeline,authorinfo:this.inputContext.currentUserEnabledRoles.current});break;case'editchild':this._getEditForm(aTargetNodeDTOAdapter.dataBean.contentclass).appendTo($('#comm_'+aTargetNodeDTOAdapter.dataBean.commentid+' .comment-content-editcanvas'));$('#comm_'+aTargetNodeDTOAdapter.dataBean.commentid+' .comment-content-viewcanvas').hide();$('#comm_'+aTargetNodeDTOAdapter.dataBean.commentid+'  .view-mode').hide();$('#comm_'+aTargetNodeDTOAdapter.dataBean.commentid+'  .edit-mode').show();this._getContentClassDefinitionById(aTargetNodeDTOAdapter.dataBean.contentclass).getModelObject().initializeForm({targetnode_or_id:aTargetNodeDTOAdapter,timelineid:null,authorinfo:null});break;}},_extractPostId:function(anId)
{if(anId&&anId.substring(0,5)=='post_')
anId=anId.substring(5);return anId;},_extractCommentId:function(anId)
{if(anId&&anId.substring(0,5)=='comm_')
anId=anId.substring(5);return anId;},newPost:function(aContentDefinitionId,aTimelineId)
{var ur=this._getContentClassDefinitionById(aContentDefinitionId).getCurrentUserEnabledRoles4NewPost("new-post");this._setInputContext('newprimarypost',aTimelineId,aContentDefinitionId,null,ur);},_onClickHandler:function(e)
{var target=$(e.target);var dataAction=target.attr('data-action');var dataActionTarget=target;var ps=null,cm=null;if(!dataAction)
{ps=target.parents('[data-action]');if(ps.length>0)
{dataActionTarget=$(ps[0]);dataAction=dataActionTarget.attr('data-action');}}
if(dataAction!=null)
{var dataActionPath=dataAction.split(':');switch(dataActionPath[0])
{case'primary-view-position':ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{ps.find(".infomessage").show();}
break;case'primary-edit-position':this._getContentClassDefinitionById(this.inputContext.contentClass).getModelObject().onPositionToolClick();break;case'child-edit-cancel':case'primary-edit-cancel':this._resetInputContext();break;case'primarypost-submit':this._onSubmit(dataActionPath[1]);break;case'childpost-submit':this._onChildSubmit(dataActionPath[1]);break;case'edit-primary':ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{var dtoAdapter=this.mapOfPosts.getPost(this._extractPostId($(ps[0]).attr('id')));this._setInputContext('editprimarypost',dtoAdapter.dataBean.timeline,dtoAdapter.dataBean.contentclass,dtoAdapter);}
break;case'delete-post':this._resetInputContext();ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{this._doDeletePost(ps);}
break;case'new-child1':case'new-child':ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{var dtoAdapter=this.mapOfPosts.getPost(this._extractPostId($(ps[0]).attr('id')));var ur=this._getContentClassDefinitionById(dtoAdapter.dataBean.contentclass).getCurrentUserEnabledRoles4NewPost(dataActionPath[0],dtoAdapter);this._setInputContext('newchild',dtoAdapter.dataBean.timeline,dataActionPath[1],dtoAdapter,ur);}
break;case'edit-child':cm=dataActionTarget.parents('.timelinecomment');ps=cm.parents('.timelinepost');if(ps.length>0)
{var dtoAdapter=this.mapOfPosts.getCommentFromPost(this._extractPostId($(ps[0]).attr('id')),this._extractCommentId($(cm[0]).attr('id')));this._setInputContext('editchild',dtoAdapter.dataBean.timeline,dtoAdapter.dataBean.contentclass,dtoAdapter);}
break;case'delete-child':this._resetInputContext();cm=dataActionTarget.parents('.timelinecomment');ps=cm.parents('.timelinepost');if(ps.length>0&&cm.length>0)
{this._doDeleteChild(ps,cm);}
break;case'image-selection':var fileUploadOptions=$.extend({},this._getContentClassDefinitionById(dataActionPath[1]).getTimelinePhotoUploadOptions(),{onUploadErrorCallback:function(){console.log('On Upload ERROR CallBack');},modaldialog_selector:'#mongotimeline_photo_dialog',upload_url:org.r3.PageManager.getRESTUrl('POST_PostTemporaryFileInTimeline',[org.r3.Constants.site,org.r3.Constants.language]),upload_method:'POST',"accept":"image/png,image/jpeg"});this.fileUploader.open(fileUploadOptions);break;case'shakeit':this._resetInputContext();cm=dataActionTarget.parents('.timelinecomment');ps=cm.parents('.timelinepost');if(ps.length>0&&cm.length>0)
{this._doShakeit(ps,cm);}
break;case'unshakeit':this._resetInputContext();cm=dataActionTarget.parents('.timelinecomment');ps=cm.parents('.timelinepost');if(ps.length>0&&cm.length>0)
{this._doUnshakeit(ps,cm);}
break;case'switch-user-role':console.log("Switch Role With: ",dataActionPath[1]);var userRole=this._getUserRoleById(dataActionPath[1]);if(userRole!=null)
{var contentClassObj=this._getContentClassDefinitionById(this.inputContext.contentClass);contentClassObj.setAuhtorInfo(userRole);cm=dataActionTarget.parents('.timelinecomment');if(cm.length>0)
{cm.find(".postauthorname").html('<a href="#">'+userRole.authorname+' <i class="fa fa-caret-down"></i></a>');cm.find(".postauthorphoto")[0].src=userRole.getAuthorphotourl();}
else
{ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{ps.find(".postauthorname").html('<a href="#">'+userRole.authorname+' <i class="fa fa-caret-down"></i></a>');ps.find(".postauthorphoto")[0].src=userRole.getAuthorphotourl();}}}
break;default:console.log("Data Action: ",dataAction);}}
return true;},_doDeletePost:function(aPostWrapperObj)
{var _self=this;var targetWrapper=$(aPostWrapperObj[0]);var aPostId=targetWrapper.attr('id');if(aPostId)
aPostId=aPostId.substring(5);org.r3.AjaxUtils.ajaxInvoke('DELETE',org.r3.PageManager.getRESTUrl('DELETE_Post',[org.r3.Constants.site,org.r3.Constants.language,aPostId]),function(responseData)
{targetWrapper.remove();_self.fetchPostInfo.fixOffsetOnPostAddedDeleted(-1);_self.mapOfPosts.removePost(aPostId);},function(jqXHR,timeout,message){},false,false);},_onSubmit:function(aProfileId)
{var _self=this;var profileObj=this._getContentClassDefinitionById(aProfileId);var theForm=profileObj.getModelObject().getForm();var threadNodeId=theForm.find("input[name='postid']").val();if(theForm.valid())
{profileObj.getModelObject().serializeContent();var method=null;var restUrl=null;if(threadNodeId)
{restUrl=org.r3.PageManager.getRESTUrl('PUT_UpdatePostInTimeline',[org.r3.Constants.site,org.r3.Constants.language,threadNodeId]);method="put";}
else
{restUrl=org.r3.PageManager.getRESTUrl('POST_AddPostInTimeline',[org.r3.Constants.site,org.r3.Constants.language]);method="post";}
org.r3.AjaxUtils.submitForm(method,restUrl,theForm,function(responseData)
{_self._processPostSubmitResponse(responseData);},function(jqXHR,timeout,message){console.log(arguments);profileObj.showMessage({text:message,category:'error'});},"org.r3.message.saveconfirm",true);}},_processPostSubmitResponse:function(responseData)
{var timelinePostDataBean=new org.r3.db.mongo.postcollection.PostCollectionDTOAdapter(responseData);this.mapOfPosts.addOrUpdatePost(timelinePostDataBean);var profileObj=this._getContentClassDefinitionById(timelinePostDataBean.dataBean.contentclass);var thnode=$('#post_'+timelinePostDataBean.dataBean.postid);if(thnode.length)
{this._updatePost(timelinePostDataBean);}
else
{this._appendPost(timelinePostDataBean,true);org.r3.PageManager.userCollectionProfileInfo.setUserAnalyticsLastpostauthor(timelinePostDataBean.dataBean.author,timelinePostDataBean.dataBean.authortype);}
this.fetchPostInfo.fixOffsetOnPostAddedDeleted(1);this._resetInputContext();},_doDeleteChild:function(aPostWrapperObj,aCommentWrapperObj)
{var _self=this;var postTargetWrapper=$(aPostWrapperObj[0]);var aPostId=postTargetWrapper.attr('id');if(aPostId)
aPostId=aPostId.substring(5);var commentTargetWrapper=$(aCommentWrapperObj[0]);var aCommentId=commentTargetWrapper.attr('id');if(aCommentId)
aCommentId=aCommentId.substring(5);org.r3.AjaxUtils.ajaxInvoke('DELETE',org.r3.PageManager.getRESTUrl('DELETE_CommentFromPost',[org.r3.Constants.site,org.r3.Constants.language,aPostId,aCommentId]),function(responseData){commentTargetWrapper.remove();_self.mapOfPosts.removeCommentFromPost(aPostId,aCommentId);},function(jqXHR,timeout,message){},false,false);},_doShakeit:function(aPostWrapperObj,aCommentWrapperObj)
{return this._doShakeUnshakeit('SHAKE_PostComment',aPostWrapperObj,aCommentWrapperObj);},_doUnshakeit:function(aPostWrapperObj,aCommentWrapperObj)
{return this._doShakeUnshakeit('UNSHAKE_PostComment',aPostWrapperObj,aCommentWrapperObj);},_doShakeUnshakeit:function(aUrlAction,aPostWrapperObj,aCommentWrapperObj)
{var _self=this;var postTargetWrapper=$(aPostWrapperObj[0]);var aPostId=postTargetWrapper.attr('id');if(aPostId)
aPostId=aPostId.substring(5);var commentTargetWrapper=$(aCommentWrapperObj[0]);var aCommentId=commentTargetWrapper.attr('id');if(aCommentId)
aCommentId=aCommentId.substring(5);org.r3.AjaxUtils.submitForm('PUT',org.r3.PageManager.getRESTUrl(aUrlAction,[org.r3.Constants.site,org.r3.Constants.language,aPostId,aCommentId]),org.r3.PageManager.jsAppVersionForm,function(responseData){_self._processCommentSubmitResponse(responseData,true);},function(jqXHR,timeout,message){},false,false);},_onChildSubmit:function(aProfileId)
{var _self=this;var profileObj=this._getContentClassDefinitionById(aProfileId);var theForm=profileObj.getModelObject().getForm();var parentPostId=theForm.find("input[name='parentpostid']").val();var timelineId=theForm.find("input[name='timeline']").val();var threadNodeId=theForm.find("input[name='postid']").val();if(theForm.valid())
{profileObj.getModelObject().serializeContent();var method=null;var restUrl=null;if(threadNodeId)
{restUrl=org.r3.PageManager.getRESTUrl('PUT_ModifyPostComment',[org.r3.Constants.site,org.r3.Constants.language,parentPostId,threadNodeId]);method="put";}
else
{restUrl=org.r3.PageManager.getRESTUrl('POST_AddPostComment',[org.r3.Constants.site,org.r3.Constants.language,parentPostId]);method="post";}
org.r3.AjaxUtils.submitForm(method,restUrl,theForm,function(responseData){_self._processCommentSubmitResponse(responseData);},function(jqXHR,timeout,message){console.log(arguments);profileObj.showMessage({text:message,category:'error'});},"org.r3.message.saveconfirm",true);}},_processCommentSubmitResponse:function(responseData,replaceFlag)
{var timelinePostCommentDataBean=new org.r3.db.mongo.postcommentcollection.PostCommentCollectionDTOAdapter(responseData);var cid=timelinePostCommentDataBean.dataBean.commentid;var pid=timelinePostCommentDataBean.dataBean.postid;var postDtoAdapter=this.mapOfPosts.getPost(pid);var commentDtoAdapter=this.mapOfPosts.addOrUpdateCommentInPost(pid,timelinePostCommentDataBean);var postnode=$('#post_'+pid);var commentnode=postnode.find('#comm_'+cid);if(commentnode.length)
{if(!replaceFlag)
this._updateComment(timelinePostCommentDataBean);else
this._replaceComment(postDtoAdapter,timelinePostCommentDataBean);}
else
{this._appendComment(postDtoAdapter,timelinePostCommentDataBean,true);org.r3.PageManager.userCollectionProfileInfo.setUserAnalyticsLastpostauthor(timelinePostCommentDataBean.dataBean.author,timelinePostCommentDataBean.dataBean.authortype);}
this._resetInputContext();}});$.r3Utils.namespace("org.r3.jsportlet.mongotimeline.tuner");org.r3.jsportlet.mongotimeline.tuner.TimelineTunerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aTimeLineTunerViewContainerId)
{this.setPageManager(aPageManager);this.tunerView=new org.r3.jsportlet.mongotimeline.tuner.TimelineTunerActionFormView(aTimeLineTunerViewContainerId,this);this.timelineActionForm=null;},close:function()
{this.tunerView.close();},hide:function()
{this.tunerView.hide();},show:function()
{this.tunerView.show();},refresh:function()
{},open:function(aTimelinectionForm)
{this.targetTimelinectionForm=aTimelinectionForm;this.tunerView.open();},activateTimeline:function(aSetOfTimelineParams)
{this.pageManager.activateMongoTimeline(aSetOfTimelineParams);},newPost:function(aContentDefinitionId,aTimelineId)
{this.targetTimelinectionForm.newPost(aContentDefinitionId,aTimelineId);},onTimelineEvent:function(aTimelineEvent)
{this.tunerView.onTimelineEvent(aTimelineEvent);}});$.r3Utils.namespace("org.r3.jsportlet.mongotimeline.tuner");org.r3.jsportlet.mongotimeline.tuner.TimelineTunerActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.targetTimelinectionForm=null;this.newPrimaryActionEnabled=false;},close:function()
{this.hide();},refresh:function()
{},open:function(aTimelinectionForm)
{var _self=this;var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongotimeline/tuner/TimelineTunerActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Timelines'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_graphcontentdef'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_contentclassdef'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var timelines=org.r3.PageManager.lutManager.getLUT(org.r3.PageManager.getRESTUrl("LUT_Timelines"));$(this.htmlContainerId).html(tmpl(responseData['view'],{"timelines":timelines}));$('#timelinetuner_timelineid').unbind().change(function(e)
{var currentTarget=$(e.currentTarget);var l=currentTarget.val();var tl=org.r3.PageManager.lutManager.getLUTItem(org.r3.PageManager.getRESTUrl("LUT_Timelines"),l);_self.onSelectedTimeline(tl);});if(timelines&&timelines.aaData&&timelines.aaData.length)
{this.onSelectedTimeline(timelines.aaData[0]);}
this.show();}),function(d)
{console.error("controller did not load");});},onSelectedTimeline:function(aTimelineDataBean)
{var timelineDTOAdapter=new org.r3.db.mongo.timelinecollection.TimelineCollectionDTOAdapter(aTimelineDataBean);$('#timelinetuner_timelinedescription').html(timelineDTOAdapter.dataBean.description);this._setupTimelineGlobalActions(timelineDTOAdapter)
this.actionFormManager.activateTimeline({timelineURL:org.r3.PageManager.getRESTUrl("GET_TimelineOfPosts",[org.r3.Constants.site,org.r3.Constants.language])+"&timelineid="+aTimelineDataBean.timelineid});},_setupTimelineGlobalActions:function(timelineDTOAdapter)
{var _self=this;this.newPrimaryActionEnabled=false;if(!org.r3.PageManager.userInfo.isGuest()&&timelineDTOAdapter.dataBean.allowedcontent&&timelineDTOAdapter.dataBean.allowedcontent.length)
{var dropDownULContainer=$('#timelinetuner_newprimarypost_action > ul');dropDownULContainer.empty();timelineDTOAdapter.dataBean.allowedcontent.forEach(function(item)
{var contentClassDefinitionDTOAdapter=org.r3.db.mongo.contentdefinitioncollection.getContentClassDefinition(item);if(contentClassDefinitionDTOAdapter.isActionEnabled('new-post'))
{_self.newPrimaryActionEnabled=true;dropDownULContainer.append("<li><a href='#' data-action='newprimary:"+contentClassDefinitionDTOAdapter.dataBean.dtokey+"'>"+contentClassDefinitionDTOAdapter.dataBean.dtodescr+"</a></li>");}});}
if(this.newPrimaryActionEnabled)
{$('#timelinetuner_newprimarypost_action').show();$('#timelinetuner_newprimarypost_action li a').unbind().click($.r3Utils.hitch(this,this._onNewPost));}
else
{$('#timelinetuner_newprimarypost_action').hide();}
$('#timelinetuner_refreshtimeline_action').unbind().click($.r3Utils.hitch(this,this._onRefreshTimeline));$('#timelinetuner_timeline_actionbar').show();$('#timelinetuner_refreshtimeline_action').attr('data-action','refresh');},_onRefreshTimeline:function(e)
{var tl=org.r3.PageManager.lutManager.getLUTItem(org.r3.PageManager.getRESTUrl("LUT_Timelines"),$('#timelinetuner_timelineid').val());this.onSelectedTimeline(tl);},_onNewPost:function(e)
{var target=$(e.target);var dataAction=target.attr('data-action');var dataActionTarget=target;var ps=null,cm=null;if(!dataAction)
{ps=target.parents('[data-action]');if(ps.length>0)
{dataActionTarget=$(ps[0]);dataAction=dataActionTarget.attr('data-action');}}
if(dataAction!=null)
{var dataActionPath=dataAction.split(':');switch(dataActionPath[0])
{case'newprimary':this.actionFormManager.newPost(dataActionPath[1],$('#timelinetuner_timelineid').val());break;}}},onTimelineEvent:function(aTimelineEvent)
{switch(aTimelineEvent.event)
{case'newprimarypost':$('#timelinetuner_newprimarypost_action').hide();break;case'close':this.close();break;default:if(this.newPrimaryActionEnabled)
$('#timelinetuner_newprimarypost_action').show();break;}}});$.r3Utils.namespace("org.r3.jsportlet.newslettersubscription");org.r3.jsportlet.newslettersubscription.NewsletterSubscriptionActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.newslettersubscription.NewsletterSubscriptionActionFormView(aDetailViewContainerId,this);this.defaultOptions={"template":"NewsletterSubscriptionActionForm.html",};this.options=null;},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(optionsHash)
{if(optionsHash)
this.options=$.extend({},this.defaultOptions,optionsHash);else
this.options=$.extend({},this.defaultOptions);this.detailView.open(this.options);},doRegistration:function()
{var _self=this;if($('#newslettersubscription_form').valid())
{org.r3.PageManager.wait("org.r3.message.waiting");var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_NewsLetter_Registration');$('#newslettersubscription_form').ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isFail())
{$('#newslettersubscription_form_fieldset_message').formmessage('setText',{text:restDto.reason,category:'error'});}
else
{$(_self.detailView.htmlContainerId+" .panel_content").cmsCard({card_tmpl:"cms_tpl_simple",cardid:"NEWSLETT_OK"});$(_self.detailView.htmlContainerId+" .panel_action_bar").hide();}}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();$('#newslettersubscription_form_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}}});$.r3Utils.namespace("org.r3.jsportlet.newslettersubscription");org.r3.jsportlet.newslettersubscription.NewsletterSubscriptionActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(optionsHash)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/newslettersubscription/'+optionsHash.template),dataType:"html"});networkRequestsQueue.push({id:"captchaToken",type:"Get",url:org.r3.PageManager.getRESTUrl('GETCaptchaToken'),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var captchaToken=responseData['captchaToken'];if(captchaToken)
captchaToken=new org.r3.RestDTOAdapter(captchaToken);var templatedHtml=tmpl(responseData['view'],captchaToken);$(this.htmlContainerId).html(templatedHtml);$('#newslettersubscription_refreshcaptcha_action').unbind().click($.r3Utils.hitch(this,this.reloadCaptcha));$.r3Utils.onEnter('#newslettersubscription_confirm_email',this.actionFormManager,this.actionFormManager.doRegistration,true);$("#newslettersubscription_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.newslettersubscription.newslettersubscription_form_validationRules,messages:org.r3.jsportlet.newslettersubscription.newslettersubscription_form_validationMessages});_self.asInitVals=[];$("#newslettersubscription_form input[type='text']").each(function(i){_self.asInitVals[i]=this.value;$(this).addClass('fieldEmpty');});$("#newslettersubscription_form input[type='text']").focus(function(){var item=$(this);if(item.hasClass("fieldEmpty"))
{item.removeClass('fieldEmpty');item.val('');}});$("#newslettersubscription_form input[type='text']").blur(function(i){var item=$(this);if(item.val()=="")
{item.addClass('fieldEmpty');var indexOfItem=$("#newslettersubscription_form input[type='text']").index(this);item.val(_self.asInitVals[indexOfItem]);}});$('#newslettersubscription_confirm_action').unbind().click($.r3Utils.hitch(this,this.onRegistrationClick));$('#newslettersubscription_form_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},onRegistrationClick:function(event)
{console.log("I'm clicked2.... ",this,event);this.actionFormManager.doRegistration();event.preventDefault();},reloadCaptcha:function()
{console.info("Reloading Captcha");$.ajax({"type":"get","url":org.r3.PageManager.getRESTUrl('GETCaptchaToken'),"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var captchaToken=responseData;if(captchaToken)
captchaToken=new org.r3.RestDTOAdapter(captchaToken);var tokenValue=encodeURIComponent(captchaToken.correlationid);$('#newslettersubscription_captcha_img').attr('src',org.r3.Constants.applicationContext+"/simpleCaptcha.png?token="+tokenValue);$('#newslettersubscription_securetoken').attr('value',captchaToken.correlationid);},"error":function(jqXHR,timeout,message)
{console.error("AccettazioneActionForm: ",message);}});}});$.r3Utils.namespace("org.r3.jsportlet.newslettersubscription",window,function(aNamespace)
{aNamespace.newslettersubscription_form_validationRules={securecode:{required:true,invalidCSSClass:'fieldEmpty',maxlength:8,minlength:5},email:{required:true,invalidCSSClass:'fieldEmpty',email:true,maxlength:60},confirm_email:{required:true,invalidCSSClass:'fieldEmpty',email:true,maxlength:60,equalTo:'#newslettersubscription_email'}};aNamespace.newslettersubscription_form_validationMessages={securecode:{required:org.r3.message.field_required,invalidCSSClass:org.r3.message.field_required,email:org.r3.message.field_email,maxlength:org.r3.message.field_maxlength,minlength:org.r3.message.field_minlength},email:{required:org.r3.message.field_required,invalidCSSClass:org.r3.message.field_required,email:org.r3.message.field_email,maxlength:org.r3.message.field_maxlength,},confirm_email:{required:org.r3.message.field_required,invalidCSSClass:org.r3.message.field_required,email:org.r3.message.field_email,maxlength:org.r3.message.field_maxlength,equalTo:"L''indirizzo di posta elettronica di conferma deve corrispondere"}};});$.r3Utils.namespace("org.r3.jsportlet.outmail");org.r3.jsportlet.outmail.OutMailMessageActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,anUploadAttachmentContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.outmail.OutMailMessageActionFormView(aDetailViewContainerId,this);this.attachmentView=new org.r3.jsportlet.outmail.UploadFileActionFormView(anUploadAttachmentContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();this.attachmentView.hide();},show:function()
{this.detailView.show();this.attachmentView.show();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var _self=this;$.ajax({"type":"post","url":org.r3.PageManager.getRESTUrl('POST_OUTMAIL_CreateAttachmentGroup'),"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);_self.detailView.open(restDto.correlationid);_self.attachmentView.open(restDto.correlationid);}
else
{console.error("POST_OUTMAIL_CreateAttachmentGroup...AttachmentGroupCreationError");}},"error":function(jqXHR,timeout,message)
{console.error("...> error");org.r3.PageManager.closeNotifier();}});},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(onSuccessResponse,onFailResponse);},_saveItem:function(onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#outmailmessageactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_OUTMAIL');org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);_self.pageManager.closeNewBulkMailPanel();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},listaContatti:function()
{org.r3.PageManager.back();}});$.r3Utils.namespace("org.r3.jsportlet.outmail");org.r3.jsportlet.outmail.OutMailMessageActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(anAttachmentGroupId)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/outmail/OutMailMessageActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"mail_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_MAIL_SiteProperties'),dataType:"json"});networkRequestsQueue.push({id:"outmail_card",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_Card_Detail',['OUTMAIL']),dataType:"json"});networkRequestsQueue.push({id:"outmail_card_descr",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_CardDescr_Detail',['OUTMAIL',org.r3.Constants.language]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var mail_properties=responseData["mail_properties"];if(mail_properties)
{mail_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(mail_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});}
var cardDescrDataBean=responseData['outmail_card_descr'];if(cardDescrDataBean)
{cardDescrDataBean=new org.r3.db.cms.carddescr.CardDescrDTOAdapter(cardDescrDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#outmailmessageactionform_form').validate({ignore:[],errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.outmail.outmailmessageactionform_form_validationRules,messages:org.r3.jsportlet.outmail.outmailmessageactionform_form_validationMessages});$('#outmailmessageactionform_smsopts_charlimit').unbind().click(function(e){$('#outmailmessageactionform_smstext').valid();});$('#outmailmessageactionform_smsopts_send2all').unbind().click(function(e){$('#outmailmessageactionform_gruppi_actorgroup').valid();var element=$(e.currentTarget);if(element.prop('checked'))
$('#outmailmessageactionform_gruppi_actorgroup').multiselect("disable");else
$('#outmailmessageactionform_gruppi_actorgroup').multiselect("enable");});$('#outmailmessageactionform_msgtext').ckeditor();$('#outmailmessageactionform_fieldset_message').formmessage({});this._initializeFormFields(mail_properties,anAttachmentGroupId,cardDescrDataBean);$('#outmailmessageactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));this.show();}),function(d)
{console.error("controller did not load");});},_onCreateItem:function()
{if(!$('#outmailmessageactionform_msgtext').val())
{org.r3.PageManager.alert("org.r3.jsportlet.outmail.message.mailMessageEmptyConfirmation");return;}
this.actionFormManager.createItem(function(responseData){$('#outmailmessageactionform_action_saveitem').prop('disabled',true);var m=$.r3Utils.stringFormat(org.r3.console.contacts.message.numberoftargets,[responseData.numberoftargets]);$('#outmailmessageactionform_fieldset_message').formmessage('setText',{text:m,category:'info'});},function(jqXHR,timeout,message){$('#outmailmessageactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function(mailPropertiesDataTableAdapter,anAttachmentGroupId,aCardDTOAdapter)
{var propertyName='mail_auth_account';var property=mailPropertiesDataTableAdapter.getPropertyByPropertyscopePropertykey("mail",propertyName);if(property)
{$('#outmailmessageactionform_msgfrom_label').html(property.dataBean.propertyvalue);$('#outmailmessageactionform_msgfrom').val(property.dataBean.propertyvalue);}
$('#outmailmessageactionform_attachmentgroupid').val(anAttachmentGroupId);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_ActorGroups'),"selectWidget":$('#outmailmessageactionform_gruppi_actorgroup'),"onComplete":function(){$('#outmailmessageactionform_gruppi_actorgroup').multiselect();}});if(aCardDTOAdapter)
$('#outmailmessageactionform_msgtext').val(aCardDTOAdapter.dataBean.textbody);}});$.r3Utils.namespace("org.r3.jsportlet.outmail",window,function(aNamespace)
{aNamespace.outmailmessageactionform_form_validationRules={actorgroup:{required:function(){return($('#smsdetailactionform_mailopt_send2all').prop('checked')||!$.r3Utils.isFieldEmpty($('#outmailmessageactionform_msgto')))?false:true;}},msgto:{required:false,maxlength:255},msgcc:{required:false,maxlength:255},msgbcc:{required:false,maxlength:255},msgtitle:{required:true,maxlength:255}};aNamespace.outmailmessageactionform_form_validationMessages={actorgroup:{required:org.r3.message.field_required},msgto:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},msgcc:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},msgbcc:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},msgtitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.outmail");org.r3.jsportlet.outmail.SentMailMessageActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,anUploadAttachmentContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.outmail.SentMailMessageActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(anOutMailSpoolerDTOAdapter)
{this.detailView.open(anOutMailSpoolerDTOAdapter);},listaMail:function()
{org.r3.PageManager.back();}});$.r3Utils.namespace("org.r3.jsportlet.outmail");org.r3.jsportlet.outmail.SentMailMessageActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aMailMessageDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/outmail/SentMailMessageActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"mail_recipients",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_OUTMAIL_Recipients',[aMailMessageDTOAdapter.dataBean.messageid]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var mail_recipients=responseData["mail_recipients"];if(mail_recipients)
{mail_recipients=new org.r3.db.DTOTableAdapter(mail_recipients,function(aRowDataBean){return new org.r3.db.system.outmailspoolerrecipient.OutMailSpoolerRecipientDTOAdapter(aRowDataBean);});}
$(this.htmlContainerId).html(tmpl(responseData['view'],{message:aMailMessageDTOAdapter,recipientList:mail_recipients}));$('#outmailmessageactionform_fieldset_message').formmessage({});this._initializeFormFields(aMailMessageDTOAdapter);this.show();}),function(d)
{console.error("controller did not load");});},_initializeFormFields:function(aMailDtoAdapter)
{$('#sentmailmessageactionform_msgfrom').html(aMailDtoAdapter.dataBean.msgfrom);if(aMailDtoAdapter.dataBean.msgcc)
$('#sentmailmessageactionform_msgcc').html(aMailDtoAdapter.dataBean.msgcc);else
$('#sentmailmessageactionform_formgroup_msgcc').hide();if(aMailDtoAdapter.dataBean.msgbcc)
$('#sentmailmessageactionform_msgbcc').html(aMailDtoAdapter.dataBean.msgbcc);else
$('#sentmailmessageactionform_formgroup_msgbcc').hide();$('#sentmailmessageactionform_msgtitle').html(aMailDtoAdapter.dataBean.msgtitle);$('#sentmailmessageactionform_msgtext').html(aMailDtoAdapter.getMsgtext());}});$.r3Utils.namespace("org.r3.jsportlet.outmail");org.r3.jsportlet.outmail.UploadFileActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.uploadedFiles=[];this.attachmentGroupId=null;},close:function()
{this.hide();},isPendingUpload:function()
{if(this.uploadedFiles&&this.uploadedFiles.length)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(this.uploadedFiles[i].pending)
return true;}
return false;},_clearFilenamesQueue:function()
{this.uploadedFiles.length=0;},_findEnqueuedFilename:function(aFileName)
{if(this.uploadedFiles&&this.uploadedFiles.length&&aFileName)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(aFileName==this.uploadedFiles[i].fname)
return i;}
return-1;},_enqueueFilename4Uploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Enqueue: "+aFileName);this.uploadedFiles.push({fname:aFileName,pending:true});}},_markEnqueuedFileAsCompleted:function(aFileName)
{if(aFileName)
{console.info("Trying to Mark File as Completed: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Mark: "+aFileName);this.uploadedFiles[fileNdx].pending=false;}}},_dequeueFilenameFromUploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Dequeue: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Dequeuing: "+aFileName);this.uploadedFiles.splice(fileNdx,1);}}},open:function(anAttachmentGroupId)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");this.attachmentGroupId=anAttachmentGroupId;this._clearFilenamesQueue();var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/outmail/UploadFileActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var this_actionFormView=this;org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));var aRestUrl=org.r3.PageManager.getRESTUrl('POST_Mail_Attachment_File',[anAttachmentGroupId]);if(r3_IE)
aRestUrl=org.r3.PageManager.getRESTUrl('POST_Mail_Attachment_File_IE',[anAttachmentGroupId]);var fileTypes=org.r3.message.getDefaultAcceptedCMSFileTypes();var acceptedType='png';if(fileTypes&&fileTypes.length>0)
{if(fileTypes.length==1)
acceptedType=fileTypes[0];else
{acceptedType='';for(var i=0;i<fileTypes.length;i++)
{if(i>0)
acceptedType+='|';acceptedType=acceptedType+fileTypes[i];}}}
var rexp=new RegExp(".+\\.("+acceptedType+")$","i");$('#uploadfileactionform_form').fileupload({"acceptFileTypes":rexp,"url":aRestUrl,"dataType":'json',"sequentialUploads":true,"formAcceptCharset":"utf-8","submit":function(e,data)
{console.info("Submitting: ",e,data,data.files[0].name);if(!$("#uploadfileactionform_form").valid())
return false;return true;},"failed":function(e,data)
{console.info("Failing: ",e,data);console.info("Should Dequeue: ",data.files.valid,data.files[0].name);if(data.files.valid)
this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);return true;},"completed":function(e,data)
{console.info("Done: ",e,data);console.info("Done: is Error? "+data.result.files[0].error);if(data.result.files[0].error)
{this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
else this_actionFormView._markEnqueuedFileAsCompleted(data.files[0].name);return true;}}).bind('fileuploaddestroy',function(e,data){console.log("Should Delete: ",data);if(data.type=='DELETE')
data.url=org.r3.PageManager.getRESTUrl('DELETE_Mail_Attachment_File',[_self.attachmentGroupId,data.url]);});$('#uploadfileactionform_form_action_releasesession').button().unbind().click($.r3Utils.hitch(org.r3.PageManager,org.r3.PageManager.back));this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.project.dashboard");org.r3.jsportlet.project.dashboard.TeamWBSNodeTabularDashBoardModel=Class.extend({init:function(aWbsId)
{this.wbsId=aWbsId;this.columns=[];this.rows=[];},_setup:function(teamProfileDTOTableAdapter,nodesDTOTableAdapter,resourceTSDTOTableAdapter)
{if(!teamProfileDTOTableAdapter||teamProfileDTOTableAdapter.getNumberOfItems()==0)
return;if(!nodesDTOTableAdapter||nodesDTOTableAdapter.getNumberOfItems()==0)
return;for(var i=0;i<teamProfileDTOTableAdapter.getNumberOfItems();i++)
{var item=teamProfileDTOTableAdapter.getItem(i);this.rows.push({"rowId":item.dataBean.profileid,"rowInfo":item,"previsionalEffort":0,"actualEffort":0,"cellInfo":[]});}
for(var i=0;i<nodesDTOTableAdapter.getNumberOfItems();i++)
{var item=nodesDTOTableAdapter.getItem(i);var colIndex=this._findColumnById(item.dataBean.wbsnodeid);if(colIndex<0)
colIndex=this._addColumn(item.dataBean.wbsnodeid,item.dataBean.nodename);var rowIndex=this._findRowById(item.dataBean.profileid);if(rowIndex>=0)
{this.rows[rowIndex].cellInfo[colIndex].previsionalEffort+=item.dataBean.effort;this.rows[rowIndex].previsionalEffort+=item.dataBean.effort;this.columns[colIndex].previsionalEffort+=item.dataBean.effort;}}
for(var i=0;i<resourceTSDTOTableAdapter.getNumberOfItems();i++)
{var item=resourceTSDTOTableAdapter.getItem(i);var colIndex=this._findColumnById(item.dataBean.tsactivityid);if(colIndex<0)
colIndex=this._addColumn(item.dataBean.tsactivityid,item.dataBean.tsactivityid);var rowIndex=this._findRowById(item.dataBean.profileid);if(rowIndex>=0)
{this.rows[rowIndex].cellInfo[colIndex].actualEffort+=item.dataBean.effort;this.rows[rowIndex].actualEffort+=item.dataBean.effort;this.columns[colIndex].actualEffort+=item.dataBean.effort;}}},_findRowById:function(aProfileId)
{for(var j=0;j<this.rows.length;j++)
{if(this.rows[j].rowId==aProfileId)
{return j;}}
return-1;},_findColumnById:function(aWbsNodeId)
{for(var j=0;j<this.columns.length;j++)
{if(this.columns[j].colId==aWbsNodeId)
{return j;}}
return-1;},_addColumn:function(aWbsNodeId,aWbsNodeName)
{this.columns.push({"colId":aWbsNodeId,"colInfo":aWbsNodeName,"previsionalEffort":0,"actualEffort":0});for(var j=0;j<this.rows.length;j++)
{this.rows[j].cellInfo.push({"previsionalEffort":0,"actualEffort":0});}
return this.columns.length-1;}});org.r3.jsportlet.project.dashboard.TeamWBSNodeTabularDashBoardActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.teamWBSNodeTabularDashBoardModel=new org.r3.jsportlet.project.dashboard.TeamWBSNodeTabularDashBoardModel();},close:function()
{this.hide();},open:function(aWbsId,aTeamId)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"teamprofile",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_TeamMemberProfiles'),dataType:"json"});networkRequestsQueue.push({id:"wbsteamprofile",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_WBS_TeamProfile',[aWbsId]),dataType:"json"});networkRequestsQueue.push({id:"wbsresourcets",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_WBS_ResourceTimesheet_CumulatedEffort',[aWbsId]),dataType:"json"});networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/dashboard/TeamWBSNodeTabularDashBoard.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var teamProfileDTOTableAdapter=responseData['teamprofile'];if(teamProfileDTOTableAdapter)
{teamProfileDTOTableAdapter=new org.r3.db.DTOTableAdapter(teamProfileDTOTableAdapter,function(aRowDataBean){return new org.r3.db.project.teammemberprofile.TeamMemberProfileDTOAdapter(aRowDataBean);});}
var wbsteamprofileDTOTableAdapter=responseData['wbsteamprofile'];if(wbsteamprofileDTOTableAdapter)
{wbsteamprofileDTOTableAdapter=new org.r3.db.DTOTableAdapter(wbsteamprofileDTOTableAdapter,function(aRowDataBean){return new org.r3.db.project.wbsnodeteammemberprofileview.WBSNodeTeamMemberProfileViewDTOAdapter(aRowDataBean);});}
var wbsresourcetsDTOTableAdapter=responseData['wbsresourcets'];if(wbsresourcetsDTOTableAdapter)
{wbsresourcetsDTOTableAdapter=new org.r3.db.DTOTableAdapter(wbsresourcetsDTOTableAdapter,function(aRowDataBean){return new org.r3.db.project.resourcetimesheet.ResourceTimesheetDTOAdapter(aRowDataBean);},true);}
this.teamWBSNodeTabularDashBoardModel._setup(teamProfileDTOTableAdapter,wbsteamprofileDTOTableAdapter,wbsresourcetsDTOTableAdapter);$(this.htmlContainerId).html(tmpl(responseData['view'],{model:this.teamWBSNodeTabularDashBoardModel}));}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.project.resource");org.r3.jsportlet.project.resource.ResourceCreateActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,openMode)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.openMode=openMode||'default';},close:function()
{this.hide();},refresh:function()
{this.tabTeams.refresh();},open:function()
{if(this.openMode=='default')org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/resource/ResourceCreateActionFormView.html.jsp?mode=detail'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{if(this.openMode=='default')org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#resourcedetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.project.resource.resourcedetailactionform_form_validationRules,messages:org.r3.jsportlet.project.resource.resourcedetailactionform_form_validationMessages});$('#resourcedetailactionform_fieldset_message').formmessage({});$('#resourcedetailactionform_form_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.listaRisorse));this._initializeFormFields();$('#resourcedetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onCreateItem));$('#resourcedetailactionform_form_action_cancel').hide();$('#resourcedetailactionform_action_delete').hide();$('#resourcedetailactionform_ssn_action_search').unbind().click($.r3Utils.hitch(this,this._onSearchSSN));$('#resourcedetailactionform_ssn').unbind().change($.r3Utils.hitch(this,this._onChangeSSN));if(this.openMode=='default')this.show();}),function(d)
{console.error("controller did not load");});},_onChangeSSN:function()
{$('.resource-domain-data').prop('disabled',false);$('#resourcedetailactionform_resourceid').val("");},_onSSNMatch:function(resourceDataBean)
{if(resourceDataBean)
{$('#resourcedetailactionform_resourceid').val(resourceDataBean.dataBean.resourceid);$('#resourcedetailactionform_firstname').val(resourceDataBean.dataBean.firstname);$('#resourcedetailactionform_lastname').val(resourceDataBean.dataBean.lastname);$('#resourcedetailactionform_email').val(resourceDataBean.dataBean.email);$('#resourcedetailactionform_cellphone').val(resourceDataBean.dataBean.cellphone);$('#resourcedetailactionform_phone').val(resourceDataBean.dataBean.phone);$('#resourcedetailactionform_address').val(resourceDataBean.dataBean.address);$('#resourcedetailactionform_userid').html(resourceDataBean.dataBean.userid);$('#resourcedetailactionform_town').val(resourceDataBean.dataBean.town);$('#resourcedetailactionform_zipcode').val(resourceDataBean.dataBean.zipcode);$('.resource-domain-data').prop('disabled',true);}},_onCreateItem:function()
{this.actionFormManager.createItem(function(responseData){},function(jqXHR,timeout,message){$('#resourcedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onSearchSSN:function()
{var _self=this;if($('#resourcedetailactionform_ssn').valid())
{this.actionFormManager.searchBySSN(function(responseData)
{if(responseData&&responseData.iTotalRecords&&responseData.aaData&&responseData.aaData.length)
{var resourceDataBean=new org.r3.db.project.resource.ResourceDTOAdapter(responseData.aaData[0]);_self._onSSNMatch(resourceDataBean);}},function(jqXHR,timeout,message){$('#resourcedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}
return false;},_initializeFormFields:function()
{var useridPickerValue=null;$('#resourcedetailactionform_resourceid').val("");var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_TeamMemberProfiles");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#resourcedetailactionform_profileid'),"selectedValue":null});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Teams_In_team_building");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#resourcedetailactionform_teamid'),"selectedValue":null,"useBusinessKey":true});}});$.r3Utils.namespace("org.r3.jsportlet.project.resource");org.r3.jsportlet.project.resource.ResourceDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aDetailViewContainerId_tab_generale,aTeamListActionFormContainerId)
{this.setPageManager(aPageManager);this.htmlContainerId=aDetailViewContainerId;this.detailView=new org.r3.jsportlet.project.resource.ResourceDetailActionFormView(aDetailViewContainerId_tab_generale,this,'tabs_mode');this.createView=new org.r3.jsportlet.project.resource.ResourceCreateActionFormView(aDetailViewContainerId,this,'default');},close:function()
{this.hide();},hide:function()
{$(this.htmlContainerId).hide();},show:function()
{$(this.htmlContainerId).show();},refresh:function()
{this.detailView.refresh();},open:function(aDataBeanInfo,anOpenOptionsHash)
{if(!aDataBeanInfo)
{this.createView.open();return;}
this.setDataBeanInfo(aDataBeanInfo);var navigatorMode=aDataBeanInfo?'detail':'create';var navigatorUrl=org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/resource/ResourceDetailActionFormView_tab_navigator.html.jsp?mode='+navigatorMode+"&traverseRelationship="+anOpenOptionsHash.traverseRelationship;$.ajax({"type":"GET","url":org.r3.PageManager.getVersionedUIURL(navigatorUrl),"dataType":"html","success":$.r3Utils.hitch(this,function(responseData)
{$(this.htmlContainerId).html(tmpl(responseData,{}));this.detailView.open(aDataBeanInfo,anOpenOptionsHash);$(this.htmlContainerId).show();}),"error":function(jqXHR,timeout,message)
{console.error("Errore Loading: ",navigatorUrl);}});},updateItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(true,onSuccessResponse,onFailResponse);},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(false,onSuccessResponse,onFailResponse);},_saveItem:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#resourcedetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_Resource');if(isUpdate)
{var resourceid=this.dataBeanInfo.dataBean.resourceid;restUrl=org.r3.PageManager.getRESTUrl('PUT_Resource',[resourceid]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);if(method=='put')
_self.listaRisorse();else _self.pageManager.closeNewResourcePanel();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},deleteItem:function(onSuccessResponse,onErrorResponse)
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var method="DELETE";var restUrl=null;var resourceId=this.dataBeanInfo.dataBean.resourceid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_Resource',[resourceId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},listaRisorse:function()
{org.r3.PageManager.back();},openLogInUserPicker:function(srcPickerWidget)
{console.info("Opening The Picker",srcPickerWidget);this.hide();this.pageManager.openLogInUserPicker(srcPickerWidget);},submitForm:function(method,restUrl,theForm,onSuccess,onError)
{var _self=this;if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.refresh();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});}},searchBySSN:function(onSuccessResponse,onErrorResponse)
{var theForm=$('#resourcedetailactionform_form');var method="GET";var aSSNValue=$('#resourcedetailactionform_ssn').val();var restUrl=org.r3.PageManager.getRESTUrl('GET_ResourceBySSN',[aSSNValue]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{if(onSuccessResponse)
onSuccessResponse(responseData);},"error":function(jqXHR,timeout,message)
{console.error("Errore Fetching Resource: ",message);if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});},openTeamDetail:function(aDTOAdapter)
{this.hide();this.pageManager.openTeamDetailPanel(aDTOAdapter,{"traverseRelationship":false,"actions":'none'});},deleteTeamFromResource:function(aResourceid,aTeamid,onSuccessResponse,onFailResponse)
{var method="delete";var restUrl=org.r3.PageManager.getRESTUrl('DELETE_TeamFromResource',[aResourceid,aTeamid]);org.r3.AjaxUtils.ajaxInvoke(method,restUrl,onSuccessResponse,onFailResponse,"org.r3.message.saveconfirm",true);}});$.r3Utils.namespace("org.r3.jsportlet.project.resource");org.r3.jsportlet.project.resource.ResourceDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,openMode)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.openMode=openMode||'default';},close:function()
{this.hide();},refresh:function()
{this.tabTeams.refresh();},open:function(aDataBeanInfo,anOpenOptionsHash)
{var formMode=(aDataBeanInfo)?'detail':'create';if(this.openMode=='default')org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/resource/ResourceDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(formMode=='detail')
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_Resource_Detail',[aDataBeanInfo.dataBean.resourceid]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{if(this.openMode=='default')org.r3.PageManager.closeNotifier();var resourceDataBean=responseData['content'];if(resourceDataBean)
{resourceDataBean=new org.r3.db.project.resource.ResourceDTOAdapter(resourceDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{"formmode":formMode}));$('#resourcedetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.project.resource.resourcedetailactionform_form_validationRules,messages:org.r3.jsportlet.project.resource.resourcedetailactionform_form_validationMessages});$('#resourcedetailactionform_fieldset_message').formmessage({});$('#resourcedetailactionform_form_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.listaRisorse));this._initializeFormFields(resourceDataBean);if(resourceDataBean==null)
{$('#resourcedetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onCreateItem));$('#resourcedetailactionform_form_action_cancel').hide();$('#resourcedetailactionform_action_delete').hide();$('#resourcedetailactionform_ssn_action_search').unbind().click($.r3Utils.hitch(this,this._onSearchSSN));$('#resourcedetailactionform_ssn').unbind().change($.r3Utils.hitch(this,this._onChangeSSN));}
else
{$('#resourcedetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onUpdateItem));$('#resourcedetailactionform_form_action_cancel').show();var a=$('#resourcedetailactionform_action_delete');if(anOpenOptionsHash.actions=='all')
{a.unbind().click($.r3Utils.hitch(this,this._onDeleteItem));a.show();}
else
{a.unbind().hide();}
$('#resourcedetailactionform_ssn').prop('disabled',true);$('#resourcedetailactionform_ssn_action_search').unbind().prop('disabled',true);}
if(formMode=='detail'&&anOpenOptionsHash.traverseRelationship)
{this.tabTeams=new org.r3.jsportlet.project.resource.ResourceDetailActionFormView_TabTeams('#resourceDetailActionFormView_tab_teams',this.actionFormManager,resourceDataBean);}
if(this.openMode=='default')this.show();}),function(d)
{console.error("controller did not load");});},_onChangeSSN:function()
{$('.resource-domain-data').prop('disabled',false);$('#resourcedetailactionform_resourceid').val("");},_onSSNMatch:function(resourceDataBean)
{if(resourceDataBean)
{$('#resourcedetailactionform_resourceid').val(resourceDataBean.dataBean.resourceid);$('#resourcedetailactionform_firstname').val(resourceDataBean.dataBean.firstname);$('#resourcedetailactionform_lastname').val(resourceDataBean.dataBean.lastname);$('#resourcedetailactionform_email').val(resourceDataBean.dataBean.email);$('#resourcedetailactionform_cellphone').val(resourceDataBean.dataBean.cellphone);$('#resourcedetailactionform_phone').val(resourceDataBean.dataBean.phone);$('#resourcedetailactionform_address').val(resourceDataBean.dataBean.address);$('#resourcedetailactionform_userid').html(resourceDataBean.dataBean.userid);$('#resourcedetailactionform_town').val(resourceDataBean.dataBean.town);$('#resourcedetailactionform_zipcode').val(resourceDataBean.dataBean.zipcode);$('.resource-domain-data').prop('disabled',true);}},_onCreateItem:function()
{this.actionFormManager.createItem(function(responseData){},function(jqXHR,timeout,message){$('#resourcedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{this.actionFormManager.updateItem(function(responseData){},function(jqXHR,timeout,message){$('#resourcedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onDeleteItem:function()
{this.actionFormManager.deleteItem(function(responseData){},function(jqXHR,timeout,message){$('#resourcedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onSearchSSN:function()
{var _self=this;if($('#resourcedetailactionform_ssn').valid())
{this.actionFormManager.searchBySSN(function(responseData)
{if(responseData&&responseData.iTotalRecords&&responseData.aaData&&responseData.aaData.length)
{var resourceDataBean=new org.r3.db.project.resource.ResourceDTOAdapter(responseData.aaData[0]);_self._onSSNMatch(resourceDataBean);}},function(jqXHR,timeout,message){$('#resourcedetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}
return false;},_initializeFormFields:function(anActorDTOAdapter)
{var useridPickerValue=null;if(anActorDTOAdapter)
{$('#resourcedetailactionform_resourceid').val(anActorDTOAdapter.dataBean.resourceid);$('#resourcedetailactionform_firstname').val(anActorDTOAdapter.dataBean.firstname);$('#resourcedetailactionform_lastname').val(anActorDTOAdapter.dataBean.lastname);$('#resourcedetailactionform_email').val(anActorDTOAdapter.dataBean.email);$('#resourcedetailactionform_cellphone').val(anActorDTOAdapter.dataBean.cellphone);$('#resourcedetailactionform_phone').val(anActorDTOAdapter.dataBean.phone);$('#resourcedetailactionform_address').val(anActorDTOAdapter.dataBean.address);$('#resourcedetailactionform_userid').html(anActorDTOAdapter.dataBean.userid);$('#resourcedetailactionform_town').val(anActorDTOAdapter.dataBean.town);$('#resourcedetailactionform_zipcode').val(anActorDTOAdapter.dataBean.zipcode);$('#resourcedetailactionform_ssn').val(anActorDTOAdapter.dataBean.ssn);if(anActorDTOAdapter.dataBean.userid)
useridPickerValue={dtokey:anActorDTOAdapter.dataBean.userid,dtodescr:anActorDTOAdapter.dataBean.userid};}
else
{$('#resourcedetailactionform_resourceid').val("");var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_TeamMemberProfiles");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#resourcedetailactionform_profileid'),"selectedValue":null});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Teams");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#resourcedetailactionform_teamid'),"selectedValue":null,"useBusinessKey":true});}
$('#resourcedetailactionform_pickeruserid_cnt').picker({multiple:false,fieldName:"userid",openPicker:$.r3Utils.hitch(this.actionFormManager,this.actionFormManager.openLogInUserPicker),fieldId:"resourcedetailactionform_picker_userid",pickerValue:useridPickerValue});}});$.r3Utils.namespace("org.r3.jsportlet.project.resource");org.r3.jsportlet.project.resource.ResourceDetailActionFormView_TabTeams=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aResourceDTOAdapter)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.listView=new org.r3.db.project.teamresourceview.TeamResourceViewQueryActionFormView
(anHtmlActionFormContainerId,this.actionFormManager,{showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/jsportlet/project/resource/ResourceDetailActionFormView_TabTeams.html",dataTableId:'ResourceTeamsActionFormView',"dataTableSource":org.r3.PageManager.getRESTUrl('GET_Resource_Teams',[aResourceDTOAdapter.dataBean.resourceid]),gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.project.teamresourceview.message.queryactionformview_legend,iDisplayLength:25,layout:'fullWidth',sortable:true,dataTableColumns:"resourcedescr,teamdescr,profileid,price,queryformview-tools",requiredLUTs:["GET_classifier_sys_recstatus","GET_TeamMemberProfiles"],onToolsIconSelected:$.r3Utils.hitch(this,this.onToolSelected),onSelected:$.r3Utils.hitch(this,function(aTeamResourceDTOAdapter)
{this._updateActionsOnTeamChange(aTeamResourceDTOAdapter.dataBean.teamid);this.openDetail(aTeamResourceDTOAdapter);}),onInitializationComplete:$.r3Utils.hitch(this,function(){$('#resourceteam_resourcedescr').html(aResourceDTOAdapter.dataBean.resourcedescr);$('#resourceteamform_resourceid').val(aResourceDTOAdapter.dataBean.resourceid);var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_TeamMemberProfiles");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#resourceteamform_profileid'),"selectedValue":null});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Teams");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#resourceteamform_teamid'),"selectedValue":null,"useBusinessKey":true});$("#resourceteam_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.project.resource.resourceteam_form_validationRules,messages:org.r3.jsportlet.project.resource.resourceteam_form_validationMessages});$('#resourceteamform_teamid').unbind().change($.r3Utils.hitch(this,this.onChangeTeamIdSelection));var b=$('#resourceteamform_action_save');b.unbind().click($.r3Utils.hitch(this,this.onSaveItem));b.prop('disabled',true);b=$('#resourceteamform_action_clear');b.unbind().click($.r3Utils.hitch(this,this._clearForm));$('#resourceteam_fieldset_message').formmessage({});})});this.listView.open();},refresh:function()
{$("#resourceteam_form").resetForm();this.listView.refresh();},openDetail:function(aTeamResourceDTOAdapter)
{$('#resourceteamform_teamid').val(aTeamResourceDTOAdapter.dataBean.teamid);$('#resourceteamform_profileid').val(aTeamResourceDTOAdapter.dataBean.profileid);},_updateActionsOnTeamChange:function(aTeamId)
{var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Teams");var foundItem=org.r3.PageManager.lutManager.getLUTItem(resolvedUrl,function(item){if(item.businesskey==aTeamId)return true;return false;});if(foundItem)
{console.log("Selected: ",foundItem);var aTeamDTOAdapter=new org.r3.db.project.team.TeamDTOAdapter(foundItem);if(aTeamDTOAdapter.canBeModified())
{$('#resourceteamform_action_save').prop('disabled',false);}
else
{$('#resourceteamform_action_save').prop('disabled',true);}}},onChangeTeamIdSelection:function(e)
{var selectField=$(e.currentTarget);this._updateActionsOnTeamChange(selectField.val());},_clearForm:function()
{$('#resourceteam_form').resetForm();},onSaveItem:function()
{this.saveItem();},saveItem:function()
{var _self=this;var restUrl=null;var method="POST";var teamid=$('#resourceteamform_teamid').val();var resourceid=$('#resourceteamform_resourceid').val();if(false)
{restUrl=org.r3.PageManager.getRESTUrl("POST_AddResource2Team",[resourceid,aTargetTeamId]);method="POST";}
else
{restUrl=org.r3.PageManager.getRESTUrl("PUT_UpdateResourceInTeam",[resourceid,teamid]);method="PUT";}
this.actionFormManager.submitForm(method,restUrl,$("#resourceteam_form"),function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('resourceteam_fieldset_message');}
else
{_self._clearForm();$('#resourceteam_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#resourceteam_fieldset_message').formmessage('setText',{text:message,category:'error'});});},onToolSelected:function(aTeamResourceViewDTOAdapter,aToolId)
{console.log("Tool Selected: ",aToolId);if(aToolId&&aToolId=='toolid-detail')
{this.actionFormManager.openTeamDetail(aTeamResourceViewDTOAdapter);}
if(aToolId&&aToolId=='toolid-delete')
{this.actionFormManager.deleteTeamFromResource(aTeamResourceViewDTOAdapter.dataBean.resourceid,aTeamResourceViewDTOAdapter.dataBean.teamid);}}});$.r3Utils.namespace("org.r3.jsportlet.project.resource",window,function(aNamespace)
{aNamespace.resourceteam_form_validationRules={teamid:{required:true},profileid:{required:true}};aNamespace.resourceteam_form_validationMessages={teamid:{required:org.r3.message.field_required},profileid:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.project.resource",window,function(aNamespace)
{aNamespace.resourcedetailactionform_form_validationRules={ssn:{required:true,minlength:16,maxlength:16,texttransform:'uppercase'},firstname:{required:true,maxlength:30,texttransform:'uppercase'},lastname:{required:true,maxlength:30,texttransform:'uppercase'},email:{required:false,maxlength:50,email:true},cellphone:{required:false,maxlength:15,digits:true},phone:{required:false,maxlength:15,digits:true},address:{required:false,maxlength:30,texttransform:'uppercase'},town:{required:false,maxlength:30,texttransform:'uppercase'},zipcode:{required:false,maxlength:5,digits:true},profileid:{required:true},teamid:{required:true}};aNamespace.resourcedetailactionform_form_validationMessages={ssn:{required:org.r3.message.field_required,minlength:org.r3.message.field_minlength,maxlength:org.r3.message.field_maxlength},firstname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},lastname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},email:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email},cellphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},phone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},address:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},town:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},zipcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},profileid:{required:org.r3.message.field_required},teamid:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.project.resource");org.r3.jsportlet.project.resource.ResourceQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.project.resource.ResourceQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'SiteResourceViewQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.project.resource.message.queryactionformview_legend,iDisplayLength:25,dataTableSource:'GET_Resources',layout:'fullWidth',sortable:true,dataTableColumns:"recstatus,resourceid;sort,firstname,lastname;sort,address,email,cellphone",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.resourceDetail),onClearSelection:null,searchInfo:{label:org.r3.jsportlet.project.resource.message.search_contact,validationRules:org.r3.jsportlet.project.resource.resourceQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.jsportlet.project.resource.resourceQueryActionFormView_filter_searchform_validationMessages,autoStart:true},actionBarOnTop:true,buttons:[{id:'console_resource_action_newresource',label:org.r3.jsportlet.project.resource.message.console_resource_action_newresource,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.hide();this.pageManager.openNewResourcePanel();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},resourceDetail:function(aDTOAdapter)
{this.listView.hide();this.pageManager.openResourceDetailPanel(aDTOAdapter,{});}});$.r3Utils.namespace("org.r3.jsportlet.project.resource",window,function(aNamespace)
{aNamespace.resourceQueryActionFormView_filter_searchform_validationRules={filter_item:{required:false}};aNamespace.resourceQueryActionFormView_filter_searchform_validationMessages={filter_item:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.project.siteresource");org.r3.jsportlet.project.siteresource.SiteResourceActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.project.siteresource.SiteResourceActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},doRegistration:function()
{var _self=this;if($('#registrationform_form').valid())
{org.r3.PageManager.wait("org.r3.message.waiting");var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_User_Registration');$('#registrationform_form').ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isFail())
{$('#registrationform_form_fieldset_message').formmessage('setText',{text:restDto.reason,category:'error'});}}
else
{if(responseData.recstatus=='sys_recact')
$(_self.detailView.htmlContainerId+" .panel_content").cmsCard({card_tmpl:"cms_tpl_simple",cardid:"REGACT_OK"});else
$(_self.detailView.htmlContainerId+" .panel_content").cmsCard({card_tmpl:"cms_tpl_simple",cardid:"HLP_USRREG_OK"});$(_self.detailView.htmlContainerId+" .panel_action_bar").hide();}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();$('#registrationform_form_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}}});$.r3Utils.namespace("org.r3.jsportlet.project.siteresource");org.r3.jsportlet.project.siteresource.SiteResourceActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,openMode)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.openMode=openMode||'default';},close:function()
{this.hide();},open:function(aResourceId)
{if(this.openMode=='default')org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/siteresource/SiteResourceActionForm.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_ActorResourceDetail',[aResourceId]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{if(this.openMode=='default')org.r3.PageManager.closeNotifier();var resourceDTOAdapter=responseData['content'];if(resourceDTOAdapter)
{resourceDTOAdapter=new org.r3.db.project.siteresource.SiteResourceDTOAdapter(resourceDTOAdapter);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));this._initializeFields(resourceDTOAdapter);$("#siteresourceform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.project.siteresource.siteresourceform_validationRules,messages:org.r3.jsportlet.project.siteresource.siteresourceform_validationMessages});$('#siteresourceform_fieldset_message').formmessage({});$('#siteresourceform_action_save').unbind().click($.r3Utils.hitch(this,this._onSaveItem));if(this.openMode=='default')this.show();}),function(d)
{console.error("controller did not load");});},_initializeFields:function(aResourceDTOAdapter)
{if(aResourceDTOAdapter)
{$('#siteresourceform_evalueunit').val(aResourceDTOAdapter.dataBean.evalueunit);$('#siteresourceform_cost').val(aResourceDTOAdapter.dataBean.cost);$('#siteresourceform_price').val(aResourceDTOAdapter.dataBean.price);}},_onSaveItem:function()
{this.actionFormManager.updateSiteResource(function(responseData){$('#siteresourceform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#siteresourceform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}});$.r3Utils.namespace("org.r3.jsportlet.project.siteresource",window,function(aNamespace){aNamespace.siteresourceform_validationRules={cost:{required:true,maxlength:5,number:true,min:0},price:{required:true,maxlength:5,number:true,min:0}};aNamespace.siteresourceform_validationMessages={cost:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number,min:org.r3.message.field_min},price:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number,min:org.r3.message.field_min}};});$.r3Utils.namespace("org.r3.jsportlet.project.team");org.r3.jsportlet.project.team.TeamCreateActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function()
{this.tabTeams.refresh();},open:function(aDataBeanInfo,anOpenOptionsHash)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/team/TeamCreateActionFormView.html.jsp?mode=detail'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#teamdetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.project.team.teamdetailactionform_form_validationRules,messages:org.r3.jsportlet.project.team.teamdetailactionform_form_validationMessages});$('#teamdetailactionform_fieldset_message').formmessage({});$('#teamdetailactionform_form_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.listaTeams));this._initializeFormFields();$('#teamdetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));$('#teamdetailactionform_form_action_cancel').hide();$('#teamdetailactionform_action_delete').hide();this.show();}),function(d)
{console.error("controller did not load");});},_defaultValue2TeamDescriptionOnEmptyValue:function()
{var descrField=$('#teamdetailactionform_teamdescr');var d=descrField.val();if(!d||!(d.trim().length))
{d=$("#teamdetailactionform_periodindex option:selected").text().toUpperCase();descrField.val(d);}},_onCreateItem:function()
{this._defaultValue2TeamDescriptionOnEmptyValue();this.actionFormManager.createItem(function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('teamdetailactionform_fieldset_message');}},function(jqXHR,timeout,message){$('#teamdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function()
{var useridPickerValue=null;var resolvedUrl=org.r3.PageManager.getRESTUrl("LUT_CalendarMonthlyPeriod",['10','-4']);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamdetailactionform_periodindex'),"selectedValue":null,"useBusinessKey":false});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Teams");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamdetailactionform_templateteamid'),"selectedValue":null,"useBusinessKey":true});}});$.r3Utils.namespace("org.r3.jsportlet.project.team");org.r3.jsportlet.project.team.TeamDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aDetailViewContainerId_tab_generale,aTeamListActionFormContainerId)
{this.setPageManager(aPageManager);this.htmlContainerId=aDetailViewContainerId;this.detailView=new org.r3.jsportlet.project.team.TeamDetailActionFormView(aDetailViewContainerId_tab_generale,this,'tabs_mode');this.createView=new org.r3.jsportlet.project.team.TeamCreateActionFormView(aDetailViewContainerId,this,'default');},close:function()
{this.hide();},hide:function()
{$(this.htmlContainerId).hide();},show:function()
{$(this.htmlContainerId).show();},refresh:function()
{this.detailView.refresh();},open:function(aDataBeanInfo,anOpenOptionsHash)
{if(!aDataBeanInfo)
{this.createView.open();return;}
this.setDataBeanInfo(aDataBeanInfo);var navigatorMode=aDataBeanInfo?'detail':'create';var navigatorUrl=org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/team/TeamDetailActionFormView_tab_navigator.html.jsp?mode='+navigatorMode+"&traverseRelationship="+anOpenOptionsHash.traverseRelationship;$.ajax({"type":"GET","url":org.r3.PageManager.getVersionedUIURL(navigatorUrl),"dataType":"html","success":$.r3Utils.hitch(this,function(responseData)
{$(this.htmlContainerId).html(tmpl(responseData,{}));this.detailView.open(aDataBeanInfo,anOpenOptionsHash);$(this.htmlContainerId).show();}),"error":function(jqXHR,timeout,message)
{console.error("Errore Loading: ",navigatorUrl);}});},completeWorkflowActivity:function(nextTeamStatus,onSuccessResponse,onFailResponse)
{var method="put";var restUrl=org.r3.PageManager.getRESTUrl('PUT_TeamWorkflowOnComplete',[this.dataBeanInfo.dataBean.teamid,nextTeamStatus]);var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Teams");org.r3.PageManager.lutManager.invalidateLUT(resolvedUrl);org.r3.AjaxUtils.ajaxInvoke(method,restUrl,onSuccessResponse,onFailResponse,"org.r3.message.saveconfirm",true);},updateItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(true,onSuccessResponse,onFailResponse);},createItem:function(onSuccessResponse,onFailResponse)
{this._saveItem(false,onSuccessResponse,onFailResponse);},_saveItem:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#teamdetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_Team');if(isUpdate)
{var teamid=this.dataBeanInfo.dataBean.teamid;restUrl=org.r3.PageManager.getRESTUrl('PUT_Team',[teamid]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);if(!org.r3.PageManager.isRestDTO(responseData))
{if(method=='put')
_self.listaTeams();else _self.pageManager.closeNewTeamPanel();}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},deleteItem:function(onSuccessResponse,onErrorResponse)
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var method="DELETE";var restUrl=null;var teamid=this.dataBeanInfo.dataBean.teamid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_Team',[teamid]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);org.r3.PageManager.back();},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},listaTeams:function()
{org.r3.PageManager.back();},submitForm:function(method,restUrl,theForm,onSuccess,onError)
{var _self=this;if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.refresh();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onError)
onError(jqXHR,timeout,message);}});}},openResourceDetail:function(aDTOAdapter)
{this.hide();this.pageManager.openResourceDetailPanel(aDTOAdapter,{"traverseRelationship":false,"actions":'none'});},deleteResourceFromTeam:function(aTeamid,aResourceid,onSuccessResponse,onFailResponse)
{var method="delete";var restUrl=org.r3.PageManager.getRESTUrl('DELETE_ResourceFromTeam',[aTeamid,aResourceid]);org.r3.AjaxUtils.ajaxInvoke(method,restUrl,onSuccessResponse,onFailResponse,"org.r3.message.saveconfirm",true);}});$.r3Utils.namespace("org.r3.jsportlet.project.team");org.r3.jsportlet.project.team.TeamDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,openMode)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.openMode=openMode||'default';},close:function()
{this.hide();},refresh:function()
{this.tabTeams.refresh();},open:function(aDataBeanInfo,anOpenOptionsHash)
{var formMode=(aDataBeanInfo)?'detail':'create';if(this.openMode=='default')org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/team/TeamDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});if(formMode=='detail')
{networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_Team_Detail',[aDataBeanInfo.dataBean.teamid]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{if(this.openMode=='default')org.r3.PageManager.closeNotifier();var teamDataBean=responseData['content'];if(teamDataBean)
{teamDataBean=new org.r3.db.project.team.TeamDTOAdapter(teamDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{"formmode":formMode,"teamDtoAdapter":teamDataBean}));$('#teamdetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.project.team.teamdetailactionform_form_validationRules,messages:org.r3.jsportlet.project.team.teamdetailactionform_form_validationMessages});$('#teamdetailactionform_fieldset_message').formmessage({});$('#teamdetailactionform_form_action_cancel').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.listaTeams));this._initializeFormFields(teamDataBean);$('#teamdetailactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));$('#teamdetailactionform_form_action_cancel').show();var a=$('#teamdetailactionform_action_delete');if(anOpenOptionsHash.actions=='all')
{a.unbind().click($.r3Utils.hitch(this,this._onDeleteItem));a.show();}
else
{a.unbind().hide();}
var a=$('.teamwf_action');if(anOpenOptionsHash.actions=='all')
{a.unbind().click($.r3Utils.hitch(this,this._onCompleteWorkflowActivity));a.show();}
else
{a.unbind().hide();}
this.tabTeams=new org.r3.jsportlet.project.team.TeamDetailActionFormView_TabResources('#teamDetailActionFormView_tab_resources',this.actionFormManager,teamDataBean);if(this.openMode=='default')this.show();}),function(d)
{console.error("controller did not load");});},_defaultValue2TeamDescriptionOnEmptyValue:function()
{var descrField=$('#teamdetailactionform_teamdescr');var d=descrField.val();if(!d||!(d.trim().length))
{d=$("#teamdetailactionform_periodindex option:selected").text().toUpperCase();descrField.val(d);}},_onCompleteWorkflowActivity:function(e)
{var currentTarget=$(e.currentTarget);var wfStatus=currentTarget.attr('id').substring('teamwf_action_'.length)
console.log(currentTarget.attr('id'),wfStatus);this.actionFormManager.completeWorkflowActivity(wfStatus,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('teamdetailactionform_fieldset_message');}
else org.r3.PageManager.back();},function(jqXHR,timeout,message){$('#teamdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});})},_onCreateItem:function()
{this._defaultValue2TeamDescriptionOnEmptyValue();this.actionFormManager.createItem(function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('teamdetailactionform_fieldset_message');}},function(jqXHR,timeout,message){$('#teamdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{this._defaultValue2TeamDescriptionOnEmptyValue();this.actionFormManager.updateItem(function(responseData){},function(jqXHR,timeout,message){$('#teamdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onDeleteItem:function()
{this.actionFormManager.deleteItem(function(responseData){},function(jqXHR,timeout,message){$('#teamdetailactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function(aTeamDTOAdapter)
{var useridPickerValue=null;var resolvedUrl=org.r3.PageManager.getRESTUrl("LUT_CalendarMonthlyPeriod",['10','-4']);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamdetailactionform_periodindex'),"selectedValue":aTeamDTOAdapter&&aTeamDTOAdapter.dataBean.periodindex&&(aTeamDTOAdapter.dataBean.periodindex+''),"useBusinessKey":false});if(aTeamDTOAdapter)
{$('#teamdetailactionform_teamid').html(aTeamDTOAdapter.dataBean.teamid);$('#teamdetailactionform_teamdescr').val(aTeamDTOAdapter.dataBean.teamdescr);$('#teamdetailactionform_periodindex').prop('disabled',true);$('#teamdetailactionform_teamstatus').val(eval('org.r3.db.project.team.message.'+aTeamDTOAdapter.dataBean.teamstatus));}
else
{var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Teams");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamdetailactionform_templateteamid'),"selectedValue":null,"useBusinessKey":true});}}});$.r3Utils.namespace("org.r3.jsportlet.project.team");org.r3.jsportlet.project.team.TeamDetailActionFormView_TabResources=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aTeamDTOAdapter)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.listView=new org.r3.db.project.teamresourceview.TeamResourceViewQueryActionFormView
(anHtmlActionFormContainerId,this.actionFormManager,{showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/jsportlet/project/team/TeamDetailActionFormView_TabResources.html",dataTableId:'TeamResourcesActionFormView',"dataTableSource":org.r3.PageManager.getRESTUrl('GET_Team_Resources',[aTeamDTOAdapter.dataBean.teamid]),gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.project.teamresourceview.message.queryactionformview_legend,iDisplayLength:25,layout:'fullWidth',sortable:true,dataTableColumns:"resourceid;sort,resourcedescr,profileid,price,queryformview-tools",requiredLUTs:["GET_classifier_sys_recstatus","GET_TeamMemberProfiles"],onToolsIconSelected:$.r3Utils.hitch(this,this.onToolSelected),onSelected:$.r3Utils.hitch(this,function(aTeamResourceDTOAdapter)
{this.openDetail(aTeamResourceDTOAdapter);}),actionBarOnTop:true,onInitializationComplete:$.r3Utils.hitch(this,function(){$('#teamresourceform_teamdescr').html(aTeamDTOAdapter.dataBean.teamdescr);$('#teamresourceform_teamid').val(aTeamDTOAdapter.dataBean.teamid);var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_TeamMemberProfiles");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamresourceform_profileid'),"selectedValue":null});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Resources");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamresourceform_resourceid'),"selectedValue":null});$("#teamresource_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.project.team.teamresource_form_validationRules,messages:org.r3.jsportlet.project.team.teamresource_form_validationMessages});var b1=$('#teamresourceform_action_save');var b2=$('#teamresourceform_action_clear');if(aTeamDTOAdapter.canBeModified())
{b1.show().unbind().click($.r3Utils.hitch(this,this.onSaveItem));b2.show().unbind().click($.r3Utils.hitch(this,this._clearForm));}
else
{b1.unbind().hide();b2.unbind().hide();}
$('#teamresource_fieldset_message').formmessage({});})});this.listView.open();},refresh:function()
{$("#teamresource_form").resetForm();this.listView.refresh();},openDetail:function(aTeamResourceDTOAdapter)
{$('#teamresourceform_resourceid').val(aTeamResourceDTOAdapter.dataBean.resourceid);$('#teamresourceform_resourcedescr').val(aTeamResourceDTOAdapter.dataBean.resourcedescr);$('#teamresourceform_profileid').val(aTeamResourceDTOAdapter.dataBean.profileid);},_clearForm:function()
{$('#teamresource_form').resetForm();},onSaveItem:function()
{this.saveItem();},saveItem:function()
{var _self=this;var restUrl=null;var method="POST";var teamid=$('#teamresourceform_teamid').val();var resourceid=$('#teamresourceform_resourceid').val();if(false)
{restUrl=org.r3.PageManager.getRESTUrl("POST_AddResource2Team",[resourceid,teamid]);method="POST";}
else
{restUrl=org.r3.PageManager.getRESTUrl("PUT_UpdateResourceInTeam",[resourceid,teamid]);method="PUT";}
this.actionFormManager.submitForm(method,restUrl,$("#teamresource_form"),function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('teamresource_fieldset_message');}
else
{_self._clearForm();$('#teamresource_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#teamresource_fieldset_message').formmessage('setText',{text:message,category:'error'});});},onToolSelected:function(aTeamResourceViewDTOAdapter,aToolId)
{if(aToolId&&aToolId=='toolid-detail')
{this.actionFormManager.openResourceDetail(aTeamResourceViewDTOAdapter);}
if(aToolId&&aToolId=='toolid-delete')
{this.actionFormManager.deleteResourceFromTeam(aTeamResourceViewDTOAdapter.dataBean.teamid,aTeamResourceViewDTOAdapter.dataBean.resourceid);}}});$.r3Utils.namespace("org.r3.jsportlet.project.team",window,function(aNamespace)
{aNamespace.teamresource_form_validationRules={resourceid:{required:true},profileid:{required:true}};aNamespace.teamresource_form_validationMessages={resourceid:{required:org.r3.message.field_required},profileid:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.project.team",window,function(aNamespace)
{aNamespace.teamdetailactionform_form_validationRules={teamdescr:{required:false,maxlength:40,texttransform:'uppercase'}};aNamespace.teamdetailactionform_form_validationMessages={teamdescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.project.team");org.r3.jsportlet.project.team.TeamQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.project.team.TeamQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'TeamQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.project.team.message.queryactionformview_legend,iDisplayLength:25,dataTableSource:'GET_Teams',layout:'fullWidth',sortable:true,dataTableColumns:"teamstatus,teamid;sort,teamdescr,periodindex",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.teamDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_team_action_newteam',label:org.r3.jsportlet.project.team.message.console_team_action_newteam,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.hide();this.pageManager.openNewTeamPanel();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},teamDetail:function(aDTOAdapter)
{this.listView.hide();this.pageManager.openTeamDetailPanel(aDTOAdapter,{});}});$.r3Utils.namespace("org.r3.jsportlet.project.teamtimesheet");org.r3.jsportlet.project.teamtimesheet.TeamTimesheetActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.timesheetTeamDTOAdapter=null;this.timesheetMonth=null;this.listView=new org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewQueryActionFormView
(aDetailViewContainerId,this,{showTemplateOnOpen:true,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/jsportlet/project/teamtimesheet/TeamTimesheetActionFormView.html.jsp",dataTableId:'ResourceTimesheetViewQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.project.resourcetimesheetview.message.queryactionformview_legend,iDisplayLength:-1,layout:'fullWidth',sortable:true,dataTableColumns:"resourceid;sort,resourcedescr,ordeffort,exteffort,oncalleffort,queryformview-tools",requiredLUTs:["GET_classifier_sys_recstatus"],onToolsIconSelected:$.r3Utils.hitch(this,this.onToolSelected),onSelected:$.r3Utils.hitch(this,function(aResourceTimesheetViewDTOAdapter)
{this.openDetail(aResourceTimesheetViewDTOAdapter);}),onClearSelection:function()
{},actionBarOnTop:true,onInitializationComplete:$.r3Utils.hitch(this,function(){var _self=this;var now=moment();var kd=$('#teamtimesheetform_ordeffort');kd.knob({displayInput:false,step:1,min:0,max:24,'format':$.r3Utils.hitch(this,function(v){return this._formatKnobData(v,'#teamtimesheetform_ordeffort_klabel',false);})});var kd=$('#teamtimesheetform_exteffort');kd.knob({displayInput:false,step:1,min:0,max:24,'format':$.r3Utils.hitch(this,function(v){return this._formatKnobData(v,'#teamtimesheetform_exteffort_klabel',false);})});var kd=$('#teamtimesheetform_oncalleffort');kd.knob({displayInput:false,step:1,min:0,max:24,'format':$.r3Utils.hitch(this,function(v){return this._formatKnobData(v,'#teamtimesheetform_oncalleffort_klabel',false);})});var nowAsString=now.format('DD/MM/YYYYY');var dp=$('#teamtimesheetform_form .r3_datepicker');dp.datepicker({format:"dd/mm/yyyy",endDate:nowAsString});dp.datepicker('update',nowAsString);dp.datepicker().on('changeDate',function(e){console.log('Changed Date...',e.date);_self.updateUIOnTimesheetDay(moment(e.date));}).on('changeMonth',function(e){console.log('Changed Month...',e.date);});this.updateUIOnTimesheetDay(now);$("#teamtimesheetform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.project.teamtimesheet.teamtimesheet_form_validationRules,messages:org.r3.jsportlet.project.teamtimesheet.teamtimesheet_form_validationMessages});var a=$('.teamwf_action');a.unbind().click($.r3Utils.hitch(this,this._onCompleteWorkflowActivity));$('#teamtimesheetform_action_save').unbind().click($.r3Utils.hitch(this,this.onSaveItem));$('#teamtimesheetform_action_clear').unbind().click($.r3Utils.hitch(this,this._clearForm));$('#teamtimesheet_fieldset_message').formmessage({});})});},_formatKnobData:function(v,aLabelId,halfHourFLag)
{var s=v+'';if(halfHourFLag){switch(v){case 0:s='0';break;case 5:s='0.5';break;default:{var c=s.charAt(s.length-1);s=s.substring(0,s.length-1);if(c=='5'){s=s+'.5';}}}}
$(aLabelId).html(s);return s;},close:function()
{this.hide();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},refreshByDay:function(aMomentDate)
{var qparams=[];qparams.push({"name":"timesheetday","value":aMomentDate.format('YYYYMMDD')});this.listView.clearQueryParameters();for(var i=0;i<qparams.length;i++)
{this.listView.addQueryParameter(qparams[i]);}
this.listView._applyFnFilter('');},_clearForm:function()
{$('#teamtimesheetform_form').resetForm();$('#teamtimesheetform_ordeffort').val(0).trigger('change');$('#teamtimesheetform_exteffort').val(0).trigger('change');$('#teamtimesheetform_oncalleffort').val(0).trigger('change');},_updateWorkflowActions:function()
{if(this.timesheetTeamDTOAdapter)
{var t=this.timesheetTeamDTOAdapter.getOnCompleteOKTask_InReportingTask();if(t)
{$('#teamwf_action_oncomplete_ok').show();$('#teamwf_action_oncomplete_ok').html(org.r3.db.project.team.message.getOnCompleteOkActionMessageForTask(this.timesheetTeamDTOAdapter.dataBean.teamstatus));}
else
{$('#teamwf_action_oncomplete_ok').hide();}
var t=this.timesheetTeamDTOAdapter.getOnCompleteKOTask_InReportingTask();if(t)
{$('#teamwf_action_oncomplete_ko').show();$('#teamwf_action_oncomplete_ko').html(org.r3.db.project.team.message.getOnCompleteKoActionMessageForTask(this.timesheetTeamDTOAdapter.dataBean.teamstatus));}
else
{$('#teamwf_action_oncomplete_ko').hide();}}
else
{$('.teamwf_action').hide();}},_updateTimesheetActions:function()
{if(this.timesheetTeamDTOAdapter&&this.timesheetTeamDTOAdapter.isOpen4Reporting())
{$('#teamtimesheetform_action_save').prop('disabled',false);$('#teamtimesheet_fieldset_message').formmessage('clear');}
else
{$('#teamtimesheetform_action_save').prop('disabled',true);$('#teamtimesheet_fieldset_message').formmessage('setText',{text:org.r3.jsportlet.project.teamtimesheet.message.err_period_ot_open_for_reporting,category:'error'});}},_onCompleteWorkflowActivity:function(e)
{var _self=this;var currentTarget=$(e.currentTarget);var t=this.timesheetTeamDTOAdapter.getOnCompleteOKTask();if(currentTarget.attr('id')=='teamwf_action_oncomplete_ko')
t=this.timesheetTeamDTOAdapter.getOnCompleteKOTask();console.log(t);var method="put";var restUrl=org.r3.PageManager.getRESTUrl('PUT_TeamWorkflowOnComplete',[this.timesheetTeamDTOAdapter.dataBean.teamid,t]);org.r3.AjaxUtils.ajaxInvoke(method,restUrl,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('teamtimesheet_fieldset_message');}
else
{_self.timesheetTeamDTOAdapter.dataBean.teamstatus=t;_self._updateWorkflowActions();_self._updateTimesheetActions();}},function(jqXHR,timeout,message){$('#teamtimesheet_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},updateUIOnTimesheetDay:function(aMoment)
{this.refreshByDay(aMoment);var aDayAsSysString=aMoment.format('YYYYMMDD');$('#teamtimesheetform_timesheetday').val(aDayAsSysString);$('#teamtimesheetform_timesheetday_descr').html(aMoment.format('DD/MM/YYYY'));this._clearForm();if(!this.timesheetMonth||this.timesheetMonth!=aMoment.month())
{this.timesheetMonth=aMoment.month();var selectWidget=$('#teamtimesheetform_resourceid');var selectOptions=selectWidget.prop('options');if(!selectOptions)
console.error("Select Option is NULL for: ",selectWidget.attr('id'));selectOptions.length=0;this.timesheetTeamDTOAdapter=null;$.ajax({"type":"GET","url":org.r3.PageManager.getRESTUrl('GET_Team_ByDate',[aDayAsSysString]),"dataType":"json","success":$.r3Utils.hitch(this,function(responseData)
{if(responseData.iTotalRecords&&responseData.aaData&&responseData.aaData.length)
{this.timesheetTeamDTOAdapter=new org.r3.db.project.team.TeamDTOAdapter(responseData.aaData[0]);$('#teamtimesheetform_teamid').val(this.timesheetTeamDTOAdapter.dataBean.teamid);var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_Team_Resources',[this.timesheetTeamDTOAdapter.dataBean.teamid]);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":selectWidget,"fnRenderKey":function(anItem){return anItem.resourceid;},"fnRenderText":function(anItem){return anItem.resourcedescr;},"selectedValue":null});this._updateTimesheetActions();}
else
{$('#teamtimesheetform_action_save').prop('disabled',true);$('#teamtimesheet_fieldset_message').formmessage('setText',{text:org.r3.jsportlet.project.teamtimesheet.message.err_period_ot_open_for_reporting,category:'error'});}
this._updateWorkflowActions();}),"error":function(jqXHR,timeout,message)
{console.error("Errore Loading: ",message);this._updateWorkflowActions();}});}},open:function()
{var qparams=[];qparams.push({"name":"timesheetday","value":$.r3Utils.getToday()});var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Timesheets');this.listView.open({"dataTableSource":dataTableSource,"queryparams":qparams});},onSaveItem:function()
{this.saveItem();},_checkForm:function(theForm)
{if(theForm.valid())
{var o=$('#teamtimesheetform_ordeffort').val();var e=$('#teamtimesheetform_exteffort').val();var c=$('#teamtimesheetform_oncalleffort').val();if((!o||o=='0')&&(!e||e=='0')&&(!c||c=='0'))
{$('#teamtimesheet_fieldset_message').formmessage('setText',{text:org.r3.jsportlet.project.teamtimesheet.message.err_effort_empty,category:'error'});return false;}
if(Number(o)+Number(e)+Number(c)>24)
{$('#teamtimesheet_fieldset_message').formmessage('setText',{text:org.r3.jsportlet.project.teamtimesheet.message.err_effort_overload,category:'error'});return false;}
$('#teamtimesheet_fieldset_message').formmessage('clear');return true;}
return false;},saveItem:function()
{var _self=this;var restUrl=null;var method="PUT";var theForm=$("#teamtimesheetform_form");if(!this._checkForm(theForm))
return;var tsday=$('#teamtimesheetform_timesheetday').val();var teamid=$('#teamresourceform_teamid').val();var resourceid=$('#teamtimesheetform_resourceid').val();restUrl=org.r3.PageManager.getRESTUrl("PUT_ResourceTimesheet",[resourceid,tsday]);method="PUT";org.r3.AjaxUtils.submitForm(method,restUrl,theForm,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('teamtimesheet_fieldset_message');}
else
{_self.refresh();_self._clearForm();$('#teamtimesheet_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});}},function(jqXHR,timeout,message){$('#teamtimesheet_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},_onItemDelete:function(aTeamResourceViewDTOAdapter)
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var method="DELETE";var tsday=$('#teamtimesheetform_timesheetday').val();var resourceid=aTeamResourceViewDTOAdapter.dataBean.resourceid;var restUrl=org.r3.PageManager.getRESTUrl("DELETE_ResourceTimesheet",[resourceid,tsday]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.refresh();},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();}});}},openDetail:function(aDTOAdapter)
{$('#teamtimesheetform_resourceid').val(aDTOAdapter.dataBean.resourceid);$('#teamtimesheetform_ordeffort').val(aDTOAdapter.dataBean.ordeffort).trigger('change');$('#teamtimesheetform_exteffort').val(aDTOAdapter.dataBean.exteffort).trigger('change');$('#teamtimesheetform_oncalleffort').val(aDTOAdapter.dataBean.oncalleffort).trigger('change');},onToolSelected:function(aTeamResourceViewDTOAdapter,aToolId)
{if(aToolId&&aToolId=='toolid-trash')
{this._onItemDelete(aTeamResourceViewDTOAdapter);}}});$.r3Utils.namespace("org.r3.jsportlet.project.teamtimesheet",window,function(aNamespace)
{aNamespace.teamtimesheet_form_validationRules={resourceid:{required:true},ordeffort:{required:true}};aNamespace.teamtimesheet_form_validationMessages={resourceid:{required:org.r3.message.field_required},ordeffort:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.project.teamtimesheetreport");org.r3.jsportlet.project.teamtimesheetreport.TeamTimesheetPrintableReportActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.project.teamtimesheetreport.TeamTimesheetPrintableReportActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(aGroupByClause,queryParams)
{this.detailView.open(aGroupByClause,queryParams);}});$.r3Utils.namespace("org.r3.jsportlet.project.teamtimesheetreport");org.r3.jsportlet.project.teamtimesheetreport.TeamTimesheetPrintableReportActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aGroupByClause,queryParams)
{var _self=this;var reportTemplate="TeamTimesheetPrintableReportActionFormView.html.jsp";org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/teamtimesheetreport/'+reportTemplate),dataType:"html"});var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Timesheets');if(queryParams&&queryParams.length)
{dataTableSource=$.r3Utils.addQueryStringToUrl(dataTableSource,$.param(queryParams));}
networkRequestsQueue.push({id:"content",type:"Get",url:dataTableSource,dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var adapter=new org.r3.db.DTOTableAdapter(responseData['content'],function(aRowDataBean){return new org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewDTOAdapter(aRowDataBean);});var columns='caldate,profileid,resourcedescr,ordeffort,exteffort,oncalleffort';if(aGroupByClause)
{if($.isArray(aGroupByClause))
{aGroupByClause=aGroupByClause.reduce(function(theAccumulator,anItem){return theAccumulator+','+anItem;});}
columns=aGroupByClause+',ordeffort,exteffort,oncalleffort';}
var columnDefs=org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewQueryActionFormView_ColumnDefinitions('PrintableReportId',columns);var templatedHtml=tmpl(responseData['view'],{"dtoTableAdapter":adapter,"queryParams":queryParams,"columnDefinitions":columnDefs,"columns":columns});$(this.htmlContainerId).html(templatedHtml);$('#canvas_report_title').html("Report Consuntivazione");this.show();}),function(d)
{console.error("controller did not load");});},_getTableColumnDefinition:function(aGroupByClause)
{var tableColumnDefinition=[];if(aGroupByClause)
{if(aGroupByClause.length)
{aGroupByClause=aGroupByClause.reduce(function(accumulator,item){return accumulator+', '+item;});}}
var fieldName='resourceid';var pushItem=true;if(aGroupByClause&&aGroupByClause.indexOf(fieldName)<0)
pushItem=false;tableColumnDefinition.push({name:fieldName,value:function(aDTOAdapter)
{return aDTOAdapter.dataBean.resourceid;}});}});$.r3Utils.namespace("org.r3.jsportlet.project.teamtimesheetreport");org.r3.jsportlet.project.teamtimesheetreport.TeamTimesheetReportActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aQueryFormViewContainerId,aDataTableViewContainerId)
{this.setPageManager(aPageManager);this.lastExecutedQuery=null;this.lastExecutedReportType=null;this.searchFormView=new org.r3.jsportlet.project.team.TeamTimesheetReportActionFormView(aQueryFormViewContainerId,this);this.listView=new org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewQueryActionFormView
(aDataTableViewContainerId,this,{showTemplateOnOpen:true,htmlTemplateUrl:org.r3.Constants.applicationContext+"/org/r3/jsportlet/project/teamtimesheetreport/TeamTimesheetReportDatatableActionFormView.html.jsp",dataTableId:'ResourceTimesheetReportViewQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.project.resourcetimesheetview.message.queryactionformview_legend,iDisplayLength:-1,layout:'fullWidth',sortable:true,requiredLUTs:["GET_classifier_sys_recstatus","LUT_DefaultCalendarMonthlyPeriod","LUT_DefaultCalendarYearlyPeriod","LUT_DefaultCalendarQuarterlyPeriod"],actionBarOnTop:true,buttons:[{id:'resourcetimesheetreport_printableversion',label:'Versione Stampabile',disabled:true,onClick:$.r3Utils.hitch(this,this._onPrintableVersion)}],onServerData:function(items,data)
{if(data&&data.iTotalRecords)
$('#resourcetimesheetreport_printableversion').prop('disabled',false);else $('#resourcetimesheetreport_printableversion').prop('disabled',true);},onInitializationComplete:$.r3Utils.hitch(this,function(){})});},close:function()
{this.hide();},hide:function()
{this.searchFormView.hide();},show:function()
{this.searchFormView.show();},refresh:function()
{this.searchFormView.refresh();},open:function()
{this.searchFormView.open();},executeSearch:function(groupBy,queryParams)
{this.lastExecutedGroupBy=groupBy;this.lastExecutedQuery=queryParams;var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Timesheets');this.listView.open({"dataTableSource":dataTableSource,"dataTableColumns":this._computeDataTableColumns(groupBy),"queryparams":queryParams});},_onPrintableVersion:function()
{this.pageManager.openTeamTimesheetReportPrintableActionFormPanel(this.lastExecutedGroupBy,this.lastExecutedQuery);},_computeDataTableColumns:function(aGroupByClauseArray)
{if(aGroupByClauseArray&&aGroupByClauseArray.length)
{var s=aGroupByClauseArray.reduce(function(vacc,vcurrent){return vacc+','+vcurrent;});return s+',ordeffort,exteffort,oncalleffort';}
return"caldate,profileid,resourcedescr,ordeffort,exteffort,oncalleffort";}});$.r3Utils.namespace("org.r3.jsportlet.project.teamtimesheetreport");org.r3.jsportlet.project.team.TeamTimesheetReportActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/project/teamtimesheetreport/TeamTimesheetReportQueryFormActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Resources");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamtimesheetreportform_resourceid'),"selectedValue":null});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_TeamMemberProfiles");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamtimesheetreportform_profileid'),"selectedValue":null});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Teams");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamtimesheetreportform_periodindexfrom'),"selectedValue":null,"fnRenderKey":function(item){return item.periodindex;}});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Teams");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teamtimesheetreportform_periodindexto'),"selectedValue":null,"fnRenderKey":function(item){return item.periodindex;}});$('#teamtimesheetreportform_groupby').multiselect();$("#teamtimesheetreportform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.project.teamtimesheetreport.teamtimesheetreport_form_validationRules,messages:org.r3.jsportlet.project.teamtimesheetreport.teamtimesheetreport_form_validationMessages});$('#teamtimesheetreportform_fieldset_message').formmessage({});$('#teamtimesheetreportform_action_query').unbind().click($.r3Utils.hitch(this,this._onQuery));$('#teamtimesheetreportform_action_clear').unbind().click($.r3Utils.hitch(this,this._onClearForm));this.show();}),function(d)
{console.error("controller did not load");});},_onQuery:function()
{var qparams=[];var v=$('#teamtimesheetreportform_resourceid').val();if(v)
{qparams.push({"name":"resourceid","value":v,"text":$("#teamtimesheetreportform_resourceid option:selected").text()});}
var v=$('#teamtimesheetreportform_profileid').val();if(v)
{qparams.push({"name":"profileid","value":v,"text":$("#teamtimesheetreportform_profileid option:selected").text()});}
var v=$('#teamtimesheetreportform_periodindexfrom').val();if(v)
{qparams.push({"name":"periodindexfrom","value":v,"text":$("#teamtimesheetreportform_periodindexfrom option:selected").text()});}
var v=$('#teamtimesheetreportform_periodindexto').val();if(v)
{qparams.push({"name":"periodindexto","value":v,"text":$("#teamtimesheetreportform_periodindexto option:selected").text()});}
var groupBy=$('#teamtimesheetreportform_groupby').val();if(groupBy)
{qparams.push({"name":"groupby","value":groupBy,"text":groupBy.map(function(anItem,anIndex,anArray){return $("#teamtimesheetreportform_groupby option[value = '"+anItem+"']").text();}).reduce(function(vacc,vcurrent){return vacc+', '+vcurrent;})});}
this.actionFormManager.executeSearch(groupBy,qparams);},_onClearForm:function()
{$('#teamtimesheetreportform_form').resetForm();$("#teamtimesheetreportform_groupby").multiselect("deselectAll",false).multiselect('updateButtonText');}});$.r3Utils.namespace("org.r3.jsportlet.project.teamtimesheetreport",window,function(aNamespace)
{aNamespace.teamtimesheetreport_form_validationRules={resourceid:{required:true},ordeffort:{required:true}};aNamespace.teamtimesheetreport_form_validationMessages={resourceid:{required:org.r3.message.field_required},ordeffort:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.registration");org.r3.jsportlet.registration.RegistrationActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.registration.RegistrationActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(aOptionsHash)
{this.detailView.open(aOptionsHash);},doRegistration:function()
{var _self=this;if($('#registrationform_form').valid())
{org.r3.PageManager.wait("org.r3.message.waiting");var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_User_Registration');$('#registrationform_form').ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isFail())
{restDto.showMessage("registrationform_form_fieldset_message");if(restDto.reasoncode=='USR_ERROR_DUPUSER')
{console.error("Duplicate Mail Error");$('.registrationform_onduplicateuser').show();}}}
else
{var cardMessageCanvas=$(_self.detailView.htmlContainerId+" .panel-body");if(!cardMessageCanvas.length)
cardMessageCanvas=$(_self.detailView.htmlContainerId);if(responseData.recstatus=='sys_recact')
cardMessageCanvas.cmsCard({card_tmpl:"cms_tpl_simple",cardid:"REGACT_OK"});else
cardMessageCanvas.cmsCard({card_tmpl:"cms_tpl_simple",cardid:"HLP_USRREG_OK"});}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();$('#registrationform_form_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}}});$.r3Utils.namespace("org.r3.jsportlet.registration");org.r3.jsportlet.registration.RegistrationActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aOptionsHash)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];var templateHtml=org.r3.Constants.applicationContext+'/org/r3/jsportlet/registration/RegistrationActionForm.html';if(aOptionsHash&&aOptionsHash.templateHtml)
templateHtml=org.r3.Constants.applicationContext+'/org/r3/jsportlet/registration/'+aOptionsHash.templateHtml;networkRequestsQueue.push({id:"view",type:"Get",url:templateHtml,dataType:"html"});networkRequestsQueue.push({id:"captchaToken",type:"Get",url:org.r3.PageManager.getRESTUrl('GETCaptchaToken'),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var captchaToken=responseData['captchaToken'];if(captchaToken)
captchaToken=new org.r3.RestDTOAdapter(captchaToken);var templatedHtml=tmpl(responseData['view'],captchaToken);$(this.htmlContainerId).html(templatedHtml);$('#registrationform_refreshcaptcha_action').unbind().click($.r3Utils.hitch(this,this.reloadCaptcha));$('#registrationform_securecode').focus();$.r3Utils.onEnter('#registrationform_confirm_password',this.actionFormManager,this.actionFormManager.doRegistration,true);$("#registrationform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.registration.registrationform_form_validationRules,messages:org.r3.jsportlet.registration.registrationform_form_validationMessages});$('#registrationButton').unbind().click($.r3Utils.hitch(this,this.onRegistrationClick));$('#registrationform_form_fieldset_message').formmessage({});$(this.htmlContainerId+' .if_'+org.r3.SiteConstants.targetSiteType).show();this.show();}),function(d)
{console.error("controller did not load");});},onRegistrationClick:function(event)
{console.log("I'm clicked2.... ",this,event);this.actionFormManager.doRegistration();event.preventDefault();},reloadCaptcha:function()
{console.info("Reloading Captcha");$.ajax({"type":"get","url":org.r3.PageManager.getRESTUrl('GETCaptchaToken'),"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var captchaToken=responseData;if(captchaToken)
captchaToken=new org.r3.RestDTOAdapter(captchaToken);var tokenValue=encodeURIComponent(captchaToken.correlationid);$('#registrationform_captcha_img').attr('src',org.r3.Constants.applicationContext+"/simpleCaptcha.png?token="+tokenValue);$('#registrationform_securetoken').attr('value',captchaToken.correlationid);},"error":function(jqXHR,timeout,message)
{console.error("AccettazioneActionForm: ",message);}});}});$.r3Utils.namespace("org.r3.jsportlet.registration",window,function(aNamespace)
{aNamespace.registrationform_form_validationRules={securecode:{required:true,maxlength:8,minlength:5},firstname:{required:true,maxlength:40,texttransform:'uppercase'},lastname:{required:true,maxlength:40,texttransform:'uppercase'},email:{required:true,maxlength:60,email:true},confirmemail:{required:true,maxlength:60,email:true,equalTo:'#registrationform_email'},nickname:{required:true,maxlength:10,texttransform:'lowercase'},password:{required:true,maxlength:10,minlength:org.r3.Constants.passwordValidationMinLength},confirm_password:{required:true,maxlength:10,minlength:org.r3.Constants.passwordValidationMinLength,equalTo:'#registrationform_password'},activationcode:{required:false,maxlength:10,emptyOrEqualTo:'#registrationform_confactivationcode'}};aNamespace.registrationform_form_validationMessages={securecode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,minlength:org.r3.message.field_minlength},firstname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},lastname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},email:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email},confirmemail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,equalTo:'La email inserita non corrisponde alla conferma!'},nickname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},password:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,minlength:org.r3.message.field_minlength},confirm_password:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,minlength:org.r3.message.field_minlength,equalTo:'La parola chiave inserita non corrisponde alla conferma!'},activationcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,emptyOrEqualTo:'Il codice indicato non corrisponde. Lasciare in bianco se non si dispone di un codice valido fornito dalla Segreteria.'}};});$.r3Utils.namespace("org.r3.jsportlet.resetuserpwd");org.r3.jsportlet.resetuserpwd.ResetUserPasswordActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.resetuserpwd.ResetUserPasswordActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},doResetUserPassword:function()
{var _self=this;if($('#resetuserpwdform_form').valid())
{org.r3.PageManager.wait("org.r3.message.waiting");var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_User_ResetPassword');$('#resetuserpwdform_form').ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{org.r3.PageManager.closeNotifier();var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isOk())
{console.info($(_self.detailView.htmlContainerId+" .panel-body"),_self.detailView.htmlContainerId+" .panel-body");$(_self.detailView.htmlContainerId+" .panel-body").cmsCard({card_tmpl:"cms_tpl_simple",cardid:"HLP_RESETPWDOK"});}
else restDto.showMessage('resetuserpwdform_fieldset_message');}
else
{org.r3.PageManager.redirectToHomePage();}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();$('#resetuserpwdform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}}});$.r3Utils.namespace("org.r3.jsportlet.resetuserpwd");org.r3.jsportlet.resetuserpwd.ResetUserPasswordActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/resetuserpwd/ResetUserPasswordActionForm.html'),dataType:"html"});networkRequestsQueue.push({id:"captchaToken",type:"Get",url:org.r3.PageManager.getRESTUrl('GETCaptchaToken'),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var captchaToken=responseData['captchaToken'];if(captchaToken)
captchaToken=new org.r3.RestDTOAdapter(captchaToken);var templatedHtml=tmpl(responseData['view'],captchaToken);$(this.htmlContainerId).html(templatedHtml);$('#resetuserpwdform_refreshcaptcha_action').unbind().click($.r3Utils.hitch(this,this.reloadCaptcha));$('#resetuserpwdform_securecode').focus();$("#resetuserpwdform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.resetuserpwd.resetuserpwdform_form_validationRules,messages:org.r3.jsportlet.resetuserpwd.resetuserpwdform_form_validationMessages});$('#resetuserpwdButton').unbind().click($.r3Utils.hitch(this,this.onResetUserPasswordClick));$('#resetuserpwdform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},onResetUserPasswordClick:function(event)
{console.log("I'm clicked2.... ",this,event);this.actionFormManager.doResetUserPassword();event.preventDefault();},reloadCaptcha:function()
{console.info("Reloading Captcha");$.ajax({"type":"get","url":org.r3.PageManager.getRESTUrl('GETCaptchaToken'),"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var captchaToken=responseData;if(captchaToken)
captchaToken=new org.r3.RestDTOAdapter(captchaToken);var tokenValue=encodeURIComponent(captchaToken.correlationid);$('#resetuserpwdform_captcha_img').attr('src',org.r3.Constants.applicationContext+"/simpleCaptcha.png?token="+tokenValue);$('#resetuserpwdform_securetoken').attr('value',captchaToken.correlationid);},"error":function(jqXHR,timeout,message)
{console.error("AccettazioneActionForm: ",message);}});}});$.r3Utils.namespace("org.r3.jsportlet.resetuserpwd",window,function(aNamespace)
{aNamespace.resetuserpwdform_form_validationRules={securecode:{required:true,maxlength:8,minlength:5},email:{required:true,maxlength:60},nickname:{required:false,maxlength:10}};aNamespace.resetuserpwdform_form_validationMessages={securecode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,minlength:org.r3.message.field_minlength},email:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},nickname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.rndphotosidebar");org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,optionsHash)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(configHash)
{this.detailView.open(configHash);}});$.r3Utils.namespace("org.r3.jsportlet.rndphotosidebar");org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.defaultOptionsHash={"collection":"shakeus","numberOfIcons":4}},close:function()
{this.hide();},open:function(configHash)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/rndphotosidebar/RandomPhotoSideBarActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var displayOptions=$.extend(this.defaultOptionsHash,configHash);displayOptions.startIcon=1;var templatedHtml=tmpl(responseData['view'],displayOptions);$(this.htmlContainerId).html(templatedHtml);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.ApplicationActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anActionFormContainerId,isAdminFlag)
{this.setPageManager(aPageManager);this.isAdmin=isAdminFlag;this.actionFormContainer=$(anActionFormContainerId);this.wizardNavigatorActionFormView=new org.r3.jsportlet.sev.application.ApplicationWizardNavigatorActionFormView('#JSPortlet_SEVApplicationActionForm_wizardnavigator',this);this.boatInfoView=new org.r3.jsportlet.sev.application.BoatInfoActionFormView("#JSPortlet_SEVApplicationActionForm_BoatInfoActionForm",this);this.classInfoView=new org.r3.jsportlet.sev.application.ClassInfoActionFormView("#JSPortlet_SEVApplicationActionForm_ClassInfoActionForm",this);this.ownerInfoView=new org.r3.jsportlet.sev.application.OwnerInfoActionFormView("#JSPortlet_SEVApplicationActionForm_OwnerInfoActionForm",this);this.crewInfoView=new org.r3.jsportlet.sev.application.CrewInfoActionFormView("#JSPortlet_SEVApplicationActionForm_CrewInfoActionForm",this);this.authorInfoView=new org.r3.jsportlet.sev.application.AuthorInfoActionFormView("#JSPortlet_SEVApplicationActionForm_AuthorInfoActionForm",this);this.docInfoView=new org.r3.jsportlet.sev.application.DocInfoActionFormView("#JSPortlet_SEVApplicationActionForm_DocInfoActionForm",this);this.docUploadView=new org.r3.jsportlet.sev.application.UploadFileActionFormView("#JSPortlet_SEVApplicationActionForm_UploadFileActionForm",this);this.crewInfoDocUploadView=new org.r3.jsportlet.sev.application.UploadCrewInfoFileActionFormView("#JSPortlet_SEVApplicationActionForm_UploadCrewInfoFileActionForm",this);this.payInfoView=new org.r3.jsportlet.sev.application.PayInfoActionFormView("#JSPortlet_SEVApplicationActionForm_PayInfoActionForm",this);this.summaryInfoView=new org.r3.jsportlet.sev.application.SummaryInfoActionFormView("#JSPortlet_SEVApplicationActionForm_SummaryInfoActionForm",this);this.appViewer=new org.r3.jsportlet.sev.appviewer.AppViewerActionFormView("#canvas_report_content",this);},close:function()
{this.hide();this.wizardNavigatorActionFormView.close();this.boatInfoView.close();this.classInfoView.close();this.ownerInfoView.close();this.crewInfoView.close();this.authorInfoView.close();this.docInfoView.close();this.docUploadView.close();this.payInfoView.close();this.summaryInfoView.close();},hide:function()
{this.actionFormContainer.hide();},show:function()
{this.actionFormContainer.show();},refresh:function()
{},open:function(anApplicationDTOAdapter)
{this.setDataBeanInfo(anApplicationDTOAdapter);var navigatorSteps=[];if(anApplicationDTOAdapter.isDraft()||anApplicationDTOAdapter.isEmpty()||(this.isAdmin&&org.r3.PageManager.isUserInRole('console')))
{navigatorSteps=this._setupFullApplicationNavigatorSteps(anApplicationDTOAdapter,this.isAdmin);}
else
navigatorSteps=this._setupPartialApplicationNavigatorSteps(anApplicationDTOAdapter,false);org.r3.PageManager.googleAnalyticsSendPageView();this.wizardNavigatorActionFormView.open(anApplicationDTOAdapter,navigatorSteps);this.actionFormContainer.show();},_setupPartialApplicationNavigatorSteps:function(anApplicationDTOAdapter,activateJumpsFlag)
{var navigatorSteps=[];navigatorSteps.push({id:'crewinfo',title:"Iscrizione - Equipaggio",briefTitle:"Equipaggio",active:activateJumpsFlag,selected:true,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.crewInfoView});this.crewInfoView.open(anApplicationDTOAdapter,"next",true);navigatorSteps.push({id:'summaryinfo',title:"Iscrizione - Riepilogo",briefTitle:"Riepilogo",active:activateJumpsFlag,selected:false,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.summaryInfoView});this.summaryInfoView.open(anApplicationDTOAdapter,"prev",false);return navigatorSteps;},_setupFullApplicationNavigatorSteps:function(anApplicationDTOAdapter,activateJumpsFlag)
{var navigatorSteps=[];navigatorSteps.push({id:'boatinfo',title:"Iscrizione - Informazioni generali",briefTitle:"Info Barca",active:activateJumpsFlag,selected:true,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.boatInfoView});this.boatInfoView.open(anApplicationDTOAdapter,"next",true);navigatorSteps.push({id:'classinfo',title:"Iscrizione - Informazioni raggruppamento",briefTitle:"Info Raggrupp.",active:activateJumpsFlag,selected:false,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.classInfoView});this.classInfoView.open(anApplicationDTOAdapter,"prev,next",false);navigatorSteps.push({id:'ownerinfo',title:"Iscrizione - Armatore/timoniere",briefTitle:"Armatore/ timoniere",active:activateJumpsFlag,selected:false,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.ownerInfoView});this.ownerInfoView.open(anApplicationDTOAdapter,"prev,next",false);navigatorSteps.push({id:'crewinfo',title:"Iscrizione - Equipaggio",briefTitle:"Equipaggio",active:activateJumpsFlag,selected:false,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.crewInfoView});this.crewInfoView.open(anApplicationDTOAdapter,"prev,next",false);navigatorSteps.push({id:'authorinfo',title:"Iscrizione - Liberatorie",briefTitle:"Liberatorie",active:activateJumpsFlag,selected:false,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.authorInfoView});this.authorInfoView.open(anApplicationDTOAdapter,"prev,next",false);navigatorSteps.push({id:'docinfo',title:"Iscrizione - Documenti",briefTitle:"Documenti",active:activateJumpsFlag,selected:false,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.docInfoView});this.docInfoView.open(anApplicationDTOAdapter,"prev,next",false);navigatorSteps.push({id:'payinfo',title:"Iscrizione - Costi",briefTitle:"Costi",active:activateJumpsFlag,selected:false,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.payInfoView});this.payInfoView.open(anApplicationDTOAdapter,"prev,next",false);navigatorSteps.push({id:'summaryinfo',title:"Iscrizione - Riepilogo",briefTitle:"Riepilogo",active:activateJumpsFlag,selected:false,onClick:$.r3Utils.hitch(this,this.onActiveStepClick),actionFormView:this.summaryInfoView});this.summaryInfoView.open(anApplicationDTOAdapter,"prev",false);return navigatorSteps;},onActiveStepClick:function(aStepItem,isActivating)
{if(aStepItem&&aStepItem.actionFormView)
{if(isActivating)
{org.r3.PageManager.googleAnalyticsSendPageView();aStepItem.actionFormView.activate();}
else
{if(this.docUploadView.isVisible())
this.docUploadView.hide();aStepItem.actionFormView.hide();}}
else console.error("Selected Item is not actionForm: ",aStepItem);},next:function()
{var selectedItem=this.wizardNavigatorActionFormView.next();if(selectedItem&&selectedItem.actionFormView)
{org.r3.PageManager.googleAnalyticsSendPageView();selectedItem.actionFormView.activate();}
else org.r3.PageManager.redirectToHomePage();},prev:function()
{var selectedItem=this.wizardNavigatorActionFormView.prev();if(selectedItem.actionFormView)
{org.r3.PageManager.googleAnalyticsSendPageView();selectedItem.actionFormView.activate();}},updateInfo:function(urlName,actionForm,theFormObj,theFieldsetMessageObj,gotoAction)
{var _self=this;if(theFormObj.valid())
{org.r3.PageManager.wait("org.r3.message.waiting");var method="put";var restUrl=org.r3.PageManager.getRESTUrl(urlName,[this.dataBeanInfo.dataBean.applicationid]);theFormObj.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isFail())
{theFieldsetMessageObj.formmessage('setText',{text:restDto.reason,category:'error'});}
else
{actionForm.hide();_self.executeWizardAction(gotoAction);}}
else
{actionForm.hide();_self.executeWizardAction(gotoAction);}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();theFieldsetMessageObj.formmessage('setText',{text:message,category:'error'});}});}},executeWizardAction:function(wizardAction)
{if(wizardAction=='next')
this.next();if(wizardAction=='prev')
this.prev();},showHelp:function(anHelpId)
{$('.applicationactionform_helpsidebar').hide();$('#'+anHelpId).show();},updateBoatInfo:function(gotoAction)
{this.updateInfo('PUT_SEV_Application_BoatInfo',this.boatInfoView,$('#boatinfoform_form'),$('#boatinfoform_fieldset_message'),gotoAction);},updateClassInfo:function(gotoAction)
{this.updateInfo('PUT_SEV_Application_ClassInfo',this.classInfoView,$('#classinfoform_form'),$('#classinfoform_fieldset_message'),gotoAction);},updateOwnerInfo:function(gotoAction)
{this.updateInfo('PUT_SEV_Application_OwnerInfo',this.ownerInfoView,$('#ownerinfoform_form'),$('#ownerinfoform_fieldset_message'),gotoAction);},updateCrewInfo:function(gotoAction)
{var _self=this;_self.crewInfoView.hide();_self.executeWizardAction(gotoAction);},updateAuthorInfo:function(gotoAction)
{this.updateInfo('PUT_SEV_Application_AuthorInfo',this.authorInfoView,$('#authorinfoform_form'),$('#authorinfoform_fieldset_message'),gotoAction);},updateDocInfo:function(gotoAction)
{var _self=this;_self.docInfoView.hide();_self.executeWizardAction(gotoAction);},updatePayInfo:function(gotoAction)
{var _self=this;_self.payInfoView.hide();_self.executeWizardAction(gotoAction);},updateSummaryInfo:function(gotoAction)
{var _self=this;_self.summaryInfoView.hide();_self.executeWizardAction(gotoAction);},openCrewInfoDocumentUpload:function(crewId,crewCardId,crewName)
{this.crewInfoDocUploadView.open(this.dataBeanInfo,crewId,crewCardId,crewName);},openDocumentUpload:function()
{this.docUploadView.open(this.dataBeanInfo);},closeDocumentUpload:function()
{this.docInfoView.refresh();this.docInfoView.show();},closeCrewInfoDocumentUpload:function()
{this.crewInfoView.refresh();this.crewInfoView.show();},deleteDocument:function(aDocumentDTOAdapter)
{var _self=this;var method="DELETE";var restUrl=null;var site=aDocumentDTOAdapter.dataBean.eventid;var applicationId=aDocumentDTOAdapter.dataBean.applicationid;var documentId=aDocumentDTOAdapter.dataBean.documentid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_SEV_Application_File',[applicationId,documentId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();_self.docInfoView.refresh();},"error":function(jqXHR,timeout,message)
{console.error("GruppoDetailActionForm: ",message);}});},saveCrewMember:function(crewMemberId)
{var _self=this;$('#crewinfoform_fieldset_message').formmessage('clear');var theFormObj=$('#crewinfoform_form');if(theFormObj.valid())
{org.r3.PageManager.wait("org.r3.message.waiting");var method="post";var restUrl=org.r3.PageManager.getRESTUrl("POST_SEV_Application_Crew",[this.dataBeanInfo.dataBean.applicationid]);if(crewMemberId&&crewMemberId.length>0)
{method="put";restUrl=org.r3.PageManager.getRESTUrl("PUT_SEV_Application_Crew",[this.dataBeanInfo.dataBean.applicationid,crewMemberId]);}
theFormObj.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('crewinfoform_fieldset_message');}
_self.crewInfoView.refresh();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();$('#crewinfoform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}},deleteCrewMember:function(aCrewMemberDTOAdapter)
{var _self=this;var method="DELETE";var restUrl=null;var site=aCrewMemberDTOAdapter.dataBean.eventid;var applicationId=aCrewMemberDTOAdapter.dataBean.applicationid;var crewMemberId=aCrewMemberDTOAdapter.dataBean.crewmemberid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_SEV_Application_Crew',[applicationId,crewMemberId]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();_self.crewInfoView.refresh();},"error":function(jqXHR,timeout,message)
{console.error("GruppoDetailActionForm: ",message);}});},viewApplication:function()
{org.r3.PageManager.openFullScreenLayout(this.appViewer);this.appViewer.open(this.dataBeanInfo.dataBean.applicationid);},commitApplication:function(onSuccessResponse,onErrorResponse)
{var _self=this;var method='POST';var restUrl=org.r3.PageManager.getRESTUrl('POST_SEV_Application_Commit',[this.dataBeanInfo.dataBean.applicationid]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onErrorResponse)
{onErrorResponse(jqXHR,timeout,message);}}});},endWizard:function()
{org.r3.PageManager.back();}});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.ApplicationWizardNavigatorActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{$(this.htmlContainerId).wizardnavigator('destroy');this.hide();},refresh:function()
{},open:function(aCompanyDTOAdapter,navigatorSteps)
{$(this.htmlContainerId).wizardnavigator({steps:navigatorSteps});this.show();},stepHandler:function(stepId)
{console.info("Stepid is: ",stepId);},next:function()
{console.info("Ciao");var stepInfo=$(this.htmlContainerId).wizardnavigator("next");return stepInfo;},prev:function()
{var stepInfo=$(this.htmlContainerId).wizardnavigator("prev");return stepInfo;},selected:function()
{var stepInfo=$(this.htmlContainerId).wizardnavigator("selected");return stepInfo;},find:function(aStepId)
{var stepInfo=$(this.htmlContainerId).wizardnavigator("find",aStepId);return stepInfo;}});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.AuthorInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function()
{},open:function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/AuthorInfoActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_authoriz'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_authoriz');var authorizLUT=org.r3.PageManager.lutManager.getLUT(resolvedUrl);var templateParams={widgets:[]};if(authorizLUT&&authorizLUT.aaData&&authorizLUT.aaData.length>0)
{for(var i=0;i<authorizLUT.aaData.length;i++)
{var item=authorizLUT.aaData[i];var authorizTrueChecked=anApplicationDTOAdapter.getPropertyValueAsBoolean(item.dtokey);templateParams.widgets.push({id:item.dtokey,label:item.dtodescr,cardid:item.classifieritemsattr,btrue:authorizTrueChecked?" checked ":"",bfalse:authorizTrueChecked?"":" checked "});}}
var templatedHtml=tmpl(responseData['view'],templateParams);$(this.htmlContainerId).html(templatedHtml);$("#authorinfoform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.application.authorinfoform_form_validationRules,messages:org.r3.jsportlet.sev.application.authorinfoform_form_validationMessages});$('.authorinfoform_authcard_link').unbind().click($.r3Utils.hitch(this,function(e){var currentTarget=$(e.currentTarget);var currentTargetId=currentTarget.attr('id');var cardId=currentTargetId.substring('authorinfoform_'.length);$('#authorinfoform_authcard').cmsCard({"card_tmpl":"cms_tpl_simple","cardid":cardId});}));this._initializeFormFields(anApplicationDTOAdapter);$('#authorinfoform_action_next').unbind();$('#authorinfoform_action_prev').unbind();if(wizardActions&&wizardActions.indexOf('next')>=0)
{$('#authorinfoform_action_next').show().click($.r3Utils.hitch(this,this.onNextClick));}
else $('#authorinfoform_action_next').hide();if(wizardActions&&wizardActions.indexOf('prev')>=0)
{$('#authorinfoform_action_prev').show().click($.r3Utils.hitch(this,this.onPrevClick));}
else $('#authorinfoform_action_prev').hide();$('#authorinfoform_fieldset_message').formmessage({});if(showOnLoad)
this.activate();}),function(d)
{console.error("controller did not load");});},_initializeFormFields:function(anApplicationDTOAdapter)
{$('#authorinfoform_applicationid').html(anApplicationDTOAdapter.dataBean.applicationid);$("#authorinfoform_helmsmanpane .fieldValueCell input[type='text']").prop('disabled',true);$('#authorinfoform_havehelmsman_btrue').unbind().click(function(e){var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$("#authorinfoform_helmsmanpane .fieldValueCell input[type='text']").prop('disabled',false);}
else
{$("#authorinfoform_helmsmanpane .fieldValueCell input[type='text']").prop('disabled',true);$("#authorinfoform_helmsmanpane .fieldValueCell input[type='text']").val("");}});},activate:function()
{this.actionFormManager.showHelp("HLP_SEVAUTHORINFO");this.show();},onNextClick:function()
{this.actionFormManager.updateAuthorInfo("next");},onPrevClick:function()
{this.actionFormManager.updateAuthorInfo("prev");}});$.r3Utils.namespace("org.r3.jsportlet.sev.application",window,function(aNamespace)
{aNamespace.authorinfoform_form_validationRules={company:{required:true},vatnumber:{required:true},legalname:{required:true},legalsurname:{required:true},emailbe:{required:true,email:true},emailbe2:{required:true,email:true,equalTo:'#companyinfoform_emailbe'},countryid:{required:true},state:{required:true},city:{required:true},zipcode:{required:true},address:{required:true},website:{required:false},legalformid:{required:false},registercode:{required:true},counterpartname:{required:false},counterpartsurname:{required:false},mail:{required:false,email:true},mail2:{required:false,email:true,equalTo:'#companyinfoform_mail'},phoneCode1:{required:false},phoneCode2:{required:false},phone1:{required:false},phone2:{required:false}};aNamespace.authorinfoform_form_validationMessages={company:{required:org.r3.message.field_required},vatnumber:{required:org.r3.message.field_required},legalname:{required:org.r3.message.field_required},legalsurname:{required:org.r3.message.field_required},emailbe:{required:org.r3.message.field_required,email:org.r3.message.field_email},emailbe2:{required:org.r3.message.field_required,email:org.r3.message.field_email,equalTo:'Il valore risulta difforme da quello inputato nel campo collegato'},countryid:{required:org.r3.message.field_required},state:{required:org.r3.message.field_required},city:{required:org.r3.message.field_required},zipcode:{required:org.r3.message.field_required},address:{required:org.r3.message.field_required},website:{required:org.r3.message.field_required},legalformid:{required:org.r3.message.field_required},registercode:{required:org.r3.message.field_required},counterpartname:{required:org.r3.message.field_required},counterpartsurname:{required:org.r3.message.field_required},mail:{required:org.r3.message.field_required,email:org.r3.message.field_email},mail2:{required:org.r3.message.field_required,email:org.r3.message.field_email,equalTo:'Il valore risulta difforme da quello inputato nel campo collegato'},phoneCode1:{required:org.r3.message.field_required},phoneCode2:{required:org.r3.message.field_required},phone1:{required:org.r3.message.field_required},phone2:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.BoatInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function()
{},open:function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/BoatInfoActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_mooringloc'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.boatinfoform_otherinfo=='bfalse')
{$('#boatinfoform_otherinfo_framedpanel').hide();}
if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.boatinfoform_sailcloth=='bfalse')
{$('#boatinfoform_sailcloth_framedpanel').hide();}
$("#boatinfoform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.application.boatinfoform_form_validationRules,messages:org.r3.jsportlet.sev.application.boatinfoform_form_validationMessages});this._initializeFormFields(anApplicationDTOAdapter);$('#boatinfoform_mooringloc').unbind().change($.r3Utils.hitch(this,function(e)
{var currentTarget=$(e.currentTarget);var l=currentTarget.val();this._updateMooringlogValidatorFlag(l);}));$('#boatinfoform_action_next').unbind();$('#boatinfoform_action_prev').unbind();if(wizardActions&&wizardActions.indexOf('next')>=0)
{$('#boatinfoform_action_next').show().click($.r3Utils.hitch(this,this.onNextClick));}
else $('#boatinfoform_action_next').hide();if(wizardActions&&wizardActions.indexOf('prev')>=0)
{$('#boatinfoform_action_prev').show().click($.r3Utils.hitch(this,this.onPrevClick));}
else $('#boatinfoform_action_prev').hide();$('#boatinfoform_fieldset_message').formmessage({});if(showOnLoad)
this.activate();}),function(d)
{console.error("controller did not load");});},_initializeFormFields:function(anApplicationDTOAdapter)
{$('#boatinfoform_applicationid').html(anApplicationDTOAdapter.dataBean.applicationid);$('#boatinfoform_plate').val(anApplicationDTOAdapter.dataBean.plate);$('#boatinfoform_yachtname').val(anApplicationDTOAdapter.dataBean.yachtname);$('#boatinfoform_yachtclub').val(anApplicationDTOAdapter.dataBean.yachtclub);$('#boatinfoform_yachttype').val(anApplicationDTOAdapter.dataBean.yachttype);$('#boatinfoform_sailnumber').val(anApplicationDTOAdapter.dataBean.sailnumber);$('#boatinfoform_designer').val(anApplicationDTOAdapter.getPropertyValue('designer',null));$('#boatinfoform_yardship').val(anApplicationDTOAdapter.getPropertyValue('yardship',null));$('#boatinfoform_year').val(anApplicationDTOAdapter.getPropertyValue('year',null));$('#boatinfoform_harbour').val(anApplicationDTOAdapter.getPropertyValue('harbour',null));$('#boatinfoform_mooringspec').val(anApplicationDTOAdapter.getPropertyValue('mooringspec',null));$('#boatinfoform_hullcolor').val(anApplicationDTOAdapter.getPropertyValue('hullcolor',null));$('#boatinfoform_loa').val(anApplicationDTOAdapter.getPropertyValue('loa',null));$('#boatinfoform_lwl').val(anApplicationDTOAdapter.getPropertyValue('lwl',null));$('#boatinfoform_draft').val(anApplicationDTOAdapter.getPropertyValue('draft',null));$('#boatinfoform_beam').val(anApplicationDTOAdapter.getPropertyValue('beam',null));$('#boatinfoform_carbonstruct').val(anApplicationDTOAdapter.getPropertyValue('carbonstruct',null));$('#boatinfoform_otherchanges').val(anApplicationDTOAdapter.getPropertyValue('otherchanges',null));$('#boatinfoform_sailmaterialelse').val(anApplicationDTOAdapter.getPropertyValue('sailmaterialelse',null));var mooringLocation=anApplicationDTOAdapter.dataBean.mooringloc;org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_mooringloc'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#boatinfoform_mooringloc'),"selectedValue":mooringLocation});this._updateMooringlogValidatorFlag(mooringLocation);var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_sailmat');org.r3.PageManager.lutManager.populateRadioGroup({"lutUrl":resolvedUrl,"groupContainer":$('#boatinfoform_sailmaterial_cnt'),"groupId":"boatinfoform_sailmaterial_","groupName":"prop_sailmaterial","value":anApplicationDTOAdapter.getPropertyValue('sailmaterial',null)});var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_boatelse');org.r3.PageManager.lutManager.populateTextBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#boatinfoform_otherfeatures_cnt'),"groupId":"boatinfoform_","groupName":"prop_","getValue":$.r3Utils.hitch(anApplicationDTOAdapter,anApplicationDTOAdapter.getPropertyValue),"template":"<div class='form-group'><label class='col-sm-4 control-label' >{%=o.inputFieldTextLabel%}</label><div class='col-sm-8'><input type='text' class='form-control' name='{%=o.inputFieldTextName%}' id='{%=o.inputFieldTextId%}' maxlength='40' /></div></div>"});var checkContainer=$('#boatinfoform_crociera_cnt');if(checkContainer.length>0)
{resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_crociera');org.r3.PageManager.lutManager.populateCheckBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#boatinfoform_crociera_cnt'),"groupId":"boatinfoform_crociera_","groupName":"prop_crociera","value":anApplicationDTOAdapter.getPropertyValue('crociera',null),"labelSize":380});}},_updateMooringlogValidatorFlag:function(mooringloc_value)
{var field_value='N';var hasRequiredHint=$('#boatinfoform_mooringspec_label').hasClass('fieldRequired');if(mooringloc_value)
{var aLUTItem=org.r3.PageManager.getLUTItem('GET_classifier_r3ea_mooringloc',mooringloc_value);if(aLUTItem&&aLUTItem.classifieritemsattr&&aLUTItem.classifieritemsattr=='required')
field_value='Y';}
if((field_value=='Y'&&!hasRequiredHint)||(field_value=='N'&&hasRequiredHint))
{$('#boatinfoform_mooringspec_label').toggleClass('fieldRequired');}
$('#boatinfoform_mooringspec_validatorflag').val(field_value);},activate:function()
{this.actionFormManager.showHelp("HLP_SEVBOATINFO");this.show();},onNextClick:function()
{this.actionFormManager.updateBoatInfo("next");},onPrevClick:function()
{this.actionFormManager.updateBoatInfo("prev");}});$.r3Utils.namespace("org.r3.jsportlet.sev.application",window,function(aNamespace)
{aNamespace.boatinfoform_form_validationRules={plate:{required:false,maxlength:15,texttransform:'uppercase'},yachtname:{required:true,maxlength:30,texttransform:'uppercase'},yachtclub:{required:true,maxlength:30,texttransform:'uppercase'},yachttype:{required:true,maxlength:30,texttransform:'uppercase'},prop_designer:{required:false,maxlength:30,texttransform:'uppercase'},prop_yardship:{required:false,maxlength:30,texttransform:'uppercase'},prop_year:{required:true},prop_harbour:{required:false,maxlength:30,texttransform:'uppercase'},mooringloc:{required:true},prop_mooringspec:{required:function()
{return $('#boatinfoform_mooringspec_validatorflag').val()=='Y';},maxlength:30,texttransform:'uppercase'},sailnumber:{required:true,sailnumber:true,maxlength:10,texttransform:'uppercase'},prop_hullcolor:{required:false,maxlength:10,texttransform:'uppercase'},prop_loa:{required:false,maxlength:10,number:true},prop_lwl:{required:false,maxlength:10,number:true},prop_draft:{required:false,maxlength:10,number:true},prop_beam:{required:false,maxlength:10,number:true},prop_carbonstruct:{required:false,maxlength:30,texttransform:'uppercase'},prop_otherchanges:{required:false,maxlength:30,texttransform:'uppercase'},prop_sailmaterial:{required:true}};aNamespace.boatinfoform_form_validationMessages={plate:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtclub:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachttype:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_designer:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_year:{required:org.r3.message.field_required},prop_harbour:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_mooringloc:{required:org.r3.message.field_required},prop_mooringspec:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},sailnumber:{required:org.r3.message.field_required,sailnumber:org.r3.message.field_sailnumber,maxlength:org.r3.message.field_maxlength},prop_hullcolor:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_loa:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number},prop_lwl:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number},prop_draft:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number},prop_beam:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number},prop_carbonstruct:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_otherchanges:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_sailmaterial:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.ClassInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function()
{},open:function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/ClassInfoActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.classinfoform_apptype=='bfalse')
{$('#classinfoform_apptype_framedpanel').hide();}
if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.classinfoform_racegroupdecl=='bfalse')
{$('#classinfoform_racegroupdecl_fieldrow').hide();}
if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.classinfoform_grancrocieraorc=='btrue')
{$('#classinfoform_grancrocieraorc_framedpanel').show();}
$("#classinfoform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.application.classinfoform_form_validationRules,messages:org.r3.jsportlet.sev.application.classinfoform_form_validationMessages});this._initializeFormFields(anApplicationDTOAdapter);$('#classinfoform_action_next').unbind();$('#classinfoform_action_prev').unbind();if(wizardActions&&wizardActions.indexOf('next')>=0)
{$('#classinfoform_action_next').show().click($.r3Utils.hitch(this,this.onNextClick));}
else $('#classinfoform_action_next').hide();if(wizardActions&&wizardActions.indexOf('prev')>=0)
{$('#classinfoform_action_prev').show().click($.r3Utils.hitch(this,this.onPrevClick));}
else $('#classinfoform_action_prev').hide();$('#classinfoform_fieldset_message').formmessage({});if(showOnLoad)
this.activate();}),function(d)
{console.error("controller did not load");});},_initializeFormFields:function(anApplicationDTOAdapter)
{$('#classinfoform_applicationid').html(anApplicationDTOAdapter.dataBean.applicationid);$('#classinfoform_insuranceid').val(anApplicationDTOAdapter.getPropertyValue('insuranceid',null));$('#classinfoform_insuranceinstitution').val(anApplicationDTOAdapter.getPropertyValue('insuranceinstitution',null));$('#classinfoform_haveinsurance_btrue').prop('checked',anApplicationDTOAdapter.getPropertyValueAsBoolean('haveinsurance'));$('#classinfoform_haveadvertising_btrue').prop('checked',anApplicationDTOAdapter.getPropertyValueAsBoolean('haveadvertising'));var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_boatgroup');org.r3.PageManager.lutManager.populateRadioGroup({"lutUrl":resolvedUrl,"groupContainer":$('#classinfoform_racegroup_cnt'),"groupId":"classinfoform_racegroup","groupName":"racegroup","value":anApplicationDTOAdapter.dataBean.racegroup,"labelSize":220});var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_boatgroup2');org.r3.PageManager.lutManager.populateCheckBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#classinfoform_racegroupdecl_cnt'),"groupId":"classinfoform_racegroupdecl","groupName":"prop_racegroupdecl","value":anApplicationDTOAdapter.getPropertyValue('racegroupdecl',null),"labelSize":500});var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_ranktype');org.r3.PageManager.lutManager.populateCheckBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#classinfoform_ranktype_cnt'),"groupId":"classinfoform_ranktype","groupName":"prop_ranktype","value":anApplicationDTOAdapter.getPropertyValue('ranktype',null),"labelSize":220});var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_apptype');org.r3.PageManager.lutManager.populateRadioGroup({"lutUrl":resolvedUrl,"groupContainer":$('#classinfoform_apptype_cnt'),"groupId":"classinfoform_apptype","groupName":"apptype","value":anApplicationDTOAdapter.dataBean.apptype,"labelSize":220});var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_orcgranc');org.r3.PageManager.lutManager.populateCheckBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#classinfoform_grancrocieraorc_cnt'),"groupId":"classinfoform_grancrocieraorc","groupName":"prop_grancrocieraorc","value":anApplicationDTOAdapter.getPropertyValue('grancrocieraorc',null),"labelSize":500});var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_ratings');org.r3.PageManager.lutManager.populateCheckBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#classinfoform_rating_cnt'),"groupId":"classinfoform_rating","groupName":"prop_rating","value":anApplicationDTOAdapter.getPropertyValue('rating',null),"labelSize":220});},onDocumentUpload:function()
{this.hide();this.actionFormManager.openCrewInfoDocumentUpload();},activate:function()
{this.actionFormManager.showHelp("HLP_SEVCLASSINFO");this.show();},onNextClick:function()
{this.actionFormManager.updateClassInfo("next");},onPrevClick:function()
{this.actionFormManager.updateClassInfo("prev");}});$.r3Utils.namespace("org.r3.jsportlet.sev.application",window,function(aNamespace)
{aNamespace.classinfoform_form_validationRules={prop_haveadvertising:{required:false},prop_insuranceid:{required:true,maxlength:30,texttransform:'uppercase'},prop_insuranceinstitution:{required:true,maxlength:30,texttransform:'uppercase'},prop_haveinsurance:{required:true},racegroup:{required:true},prop_ranktype:{required:true},apptype:{required:true},prop_rating:{required:true}};aNamespace.classinfoform_form_validationMessages={prop_haveadvertising:{required:org.r3.message.field_required},prop_insuranceid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_insuranceinstitution:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},prop_haveinsurance:{required:org.r3.message.field_required},racegroup:{required:org.r3.message.field_required},prop_ranktype:{required:org.r3.message.field_required},apptype:{required:org.r3.message.field_required},prop_rating:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.CrewInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.crewMemberView=new org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewQueryActionFormView(anHtmlActionFormContainerId,this.actionFormManager,{dataTableId:'SailApplicationCrewMemberQueryActionFormView',showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/CrewInfoActionFormView.html.jsp',gradeLevel:'grade_level1',iDisplayLength:-1,legend:'Equipaggio',dataTableColumns:"cardnumberstatuscode,cardnumber,crewmemberrolecode,crewmembername,renewaldate,medexamexpirationdate,memberstatuscode,numcoviddocs",requiredLUTs:["GET_classifier_r3ea_crewrole","GET_classifier_r3ea_crewstatus"],onSelected:$.r3Utils.hitch(this,function(aCrewMemberDTOAdapter)
{$('#crewinfo_deleteItem').prop('disabled',false);this.crewMemberDetail(aCrewMemberDTOAdapter);}),onDblClick:$.r3Utils.hitch(this,function(aCrewMemberDTOAdapter)
{$('#crewinfo_deleteItem').prop('disabled',true);}),buttons:[{id:'crewinfo_deleteItem',label:'Elimina',disabled:true,onClick:$.r3Utils.hitch(this,this.crewMemberDelete)}],onClearSelection:function()
{$('#crewinfo_deleteItem').prop('disabled',true);},onInitializationComplete:$.r3Utils.hitch(this,function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{$("#crewinfoform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.application.crewinfoform_form_validationRules,messages:org.r3.jsportlet.sev.application.crewinfoform_form_validationMessages});$('#crewinfoform_crewcovidurl_link').unbind().click(function(e){var w=window.open($('#crewinfoform_crewcovidurl').val(),"Document_Window");w.focus();});_self._initializeFormFields(anApplicationDTOAdapter);$('#crewinfoform_action_uloadinfo').unbind().click($.r3Utils.hitch(_self,_self.onDocumentUpload));$('#crewinfoform_action_uloadinfo').prop('disabled',true);$('#crewinfoform_action_save').unbind().click($.r3Utils.hitch(_self,_self.onSaveItem));$('#crewinfoform_action_clear').unbind().click($.r3Utils.hitch(_self,function(e){$('#crewinfoform_form').resetForm();$('#crewinfoform_crewmemberid').val("");}));$('#crewinfoform_action_next').unbind();$('#crewinfoform_action_prev').unbind();if(wizardActions&&wizardActions.indexOf('next')>=0)
{$('#crewinfoform_action_next').show().click($.r3Utils.hitch(_self,_self.onNextClick));}
else $('#crewinfoform_action_next').hide();if(wizardActions&&wizardActions.indexOf('prev')>=0)
{$('#crewinfoform_action_prev').show().click($.r3Utils.hitch(_self,_self.onPrevClick));}
else $('#crewinfoform_action_prev').hide();$('#crewinfoform_fieldset_message').formmessage({});if(showOnLoad)
_self.activate();})});},close:function()
{this.hide();},refresh:function()
{this.crewMemberView.refresh();$("#crewinfoform_form").resetForm();$('#crewinfoform_crewmemberid').val("");$('#crewinfoform_action_uloadinfo').prop('disabled',true);},open:function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_SEV_ConsoleApplication_CrewReport',[anApplicationDTOAdapter.dataBean.applicationid]);this.crewMemberView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});},_initializeFormFields:function(anApplicationDTOAdapter)
{$('#crewinfoform_applicationid').html(anApplicationDTOAdapter.dataBean.applicationid);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_crewrole'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#crewinfoform_crewmemberrole'),"selectedValue":null});org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_crewstatus'),"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#crewinfoform_memberstatus'),"selectedValue":'r3ea_titolare',"useBusinessKey":true});},crewMemberDetail:function(crewMemberDTOAdapter)
{var method="GET";var restUrl=org.r3.PageManager.getRESTUrl('GET_SEV_Application_Crew_Documents',[crewMemberDTOAdapter.dataBean.applicationid,crewMemberDTOAdapter.dataBean.crewmemberid]);org.r3.AjaxUtils.ajaxInvoke(method,restUrl,function(responseData)
{if(responseData.iTotalRecords&&responseData.iTotalRecords>0)
{var u=$.r3Utils.formatDMSUrl4ClientAccess(responseData.aaData[0].documenturl);console.log("covidUrl: ",u);$('#crewinfoform_crewcovidurl_link').html(u);$('#crewinfoform_crewcovidurl').val(u);}
else{$('#crewinfoform_crewcovidurl').val('');$('#crewinfoform_crewcovidurl_link').html('');}
$('#crewinfoform_crewmemberid').val(crewMemberDTOAdapter.dataBean.crewmemberid);$('#crewinfoform_crewcardnumber').val(crewMemberDTOAdapter.dataBean.cardnumber);$('#crewinfoform_crewmembername').val(crewMemberDTOAdapter.dataBean.crewmembername);$('#crewinfoform_crewmemberrole').val(crewMemberDTOAdapter.dataBean.crewmemberrolecode);$('#crewinfoform_memberstatus').val(crewMemberDTOAdapter.dataBean.memberstatuscode);$('#crewinfoform_crewweight').val(crewMemberDTOAdapter.dataBean.weight);$('#crewinfoform_action_uloadinfo').prop('disabled',false);});},activate:function()
{this.actionFormManager.showHelp("HLP_SEVCREWINFO");this.show();},onNextClick:function()
{this.actionFormManager.updateCrewInfo("next");},onPrevClick:function()
{this.actionFormManager.updateCrewInfo("prev");},onSaveItem:function()
{this.actionFormManager.saveCrewMember($('#crewinfoform_crewmemberid').val());},onDocumentUpload:function()
{this.hide();this.actionFormManager.openCrewInfoDocumentUpload($('#crewinfoform_crewmemberid').val(),$('#crewinfoform_crewcardnumber').val(),$('#crewinfoform_crewmembername').val());},crewMemberDelete:function()
{if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var selectedItem=this.crewMemberView.fnGetSelectedDataBean();this.actionFormManager.deleteCrewMember(selectedItem);}}});$.r3Utils.namespace("org.r3.jsportlet.sev.application",window,function(aNamespace)
{aNamespace.crewinfoform_form_validationRules={crewcardnumber:{required:true,maxlength:8,digits:true},crewmembername:{required:true,maxlength:80,texttransform:'uppercase'},crewmemberrole:{required:true},crewweight:{required:true,maxlength:10,number:true},memberstatus:{required:true}};aNamespace.crewinfoform_form_validationMessages={crewcardnumber:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewmembername:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewmemberrole:{required:org.r3.message.field_required},crewweight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number},memberstatus:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.DocInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.documentView=new org.r3.db.sailevent.appdocument.SailApplicationDocumentQueryActionFormView(anHtmlActionFormContainerId,this.actionFormManager,{dataTableId:'SailApplicationDocumentQueryActionFormView',showTemplateOnOpen:false,htmlTemplateUrl:org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/DocInfoActionFormView.html.jsp',iDisplayLength:-1,gradeLevel:'grade_level1',legend:'Equipaggio',dataTableColumns:"documentid,documenttypecode,documentname",requiredLUTs:["GET_classifier_sys_recstatus","GET_classifier_r3ea_doctype"],onSelected:$.r3Utils.hitch(this,function(aDocumentDTOAdapter)
{$('#docinfo_deleteItem').prop('disabled',false);}),onDblClick:$.r3Utils.hitch(this,function(aDocumentDTOAdapter)
{org.r3.PageManager.viewDocument(aDocumentDTOAdapter.dataBean.documenturl);$('#docinfo_deleteItem').prop('disabled',true);}),buttons:[{id:'docinfo_uploadItem',label:'Nuovo',disabled:false,onClick:$.r3Utils.hitch(this,this.onDocumentUpload)},{id:'docinfo_deleteItem',label:'Elimina',disabled:true,onClick:$.r3Utils.hitch(this,this.onDocumentDelete)}],onClearSelection:function()
{$('#docinfo_deleteItem').prop('disabled',true);},onInitializationComplete:$.r3Utils.hitch(this,function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{$("#docinfoform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.application.docinfoform_form_validationRules,messages:org.r3.jsportlet.sev.application.docinfoform_form_validationMessages});_self._initializeFormFields(anApplicationDTOAdapter);$('#docinfoform_action_next').unbind();$('#docinfoform_action_prev').unbind();if(wizardActions&&wizardActions.indexOf('next')>=0)
{$('#docinfoform_action_next').show().click($.r3Utils.hitch(_self,_self.onNextClick));}
else $('#docinfoform_action_next').hide();if(wizardActions&&wizardActions.indexOf('prev')>=0)
{$('#docinfoform_action_prev').show().click($.r3Utils.hitch(_self,_self.onPrevClick));}
else $('#docinfoform_action_prev').hide();$('#docinfoform_fieldset_message').formmessage({});if(showOnLoad)
_self.activate();})});},close:function()
{this.hide();},refresh:function()
{this.documentView.refresh();},open:function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_SEV_Application_Documents',[anApplicationDTOAdapter.dataBean.applicationid]);this.documentView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});},_initializeFormFields:function(anApplicationDTOAdapter)
{$('#docinfoform_applicationid').html(anApplicationDTOAdapter.dataBean.applicationid);},activate:function()
{this.actionFormManager.showHelp("HLP_SEVDOCINFO");this.show();},onNextClick:function()
{this.actionFormManager.updateDocInfo("next");},onPrevClick:function()
{this.actionFormManager.updateDocInfo("prev");},onDocumentUpload:function()
{this.hide();this.actionFormManager.openDocumentUpload();},onDocumentDelete:function(aDocumentDTOAdapter)
{if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var selectedItem=this.documentView.fnGetSelectedDataBean();this.actionFormManager.deleteDocument(selectedItem);}}});$.r3Utils.namespace("org.r3.jsportlet.sev.application",window,function(aNamespace)
{aNamespace.docinfoform_form_validationRules={company:{required:true},vatnumber:{required:true},legalname:{required:true},legalsurname:{required:true},emailbe:{required:true,email:true},emailbe2:{required:true,email:true,equalTo:'#companyinfoform_emailbe'},countryid:{required:true},state:{required:true},city:{required:true},zipcode:{required:true},address:{required:true},website:{required:false},legalformid:{required:false},registercode:{required:true},counterpartname:{required:false},counterpartsurname:{required:false},mail:{required:false,email:true},mail2:{required:false,email:true,equalTo:'#companyinfoform_mail'},phoneCode1:{required:false},phoneCode2:{required:false},phone1:{required:false},phone2:{required:false}};aNamespace.docinfoform_form_validationMessages={company:{required:org.r3.message.field_required},vatnumber:{required:org.r3.message.field_required},legalname:{required:org.r3.message.field_required},legalsurname:{required:org.r3.message.field_required},emailbe:{required:org.r3.message.field_required,email:org.r3.message.field_email},emailbe2:{required:org.r3.message.field_required,email:org.r3.message.field_email,equalTo:'Il valore risulta difforme da quello inputato nel campo collegato'},countryid:{required:org.r3.message.field_required},state:{required:org.r3.message.field_required},city:{required:org.r3.message.field_required},zipcode:{required:org.r3.message.field_required},address:{required:org.r3.message.field_required},website:{required:org.r3.message.field_required},legalformid:{required:org.r3.message.field_required},registercode:{required:org.r3.message.field_required},counterpartname:{required:org.r3.message.field_required},counterpartsurname:{required:org.r3.message.field_required},mail:{required:org.r3.message.field_required,email:org.r3.message.field_email},mail2:{required:org.r3.message.field_required,email:org.r3.message.field_email,equalTo:'Il valore risulta difforme da quello inputato nel campo collegato'},phoneCode1:{required:org.r3.message.field_required},phoneCode2:{required:org.r3.message.field_required},phone1:{required:org.r3.message.field_required},phone2:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.OwnerInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function()
{},open:function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/OwnerInfoActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$("#ownerinfoform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.application.ownerinfoform_form_validationRules,messages:org.r3.jsportlet.sev.application.ownerinfoform_form_validationMessages});this._initializeFormFields(anApplicationDTOAdapter);$('#ownerinfoform_action_next').unbind();$('#ownerinfoform_action_prev').unbind();if(wizardActions&&wizardActions.indexOf('next')>=0)
{$('#ownerinfoform_action_next').show().click($.r3Utils.hitch(this,this.onNextClick));}
else $('#ownerinfoform_action_next').hide();if(wizardActions&&wizardActions.indexOf('prev')>=0)
{$('#ownerinfoform_action_prev').show().click($.r3Utils.hitch(this,this.onPrevClick));}
else $('#ownerinfoform_action_prev').hide();$('#ownerinfoform_fieldset_message').formmessage({});if(showOnLoad)
this.activate();}),function(d)
{console.error("controller did not load");});},_initializeFormFields:function(anApplicationDTOAdapter)
{$('#ownerinfoform_applicationid').html(anApplicationDTOAdapter.dataBean.applicationid);if(anApplicationDTOAdapter.dataBean.owner)
{$('#ownerinfoform_ownerfirstname').val(anApplicationDTOAdapter.dataBean.owner.dataBean.firstname);$('#ownerinfoform_ownerlastname').val(anApplicationDTOAdapter.dataBean.owner.dataBean.lastname);$('#ownerinfoform_owneremail').val(anApplicationDTOAdapter.dataBean.owner.dataBean.email);$('#ownerinfoform_ownercellphone').val(anApplicationDTOAdapter.dataBean.owner.dataBean.cellphone);$('#ownerinfoform_ownerphone').val(anApplicationDTOAdapter.dataBean.owner.dataBean.phone);$('#ownerinfoform_owneraddress').val(anApplicationDTOAdapter.dataBean.owner.dataBean.address);$('#ownerinfoform_ownertown').val(anApplicationDTOAdapter.dataBean.owner.dataBean.town);$('#ownerinfoform_ownerzipcode').val(anApplicationDTOAdapter.dataBean.owner.dataBean.zipcode);}
if(anApplicationDTOAdapter.getPropertyValueAsBoolean('havehelmsman'))
{$('#ownerinfoform_havehelmsman_btrue').prop('checked',true);if(anApplicationDTOAdapter.dataBean.helmsman)
{$('#ownerinfoform_helmsmanfirstname').val(anApplicationDTOAdapter.dataBean.helmsman.dataBean.firstname);$('#ownerinfoform_helmsmanlastname').val(anApplicationDTOAdapter.dataBean.helmsman.dataBean.lastname);$('#ownerinfoform_helmsmanemail').val(anApplicationDTOAdapter.dataBean.helmsman.dataBean.email);$('#ownerinfoform_helmsmancellphone').val(anApplicationDTOAdapter.dataBean.helmsman.dataBean.cellphone);$('#ownerinfoform_helmsmanphone').val(anApplicationDTOAdapter.dataBean.helmsman.dataBean.phone);$('#ownerinfoform_helmsmanaddress').val(anApplicationDTOAdapter.dataBean.helmsman.dataBean.address);$('#ownerinfoform_helmsmantown').val(anApplicationDTOAdapter.dataBean.helmsman.dataBean.town);$('#ownerinfoform_helmsmanzipcode').val(anApplicationDTOAdapter.dataBean.helmsman.dataBean.zipcode);}}
else
{$("#ownerinfoform_helmsmanpane .form-group input[type='text']").prop('disabled',true);}
$('#ownerinfoform_havehelmsman_btrue').unbind().click(function(e){var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$("#ownerinfoform_helmsmanpane .form-group input[type='text']").prop('disabled',false);}
else
{$("#ownerinfoform_helmsmanpane .form-group input[type='text']").prop('disabled',true);$("#ownerinfoform_helmsmanpane .form-group input[type='text']").val("");}});},activate:function()
{this.actionFormManager.showHelp("HLP_SEVOWNERINFO");this.show();},onNextClick:function()
{this.actionFormManager.updateOwnerInfo("next");},onPrevClick:function()
{this.actionFormManager.updateOwnerInfo("prev");}});$.r3Utils.namespace("org.r3.jsportlet.sev.application",window,function(aNamespace)
{aNamespace.ownerinfoform_form_validationRules={ownerfirstname:{required:true,maxlength:30,texttransform:'uppercase'},ownerlastname:{required:true,maxlength:30,texttransform:'uppercase'},owneremail:{required:true,maxlength:50,email:true},ownercellphone:{required:true,maxlength:15,digits:true},ownerphone:{required:true,maxlength:15,digits:true},owneraddress:{required:true,maxlength:30,texttransform:'uppercase'},ownertown:{required:true,maxlength:30,texttransform:'uppercase'},ownerzipcode:{required:true,maxlength:5,digits:true},prop_havehelmsman:{required:false},helmsmanfirstname:{required:true,maxlength:30,texttransform:'uppercase'},helmsmanlastname:{required:true,maxlength:30,texttransform:'uppercase'},helmsmanemail:{required:true,maxlength:50,email:true},helmsmancellphone:{required:true,maxlength:15,digits:true},helmsmanphone:{required:true,maxlength:15,digits:true},helmsmanaddress:{required:true,maxlength:30,texttransform:'uppercase'},helmsmantown:{required:true,maxlength:30,texttransform:'uppercase'},helmsmanzipcode:{required:true,maxlength:5,digits:true}};aNamespace.ownerinfoform_form_validationMessages={ownerfirstname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},ownerlastname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},owneremail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email},ownercellphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},ownerphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},owneraddress:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},ownertown:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},ownerzipcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},prop_havehelmsman:{required:org.r3.message.field_required},helmsmanfirstname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},helmsmanlastname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},helmsmanemail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email},helmsmancellphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},helmsmanphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},helmsmanaddress:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},helmsmantown:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},helmsmanzipcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits}};});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.PayInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function()
{},open:function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/PayInfoActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this._initializeFormFields(anApplicationDTOAdapter);$('#payinfoform_action_next').unbind();$('#payinfoform_action_prev').unbind();if(wizardActions&&wizardActions.indexOf('next')>=0)
{$('#payinfoform_action_next').show().click($.r3Utils.hitch(this,this.onNextClick));}
else $('#payinfoform_action_next').hide();if(wizardActions&&wizardActions.indexOf('prev')>=0)
{$('#payinfoform_action_prev').show().click($.r3Utils.hitch(this,this.onPrevClick));}
else $('#payinfoform_action_prev').hide();$('#payinfoform_fieldset_message').formmessage({});$('#payinfoform_card').cmsCard({card_tmpl:"cms_tpl_simple",cardid:"INFO_REAPAYINFO"});if(showOnLoad)
this.activate();}),function(d)
{console.error("controller did not load");});},_initializeFormFields:function(anApplicationDTOAdapter)
{$('#payinfoform_applicationid').html(anApplicationDTOAdapter.dataBean.applicationid);},activate:function()
{this.actionFormManager.showHelp("HLP_SEVPAYINFO");this.show();},onNextClick:function()
{this.actionFormManager.updatePayInfo("next");},onPrevClick:function()
{this.actionFormManager.updatePayInfo("prev");}});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.SummaryInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function()
{},open:function(anApplicationDTOAdapter,wizardActions,showOnLoad)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/SummaryInfoActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this._initializeFormFields(anApplicationDTOAdapter);$('#summaryinfoform_action_next').unbind();$('#summaryinfoform_action_prev').unbind();if(wizardActions&&wizardActions.indexOf('next')>=0)
{$('#summaryinfoform_action_next').show().click($.r3Utils.hitch(this,this.onNextClick));}
else $('#summaryinfoform_action_next').hide();if(wizardActions&&wizardActions.indexOf('prev')>=0)
{$('#summaryinfoform_action_prev').show().click($.r3Utils.hitch(this,this.onPrevClick));}
else $('#summaryinfoform_action_prev').hide();$('#summaryinfoform_fieldset_message').formmessage({});var cardId="INFO_REASUMMARYCOMMIT";$('#summaryinfoform_action_end').unbind().click($.r3Utils.hitch(this,this.onEnd));$('#summaryinfoform_action_view').unbind().click($.r3Utils.hitch(this,this.onViewApplication));$('#summaryinfoform_action_commit').unbind().click($.r3Utils.hitch(this,this.onCommitApplication));if(anApplicationDTOAdapter.isDraft()||anApplicationDTOAdapter.isEmpty())
{cardId="INFO_REASUMMARYDRAFT";$('#summaryinfoform_action_commit').show();}
else $('#summaryinfoform_action_commit').hide();$('#summaryinfoform_card').cmsCard({"card_tmpl":"cms_tpl_simple","cardid":cardId});if(showOnLoad)
this.activate();}),function(d)
{console.error("controller did not load");});},_initializeFormFields:function(anApplicationDTOAdapter)
{$('#summaryinfoform_applicationid').html(anApplicationDTOAdapter.dataBean.applicationid);},activate:function()
{this.actionFormManager.showHelp("HLP_SEVSUMMARYINFO");this.show();},onEnd:function(e)
{this.actionFormManager.endWizard();},onNextClick:function()
{this.actionFormManager.updateSummaryInfo("next");},onPrevClick:function()
{this.actionFormManager.updateSummaryInfo("prev");},onViewApplication:function()
{this.actionFormManager.viewApplication();},onCommitApplication:function()
{if(org.r3.PageManager.confirmation("org.r3.jsportlet.sev.application.message.commitApplication"))
{this.actionFormManager.commitApplication($.r3Utils.hitch(this,this.onCommitApplicationResponse),this.onAjaxFailResponse);}},onCommitApplicationResponse:function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('summaryinfoform_fieldset_message');if(restDto.isOk())
{$('#summaryinfoform_action_commit').hide();$('#summaryinfoform_action_prev').hide();}}},onAjaxFailResponse:function(jqXHR,timeout,message)
{$('#summaryinfoform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.UploadCrewInfoFileActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.uploadedFiles=[];},close:function()
{this.hide();},isPendingUpload:function()
{if(this.uploadedFiles&&this.uploadedFiles.length)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(this.uploadedFiles[i].pending)
return true;}
return false;},_clearFilenamesQueue:function()
{this.uploadedFiles.length=0;},_findEnqueuedFilename:function(aFileName)
{if(this.uploadedFiles&&this.uploadedFiles.length&&aFileName)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(aFileName==this.uploadedFiles[i].fname)
return i;}
return-1;},_enqueueFilename4Uploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Enqueue: "+aFileName);this.uploadedFiles.push({fname:aFileName,pending:true});}},_markEnqueuedFileAsCompleted:function(aFileName)
{if(aFileName)
{console.info("Trying to Mark File as Completed: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Mark: "+aFileName);this.uploadedFiles[fileNdx].pending=false;}}},_dequeueFilenameFromUploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Dequeue: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Dequeuing: "+aFileName);this.uploadedFiles.splice(fileNdx,1);}}},open:function(anApplicationDTOAdapter,crewId,crewCardNumber,crewName)
{org.r3.PageManager.wait("org.r3.message.waiting");this._clearFilenamesQueue();var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/UploadCrewInfoFileActionFormView.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var this_actionFormView=this;org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$("#crewinfodocuploadform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.application.crewinfodocuploadform_form_validationRules,messages:org.r3.jsportlet.sev.application.crewinfodocuploadform_form_validationMessages});$('#crewinfodocuploadform_action_back').button().unbind().click($.r3Utils.hitch(this,function(e){this.hide();this.actionFormManager.closeCrewInfoDocumentUpload();e.preventDefault();}));$('#crewinfodocuploadform_crewmemberid').val(crewId);$('#crewinfodocuploadform_crewname').html(crewName);$('#crewinfodocuploadform_crewcardnumber').html(crewCardNumber);var aRestUrl=org.r3.PageManager.getRESTUrl('POST_SEV_Application_File',[anApplicationDTOAdapter.dataBean.applicationid]);if(r3_IE)
aRestUrl=org.r3.PageManager.getRESTUrl('POST_SEV_Application_File_IE',[anApplicationDTOAdapter.dataBean.applicationid]);var fileTypes=['png','jpg','jpeg','pdf','html'];var acceptedType='png';if(fileTypes&&fileTypes.length>0)
{if(fileTypes.length==1)
acceptedType=fileTypes[0];else
{acceptedType='';for(var i=0;i<fileTypes.length;i++)
{if(i>0)
acceptedType+='|';acceptedType=acceptedType+fileTypes[i];}}}
var rexp=new RegExp(".+\\.("+acceptedType+")$","i");$('#crewinfodocuploadform_form').fileupload({"acceptFileTypes":rexp,"url":aRestUrl,"dataType":'json',"sequentialUploads":true,"formAcceptCharset":"utf-8","submit":function(e,data)
{console.info("Submitting: ",e,data,data.files[0].name);if(!$("#crewinfodocuploadform_form").valid())
return false;return true;},"failed":function(e,data)
{console.info("Failing: ",e,data);if(data.files&&data.files.valid)
{console.info("Should Dequeue: ",data.files.valid,data.files[0].name);this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
return true;},"completed":function(e,data)
{console.info("Done: ",e,data);if(data.result&&data.result.files&&data.result.files[0].error)
{console.info("Done: is Error? "+data.result.files[0].error);this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
else this_actionFormView._markEnqueuedFileAsCompleted(data.files[0].name);return true;}});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.application",window,function(aNamespace)
{aNamespace.crewinfodocuploadform_form_validationRules={documenttype:{required:true}};aNamespace.crewinfodocuploadform_form_validationMessages={documenttype:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.sev.application");org.r3.jsportlet.sev.application.UploadFileActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.uploadedFiles=[];},close:function()
{this.hide();},isPendingUpload:function()
{if(this.uploadedFiles&&this.uploadedFiles.length)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(this.uploadedFiles[i].pending)
return true;}
return false;},_clearFilenamesQueue:function()
{this.uploadedFiles.length=0;},_findEnqueuedFilename:function(aFileName)
{if(this.uploadedFiles&&this.uploadedFiles.length&&aFileName)
{for(var i=0;i<this.uploadedFiles.length;i++)
if(aFileName==this.uploadedFiles[i].fname)
return i;}
return-1;},_enqueueFilename4Uploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Enqueue: "+aFileName);this.uploadedFiles.push({fname:aFileName,pending:true});}},_markEnqueuedFileAsCompleted:function(aFileName)
{if(aFileName)
{console.info("Trying to Mark File as Completed: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Mark: "+aFileName);this.uploadedFiles[fileNdx].pending=false;}}},_dequeueFilenameFromUploading:function(aFileName)
{if(aFileName)
{console.info("Trying to Dequeue: "+aFileName);var fileNdx=this._findEnqueuedFilename(aFileName);if(fileNdx>=0)
{console.info("Dequeuing: "+aFileName);this.uploadedFiles.splice(fileNdx,1);}}},open:function(anApplicationDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");this._clearFilenamesQueue();var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/application/UploadFileActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var this_actionFormView=this;org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_doctype'),"selectWidget":$('#docuploadform_documenttype')});$("#docuploadform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.application.docuploadform_form_validationRules,messages:org.r3.jsportlet.sev.application.docuploadform_form_validationMessages});$('#docuploadform_action_back').button().unbind().click($.r3Utils.hitch(this,function(e){this.hide();this.actionFormManager.closeDocumentUpload();e.preventDefault();}));var aRestUrl=org.r3.PageManager.getRESTUrl('POST_SEV_Application_File',[anApplicationDTOAdapter.dataBean.applicationid]);if(r3_IE)
aRestUrl=org.r3.PageManager.getRESTUrl('POST_SEV_Application_File_IE',[anApplicationDTOAdapter.dataBean.applicationid]);var fileTypes=['png','jpg','jpeg','pdf','html'];var acceptedType='png';if(fileTypes&&fileTypes.length>0)
{if(fileTypes.length==1)
acceptedType=fileTypes[0];else
{acceptedType='';for(var i=0;i<fileTypes.length;i++)
{if(i>0)
acceptedType+='|';acceptedType=acceptedType+fileTypes[i];}}}
var rexp=new RegExp(".+\\.("+acceptedType+")$","i");$('#docuploadform_form').fileupload({"acceptFileTypes":rexp,"url":aRestUrl,"dataType":'json',"sequentialUploads":true,"formAcceptCharset":"utf-8","submit":function(e,data)
{console.info("Submitting: ",e,data,data.files[0].name);if(!$("#docuploadform_form").valid())
return false;return true;},"failed":function(e,data)
{console.info("Failing: ",e,data);if(data.files&&data.files.valid)
{console.info("Should Dequeue: ",data.files.valid,data.files[0].name);this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
return true;},"completed":function(e,data)
{console.info("Done: ",e,data);if(data.result&&data.result.files&&data.result.files[0].error)
{console.info("Done: is Error? "+data.result.files[0].error);this_actionFormView._dequeueFilenameFromUploading(data.files[0].name);}
else this_actionFormView._markEnqueuedFileAsCompleted(data.files[0].name);return true;}});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.application",window,function(aNamespace)
{aNamespace.docuploadform_form_validationRules={documenttype:{required:true}};aNamespace.docuploadform_form_validationMessages={documenttype:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.sev.appviewer");org.r3.jsportlet.sev.appviewer.AppViewerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.appviewer.AppViewerActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(applicationId)
{this.detailView.open(applicationId);}});$.r3Utils.namespace("org.r3.jsportlet.sev.appviewer");org.r3.jsportlet.sev.appviewer.AppViewerActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(applicationId)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/appviewer/AppViewerActionForm.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"app_content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SEV_Application_Detail',[applicationId]),dataType:"json"});networkRequestsQueue.push({id:"app_crew",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SEV_Application_Crew',[applicationId]),dataType:"json"});networkRequestsQueue.push({id:"app_docs",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SEV_Application_Documents',[applicationId]),dataType:"json"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_completion'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_boatgroup'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_boatgroup2'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_ranktype'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_apptype'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_sailmat'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_authoriz'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_crewrole'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_mooringloc'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_doctype'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_admincks'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_orcgranc'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_boatelse'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_crewstatus'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var applicationDTOAdapter=responseData["app_content"];if(applicationDTOAdapter)
{applicationDTOAdapter=new org.r3.db.sailevent.application.SailApplicationDTOAdapter(applicationDTOAdapter);}
var appCrewDataTableAdapter=responseData["app_crew"];if(appCrewDataTableAdapter)
{appCrewDataTableAdapter=new org.r3.db.DTOTableAdapter(appCrewDataTableAdapter,function(aRowDataBean){return new org.r3.db.sailevent.appcrewmember.SailApplicationCrewMemberDTOAdapter(aRowDataBean);});}
var appDocumentsDataTableAdapter=responseData["app_docs"];if(appDocumentsDataTableAdapter)
{appDocumentsDataTableAdapter=new org.r3.db.DTOTableAdapter(appDocumentsDataTableAdapter,function(aRowDataBean){return new org.r3.db.sailevent.appdocument.SailApplicationDocumentDTOAdapter(aRowDataBean);});}
var templatedHtml=tmpl(responseData['view'],{"appDTO":applicationDTOAdapter,"crewDTO":appCrewDataTableAdapter,"docsDTO":appDocumentsDataTableAdapter});$(this.htmlContainerId).html(templatedHtml);if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.boatinfoform_otherinfo=='bfalse')
{$('#appviewer_boatinfoform_otherinfo_framedpanel').hide();}
if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.boatinfoform_sailcloth=='bfalse')
{$('#appviewer_boatinfoform_sailcloth_framedpanel').hide();}
if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.classinfoform_apptype=='bfalse')
{$('#appviewer_classinfoform_apptype_framedpanel').hide();}
if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.classinfoform_grancrocieraorc=='bfalse')
{$('#appviewer_classinfoform_grancrocieraorc_framedpanel').hide();}
if(org.r3.SiteConstants.sailEventApplication&&org.r3.SiteConstants.sailEventApplication.classinfoform_racegroupdecl=='bfalse')
{$('#appviewer_classinfoform_racegroupdecl_checkboxgroup').hide();}
$('#canvas_report_title').html("Domanda di Iscrizione: "+applicationId);var resolvedUrl=org.r3.PageManager.getRESTUrl('GET_classifier_r3ea_authoriz');var theLUT=org.r3.PageManager.lutManager.getLUT(resolvedUrl);if(theLUT.aaData&&theLUT.iTotalRecords)
{$.each(theLUT.aaData,function(index,item)
{$('#appviewer_'+item.classifieritemsattr).cmsCard({card_tmpl:"cms_tpl_simple","cardid":item.classifieritemsattr});});}
this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.crewreportviewer");org.r3.jsportlet.sev.crewreportviewer.CrewReportViewerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.crewreportviewer.CrewReportViewerActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.sev.crewreportviewer");org.r3.jsportlet.sev.crewreportviewer.CrewReportViewerActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(applicationId)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/crewreportviewer/CrewReportViewerActionForm.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"report_content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SEV_ConsoleCrewReport'),dataType:"json"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_crewrole'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_crewstatus'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_fivcardstatus'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var crewReportTableAdapter=responseData["report_content"];if(crewReportTableAdapter)
{crewReportTableAdapter=new org.r3.db.DTOTableAdapter(crewReportTableAdapter,function(aRowDataBean){return new org.r3.db.sailevent.appcrewmemberview.SailApplicationCrewMemberViewSummaryDTOAdapter(aRowDataBean);});}
var templatedHtml=tmpl(responseData['view'],{"crewReport":crewReportTableAdapter});$(this.htmlContainerId).html(templatedHtml);$('#crewreportviewer_action_print').unbind().click(function(e)
{window.print();});$('#crewreportviewer_action_back').unbind().click(function(e)
{_self.close();org.r3.PageManager.closeFullScreenLayout();});$('#canvas_report_title').html("Rapporto Flotta");this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.entrylist");org.r3.jsportlet.sev.entrylist.EntryListActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.sailevent.entrylist.SailEntryListQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'SailEntryListQueryActionFormView',gradeLevel:'grade_level3',legend:'Elenco Iscritti',dataTableSource:'GET_SEV_EntryList',layout:'fullWidth',iDisplayLength:-1,sortable:true,htmlTemplateUrl:org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/entrylist/EntryListActionFormViewTemplate.html.jsp',dataTableColumns:"boaticon,sailnumber;sort,yachtname,yachttype,yachtclub,ownerlastname,racegroup_raceclass,accepted",requiredLUTs:["GET_classifier_sys_recstatus","GET_classifier_r3ea_raceclass","GET_classifier_r3ea_boatgroup"],onSelected:null,onDblClick:$.r3Utils.hitch(this,function(){}),onClearSelection:null,searchInfo:{widget:'select',widgetInitialization:{url:org.r3.PageManager.getRESTUrl('LUT_SailEventRaceGroups'),blankOptionText:org.r3.PageManager.getMessageFromDict("org.r3.jsportlet.sev.entrylist.message.any")},label:org.r3.sev.entrylist.message.search_racegroup,validationRules:org.r3.jsportlet.sev.entrylist.SailEntryListQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.jsportlet.sev.entrylist.SailEntryListQueryActionFormView_filter_searchform_validationMessages,autoStart:true},onInitializationComplete:$.r3Utils.hitch(this,function()
{$('#entrylist_action_showboaticons').prop('checked',false);$('#entrylist_action_showboaticons').unbind().click($.r3Utils.hitch(this,this.onShowIcons));}),onServerData:function(items,data)
{if($('#entrylist_action_showboaticons').prop('checked'))
$("a[rel='lightbox-entrylist']").slimbox();}});},onShowIcons:function(evt)
{if(!$('#entrylist_action_showboaticons').prop('checked'))
$("a[rel='lightbox-entrylist']").unbind("click");this.listView.refresh();},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},detailDocument:function(aDTOAdapter)
{this.listView.hide();this.pageManager.detailDocument(aDTOAdapter);}});$.r3Utils.namespace("org.r3.jsportlet.sev.entrylist",window,function(aNamespace)
{aNamespace.SailEntryListQueryActionFormView_filter_searchform_validationRules={filter_item:{required:false}};aNamespace.SailEntryListQueryActionFormView_filter_searchform_validationMessages={filter_item:{required:"Inserire un valore per la ricerca"}};});$.r3Utils.namespace("org.r3.jsportlet.sev.homecalendar");org.r3.jsportlet.sev.homecalendar.HomeCalendarActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homecalendar.HomeCalendarActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.sev.homecalendar");org.r3.jsportlet.sev.homecalendar.HomeCalendarActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homecalendar/HomeCalendarActionForm.html.jsp'),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_Agenda',[org.r3.Constants.site]));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var restUrl=org.r3.PageManager.getRESTUrl('LUT_Agenda',[org.r3.Constants.site]);var theLut=org.r3.PageManager.lutManager.getLUT(restUrl);var calendarAdapterArray=[];if(theLut&&theLut.aaData&&theLut.aaData.length)
{for(var i=0;i<theLut.aaData.length;i++)
{calendarAdapterArray.push(new org.r3.db.agenda.agendaentry.AgendaEntryDTOAdapter(theLut.aaData[i]));}}
var templatedHtml=tmpl(responseData['view'],{"calendarData":calendarAdapterArray});$(this.htmlContainerId).html(templatedHtml);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.homecard");org.r3.jsportlet.sev.homecard.HomeCardActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aCardId,aTemplateName)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homecard.HomeCardActionFormView(aDetailViewContainerId,this);this.cardId=(aCardId)?aCardId:"__NOCARDID_PROVIDED__";this.templateName=(aTemplateName)?aTemplateName:"cms_tpl_simple";},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open(this.cardId,this.templateName);}});$.r3Utils.namespace("org.r3.jsportlet.sev.homecard");org.r3.jsportlet.sev.homecard.HomeCardActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.documentListDivLocator=anHtmlActionFormContainerId+" .cms_card_canvas";},close:function()
{this.hide();},open:function(aCardId,aTemplateName)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homecard/HomeCardActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$(this.documentListDivLocator).cmsCard({card_tmpl:aTemplateName,cardid:aCardId,onComplete:function(aCardDTOAdapter,numberOfItems)
{if(numberOfItems)
{var listOfGalleryImages=aCardDTOAdapter.getListOfPropertiesByPropertyrole('cms_img_gallery');if(listOfGalleryImages&&listOfGalleryImages.length)
{_self.cardGalleryView=new org.r3.jsportlet.cms.CMSPage_GalleryView(_self.documentListDivLocator+' #'+aCardId+'_cms_gallery_canvas',aCardId,listOfGalleryImages,25);_self.cardGalleryView.open();}}}});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.homecomunicati");org.r3.jsportlet.sev.homecomunicati.HomeComunicatiActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homecomunicati.HomeComunicatiActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.sev.homecomunicati");org.r3.jsportlet.sev.homecomunicati.HomeComunicatiActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homecomunicati/HomeComunicatiActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.homeentrylist");org.r3.jsportlet.sev.homeentrylist.HomeEntryListActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homeentrylist.HomeEntryListActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},editApplication:function(applicationId)
{var targetUrl=org.r3.Constants.getStrutsActionContext()+'/org/r3/sev/application/editMyApplication.do?objid='+applicationId;org.r3.PageManager.gotoPage(targetUrl);}});$.r3Utils.namespace("org.r3.jsportlet.sev.homeentrylist");org.r3.jsportlet.sev.homeentrylist.HomeEntryListActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];if(org.r3.SiteConstants&&org.r3.SiteConstants.home&&org.r3.SiteConstants.home.entrylist&&org.r3.SiteConstants.home.entrylist.ui=='wall')
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homeentrylist/HomeEntryListActionForm_BoatFreeWall.html.jsp'),dataType:"html"});}
else
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homeentrylist/HomeEntryListActionForm.html.jsp'),dataType:"html"});}
var restUrl=org.r3.PageManager.getRESTUrl('GET_SEV_HomeEntryList');networkRequestsQueue.push({id:"view_apps",type:"Get",url:restUrl,dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var applicationsDataTableAdapter=null;applicationsDataTableAdapter=responseData['view_apps'];if(applicationsDataTableAdapter)
{applicationsDataTableAdapter=new org.r3.db.DTOTableAdapter(applicationsDataTableAdapter,function(aRowDataBean){return new org.r3.db.sailevent.homeentrylist.SailHomeEntryListDTOAdapter(aRowDataBean);});}
var templatedHtml=tmpl(responseData['view'],{"userid":org.r3.PageManager.userInfo.dataBean.userid,"apps":applicationsDataTableAdapter});$(this.htmlContainerId).html(templatedHtml);$('.homeentrylistactionform_action_editapp').unbind().click($.r3Utils.hitch(this,this.onEditApplication));$('#homeentrylistactionform_action_goto_entrylist').unbind().click($.r3Utils.hitch(this,this.onGotoEntryList));var wall=new Freewall("#freewall");wall.reset({selector:'.brick',animate:true,fixSize:null,cellW:50,cellH:50,delay:50,onResize:function(){wall.fitWidth();}});wall.fitWidth();$("a[rel='lightbox-homeentrylist']").slimbox();this.show();}),function(d)
{console.error("controller did not load");});},onEditApplication:function(e)
{var currentTarget=$(e.currentTarget);var currentTargetId=currentTarget.attr('id');console.info("Editing current: ",currentTargetId);this.actionFormManager.editApplication(currentTargetId);},onGotoEntryList:function()
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext()+"/org/r3/sev/entrylist.do");}});$.r3Utils.namespace("org.r3.jsportlet.sev.homefacebook");org.r3.jsportlet.sev.homefacebook.HomeFaceBookActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aDataCardId,aDataOptions)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homefacebook.HomeFaceBookActionFormView(aDetailViewContainerId,this);this.portletWidth=(aDataOptions)?aDataOptions:"300";},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open(this.portletWidth);}});$.r3Utils.namespace("org.r3.jsportlet.sev.homefacebook");org.r3.jsportlet.sev.homefacebook.HomeFaceBookActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aPortletWidth)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homefacebook/HomeFaceBookActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var templatedHtml=tmpl(responseData['view'],{"portletWidth":aPortletWidth});$(this.htmlContainerId).html(templatedHtml);this.show();$('#facebook_test').unbind().click(function(e){FB.XFBML.parse();});fbEnsureInit(function(){FB.XFBML.parse();});}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.homeiconmenu");org.r3.jsportlet.sev.homeiconmenu.HomeIconMenuActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homeiconmenu.HomeIconMenuActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.sev.homeiconmenu");org.r3.jsportlet.sev.homeiconmenu.HomeIconMenuActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.documentListDivLocator=anHtmlActionFormContainerId+" .cms_cardDetail";},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.getStrutsActionContext()+'/org/r3/mvc_view.do?fviewid=HomeIconMenuActionForm'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$("#iconic_menu_carousel_canvas").carouFredSel({auto:false,align:'center',width:'100%',pagination:{container:"#iconic_menu_carousel_pagination",keys:true,easing:"easeOutBounce",duration:3000}});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.homelogin");org.r3.jsportlet.sev.homelogin.HomeLoginActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,optionsHash)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homelogin.HomeLoginActionFormView(aDetailViewContainerId,this);if(optionsHash&&optionsHash.onLoginRedirect)
{this.onLoginRedirect=optionsHash.onLoginRedirect;}
else this.onLoginRedirect=org.r3.Constants.getStrutsActionContext()+"/org/r3/home.do";},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},doLogin:function()
{var _self=this;org.r3.AjaxUtils.doLogin(org.r3.PageManager.getRESTUrl('POST_User_Login',[$('#loginform_form_nickname').val()]),_self.onLoginRedirect);}});$.r3Utils.namespace("org.r3.jsportlet.sev.homelogin");org.r3.jsportlet.sev.homelogin.HomeLoginActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.faceBookLoginStatus=null;},close:function()
{this.hide();},open:function()
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homelogin/HomeLoginActionForm_'+org.r3.Constants.language+'.html'),dataType:"html"});fbEnsureInit(function(){FB.getLoginStatus(function(response){_self.onFaceBookLoginStatus(response);});});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$('#loginform_form_nickname').focus();$.r3Utils.onEnter('#loginform_form_password',this.actionFormManager,this.actionFormManager.doLogin,true);$("#loginform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.login.loginform_form_validationRules,messages:org.r3.jsportlet.login.loginform_form_validationMessages});$('#loginactionform_link_registration').attr('href',org.r3.PageManager.buildURL2Page('/org/r3/registration/register.do'));$('#loginactionform_link_resetuserpwd').attr('href',org.r3.PageManager.buildURL2Page('/org/r3/user/resetpwd.do'));$('#loginButton').unbind().click($.r3Utils.hitch(this,this.onLoginClick));$('#FBLoginAction').unbind().click($.r3Utils.hitch(this,this.onFaceBookLogin));$('#loginform_form_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},onLoginClick:function(event)
{console.log("I'm clicked2.... ",this,event);this.actionFormManager.doLogin();event.preventDefault();},onFaceBookLoginStatus:function(response)
{this.faceBookLoginStatus=response;},onFaceBookLogin:function(e)
{var _self=this;e.preventDefault();if(!this.faceBookLoginStatus||this.faceBookLoginStatus.status!='connected')
{$('.fbloginform_progress').show();FB.login(function(response)
{$('.fbloginform_progress').hide();_self.faceBookLoginStatus=response;if(response.status==='connected')
{_self.onConnected();}},{scope:'public_profile,email',return_scopes:true});}
else _self.onConnected();},onConnected:function()
{var _self=this;console.log('Successful login for: ',this.faceBookLoginStatus);FB.api('/me',{fields:'email,name,first_name,last_name'},function(response)
{_self.doFBLogin(_self.faceBookLoginStatus,response);});},doFBLogin:function(aLoginStatus,aUserInformation)
{console.log("FBLogin: ",aLoginStatus,aUserInformation);if(!aUserInformation.email)
return;var formData={fbuserid:aUserInformation.id,accesstoken:aLoginStatus.authResponse.accessToken,email:aUserInformation.email,firstname:aUserInformation.first_name,lastname:aUserInformation.last_name};var formPayload=$.param(formData);console.log(formPayload);org.r3.AjaxUtils.doPostLoginFormData(org.r3.PageManager.getRESTUrl('POST_FBLogin',[aUserInformation.email]),formPayload,this.actionFormManager.onLoginRedirect);}});$.r3Utils.namespace("org.r3.jsportlet.sev.homenorlist");org.r3.jsportlet.sev.homenorlist.HomeNORActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homenorlist.HomeNORActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.sev.homenorlist");org.r3.jsportlet.sev.homenorlist.HomeNORActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.documentListDivLocator=anHtmlActionFormContainerId+" .cms_card_canvas";},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homenorlist/HomeNORActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$(this.documentListDivLocator).cmsCard({card_tmpl:"cms_tpl_cardsetlistofdocuments",cardquery:"groupid=grp_nor",onComplete:function()
{}});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.homequiz");org.r3.jsportlet.sev.homequiz.HomeQuizActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aQuizId)
{this.setPageManager(aPageManager);this.enterView=new org.r3.jsportlet.sev.homequiz.HomeQuizActionFormEnterView(aDetailViewContainerId,this);this.sessionsView=new org.r3.jsportlet.sev.homequiz.HomeQuizActionFormSessionsView(aDetailViewContainerId,this);this.questionsView=new org.r3.jsportlet.sev.homequiz.HomeQuizActionFormView(aDetailViewContainerId,this);this.questionsOpaqueView=new org.r3.jsportlet.sev.homequiz.HomeQuizActionFormQAOpaqueView(aDetailViewContainerId,this);this.quizcolldto=null;this.quizuserblocks=null;this.quizId=aQuizId;},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"quizcollectioninfo",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_QuizInfo',[this.quizId]),dataType:"json"});networkRequestsQueue.push({id:"quizuserblocks",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_QuizUserBlocks',[this.quizId]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{this.quizcolldto=new org.r3.db.mongo.quiz.quizcollection.QuizCollectionDTOAdapter(responseData['quizcollectioninfo']);if(this.quizcolldto.isOpaque())
{this.questionsView=this.questionsOpaqueView;}
var userblockresponsedata=responseData['quizuserblocks'];var useridentified=org.r3.PageManager.userInfo.isUser();if(!useridentified||org.r3.PageManager.isRestDTO(userblockresponsedata))
{this.enterView.open(this.quizcolldto);}
else
{if(userblockresponsedata)
{this.quizuserblocks=new org.r3.db.DTOTableAdapter(userblockresponsedata,function(aRowDataBean){return new org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTOAdapter(aRowDataBean);},true);}
else
this.quizuserblocks=null;this.sessionsView.open(this.quizcolldto,this.quizuserblocks);}}),function(d)
{console.error("controller did not load");});},openSessionsPanel:function()
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"quizuserblocks",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_QuizUserBlocks',[this.quizId]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var userblockresponsedata=responseData['quizuserblocks'];if(org.r3.PageManager.isRestDTO(userblockresponsedata))
{}
else
{if(userblockresponsedata)
{this.quizuserblocks=new org.r3.db.DTOTableAdapter(userblockresponsedata,function(aRowDataBean){return new org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTOAdapter(aRowDataBean);},true);}
else
this.quizuserblocks=null;this.sessionsView.open(this.quizcolldto,this.quizuserblocks);}}),function(d)
{console.error("controller did not load");});},openQuestionsPanel:function(aUserBlockId)
{this.questionsView.open(this.quizcolldto,aUserBlockId);}});$.r3Utils.namespace("org.r3.jsportlet.sev.homequiz");org.r3.jsportlet.sev.homequiz.HomeQuizActionFormEnterView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.portletCanvasId=null;this.quizdto=null;this.helpPanelCallingSection=null;},close:function()
{this.hide();},open:function(aQuizDtoAdapter)
{this.quizdto=aQuizDtoAdapter;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homequiz/HomeQuizActionFormEnter.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();this.portletCanvasId=$(this.htmlContainerId).attr("id");this.quizStatus='start';var membershipRequired=false;var useridentified=org.r3.PageManager.userInfo.isUser();if(useridentified&&!org.r3.PageManager.userInfo.dataBean.companyid)
{membershipRequired=true;}
var templatedHtml=tmpl(responseData['view'],{portletCanvasId:this.portletCanvasId,quizDto:this.quizdto,membershipRequired:membershipRequired,loginRequired:!useridentified});$(this.htmlContainerId).html(templatedHtml);if(!useridentified)
{$('#'+this.portletCanvasId+" .quiz-actions .quiz-action-start").hide();$('#'+this.portletCanvasId+" .quiz-actions .quiz-action-applymembership").hide();}
if(membershipRequired)
{$("#membership_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.homequiz.membership_form_validationRules,messages:org.r3.jsportlet.sev.homequiz.membership_form_validationMessages});$('#'+this.portletCanvasId+" .quiz-actions .quiz-action-start").prop('disabled',true);$('#'+this.portletCanvasId+" .quiz-actions .quiz-action-applymembership").unbind().click($.r3Utils.hitch(this,this.applyMembershipId));$('#entermembership_form_fieldset_message').formmessage({});}
else
{$('#'+this.portletCanvasId+" .quiz-actions .quiz-action-applymembership").hide();}
$('#'+this.portletCanvasId+" .quiz-actions .quiz-action-start").unbind().click($.r3Utils.hitch(this,this.startQuiz));$('#'+this.portletCanvasId+" .quiz-action-help").unbind().click($.r3Utils.hitch(this,this.showQuizHelp));$('#'+this.portletCanvasId+" .quiz-help-section .quiz-actions .quiz-action-closehelp").unbind().click($.r3Utils.hitch(this,this.hideQuizHelp));this.show();}),function(d)
{console.error("controller did not load");});},hideQuizHelp:function()
{$('#'+this.portletCanvasId+" .quiz-help-section").hide();this.helpPanelCallingSection.show();},showQuizHelp:function()
{this.helpPanelCallingSection=$('#'+this.portletCanvasId+" .box-info:visible");this.helpPanelCallingSection.hide();$('#'+this.portletCanvasId+" .quiz-help-section").show();},startQuiz:function()
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl('POST_QuizEnter',[this.quizdto.dataBean.quizid])
org.r3.AjaxUtils.ajaxInvoke("post",restUrl,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{}
_self.close();_self.actionFormManager.openSessionsPanel();},function(jqXHR,timeout,message){console.error("startQuiz: "+message);});org.r3.AjaxUtils.logUserActionEvent('ev_useraction','ev_quizenter',this.quizdto.dataBean.quizid);},applyMembershipId:function()
{var _self=this;var theForm=$("#membership_form");org.r3.AjaxUtils.submitForm("post",org.r3.PageManager.getRESTUrl('POST_ApplyMembershipId',[org.r3.PageManager.userInfo.nickname]),theForm,function(responseData){var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('entermembership_form_fieldset_message');if(restDto.isOk())
{$('#'+_self.portletCanvasId+" .quiz-actions .quiz-action-applymembership").hide();$('#'+_self.portletCanvasId+" .quiz-actions .quiz-action-start").prop('disabled',false);}},function(jqXHR,timeout,message){console.error(message);},"org.r3.jsportlet.sev.homequiz.message.membershipid_confirm",true);}});$.r3Utils.namespace("org.r3.jsportlet.sev.homequiz");org.r3.jsportlet.sev.homequiz.HomeQuizActionFormQAOpaqueView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.portletCanvasId=null;this.quizdto=null;this.quizblockdto=null;this.quizStatus='start';this.questionIndex=0;this.currentQuestion=null;this.helpPanelCallingSection=null;},close:function()
{this.hide();},open:function(aQuizDtoAdapter,aUserBlockId)
{this.quizdto=aQuizDtoAdapter;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homequiz/HomeQuizActionFormQAOpaque.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"templates",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homequiz/HomeQuizActionFormView_Template.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"quizuserblock",type:"Post",url:org.r3.PageManager.getRESTUrl('POST_QuizStartSession',[this.quizdto.dataBean.quizid,aUserBlockId]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();this.portletCanvasId=$(this.htmlContainerId).attr("id");this.quizStatus='start';this.quizblockdto=new org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTOAdapter(responseData['quizuserblock']);var templatedHtml=tmpl(responseData['view'],{quizblockdto:this.quizblockdto,portletCanvasId:this.portletCanvasId,quizDto:this.quizdto});$(this.htmlContainerId).html(templatedHtml);$(this.htmlContainerId).append(responseData['templates']);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-answer").unbind().click($.r3Utils.hitch(this,this.answerQuizQuestion));$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-next").unbind().click($.r3Utils.hitch(this,this.nextQuizQuestion));$('#'+this.portletCanvasId+" .quiz-end-section .quiz-actions .quiz-action-end").unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.openSessionsPanel));$('#'+this.portletCanvasId+" .quiz-action-help").unbind().click($.r3Utils.hitch(this,this.showQuizHelp));$('#'+this.portletCanvasId+" .quiz-help-section .quiz-actions .quiz-action-closehelp").unbind().click($.r3Utils.hitch(this,this.hideQuizHelp));this.startQuiz();this.show();}),function(d)
{console.error("controller did not load");});},hideQuizHelp:function()
{$('#'+this.portletCanvasId+" .quiz-help-section").hide();this.helpPanelCallingSection.show();},showQuizHelp:function()
{this.helpPanelCallingSection=$('#'+this.portletCanvasId+" .box-info:visible");this.helpPanelCallingSection.hide();$('#'+this.portletCanvasId+" .quiz-help-section").show();},answerQuizQuestion:function()
{var _self=this;var selectedAnswer=$('#'+this.portletCanvasId+" .quiz-question-section input[type='radio'][name='quiz-question-answer']:checked").val();if(selectedAnswer)
{var questionAnswer=this.quizblockdto.findAnswer4(this.currentQuestion,selectedAnswer);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-answer").prop('disabled',true);console.log(" --- ",selectedAnswer,questionAnswer);if(questionAnswer)
{if(this.currentQuestion.selectedAnswer==null||selectedAnswer!=this.currentQuestion.selectedAnswer)
{var restUrl=org.r3.PageManager.getRESTUrl('POST_QuizAnswerQuestion',[this.quizdto.dataBean.quizid,this.quizblockdto.dataBean.quizuserblocknumber,this.currentQuestion.questionid,selectedAnswer]);org.r3.AjaxUtils.ajaxInvoke("post",restUrl,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isOk())
_self.nextQuizQuestion()
else if(restDto.reasoncode=='QTIMEOUT')
{_self.onTimeout();}}},function(jqXHR,timeout,message){console.error("startQuiz: "+message);});}}
org.r3.AjaxUtils.logUserActionEvent('ev_useraction','ev_quizanswer',this.quizdto.dataBean.quizid);}},endQuiz:function()
{var _self=this;$('#'+this.portletCanvasId+" .quiz-question-section .quiz-timer-display-data").timer('remove');$('#'+this.portletCanvasId+" .quiz-question-section").hide();org.r3.AjaxUtils.ajaxInvoke("GET",org.r3.PageManager.getRESTUrl('QUIZ_QuizSessionInfo',[this.quizdto.dataBean.quizid,this.quizblockdto.dataBean.quizuserblocknumber]),$.r3Utils.hitch(this,function(responseData)
{var quizblockinfo=new org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTOAdapter(responseData);$('#'+this.portletCanvasId+" .quiz-end-section .quiz-score-value").html(quizblockinfo.dataBean.score||'0');$('#'+this.portletCanvasId+" .quiz-end-section .quiz-result").show();$('#'+this.portletCanvasId+" .quiz-end-section").show();}),$.r3Utils.hitch(this,function(jqXHR,timeout,message)
{console.log(arguments);}));org.r3.AjaxUtils.logUserActionEvent('ev_useraction','ev_quizend',this.quizdto.dataBean.quizid);},onTimeout:function()
{var _self=this;$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-timer-display-data").timer('remove');$('#'+_self.portletCanvasId+" .quiz-timer .quiz-timer-display").addClass("timed-out");$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-answer").prop('disabled',true);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-next").show();$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-question-timedout-feedback").show();$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-question-timedout-feedback p").html(org.r3.jsportlet.sev.homequiz.message.quiz_timedout);_self.quizStatus='timedout';},startQuiz:function()
{var _self=this;$('#'+this.portletCanvasId+" .quiz-end-section").hide();$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-next").hide();$('#'+this.portletCanvasId+" .quiz-question-section").show();$('#'+this.portletCanvasId+" .quiz-question-section .quiz-counters .quiz-info-box-numberofquestions").html(this.quizblockdto.getBlockSize()+'/'+this.quizblockdto.getNumberOfQuestions());this.questionIndex=0;this.currentQuestion=this.quizblockdto.getQuestion(this.questionIndex);this.initializeQuizQuestion(this.questionIndex,this.currentQuestion);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-timer-display-data").timer
({seconds:this.quizblockdto.getUserTimer(),duration:this.quizblockdto.dataBean.duration,callback:function(){_self.onTimeout();}});org.r3.AjaxUtils.logUserActionEvent('ev_useraction','ev_quizstart',this.quizdto.dataBean.quizid);},initializeQuizQuestion:function(aQuestionIndex,aQuestion)
{var templatedHtml=tmpl('template-homeportlet-quiz-question',{questionIndex:aQuestionIndex,question:aQuestion});$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question").html(templatedHtml);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-answer").prop('disabled',false);},nextQuizQuestion:function()
{if(this.quizStatus=='timedout'||this.questionIndex>=(this.quizblockdto.getNumberOfQuestions()-1))
{this.endQuiz();}
else
{this.questionIndex++;this.currentQuestion=this.quizblockdto.getQuestion(this.questionIndex);this.initializeQuizQuestion(this.questionIndex,this.currentQuestion);}}});$.r3Utils.namespace("org.r3.jsportlet.sev.homequiz");org.r3.jsportlet.sev.homequiz.HomeQuizActionFormSessionsView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.portletCanvasId=null;this.quizdto=null;this.quizUserBlocks=null;this.helpPanelCallingSection=null;},close:function()
{this.hide();},open:function(aQuizDtoAdapter,aUserBlocksDataTableAdapter)
{this.quizdto=aQuizDtoAdapter;this.quizUserBlocks=aUserBlocksDataTableAdapter;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homequiz/HomeQuizActionFormSessions.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();this.portletCanvasId=$(this.htmlContainerId).attr("id");var templatedHtml=tmpl(responseData['view'],{portletCanvasId:this.portletCanvasId,quizDto:this.quizdto,quizUserBlocks:this.quizUserBlocks});$(this.htmlContainerId).html(templatedHtml);$('#'+this.portletCanvasId+" .editableuserblock").unbind().click($.r3Utils.hitch(this,this.startSession));$('#'+this.portletCanvasId+" .quiz-action-help").unbind().click($.r3Utils.hitch(this,this.showQuizHelp));$('#'+this.portletCanvasId+" .quiz-help-section .quiz-actions .quiz-action-closehelp").unbind().click($.r3Utils.hitch(this,this.hideQuizHelp));this.show();}),function(d)
{console.error("controller did not load");});},hideQuizHelp:function()
{$('#'+this.portletCanvasId+" .quiz-help-section").hide();this.helpPanelCallingSection.show();},showQuizHelp:function()
{this.helpPanelCallingSection=$('#'+this.portletCanvasId+" .box-info:visible");this.helpPanelCallingSection.hide();$('#'+this.portletCanvasId+" .quiz-help-section").show();},startSession:function(e)
{var _self=this;var currentTarget=$(e.currentTarget);var userBlockId=currentTarget.attr("data-userblockid");org.r3.AjaxUtils.ajaxInvoke("GET",org.r3.PageManager.getRESTUrl('QUIZ_QuizSessionInfo',[this.quizdto.dataBean.quizid,userBlockId]),$.r3Utils.hitch(this,function(responseData)
{var quizblockinfo=new org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTOAdapter(responseData);if(quizblockinfo.canBeStarted())
{console.info("Block: "+userBlockId);_self.close();_self.actionFormManager.openQuestionsPanel(userBlockId);}
else
{org.r3.PageManager.alert("org.r3.jsportlet.sev.homequiz.message.session_cannotbestarted");}}),$.r3Utils.hitch(this,function(jqXHR,timeout,message)
{console.log(arguments);}));}});$.r3Utils.namespace("org.r3.jsportlet.sev.homequiz");org.r3.jsportlet.sev.homequiz.HomeQuizActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.portletCanvasId=null;this.quizdto=null;this.quizblockdto=null;this.quizStatus='start';this.questionIndex=0;this.currentQuestion=null;this.currentQuestionNumberOfResponses=0;this.helpPanelCallingSection=null;},close:function()
{this.hide();},open:function(aQuizDtoAdapter,aUserBlockId)
{this.quizdto=aQuizDtoAdapter;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homequiz/HomeQuizActionForm.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"templates",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homequiz/HomeQuizActionFormView_Template.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"quizuserblock",type:"Post",url:org.r3.PageManager.getRESTUrl('POST_QuizStartSession',[this.quizdto.dataBean.quizid,aUserBlockId]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();this.portletCanvasId=$(this.htmlContainerId).attr("id");this.quizStatus='start';this.quizblockdto=new org.r3.db.mongo.quiz.quizuserblockcollection.QuizUserBlockCollectionDTOAdapter(responseData['quizuserblock']);var templatedHtml=tmpl(responseData['view'],{quizblockdto:this.quizblockdto,portletCanvasId:this.portletCanvasId,quizDto:this.quizdto});$(this.htmlContainerId).html(templatedHtml);$(this.htmlContainerId).append(responseData['templates']);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-answer").unbind().click($.r3Utils.hitch(this,this.answerQuizQuestion));$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-next").unbind().click($.r3Utils.hitch(this,this.nextQuizQuestion));$('#'+this.portletCanvasId+" .quiz-end-section .quiz-actions .quiz-action-end").unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.openSessionsPanel));$('#'+this.portletCanvasId+" .quiz-action-help").unbind().click($.r3Utils.hitch(this,this.showQuizHelp));$('#'+this.portletCanvasId+" .quiz-help-section .quiz-actions .quiz-action-closehelp").unbind().click($.r3Utils.hitch(this,this.hideQuizHelp));this.startQuiz();this.show();}),function(d)
{console.error("controller did not load");});},hideQuizHelp:function()
{$('#'+this.portletCanvasId+" .quiz-help-section").hide();this.helpPanelCallingSection.show();},showQuizHelp:function()
{this.helpPanelCallingSection=$('#'+this.portletCanvasId+" .box-info:visible");this.helpPanelCallingSection.hide();$('#'+this.portletCanvasId+" .quiz-help-section").show();},answerQuizQuestion:function()
{var _self=this;var selectedAnswer=$('#'+this.portletCanvasId+" .quiz-question-section input[type='radio'][name='quiz-question-answer']:checked").val();if(selectedAnswer)
{var questionAnswer=this.quizblockdto.findAnswer4(this.currentQuestion,selectedAnswer);console.log(" --- ",selectedAnswer,questionAnswer);if(questionAnswer)
{if(this.currentQuestion.selectedAnswer==null||selectedAnswer!=this.currentQuestion.selectedAnswer)
{if(this.currentQuestion.numberOfResponses==1)
_self.updateUIOnAnsweredQuestion(selectedAnswer,questionAnswer);else
{var restUrl=org.r3.PageManager.getRESTUrl('POST_QuizAnswerQuestion',[this.quizdto.dataBean.quizid,this.quizblockdto.dataBean.quizuserblocknumber,this.currentQuestion.questionid,selectedAnswer]);org.r3.AjaxUtils.ajaxInvoke("post",restUrl,function(responseData)
{if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isOk())
_self.updateUIOnAnsweredQuestion(selectedAnswer,questionAnswer);else if(restDto.reasoncode=='QTIMEOUT')
{_self.onTimeout();}}},function(jqXHR,timeout,message){console.error("startQuiz: "+message);});}}}
org.r3.AjaxUtils.logUserActionEvent('ev_useraction','ev_quizanswer',this.quizdto.dataBean.quizid);}},updateUIOnAnsweredQuestion:function(selectedAnswer,questionAnswer)
{this.currentQuestion.numberOfResponses++;this.currentQuestion.selectedAnswer=selectedAnswer;if(questionAnswer.valid)
{$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question-correct-feedback").show();$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question-correct-feedback p").html(org.r3.jsportlet.sev.homequiz.message.answer_correct);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question-error-feedback").hide();$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-answer").prop('disabled',true);this.currentQuestion.selectedAnswerValid=true;if(this.currentQuestion.numberOfResponses==1)
{this.quizblockdto.numberOfOK++;}
else
{this.quizblockdto.numberOfKO--;this.quizblockdto.numberOfRepaired++;}}
else
{if(this.currentQuestion.numberOfResponses==1)
{this.quizblockdto.numberOfKO++;$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question-error-feedback p").html(org.r3.jsportlet.sev.homequiz.message.answer_first_error);}
else
{$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question-error-feedback p").html(org.r3.jsportlet.sev.homequiz.message.answer_second_error+'<b>'+this.quizblockdto.findCorrectAnswer(this.currentQuestion).text+'</b>');$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-answer").prop('disabled',true);}
$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question-error-feedback").show();}
$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-next").prop('disabled',false);this.refreshCounterInformation(this.quizblockdto);},refreshCounterInformation:function(aQuizDtoAdapter)
{$('#'+this.portletCanvasId+" .quiz-question-section .quiz-counters .quiz-info-box-numberofok").html(aQuizDtoAdapter.numberOfOK);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-counters .quiz-info-box-numberofko").html(aQuizDtoAdapter.numberOfKO);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-counters .quiz-info-box-numberofrepaired").html(aQuizDtoAdapter.numberOfRepaired);},endQuiz:function()
{$('#'+this.portletCanvasId+" .quiz-question-section .quiz-timer-display-data").timer('remove');$('#'+this.portletCanvasId+" .quiz-question-section").hide();var templatedHtml=tmpl('template-homeportlet-quiz-report',{quiz:this.quizdto,quizblockdto:this.quizblockdto});$('#'+this.portletCanvasId+" .quiz-end-section .quiz-report").html(templatedHtml);$('#'+this.portletCanvasId+" .quiz-end-section .quiz-score-value").html(this.quizblockdto.getScore());$('#'+this.portletCanvasId+" .quiz-end-section .quiz-score-description").html(this.quizdto.getScoreComment(this.quizblockdto.getScore()));$('#'+this.portletCanvasId+" .quiz-end-section .quiz-result").show();$('#'+this.portletCanvasId+" .quiz-end-section").show();org.r3.AjaxUtils.logUserActionEvent('ev_useraction','ev_quizend',this.quizdto.dataBean.quizid);},onTimeout:function()
{var _self=this;$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-timer-display-data").timer('remove');$('#'+_self.portletCanvasId+" .quiz-timer .quiz-timer-display").addClass("timed-out");$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-answer").prop('disabled',true);$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-next").prop('disabled',false);$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-question-correct-feedback").hide();$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-question-error-feedback").hide();$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-question-timedout-feedback").show();$('#'+_self.portletCanvasId+" .quiz-question-section .quiz-question-timedout-feedback p").html(org.r3.jsportlet.sev.homequiz.message.quiz_timedout);_self.quizStatus='timedout';},startQuiz:function()
{var _self=this;$('#'+this.portletCanvasId+" .quiz-end-section").hide();$('#'+this.portletCanvasId+" .quiz-question-section").show();$('#'+this.portletCanvasId+" .quiz-question-section .quiz-counters .quiz-info-box-numberofquestions").html(this.quizblockdto.getBlockSize()+'/'+this.quizblockdto.getNumberOfQuestions());$('#'+this.portletCanvasId+" .quiz-question-section .quiz-counters .quiz-info-box-numberofok").html("0");$('#'+this.portletCanvasId+" .quiz-question-section .quiz-counters .quiz-info-box-numberofrepaired").html("0");$('#'+this.portletCanvasId+" .quiz-question-section .quiz-counters .quiz-info-box-numberofko").html("0");this.questionIndex=0;this.currentQuestion=this.quizblockdto.getQuestion(this.questionIndex);this.initializeQuizQuestion(this.questionIndex,this.currentQuestion);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-timer-display-data").timer
({seconds:this.quizblockdto.getUserTimer(),duration:this.quizblockdto.dataBean.duration,callback:function(){_self.onTimeout();}});org.r3.AjaxUtils.logUserActionEvent('ev_useraction','ev_quizstart',this.quizdto.dataBean.quizid);},initializeQuizQuestion:function(aQuestionIndex,aQuestion)
{var templatedHtml=tmpl('template-homeportlet-quiz-question',{questionIndex:aQuestionIndex,question:aQuestion});$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question").html(templatedHtml);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question-error-feedback").hide();$('#'+this.portletCanvasId+" .quiz-question-section .quiz-question-correct-feedback").hide();$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-next").prop('disabled',true);$('#'+this.portletCanvasId+" .quiz-question-section .quiz-actions .quiz-action-answer").prop('disabled',false);aQuestion.numberOfResponses=0;aQuestion.selectedAnswer=null;aQuestion.selectedAnswerValid=false;},nextQuizQuestion:function()
{if(this.quizStatus=='timedout'||this.questionIndex>=(this.quizblockdto.getNumberOfQuestions()-1))
{this.endQuiz();}
else
{this.questionIndex++;this.currentQuestion=this.quizblockdto.getQuestion(this.questionIndex);this.initializeQuizQuestion(this.questionIndex,this.currentQuestion);}}});jQuery.r3Utils.namespace("org.r3.jsportlet.sev.homequiz");org.r3.jsportlet.sev.homequiz.QuizDTOAdapter=org.r3.db.DTOAdapter.extend({init:function(aDataBean)
{this._super(aDataBean);this.numberOfOK=0;this.numberOfKO=0;this.numberOfRepaired=0;},isEmpty:function()
{return false;},getNumberOfQuestions:function()
{return(this.dataBean&&this.dataBean.questions&&this.dataBean.questions.length)?this.dataBean.questions.length:0;},getQuestion:function(qIndex)
{return(this.dataBean&&this.dataBean.questions&&this.dataBean.questions.length&&this.dataBean.questions.length>qIndex)?this.dataBean.questions[qIndex]:null;},findCorrectAnswer:function(aQuestion)
{for(var i=0;i<aQuestion.answers.length;i++)
{if(aQuestion.answers[i].valid)
{return aQuestion.answers[i];}}
return null;},findAnswer4:function(aQuestion,anAnswerId)
{for(var i=0;i<aQuestion.answers.length;i++)
{if(aQuestion.answers[i].answerid==anAnswerId)
{return aQuestion.answers[i];}}
return null;},getScore:function()
{var score=0;if(this.dataBean&&this.dataBean.questions&&this.dataBean.questions.length)
{for(var i=0;i<this.dataBean.questions.length;i++)
{score+=this.getQuestionScore(this.dataBean.questions[i]);}}
return score;},getQuestionScore:function(aQuestion)
{if(aQuestion.selectedAnswerValid)
{if(aQuestion.numberOfResponses==1)
return this.findCorrectAnswer(aQuestion).weight||0;}
return 0;},getScoreComment:function()
{var score=this.getScore();if(this.dataBean.score_comment)
{if(this.dataBean.score_comment.length)
{for(var i=0;i<this.dataBean.score_comment.length;i++)
{if(score<=this.dataBean.score_comment[i].score_level)
return this.dataBean.score_comment[i].score_comment;}}
return this.dataBean.score_comment;}
return"";},getReportIconColumn:function(aQuestion)
{var s="";if(aQuestion.selectedAnswerValid)
{if(aQuestion.numberOfResponses==1)
{s="<td style='color: green'><i class='icon fa fa-thumbs-o-up'></i></td>";}
else
{s="<td style='color: orange'><i class='icon fa fa-thumbs-o-up'></i></td>";}}
else
{s="<td style='color: red'><i class='icon fa fa-thumbs-o-down'></i></td>";}
return s;}});$.r3Utils.namespace("org.r3.jsportlet.sev.homequiz",window,function(aNamespace)
{aNamespace.membership_form_validationRules={membershipid:{required:true,maxlength:10,digits:true}};aNamespace.membership_form_validationMessages={membershipid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits}};});$.r3Utils.namespace("org.r3.jsportlet.sev.homeranking");org.r3.jsportlet.sev.homeranking.HomeRankingActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homeranking.HomeRankingActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.sev.homeranking");org.r3.jsportlet.sev.homeranking.HomeRankingActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homeranking/HomeRankingActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.hometracker");org.r3.jsportlet.sev.hometracker.HomeTrackerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.hometracker.HomeTrackerActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.sev.hometracker");org.r3.jsportlet.sev.hometracker.HomeTrackerActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/hometracker/HomeTrackerActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.hometwitter");org.r3.jsportlet.sev.hometwitter.HomeTwitterActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.hometwitter.HomeTwitterActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.sev.hometwitter");org.r3.jsportlet.sev.hometwitter.HomeTwitterActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/hometwitter/HomeTwitterActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this.show();$.getScript('http://platform.twitter.com/widgets.js');}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.homeyachtclub");org.r3.jsportlet.sev.homeyachtclub.HomeYachtClubActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.homeyachtclub.HomeYachtClubActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.sev.homeyachtclub");org.r3.jsportlet.sev.homeyachtclub.HomeYachtClubActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/homeyachtclub/HomeYachtClubActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.myapp");org.r3.jsportlet.sev.myapp.MyAppActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.myapp.MyAppActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{if(!org.r3.PageManager.userInfo.isGuest())
this.detailView.open();},editApplication:function(applicationId)
{var targetUrl=org.r3.Constants.getStrutsActionContext()+'/org/r3/sev/application/editMyApplication.do?objid='+applicationId;org.r3.PageManager.gotoPage(targetUrl);},newApplication:function()
{var _self=this;var method='POST';var restUrl=org.r3.PageManager.getRESTUrl('POST_SEV_MyApplications');org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.editApplication(responseData.applicationid);},"error":function(jqXHR,timeout,message)
{console.error("AccettazioneActionForm: ",message);}});}});$.r3Utils.namespace("org.r3.jsportlet.sev.myapp");org.r3.jsportlet.sev.myapp.MyAppActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/myapp/MyAppActionForm.html.jsp'),dataType:"html"});if(!org.r3.PageManager.userInfo.isGuest())
{var restUrl=org.r3.PageManager.getRESTUrl('GET_SEV_MyApplications');networkRequestsQueue.push({id:"view_apps",type:"Get",url:restUrl,dataType:"json"});}
networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_completion'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var applicationsDataTableAdapter=null;var emptyApplicationId=null;var numberOfDraftApplications=0;var numberOfCommitApplications=0;if(!org.r3.PageManager.userInfo.isGuest())
{applicationsDataTableAdapter=responseData['view_apps'];if(applicationsDataTableAdapter)
{applicationsDataTableAdapter=new org.r3.db.DTOTableAdapter(applicationsDataTableAdapter,function(aRowDataBean){return new org.r3.db.sailevent.application.SailApplicationDTOAdapter(aRowDataBean);});var visitor={processItem:function(anItem)
{if(anItem.isDraft())
numberOfDraftApplications++;else if(anItem.isEmpty())
emptyApplicationId=anItem.dataBean.applicationid;else numberOfCommitApplications++;return true;}};applicationsDataTableAdapter.visit(visitor);}}
var templatedHtml=tmpl(responseData['view'],{"guest":org.r3.PageManager.userInfo.isGuest(),"apps":applicationsDataTableAdapter,"numberOfDraftApplications":numberOfDraftApplications,"numberOfCommitApplications":numberOfCommitApplications,"emptyApplicationId":emptyApplicationId});$(this.htmlContainerId).html(templatedHtml);$('#myappactionform_action_newapp').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.newApplication));$('.myappactionform_action_editapp').unbind().click($.r3Utils.hitch(this,this.onEditApplication));this.show();}),function(d)
{console.error("controller did not load");});},onEditApplication:function(e)
{var currentTarget=$(e.currentTarget);var currentTargetId=currentTarget.attr('id');console.info("Editing current: ",currentTargetId);this.actionFormManager.editApplication(currentTargetId);}});$.r3Utils.namespace("org.r3.jsportlet.sev.rankingview");org.r3.jsportlet.sev.rankingview.RankingInstanceViewerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId,consoleContextFlag)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.rankingview.RankingInstanceViewerActionFormView(aDetailViewContainerId,this);this.listView=new org.r3.db.sailevent.rankinginstancedetailview.RankingInstanceDetailViewQueryActionFormView
(aChildEntityListViewContainerId,this,{dataTableId:'RankingInstanceDetailViewQueryActionFormView',gradeLevel:'grade_level5 grade_clickable',legend:'Dettaglio Classifica',iDisplayLength:50,layout:'fullWidth',sortable:true,dataTableColumns:"pos;sort,sailnumber,yachtname,owner,arrivaldate,realtime;sort,drealtime,correctedtime;sort,annotation,perctempen,score",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:null,onClearSelection:null,actionBarOnTop:true,buttons:[{id:'ranking_action_showcyfile',label:'Visualizza File CyberAltura',disabled:false,onClick:$.r3Utils.hitch(this,this.onShowCyFile)},{id:'ranking_action_hidecyfile',label:'Nascondi File CyberAltura',disabled:false,onClick:$.r3Utils.hitch(this,this.onHideCyFile)},{id:'ranking_action_printcyfile',label:'Versione Stampabile',disabled:false,onClick:$.r3Utils.hitch(this,this.onPrintCyFile)}],onInitializationComplete:function()
{if(consoleContextFlag)
{$('#ranking_action_showcyfile').show();$('#ranking_action_hidecyfile').hide();$('#ranking_action_printcyfile').hide();}
else
{$('#ranking_action_showcyfile').hide();$('#ranking_action_hidecyfile').hide();$('#ranking_action_printcyfile').show();}}});this.consoleContext=consoleContextFlag;},close:function()
{this.hide();},hide:function()
{this.detailView.hide();this.listView.hide();},show:function()
{this.detailView.show();this.listView.show();},refresh:function()
{},open:function(aRankInstanceDTOAdapter)
{this.setDataBeanInfo(aRankInstanceDTOAdapter);this.detailView.open(aRankInstanceDTOAdapter,this.consoleContext);var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Ranking_Instance_Entries',[aRankInstanceDTOAdapter.dataBean.rankid,aRankInstanceDTOAdapter.dataBean.instanceid]);var dataTableColumns="pos;sort,boatinfo,yachtrating,division,racegroup,arrivaldate,realtime;sort,drealtime,correctedtime;sort,annotation,perctempen,score";if(aRankInstanceDTOAdapter.isOverallInstance())
{dataTableColumns="pos;sort,sailnumber,yachtname,owner,club,model,division,racegroup";if(aRankInstanceDTOAdapter.dataBean.racenumber>0)
{for(var i=1;i<=aRankInstanceDTOAdapter.dataBean.racenumber;i++)
{dataTableColumns+=",scoreoverall"+i;}}
dataTableColumns+=",score";}
if(aRankInstanceDTOAdapter.isRankRateOrg('rank_orc'))
{dataTableColumns=dataTableColumns.replace('yachtrating','yachtgph');}
else
dataTableColumns=dataTableColumns.replace('yachtrating','yachtbsf');this.listView.open({"dataTableSource":dataTableSource,"dataTableColumns":dataTableColumns,"onInitializationCompleteArgs":arguments});},onEntrySelected:function(aRankInstanceDTOAdapter)
{var qparams=[];qparams.push({"name":"rankentryid","value":aRankInstanceDTOAdapter.dataBean.rankentryid+''});this.listView._executeAdvancedSearch(qparams);},onShowCyFile:function()
{this.detailView.showCyFile();$('#ranking_action_showcyfile').hide();$('#ranking_action_hidecyfile').show();},onHideCyFile:function()
{this.detailView.hideCyFile();$('#ranking_action_showcyfile').show();$('#ranking_action_hidecyfile').hide();},onPrintCyFile:function()
{this.pageManager.openPrintableRankingInstanceViewer(this.dataBeanInfo);}});$.r3Utils.namespace("org.r3.jsportlet.sev.rankingview");org.r3.jsportlet.sev.rankingview.RankingInstanceViewerActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{$('#infoLine_rankinginstanceviewer').infoLine('destroy');this.hide();},open:function(aRankInstanceDTOAdapter,consoleContext)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/rankingview/RankingInstanceViewerActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:$.r3Utils.formatDMSUrl4ClientAccess(aRankInstanceDTOAdapter.dataBean.racefiledmsurl),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_boatgroup'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_raceclass'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$('#rankinginstancevieweractionform_cyfile_canvas').html(responseData['content']);var infoLineItems=[];if(aRankInstanceDTOAdapter.isOverallInstance())
{infoLineItems.push({id:"infoline_title",label:"Classifica Generale",value:aRankInstanceDTOAdapter.dataBean.ranktitle});infoLineItems.push({id:"infoline_racegroup",label:"Raggrupp.",value:aRankInstanceDTOAdapter.getRacegroup()||'n.d.'});infoLineItems.push({id:"infoline_raceclass",label:"Classe",value:aRankInstanceDTOAdapter.getRaceclass()||'n.d.'});}
else
{infoLineItems.push({id:"infoline_title",label:"Classifica",value:aRankInstanceDTOAdapter.dataBean.ranktitle});infoLineItems.push({id:"infoline_racegroup",label:"Raggrupp.",value:aRankInstanceDTOAdapter.getRacegroup()||'n.d.'});infoLineItems.push({id:"infoline_raceclass",label:"Classe",value:aRankInstanceDTOAdapter.getRaceclass()||'n.d.'});infoLineItems.push({id:"infoline_racenumber",label:"N.Prova",value:aRankInstanceDTOAdapter.dataBean.racenumber});infoLineItems.push({id:"infoline_racedate",label:"Data",value:aRankInstanceDTOAdapter.getRacedate()});infoLineItems.push({id:"infoline_racetime",label:"Ora",value:aRankInstanceDTOAdapter.getRacetime()});infoLineItems.push({id:"infoline_racedistance",label:"Distanza",value:aRankInstanceDTOAdapter.dataBean.racedistance});infoLineItems.push({id:"infoline_racerating",label:"Rating",value:aRankInstanceDTOAdapter.dataBean.racerating});}
infoLineItems.push({id:"infoline_instanceid",label:"Id.",value:aRankInstanceDTOAdapter.dataBean.instanceid});$('#infoLine_rankinginstanceviewer').infoLine({groupId:"ranking_instance",items:infoLineItems});this.show();}),function(d)
{console.error("controller did not load");});},showCyFile:function()
{$('#rankinginstancevieweractionform_cyfile_panel').show();},hideCyFile:function()
{$('#rankinginstancevieweractionform_cyfile_panel').hide();}});$.r3Utils.namespace("org.r3.jsportlet.sev.rankingview");org.r3.jsportlet.sev.rankingview.RankingInstanceViewerCyFileActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,instancePrintableFlag)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.rankingview.RankingInstanceViewerCyFileActionFormView(aDetailViewContainerId,this);this.printableDetailView=new org.r3.jsportlet.sev.rankingview.RankingInstanceViewerCyFilePrintableActionFormView(aDetailViewContainerId,this);this.instancePrintableFlag=instancePrintableFlag;this.actualView=null;},close:function()
{this.hide();},hide:function()
{this.actualView.hide();},show:function()
{this.actualView.show();},refresh:function()
{},open:function(aRankInstanceDTOAdapter)
{this.setDataBeanInfo(aRankInstanceDTOAdapter);this.actualView=this.detailView;if(this.instancePrintableFlag)
this.actualView=this.printableDetailView;this.actualView.open(aRankInstanceDTOAdapter,this.instancePrintable);}});$.r3Utils.namespace("org.r3.jsportlet.sev.rankingview");org.r3.jsportlet.sev.rankingview.RankingInstanceViewerCyFileActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{$('#infoLine_rankinginstanceviewer').infoLine('destroy');this.hide();},open:function(aRankInstanceDTOAdapter,printable)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/rankingview/RankingInstanceViewerCyFileActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:$.r3Utils.formatDMSUrl4ClientAccess(aRankInstanceDTOAdapter.dataBean.racefiledmsurl),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_boatgroup'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_raceclass'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$('#rankinginstancevieweractionform_htmlcanvas').html(responseData['content']);var infoLineItems=[];if(aRankInstanceDTOAdapter.isOverallInstance())
{infoLineItems.push({id:"infoline_title",label:"Classifica Generale",value:aRankInstanceDTOAdapter.dataBean.ranktitle});infoLineItems.push({id:"infoline_racegroup",label:"Raggrupp.",value:aRankInstanceDTOAdapter.getRacegroup()||'n.d.'});infoLineItems.push({id:"infoline_raceclass",label:"Classe",value:aRankInstanceDTOAdapter.getRaceclass()||'n.d.'});}
else
{infoLineItems.push({id:"infoline_title",label:"Classifica",value:aRankInstanceDTOAdapter.dataBean.ranktitle});infoLineItems.push({id:"infoline_racegroup",label:"Raggrupp.",value:aRankInstanceDTOAdapter.getRacegroup()||'n.d.'});infoLineItems.push({id:"infoline_raceclass",label:"Classe",value:aRankInstanceDTOAdapter.getRaceclass()||'n.d.'});infoLineItems.push({id:"infoline_racenumber",label:"N.Prova",value:aRankInstanceDTOAdapter.dataBean.racenumber});infoLineItems.push({id:"infoline_racedate",label:"Data",value:aRankInstanceDTOAdapter.getRacedate()});infoLineItems.push({id:"infoline_racetime",label:"Ora",value:aRankInstanceDTOAdapter.getRacetime()});infoLineItems.push({id:"infoline_racedistance",label:"Distanza",value:aRankInstanceDTOAdapter.dataBean.racedistance});infoLineItems.push({id:"infoline_racerating",label:"Rating",value:aRankInstanceDTOAdapter.dataBean.racerating});}
infoLineItems.push({id:"infoline_instanceid",label:"Id.",value:aRankInstanceDTOAdapter.dataBean.instanceid});$('#infoLine_rankinginstanceviewer').infoLine({groupId:"ranking_instance",items:infoLineItems});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.rankingview");org.r3.jsportlet.sev.rankingview.RankingInstanceViewerCyFilePrintableActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{$('#infoLine_rankinginstanceviewer').infoLine('destroy');this.hide();},open:function(aRankInstanceDTOAdapter)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/rankingview/RankingInstanceViewerCyFilePrintableActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:$.r3Utils.formatDMSUrl4ClientAccess(aRankInstanceDTOAdapter.dataBean.racefiledmsurl),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_boatgroup'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_raceclass'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var templatedHtml=tmpl(responseData['view'],{"aRankInstanceDTOAdapter":aRankInstanceDTOAdapter});$(this.htmlContainerId).html(templatedHtml);$('#rankinginstancevieweractionform_htmlcanvas').html(responseData['content']);if(aRankInstanceDTOAdapter.isOverallInstance())
$('#canvas_report_title').html("Classifica Generale: "+aRankInstanceDTOAdapter.dataBean.ranktitle);else
$('#canvas_report_title').html("Classifica: "+aRankInstanceDTOAdapter.dataBean.ranktitle);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.sev.rankingview");org.r3.jsportlet.sev.rankingview.RankingSynopticActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,instancePrintableFlag)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.sev.rankingview.RankingSynopticActionFormView(aDetailViewContainerId,this);this.instancePrintable=instancePrintableFlag;},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},openRankingInstanceViewer:function(aRankInstanceId,onError)
{var _self=this;var method="GET";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('GET_Ranking_Instance_Detail',['RankId',aRankInstanceId]),org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var rankingInstanceDataBean=null;if(responseData)
{rankingInstanceDataBean=new org.r3.db.sailevent.rankinginstanceview.RankingInstanceViewDTOAdapter(responseData);}
if(!_self.instancePrintable||rankingInstanceDataBean.isRankType('rank_filedet'))
_self.hide();_self.pageManager.openRankingInstanceViewer(rankingInstanceDataBean);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();console.error("org.r3.jsportlet.sev.rankingview.RankingSynopticActionForm: ",message);if(onError)
onError(jqXHR,timeout,message);}});}});$.r3Utils.namespace("org.r3.jsportlet.sev.rankingview");org.r3.jsportlet.sev.rankingview.RankingSynopticActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/rankingview/RankingSynopticActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_RankingSynoptic'),dataType:"json"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_r3ea_sinott'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var synopticData=responseData['content'];if(synopticData)
{synopticData=new org.r3.db.DTOTableAdapter(synopticData,function(aRowDataBean){return new org.r3.db.sailevent.rankingview.RankingViewSynopticDTOAdapter(aRowDataBean);});var synopticReport=[];var ranktitle=null;var rankinggroup=null;var synopticReportNode=null;for(var h=0;h<synopticData.getNumberOfItems();h++)
{var theItem=synopticData.getItem(h);var theItemData=theItem.getSynopticItemData(this._getMaxNumberOfRaces());if(rankinggroup==null||theItem.dataBean.rankinggroup!=rankinggroup)
{if(synopticReportNode)
synopticReport.push(synopticReportNode);synopticReportNode={title:theItem.dataBean.rankinggroup,items:[]};}
synopticReportNode.items.push(theItemData);rankinggroup=theItem.dataBean.rankinggroup;}
if(synopticReportNode)
synopticReport.push(synopticReportNode);}
var templatedHtml=tmpl(responseData['view'],{"numOfRaces":this._getMaxNumberOfRaces(),"rankData":synopticReport});$(this.htmlContainerId).html(templatedHtml);$(this.htmlContainerId+' table').dataTable({"responsive":true,"bPaginate":false,"bLengthChange":false,"sDom":'t',"bSort":false,"bInfo":false,});$('#rankingsynopticactionform_fieldset_message').formmessage({});var matchExpr='.synoptic_link';$(document).off('click',matchExpr).on('click',matchExpr,$.r3Utils.hitch(this,this.onRankingSelected));this.show();}),function(d)
{console.error("controller did not load");});},onRankingSelected:function(e)
{var currentTargetId=$(e.currentTarget).attr('id');this.actionFormManager.openRankingInstanceViewer(currentTargetId,function(jqXHR,timeout,message){$('#rankingsynopticactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_getMaxNumberOfRaces:function()
{if(org.r3.SiteConstants.sailEventRanking&&org.r3.SiteConstants.sailEventRanking.maxraces)
{return parseInt(org.r3.SiteConstants.sailEventRanking.maxraces);}
return 10;}});$.r3Utils.namespace("org.r3.jsportlet.sev.submitcrewcheck");org.r3.jsportlet.sev.submitcrewcheck.SubmitCrewCheckActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/sev/submitcrewcheck/SubmitCrewCheckActionFormView.html'),dataType:"html"});networkRequestsQueue.push({id:"pkg_fiv_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_FIV_SiteProperties'),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);var pkg_fiv_properties=responseData['pkg_fiv_properties'];if(pkg_fiv_properties)
{pkg_fiv_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_fiv_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});var property=pkg_fiv_properties.getPropertyByPropertyscopePropertykey("fiv","fivclubid");if(property)
{$('#submitcrewcheckform_yachtclubcode').val(property.dataBean.propertyvalue);}
var property=pkg_fiv_properties.getPropertyByPropertyscopePropertykey("fiv","fivpasswd");if(property)
{$('#submitcrewcheckform_yachtclubpwd').val(property.dataBean.propertyvalue);$('#submitcrewcheckform_confirm_yachtclubpwd').val(property.dataBean.propertyvalue);}}
$.r3Utils.onEnter('#registrationform_confirm_password',this.actionFormManager,this.actionFormManager.doSubmitCrewCheck,true);$("#submitcrewcheckform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.sev.submitcrewcheck.submitcrewcheckform_form_validationRules,messages:org.r3.jsportlet.sev.submitcrewcheck.submitcrewcheckform_form_validationMessages});$('#submitcrewcheckform_action_submit').unbind().click($.r3Utils.hitch(this,this.onSubmitClick));$('#submitcrewcheckform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},onSubmitClick:function(event)
{console.log("I'm clicked2.... ",this,event);this.actionFormManager.doSubmitCrewCheck();event.preventDefault();}});$.r3Utils.namespace("org.r3.jsportlet.sev.submitcrewcheck",window,function(aNamespace)
{aNamespace.submitcrewcheckform_form_validationRules={yachtclubcode:{required:true,maxlength:15},yachtclubpwd:{required:true,maxlength:15},confirm_yachtclubpwd:{required:true,maxlength:15,equalTo:'#submitcrewcheckform_yachtclubpwd'}};aNamespace.submitcrewcheckform_form_validationMessages={yachtclubcode:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtclubpwd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},confirm_yachtclubpwd:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,equalTo:'La parola chiave inserita non corrisponde alla conferma!'}};});$.r3Utils.namespace("org.r3.jsportlet.site.please_login_or_register");org.r3.jsportlet.site.please_login_or_register.PleaseLogInOrRegisterPortletActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);if(org.r3.PageManager.userInfo.isGuest())
{this.onLoginRedirect=org.r3.Constants.getStrutsActionContext()+"/org/r3/home.do";this.detailView=new org.r3.jsportlet.site.please_login_or_register.PleaseLogInOrRegisterPortletActionFormView(aDetailViewContainerId,this);}},close:function()
{this.hide();},hide:function()
{if(this.detailView)
this.detailView.hide();},show:function()
{if(this.detailView)
this.detailView.show();},open:function()
{if(this.detailView)
this.detailView.open();},doLogin:function()
{var _self=this;org.r3.AjaxUtils.doLogin(org.r3.PageManager.getRESTUrl('POST_User_Login',[$('#loginform_form_nickname').val()]),_self.onLoginRedirect);}});$.r3Utils.namespace("org.r3.jsportlet.site.please_login_or_register");org.r3.jsportlet.site.please_login_or_register.PleaseLogInOrRegisterPortletActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.faceBookLoginStatus=null;},close:function()
{this.hide();},open:function(aDataBeanInfo)
{var _self=this;this.siteMembersMap={};this.fetchPostInfo=new org.r3.jsportlet.site.sitemember.portletScrollInfo(20);org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/site/please_login_or_register/PleaseLogInOrRegisterPortletActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"loginform",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/login/ShakeUsLoginActionForm2.html'),dataType:"html"});fbEnsureInit(function(){FB.getLoginStatus(function(response){_self.onFaceBookLoginStatus(response);});});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#please_action_register').unbind().click(function(e)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext()+'/org/r3/registration/register.do');});$('#please_action_fblogin').unbind().click($.r3Utils.hitch(this,this.onFaceBookLogin));var hasLoginForm=false;if($("#loginform_form").length==0)
hasLoginForm=true;else if(!$('#loginform_form').is(":visible"))
{$('#loginform_form').parent().empty();hasLoginForm=true;}
if(hasLoginForm)
{$(this.htmlContainerId+" #JSPortlet_PleaseLogInOrRegister_LoginForm").html(responseData['loginform']);$.r3Utils.onEnter('#loginform_form_password',this.actionFormManager,this.actionFormManager.doLogin,true);$("#loginform_form #loginButton").unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.doLogin));$("#loginform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.login.loginform_form_validationRules,messages:org.r3.jsportlet.login.loginform_form_validationMessages});}
this.show();}),function(d)
{console.error("controller did not load");});},onFaceBookLoginStatus:function(response)
{this.faceBookLoginStatus=response;},onFaceBookLogin:function(e)
{var _self=this;event.preventDefault();if(!this.faceBookLoginStatus||this.faceBookLoginStatus.status!='connected')
{FB.login(function(response)
{_self.faceBookLoginStatus=response;if(response.status==='connected')
{_self.onConnected();}},{scope:'public_profile,email',return_scopes:true});}
else _self.onConnected();},onConnected:function()
{var _self=this;console.log('Successful login for: ',this.faceBookLoginStatus);FB.api('/me',{fields:'email,name,first_name,last_name'},function(response)
{_self.doFBLogin(_self.faceBookLoginStatus,response);});},doFBLogin:function(aLoginStatus,aUserInformation)
{console.log("FBLogin: ",aLoginStatus,aUserInformation);if(!aUserInformation.email)
return;var formData={fbuserid:aUserInformation.id,accesstoken:aLoginStatus.authResponse.accessToken,email:aUserInformation.email,firstname:aUserInformation.first_name,lastname:aUserInformation.last_name};var formPayload=$.param(formData);console.log(formPayload);org.r3.AjaxUtils.doPostLoginFormData(org.r3.PageManager.getRESTUrl('POST_FBLogin',[aUserInformation.email]),formPayload,org.r3.Constants.getStrutsActionContext()+"/org/r3/home.do");},onLoginRedirect:function()
{}});$.r3Utils.namespace("org.r3.jsportlet.site.sitemember");org.r3.jsportlet.site.sitemember.SiteMemberPortletActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.site.sitemember.SiteMemberPortletActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function()
{this.detailView.open();},});$.r3Utils.namespace("org.r3.jsportlet.site.sitemember");org.r3.jsportlet.site.sitemember.portletScrollInfo=Class.extend({init:function(aPageSize)
{this.pageSize=aPageSize;this.pageOffset=0;this.keepLoading=false;this.loadingInProgress=false;},update:function(dataSize)
{if(dataSize<this.pageSize)
{this.keepLoading=false;}
else
{this.keepLoading=true;this.pageOffset+=dataSize;}}});org.r3.jsportlet.site.sitemember.SiteMemberPortletActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.siteMembersMap={};},close:function()
{this.hide();},open:function(aDataBeanInfo)
{var _self=this;this.siteMembersMap={};this.fetchPostInfo=new org.r3.jsportlet.site.sitemember.portletScrollInfo(20);org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/site/sitemember/SiteMemberPortletActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"members",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_UserCollection_SiteMembers',[this.fetchPostInfo.pageSize+'',this.fetchPostInfo.pageOffset+'']),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{"members":members}));this.siteMemberPhotoCanvas=$('#JSPortlet_SiteMember_Photo_Canvas');this.siteMemberPhotoCanvas.slimScroll({height:'250px'}).bind('slimscroll',$.r3Utils.hitch(this,function(e,pos){if(pos!='bottom')
return;if(this.fetchPostInfo.loadingInProgress||!this.fetchPostInfo.keepLoading)
return;this.fetchPostInfo.loadingInProgress=true;$(this.htmlContainerId+" .sitemember-loading-state").show();this._loadSiteMembersPage(this.fetchPostInfo.pageSize,this.fetchPostInfo.pageOffset);}));this.siteMemberPhotoCanvas.click(function(e){var currentTarget=$(e.target);if(currentTarget.attr('data-sitemember'))
{_self.showMemberInfo(currentTarget.attr('data-sitemember'));}});$('#JSPortlet_SiteMember_ILike').unbind().click(function(e){_self.addMeAsSiteMember();});$('#JSPortlet_SiteMember_IDisLike').unbind().click(function(e){_self.removeMeAsSiteMember();});var members=responseData['members'];if(members)
{this.processPageOfMembers(this.siteMemberPhotoCanvas,members);}
this.show();}),function(d)
{console.error("controller did not load");});},processPageOfMembers:function(aCanvas,queryResult)
{if(queryResult&&queryResult.aaData&&queryResult.aaData.length>0)
{this.fetchPostInfo.update(queryResult.aaData.length);$.each(queryResult.aaData,$.r3Utils.hitch(this,function(entryIndex,entry)
{var dto=new org.r3.db.mongo.usercollection.UserCollectionDTOAdapter(entry);this.siteMembersMap[dto.dataBean.userid]=dto;var photoUrl=this._getPhotoUrlForMember(dto)
var html="<a href='javascript:void(0)' >"+"<img data-sitemember='"+dto.dataBean.userid+"' "+" src='"+photoUrl+"' "+" class='img-thumbnail img-responsive' "+" title='"+dto.getUsername()+"' "+" />"+"</a>";aCanvas.append(html);}));}},_loadSiteMembersPage:function(aPageSize,anOffset)
{var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_UserCollection_SiteMembers",[aPageSize,anOffset]);org.r3.AjaxUtils.ajaxInvoke("GET",resolvedUrl,$.r3Utils.hitch(this,function(responseData)
{if(responseData)
{this.processPageOfMembers(this.siteMemberPhotoCanvas,responseData);}
this.fetchPostInfo.loadingInProgress=false;$(this.htmlContainerId+" .sitemember-loading-state").hide();}),$.r3Utils.hitch(this,function(jqXHR,timeout,message)
{console.log(arguments);$(this.htmlContainerId+" .sitemember-loading-state").hide();this.fetchPostInfo.loadingInProgress=false;}));},_getPhotoUrlForMember:function(aUserCollectionDTOAdapter)
{var u=aUserCollectionDTOAdapter.getPhotoIconUrl();return $.r3Utils.formatDMSUrl4ClientAccess(u);},addMeAsSiteMember:function()
{var _self=this;org.r3.AjaxUtils.ajaxInvoke("PUT",org.r3.PageManager.getRESTUrl('PUT_UserCollection_LikeSite'),function(responseData){$('#JSPortlet_SiteMember_ILike_Canvas').html('<div style="width: 100%; text-align:center"><i class="fa fa-spinner fa-spin fa-2x" ></i></div>');window.location.reload(true);},function(jqXHR,timeout,message){console.error(message);},false,false);},removeMeAsSiteMember:function()
{var _self=this;org.r3.AjaxUtils.ajaxInvoke("PUT",org.r3.PageManager.getRESTUrl('PUT_UserCollection_DisLikeSite'),function(responseData){$('#JSPortlet_SiteMember_IDisLike_Canvas').html('<div style="width: 100%; text-align:center"><i class="fa fa-spinner fa-spin fa-2x" ></i></div>');window.location.reload(true);},function(jqXHR,timeout,message){console.error(message);},false,false);},showMemberInfo:function(aUserId)
{console.log("UserId: "+aUserId);var dto=this.siteMembersMap[aUserId];if(dto)
{var dform=null;if(org.r3.PageManager.isSmallDevice())
{dform=$("#jsportlet_endof_sitememberportlet");dform.html(tmpl('cms_tpl_shakeussitememberbcard',{member:dto,memberPhoto:this._getPhotoUrlForMember(dto)}));dform.show();$('html, body').animate({scrollTop:dform.offset().top},1000);}
else
{dform=$("#jsportlet_startof_centerband");dform.html(tmpl('cms_tpl_shakeussitememberbcard',{member:dto,memberPhoto:this._getPhotoUrlForMember(dto)}));dform.show();}}}});$.r3Utils.namespace("org.r3.jsportlet.taskcompletionsidebar");org.r3.jsportlet.taskcompletionsidebar.TaskCompletionSideBarActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,optionsHash)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.taskcompletionsidebar.TaskCompletionSideBarActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(configHash)
{this.detailView.open(configHash);}});$.r3Utils.namespace("org.r3.jsportlet.rndphotosidebar");org.r3.jsportlet.taskcompletionsidebar.TaskCompletionSideBarActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function(configHash)
{var kd=$('#taskcompletionsidebar-progress-indicator');var v=configHash.taskCompletionLevel;if(v)
kd.val(v).trigger('change');},open:function(configHash)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/taskcompletionsidebar/TaskCompletionSideBarActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var displayOptions=$.extend(this.defaultOptionsHash,configHash);displayOptions.startIcon=1;var templatedHtml=tmpl(responseData['view'],displayOptions);$(this.htmlContainerId).html(templatedHtml);var kd=$('#taskcompletionsidebar-progress-indicator');kd.knob({'format':function(v){return(v||'0')+'%';}});var v=configHash.taskCompletionLevel;if(v)
kd.val(v).trigger('change');this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.teammemberprofile");org.r3.jsportlet.teammemberprofile.TeamMemberProfileActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aQueryContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.teammemberprofile.TeamMemberProfileActionFormView(aDetailViewContainerId,this);this.listView=new org.r3.db.project.teammemberprofile.TeamMemberProfileQueryActionFormView(aQueryContainerId,this,{dataTableId:'TeamMemberProfileQueryActionFormView',showTemplateOnOpen:true,gradeLevel:'grade_level1',iDisplayLength:-1,legend:'Elementi',dataTableColumns:"profileid,skillprofile,skillambit",requiredLUTs:["GET_classifier_skillprofile","GET_classifier_skillambit"],onSelected:$.r3Utils.hitch(this,function(aTeamMemberDTOAdapter)
{$('#teammember_deleteItem').prop('disabled',false);this.detailView.openDetail(aTeamMemberDTOAdapter);}),onDblClick:$.r3Utils.hitch(this,function(aTeamMemberDTOAdapter)
{$('#teammember_deleteItem').prop('disabled',true);}),buttons:[{id:'teammember_deleteItem',label:'Elimina',disabled:true,onClick:$.r3Utils.hitch(this,this._onItemDelete)}],onClearSelection:function()
{$('#teammember_deleteItem').prop('disabled',true);}});},close:function()
{this.detailView.close();this.listView.close();},hide:function()
{this.detailView.hide();this.listView.hide();},show:function()
{this.detailView.show();this.listView.show();},refresh:function()
{this.detailView.refresh();this.listView.refresh();$('#teammember_deleteItem').prop('disabled',true);},open:function(aTeamId)
{this.setDataBeanInfo(aTeamId);this.detailView.open();var dataTableSource=org.r3.PageManager.getRESTUrl('GET_TeamMemberProfiles',[aTeamId]);this.listView.open({"dataTableSource":dataTableSource});},submitForm:function(method,restUrl,theForm,onSuccess,onError)
{var _self=this;if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.refresh();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();if(onError)
onError(message);}});}},_onItemDelete:function()
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var selectedItem=this.listView.fnGetSelectedDataBean();this.deleteItem(selectedItem,function(responseData){_self.refresh();},function(jqXHR,timeout,message){console.log("org.r3.jsportlet.teammember.TeamMemberActionForm::"+message);});}},deleteItem:function(aTeamMemberDTOAdapter,onSuccess,onError)
{var _self=this;var method="DELETE";var restUrl=null;var site=aTeamMemberDTOAdapter.dataBean.site;var teamid=aTeamMemberDTOAdapter.dataBean.teamid;var profileid=aTeamMemberDTOAdapter.dataBean.profileid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_TeamMemberProfile',[profileid]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{if(onError)
onError(message);}});}});$.r3Utils.namespace("org.r3.jsportlet.teammemberprofile");org.r3.jsportlet.teammemberprofile.TeamMemberProfileActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},refresh:function()
{$("#teammemberprofile_form").resetForm();$('#teammemberprofile_profileid').prop('disabled',false);},open:function(aTeamId)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/teammemberprofile/TeamMemberProfileActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$("#teammemberprofile_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.teammemberprofile.teammemberprofile_form_validationRules,messages:org.r3.jsportlet.teammemberprofile.teammemberprofile_form_validationMessages});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_classifier_skillambit");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teammemberprofile_skillambit')});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_classifier_skillprofile");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#teammemberprofile_skillprofile')});$('#teammemberprofileform_action_save').unbind().click($.r3Utils.hitch(this,this.onSaveItem));$('#teammemberprofileform_action_clear').unbind().click($.r3Utils.hitch(this,function(e){$('#teammemberprofile_form').resetForm();$('#teammemberprofile_profileid').val("");$('#teammemberprofile_profileid').prop("disabled",false);}));$('#teammemberprofile_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},openDetail:function(aTeamMemberProfileDTOAdapter)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"item",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_TeamMemberProfile_Detail',[aTeamMemberProfileDTOAdapter.dataBean.teamid,aTeamMemberProfileDTOAdapter.dataBean.profileid]),dataType:"json"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_skillambit'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_skillprofile'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var itemDataBean=responseData['item'];if(itemDataBean!=null)
{aTeamMemberProfileDTOAdapter=new org.r3.db.project.teammemberprofile.TeamMemberProfileDTOAdapter(itemDataBean);}
$('#teammemberprofile_profileid').val(aTeamMemberProfileDTOAdapter.dataBean.profileid);$('#teammemberprofile_profileid').prop('disabled',true);$('#teammemberprofile_itemorder').val(99);$('#teammemberprofile_profiledescr').val("");$('#teammemberprofile_skillprofile').val(aTeamMemberProfileDTOAdapter.dataBean.skillprofile);$('#teammemberprofile_skillambit').val(aTeamMemberProfileDTOAdapter.dataBean.skillambit);}));},onSaveItem:function()
{var _self=this;var restUrl=null;var method="POST";var teamid=this.actionFormManager.dataBeanInfo;if($('#teammemberprofile_profileid').prop("disabled"))
{restUrl=org.r3.PageManager.getRESTUrl("PUT_TeamMemberProfile",[$('#teammemberprofile_profileid').val()]);method="PUT";}
else
{restUrl=org.r3.PageManager.getRESTUrl("POST_TeamMemberProfile");}
$('#teammemberprofile_profiledescr').val(this._getProfileDescription());this.actionFormManager.submitForm(method,restUrl,$("#teammemberprofile_form"),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('teammemberprofile_fieldset_message');}
else $('#teammemberprofile_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#teammemberprofile_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_getProfileDescription:function()
{var s=$("#teammemberprofile_skillprofile option:selected").text()+" "+$("#teammemberprofile_skillambit option:selected").text();return s;}});$.r3Utils.namespace("org.r3.jsportlet.teammemberprofile",window,function(aNamespace)
{aNamespace.teammemberprofile_form_validationRules={profileid:{required:false,maxlength:15,identifier:true,texttransform:'uppercase'},itemorder:{required:false,maxlength:5,digits:true},profiledescr:{required:false,maxlength:255},skillprofile:{required:true},skillambit:{required:true}};aNamespace.teammemberprofile_form_validationMessages={profileid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},itemorder:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},profiledescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},skillprofile:{required:org.r3.message.field_required},skillambit:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.timeline");org.r3.jsportlet.timeline.BBSThreadPortletActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.timeline.BBSThreadPortletView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(aTopicId,aThreadId,anOptionsHash)
{this.detailView.open(aTopicId,aThreadId);}});$.r3Utils.namespace("org.r3.jsportlet.timeline");org.r3.jsportlet.timeline.BBSThreadPortletView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.bbsTopicDTOAdapter=null;this.bbsThreadDTOAdapter=null;this.bbsThreadNodesDTOAdapter={};this.profiles=['crewask','crewoffer','tweet'];this.primaryProfileId=null;this.childProfileId='tweet';this.profileObjects={};this.inputContext={mode:'none',targetObj:null};this.fetchPostInfo={keepLoading:false,loadingInProgress:false,lastPrimaryPostLoaded:null,pageSize:20};},close:function()
{this.hide();},_getProfile:function(aProfileId)
{return this.profileObjects[aProfileId];},_instantiateProfile:function(aProfile)
{if(!aProfile)
return;var p=new org.r3.jsportlet.timeline.tweet_BBSThreadNode_Profile();switch(aProfile)
{case'crewask':p=new org.r3.jsportlet.timeline.crewask_BBSThreadNode_Profile();break;case'crewoffer':p=new org.r3.jsportlet.timeline.crewoffer_BBSThreadDTO_Profile();break;}
this.profileObjects[aProfile]=p;},open:function(aBBSTopicId,aBBSThreadId)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"bbstopicdetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_BBSTopicDetail",[aBBSTopicId]),dataType:"json"});networkRequestsQueue.push({id:"bbsthreaddetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_BBSThreadDetail",[aBBSTopicId,aBBSThreadId]),dataType:"json"});networkRequestsQueue.push({id:"bbsthreadnodes",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_ThreadTimeline",[aBBSTopicId,aBBSThreadId,this.fetchPostInfo.pageSize+'',""]),dataType:"json"});networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/timeline/BBSThreadPortletView.html.jsp'),dataType:"html"});this.profiles.forEach(function(item)
{_self._instantiateProfile(item);networkRequestsQueue.push({id:item+"_view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/timeline/'+item+'_BBSThreadPortletView_FormTemplate.html.jsp'),dataType:"html"});});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var bbsTopicDTOAdapter=responseData['bbstopicdetail'];if(bbsTopicDTOAdapter)
{this.bbsTopicDTOAdapter=new org.r3.db.bbs.bbstopic.BBSTopicDTOAdapter(bbsTopicDTOAdapter);}
var bbsThreadDTOAdapter=responseData['bbsthreaddetail'];if(bbsThreadDTOAdapter)
{this.bbsThreadDTOAdapter=new org.r3.db.bbs.bbsthread.BBSThreadDTOAdapter(bbsThreadDTOAdapter);}
this.primaryProfileId=this.bbsThreadDTOAdapter.dataBean.threadprofile;this.childProfileId='tweet';$(this.htmlContainerId).html(tmpl(responseData['view'],{threadProfile:this._getProfile(this.primaryProfileId)}));$('#bbsthreadportletviewactionform_threadtitle').html(this.bbsThreadDTOAdapter.dataBean.threadtitle);this._getProfile(this.primaryProfileId).onOpenActionFormView(responseData);this._getProfile(this.childProfileId).onOpenActionFormView(responseData);this._processPageOfPosts(responseData['bbsthreadnodes']);$('#bbsthreadportletviewactionform_threadposts_cnt').unbind().click($.r3Utils.hitch(this,this._onClickHandler));$('#jsportlettimelineform_newprimarypost_canvas').unbind().click($.r3Utils.hitch(this,this._onClickHandler));if(org.r3.PageManager.userInfo.isGuest())
{$('#jsportlettimelineform_newprimarypost_actionbar').hide();}
else
{$('#jsportlettimelineform_newprimarypost_action').unbind().click($.r3Utils.hitch(this,this._onOpenPrimaryPostForm));}
this.show();if(this.fetchPostInfo.keepLoading)
org.r3.PageManager.setScrollToBottomCallback($.r3Utils.hitch(this,this._onLoadMorePostsOnScroll));}),function(d)
{console.error("controller did not load");});},_onLoadMorePostsOnScroll:function()
{if(this.fetchPostInfo.loadingInProgress||!this.fetchPostInfo.keepLoading)
return;this.fetchPostInfo.loadingInProgress=true;$('#loadMoreContentProgress').show();this._loadTimelinePage(this.bbsTopicDTOAdapter,this.bbsThreadDTOAdapter,this.fetchPostInfo.pageSize,this.fetchPostInfo.lastPrimaryPostLoaded);},_loadTimelinePage:function(aBBSTopic,aBBSThread,aPageSize,upperTimelinePostId)
{var topicId=this.bbsTopicDTOAdapter.dataBean.topicid;var threadId=this.bbsThreadDTOAdapter.dataBean.threadid;var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_ThreadTimeline",[topicId,threadId,aPageSize,upperTimelinePostId]);org.r3.AjaxUtils.ajaxInvoke("GET",resolvedUrl,$.r3Utils.hitch(this,function(responseData)
{this._resetInputContext();this._processPageOfPosts(responseData);this.fetchPostInfo.loadingInProgress=false;$('#loadMoreContentProgress').hide();}),function(jqXHR,timeout,message)
{console.log(arguments);$('#loadMoreContentProgress').hide();this.fetchPostInfo.loadingInProgress=false;});},_processPageOfPosts:function(aPagePosts)
{var numberOfPrimaryPosts=0;var lastPrimaryPost=null;if(aPagePosts&&aPagePosts.aaData&&aPagePosts.aaData.length>0)
{$.each(aPagePosts.aaData,$.r3Utils.hitch(this,function(entryIndex,aRowDataBean)
{var dtoAdapter=new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTOAdapter(aRowDataBean);if(!dtoAdapter.dataBean.nodeparentid)
{lastPrimaryPost=dtoAdapter.dataBean.threadnodeid;numberOfPrimaryPosts++;}
this.bbsThreadNodesDTOAdapter[dtoAdapter.dataBean.threadnodeid]=dtoAdapter;this._appendPost(this.bbsTopicDTOAdapter,this.bbsThreadDTOAdapter,dtoAdapter);}));}
if(numberOfPrimaryPosts<this.fetchPostInfo.pageSize)
{this.fetchPostInfo.keepLoading=false;this.fetchPostInfo.lastPrimaryPostLoaded=null;}
else
{this.fetchPostInfo.keepLoading=true;this.fetchPostInfo.lastPrimaryPostLoaded=lastPrimaryPost;}},_appendPost:function(aBBSTopic,aBBSThread,aPost,appendMode)
{var tp=this._getProfile(aPost.dataBean.nodetype);var renderedPost=tp.postRenderer(aBBSTopic,aBBSThread,aPost);if(aPost.dataBean.nodeparentid)
{if(appendMode)
$('#thn_'+aPost.dataBean.nodeparentid+'_childlist').prepend('<li>'+renderedPost+'</li>');else
$('#thn_'+aPost.dataBean.nodeparentid+'_childlist').append('<li>'+renderedPost+'</li>');}
else
{if(appendMode)
$('#bbsthreadportletviewactionform_threadposts_cnt').prepend(renderedPost);else
$('#bbsthreadportletviewactionform_threadposts_cnt').append(renderedPost);}},_updatePost:function(aBBSTopic,aBBSThread,aPost)
{var thnode_info=$('#thn_'+aPost.dataBean.threadnodeid+' > .panel-heading > .date ');thnode_info.html(aPost.getCreationDateAsBadge());var thnode_info=$('#thn_'+aPost.dataBean.threadnodeid+' > .panel-heading > .moment ');thnode_info.html(aPost.getCreationdateAsElapsed());var thnode_content=$('#thn_'+aPost.dataBean.threadnodeid+'_postcontent');var tp=this._getProfile(aPost.dataBean.nodetype);thnode_content.html(tp.postContentRenderer(aBBSTopic,aBBSThread,aPost));},_updateThreadNodesList:function(threadNodeDataBean)
{var thnode=$('#thn_'+threadNodeDataBean.dataBean.threadnodeid);if(thnode.length)
{this.bbsThreadNodesDTOAdapter[threadNodeDataBean.dataBean.threadnodeid]=threadNodeDataBean;this._updatePost(this.bbsTopicDTOAdapter,this.bbsThreadDTOAdapter,threadNodeDataBean);}
else
{this.bbsThreadNodesDTOAdapter[threadNodeDataBean.dataBean.threadnodeid]=threadNodeDataBean;this._appendPost(this.bbsTopicDTOAdapter,this.bbsThreadDTOAdapter,threadNodeDataBean,true);}},_resetInputContext:function()
{switch(this.inputContext.mode)
{case'none':break;case'newprimarypost':$('#jsportlettimelineform_newprimarypost_canvas').hide();$('#jsportlettimelineform_newprimarypost_actionbar').show();this._getProfile(this.primaryProfileId).resetForm();break;case'editprimarypost':$('#thn_'+this.inputContext.targetObj.dataBean.threadnodeid+'_editcanvas  > div').appendTo($('#jsportlettimelineform_primarypost_formtemplate'));$('#thn_'+this.inputContext.targetObj.dataBean.threadnodeid+'_postcontent').show();$('#thn_'+this.inputContext.targetObj.dataBean.threadnodeid+' button[data-action="new-child"]').show();this._getProfile(this.primaryProfileId).resetForm();break;case'newchild':$('#thn_'+this.inputContext.targetObj.dataBean.threadnodeid+'_newchildcanvas > div').appendTo($('#jsportlettimelineform_childpost_formtemplate'));$('#thn_'+this.inputContext.targetObj.dataBean.threadnodeid+' button[data-action="new-child"]').show();this._getProfile(this.childProfileId).resetForm();break;case'editchild':$('#thn_'+this.inputContext.targetObj.dataBean.threadnodeid+'_editcanvas > div').appendTo($('#jsportlettimelineform_childpost_formtemplate'));$('#thn_'+this.inputContext.targetObj.dataBean.threadnodeid+'_postcontent').show();$('#thn_'+this.inputContext.targetObj.dataBean.threadnodeid+' button[data-action="new-child"]').show();this._getProfile(this.childProfileId).resetForm();break;}
this.inputContext.mode='none';this.inputContext.targetObj=null;},_setInputContext:function(aNewMode,aTargetNodeDTOAdapter)
{this._resetInputContext();this.inputContext.mode=aNewMode;this.inputContext.targetObj=aTargetNodeDTOAdapter;switch(aNewMode)
{case'newprimarypost':$('#jsportlettimelineform_newprimarypost_canvas').show();$('#jsportlettimelineform_newprimarypost_actionbar').hide();break;case'editprimarypost':$('#jsportlettimelineform_primarypost_formtemplate > div').appendTo($('#thn_'+aTargetNodeDTOAdapter.dataBean.threadnodeid+'_editcanvas'));$('#thn_'+aTargetNodeDTOAdapter.dataBean.threadnodeid+'_postcontent').hide();$('#thn_'+aTargetNodeDTOAdapter.dataBean.threadnodeid+' button[data-action="new-child"]').hide();this._getProfile(this.primaryProfileId).initializeForm(aTargetNodeDTOAdapter);break;case'newchild':$('#jsportlettimelineform_childpost_formtemplate > div').appendTo($('#thn_'+aTargetNodeDTOAdapter.dataBean.threadnodeid+'_newchildcanvas'));$('#thn_'+aTargetNodeDTOAdapter.dataBean.threadnodeid+' button[data-action="new-child"]').hide();this._getProfile(this.childProfileId).initializeForm(aTargetNodeDTOAdapter.dataBean.threadnodeid);break;case'editchild':$('#jsportlettimelineform_childpost_formtemplate > div').appendTo($('#thn_'+aTargetNodeDTOAdapter.dataBean.threadnodeid+'_editcanvas'));$('#thn_'+aTargetNodeDTOAdapter.dataBean.threadnodeid+'_postcontent').hide();$('#thn_'+aTargetNodeDTOAdapter.dataBean.threadnodeid+' button[data-action="new-child"]').hide();this._getProfile(this.childProfileId).initializeForm(aTargetNodeDTOAdapter);break;}},_onOpenPrimaryPostForm:function()
{this._setInputContext('newprimarypost');},_extractPostId:function(anId)
{if(anId&&anId.substring(0,4)=='thn_')
anId=anId.substring(4);return anId;},_onClickHandler:function(e)
{var target=$(e.target);var dataAction=target.attr('data-action');var dataActionTarget=target;var ps=null;if(!dataAction)
{ps=target.parents('[data-action]');if(ps.length>0)
{dataActionTarget=$(ps[0]);dataAction=dataActionTarget.attr('data-action');}}
if(dataAction!=null)
{switch(dataAction)
{case'tweet-cancel':this._resetInputContext();break;case'crewoffer-cancel':this._resetInputContext();break;case'crewask-cancel':this._resetInputContext();break;case'crewask-submit':this._onSubmit('crewask');break;case'crewoffer-submit':this._onSubmit('crewoffer');break;case'tweet-submit':this._onSubmit('tweet');break;case'edit-primary':ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{var dtoAdapter=this.bbsThreadNodesDTOAdapter[this._extractPostId($(ps[0]).attr('id'))];this._setInputContext('editprimarypost',dtoAdapter);}
break;case'delete':this._resetInputContext();ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{this._doDelete(ps);}
break;case'new-child':ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{var dtoAdapter=this.bbsThreadNodesDTOAdapter[this._extractPostId($(ps[0]).attr('id'))];this._setInputContext('newchild',dtoAdapter);}
break;case'edit-child':ps=dataActionTarget.parents('.timelinepost');if(ps.length>0)
{var dtoAdapter=this.bbsThreadNodesDTOAdapter[this._extractPostId($(ps[0]).attr('id'))];this._setInputContext('editchild',dtoAdapter);}
break;default:console.log("Data Action: ",dataAction);}}
return true;},_doDelete:function(aPostWrapperObj)
{var _self=this;var targetWrapper=$(aPostWrapperObj[0]);var aPostId=targetWrapper.attr('id');if(aPostId)
aPostId=aPostId.substring(4);var topicId=this.bbsTopicDTOAdapter.dataBean.topicid;var threadId=this.bbsThreadDTOAdapter.dataBean.threadid;org.r3.AjaxUtils.ajaxInvoke('DELETE',org.r3.PageManager.getRESTUrl('DELETE_BBSThreadNode',[topicId,threadId,aPostId]),function(responseData){targetWrapper.remove();_self._deleteFromThreadNodesList(aPostId);},function(jqXHR,timeout,message){},false,false);},_deleteFromThreadNodesList:function(aThreadnodeid)
{this.bbsThreadNodesDTOAdapter[aThreadnodeid]=null;},_onSubmit:function(aProfileId)
{var _self=this;var profileObj=this._getProfile(aProfileId);var threadNodeId=profileObj.getThreadNodeIdFieldValue();var theForm=profileObj.getForm();if(theForm.valid())
{profileObj.serializePost();if(org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var topicId=this.bbsTopicDTOAdapter.dataBean.topicid;var threadId=this.bbsThreadDTOAdapter.dataBean.threadid;var method=null;var restUrl=null;if(threadNodeId)
{restUrl=org.r3.PageManager.getRESTUrl('PUT_BBSThreadNode',[topicId,threadId,threadNodeId]);method="put";}
else
{restUrl=org.r3.PageManager.getRESTUrl('POST_BBSThreadNode',[topicId,threadId]);method="post";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var threadNodeDataBean=new org.r3.db.bbs.bbsthreadnodeview.BBSThreadNodeViewDTOAdapter(responseData);_self._updateThreadNodesList(threadNodeDataBean);_self._resetInputContext();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();profileObj.showMessage({text:message,category:'error'});}});}}}});jQuery.r3Utils.namespace("org.r3.jsportlet.timeline");org.r3.jsportlet.timeline.crewask_BBSThreadNode_Profile=Class.extend({init:function()
{},getProfileid:function()
{return'crewask';},onOpenActionFormView:function(responseData)
{$("#jsportlettimelineform_primarypost_formtemplate").html(tmpl(responseData['crewask_view'],{threadProfile:this}));$('#crewask_jsportlettimelineform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.timeline.crewask_jsportlettimelineform_form_validationRules,messages:org.r3.jsportlet.timeline.crewask_jsportlettimelineform_form_validationMessages});$('#crewask_jsportlettimelineform_wrapper .jsportlettimelineform_fieldsetmessage').formmessage({});},resetForm:function()
{$('#crewask_jsportlettimelineform_form')[0].reset();$('#crewask_jsportlettimelineform_nodeparentid').val(null);$('#crewask_jsportlettimelineform_threadnodeid').val(null);$('#crewask_jsportlettimelineform_nodetitle').val(null);$('#crewask_jsportlettimelineform_nodetext').val(null);},getForm:function()
{return $('#crewask_jsportlettimelineform_form');},getThreadNodeIdFieldValue:function()
{return $('#crewask_jsportlettimelineform_threadnodeid').val();},serializePost:function()
{var frm=$('#crewask_jsportlettimelineform_form');var serializedArray=frm.serializeArray();var crewRoleVal=$('#crewask_jsportlettimelineform_crewrole').val();var crewLevelVal=$('#crewask_jsportlettimelineform_crewlevel').val();var crewRoleText=$("#crewask_jsportlettimelineform_crewrole option[value='"+crewRoleVal+"']").text();var crewLevelText=$("#crewask_jsportlettimelineform_crewlevel option[value='"+crewLevelVal+"']").text();serializedArray.push({"name":"crewroletext","value":crewRoleText});serializedArray.push({"name":"crewleveltext","value":crewLevelText});var data=JSON.stringify(serializedArray);$('#crewask_jsportlettimelineform_nodetext').val(data);if(crewRoleVal)
$('#crewask_jsportlettimelineform_nodetitle').val(crewRoleText+' '+crewLevelText);else $('#crewask_jsportlettimelineform_nodetitle').val($('#crewask_jsportlettimelineform_crewname').val());},showMessage:function(m)
{$('#crewask_jsportlettimelineform_form .jsportlettimelineform_fieldsetmessage').formmessage('setText',m);},initializeForm:function(aBBSThreadNodeDTOAdapter)
{if(aBBSThreadNodeDTOAdapter)
{if(_.isString(aBBSThreadNodeDTOAdapter))
{$('#crewask_jsportlettimelineform_nodeparentid').val(aBBSThreadNodeDTOAdapter);}
else
{$('#crewask_jsportlettimelineform_nodeparentid').val(aBBSThreadNodeDTOAdapter.dataBean.nodeparentid);$('#crewask_jsportlettimelineform_threadnodeid').val(aBBSThreadNodeDTOAdapter.dataBean.threadnodeid);var deserializedObj=this._getNodetextAsJSONObject(aBBSThreadNodeDTOAdapter.dataBean.nodetext);$("#crewask_jsportlettimelineform_crewrole").val(deserializedObj.crewrole);$("#crewask_jsportlettimelineform_crewlevel").val(deserializedObj.crewlevel);$("#crewask_jsportlettimelineform_crewname").val(deserializedObj.crewname);$("#crewask_jsportlettimelineform_crewemail").val(deserializedObj.crewemail);$("#crewask_jsportlettimelineform_crewphone").val(deserializedObj.crewphone);$("#crewask_jsportlettimelineform_crewweight").val(deserializedObj.crewweight);$("#crewask_jsportlettimelineform_crewheight").val(deserializedObj.crewheight);$("#crewask_jsportlettimelineform_crewage").val(deserializedObj.crewage);$("#crewask_jsportlettimelineform_crewinfo").val(deserializedObj.crewinfo);}}},_getNodetextAsJSONObject:function(s)
{var deserializedObj=$.parseJSON(s);var objHash={};for(var i=0;i<deserializedObj.length;i++)
{objHash[deserializedObj[i].name]=deserializedObj[i].value;}
return objHash;},getNewPostTemplate:function()
{return'/org/r3/jsportlet/timeline/crewask_BBSThreadPortletView_FormTemplate.html.jsp';},getPostActions:function()
{var postActions=[{"id":'edit-primary',"text":'Modifica',"visibility":"onUserIsOwner"},{"id":'delete',"text":'Elimina',"visibility":"onUserIsOwner"}];return postActions;},getLabels:function()
{var labels={newPost:"Nuova Inserzione",multiplePosts:"Inserzioni",singlePost:"Inserzione",newPostPanelHeading:'Inserimento Inserzione'};return labels;},postInfoRenderer:function(aBBSTopic,aBBSThread,aPost)
{var templatedHtml=tmpl('template-bbsthreadportletviewactionform_postinforenderer',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"threadProfile":this});return templatedHtml;},postContentRenderer:function(aBBSTopic,aBBSThread,aPost)
{var deserializedObj=this._getNodetextAsJSONObject(aPost.dataBean.nodetext);var htmlPostText=tmpl('template-bbsthreadportletviewactionform_cimbarco_contentrenderer',deserializedObj);return htmlPostText;},postRenderer:function(aBBSTopic,aBBSThread,aPost)
{var htmlPostText=this.postContentRenderer(aBBSTopic,aBBSThread,aPost);var templatedHtml=tmpl('template-timelineportletviewactionform',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"nodetextashtml":htmlPostText,"threadProfile":this});return templatedHtml;}});$.r3Utils.namespace("org.r3.jsportlet.timeline",window,function(aNamespace)
{aNamespace.crewask_jsportlettimelineform_form_validationRules={nodetitle:{required:true,maxlength:80},crewrole:{required:false},crewlevel:{required:false},ownername:{required:true,maxlength:60},crewname:{required:true,maxlength:60},owneremail:{required:true,email:true,maxlength:60},crewemail:{required:true,email:true,maxlength:60},ownerphone:{required:true,digits:true,maxlength:15},crewphone:{required:true,digits:true,maxlength:15},crewweight:{required:false,digits:true,maxlength:6},crewheight:{required:false,digits:true,maxlength:6},crewage:{required:false,digits:true,maxlength:6},crewinfo:{required:false,maxlength:255},yachtinfo:{required:false,maxlength:255},yachtname:{required:true,maxlength:30},yachtmodel:{required:true,maxlength:30}};aNamespace.crewask_jsportlettimelineform_form_validationMessages={nodetitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewrole:{required:org.r3.message.field_required},crewlevel:{required:org.r3.message.field_required},ownername:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},ownermail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},crewemail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},ownerphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewweight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewheight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewage:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtmodel:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.jsportlet.timeline");org.r3.jsportlet.timeline.crewoffer_BBSThreadDTO_Profile=Class.extend({init:function()
{},getProfileid:function()
{return'crewoffer';},onOpenActionFormView:function(responseData)
{$("#jsportlettimelineform_primarypost_formtemplate").html(tmpl(responseData['crewoffer_view'],{threadProfile:this}));$('#crewoffer_jsportlettimelineform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.timeline.crewoffer_jsportlettimelineform_form_validationRules,messages:org.r3.jsportlet.timeline.crewoffer_jsportlettimelineform_form_validationMessages});$('#crewoffer_jsportlettimelineform_wrapper .jsportlettimelineform_fieldsetmessage').formmessage({});},resetForm:function()
{$('#crewoffer_jsportlettimelineform_form')[0].reset();$('#crewoffer_jsportlettimelineform_nodeparentid').val(null);$('#crewoffer_jsportlettimelineform_threadnodeid').val(null);$('#crewoffer_jsportlettimelineform_nodetitle').val(null);$('#crewoffer_jsportlettimelineform_nodetext').val(null);},getForm:function()
{return $('#crewoffer_jsportlettimelineform_form');},getThreadNodeIdFieldValue:function()
{return $('#crewoffer_jsportlettimelineform_threadnodeid').val();},serializePost:function()
{var frm=$('#crewoffer_jsportlettimelineform_form');var serializedArray=frm.serializeArray();var crewRoleVal='';var crewRoleText='';var rolesCheck=$("#crewoffer_jsportlettimelineform_form input[type='checkbox'][name='crewrole']");for(var i=0;i<rolesCheck.length;i++)
{var cbk=$(rolesCheck[i]);if(cbk.prop('checked'))
{if(crewRoleVal.length>0)
crewRoleVal=crewRoleVal+',';crewRoleVal=crewRoleVal+cbk.val();if(crewRoleText.length>0)
crewRoleText=crewRoleText+', ';crewRoleText=crewRoleText+cbk.parent().text();}}
serializedArray.push({"name":"crewrole","value":crewRoleVal});var crewLevelVal=$('#crewoffer_jsportlettimelineform_crewlevel').val();var crewLevelText=$("#crewoffer_jsportlettimelineform_crewlevel option[value='"+crewLevelVal+"']").text();serializedArray.push({"name":"crewroletext","value":crewRoleText});serializedArray.push({"name":"crewleveltext","value":crewLevelText});var data=JSON.stringify(serializedArray);$('#crewoffer_jsportlettimelineform_nodetext').val(data);if(crewRoleVal)
$('#crewoffer_jsportlettimelineform_nodetitle').val(crewRoleText+' '+crewLevelText);else $('#crewoffer_jsportlettimelineform_nodetitle').val($('#crewoffer_jsportlettimelineform_ownername').val());},showMessage:function(m)
{$('#crewoffer_jsportlettimelineform_form .jsportlettimelineform_fieldsetmessage').formmessage('setText',m);},initializeForm:function(aBBSThreadNodeDTOAdapter)
{if(aBBSThreadNodeDTOAdapter)
{if(_.isString(aBBSThreadNodeDTOAdapter))
{$('#crewoffer_jsportlettimelineform_nodeparentid').val(aBBSThreadNodeDTOAdapter);}
else
{$('#crewoffer_jsportlettimelineform_nodeparentid').val(aBBSThreadNodeDTOAdapter.dataBean.nodeparentid);$('#crewoffer_jsportlettimelineform_threadnodeid').val(aBBSThreadNodeDTOAdapter.dataBean.threadnodeid);var deserializedObj=this._getNodetextAsJSONObject(aBBSThreadNodeDTOAdapter.dataBean.nodetext);if(deserializedObj.crewrole&&deserializedObj.crewrole.length>0)
{var listOfRoles=deserializedObj.crewrole.split(',');if(listOfRoles&&listOfRoles.length)
{for(var j=0;j<listOfRoles.length;j++)
{$('#crewoffer_jsportlettimelineform_crewrole_'+listOfRoles[j]).prop('checked',true);}}}
$("#crewoffer_jsportlettimelineform_crewlevel").val(deserializedObj.crewlevel);$("#crewoffer_jsportlettimelineform_ownername").val(deserializedObj.ownername);$("#crewoffer_jsportlettimelineform_owneremail").val(deserializedObj.owneremail);$("#crewoffer_jsportlettimelineform_ownerphone").val(deserializedObj.ownerphone);$("#crewoffer_jsportlettimelineform_yachtname").val(deserializedObj.yachtname);$("#crewoffer_jsportlettimelineform_yachtmodel").val(deserializedObj.yachtmodel);$("#crewoffer_jsportlettimelineform_yachtinfo").val(deserializedObj.yachtinfo);}}},_getNodetextAsJSONObject:function(s)
{var deserializedObj=$.parseJSON(s);var objHash={};for(var i=0;i<deserializedObj.length;i++)
{objHash[deserializedObj[i].name]=deserializedObj[i].value;}
return objHash;},getNewPostTemplate:function()
{return'/org/r3/jsportlet/timeline/crewoffer_BBSThreadPortletView_FormTemplate.html.jsp';},getPostActions:function()
{var postActions=[{"id":'edit-primary',"text":'Modifica',"visibility":"onUserIsOwner"},{"id":'delete',"text":'Elimina',"visibility":"onUserIsOwner"}];return postActions;},getLabels:function()
{var labels={newPost:"Nuova Inserzione",multiplePosts:"Inserzioni",singlePost:"Inserzione",newPostPanelHeading:'Inserimento Inserzione'};return labels;},postInfoRenderer:function(aBBSTopic,aBBSThread,aPost)
{var templatedHtml=tmpl('template-bbsthreadportletviewactionform_postinforenderer',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"threadProfile":this});return templatedHtml;},postContentRenderer:function(aBBSTopic,aBBSThread,aPost)
{var deserializedObj=this._getNodetextAsJSONObject(aPost.dataBean.nodetext);var htmlPostText=tmpl('template-bbsthreadportletviewactionform_oimbarco_contentrenderer',deserializedObj);return htmlPostText;},postRenderer:function(aBBSTopic,aBBSThread,aPost)
{var htmlPostText=this.postContentRenderer(aBBSTopic,aBBSThread,aPost);var templatedHtml=tmpl('template-timelineportletviewactionform',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"nodetextashtml":htmlPostText,"threadProfile":this});return templatedHtml;}});$.r3Utils.namespace("org.r3.jsportlet.timeline",window,function(aNamespace)
{aNamespace.crewoffer_jsportlettimelineform_form_validationRules={nodetitle:{required:true,maxlength:80},crewrole:{required:false},crewlevel:{required:false},ownername:{required:true,maxlength:60},crewname:{required:true,maxlength:60},owneremail:{required:true,email:true,maxlength:60},crewemail:{required:true,email:true,maxlength:60},ownerphone:{required:true,digits:true,maxlength:15},crewphone:{required:true,digits:true,maxlength:15},crewweight:{required:false,digits:true,maxlength:6},crewheight:{required:false,digits:true,maxlength:6},crewage:{required:false,digits:true,maxlength:6},crewinfo:{required:false,maxlength:255},yachtinfo:{required:false,maxlength:255},yachtname:{required:true,maxlength:30},yachtmodel:{required:true,maxlength:30}};aNamespace.crewoffer_jsportlettimelineform_form_validationMessages={nodetitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewrole:{required:org.r3.message.field_required},crewlevel:{required:org.r3.message.field_required},ownername:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},ownermail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},crewemail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},ownerphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewweight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewheight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewage:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtmodel:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});jQuery.r3Utils.namespace("org.r3.jsportlet.timeline");org.r3.jsportlet.timeline.tweet_BBSThreadNode_Profile=Class.extend({init:function()
{},getProfileid:function()
{return'tweet';},onOpenActionFormView:function(responseData)
{$("#jsportlettimelineform_childpost_formtemplate").html(tmpl(responseData['tweet_view'],{threadProfile:this}));$('#tweet_jsportlettimelineform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.timeline.tweet_jsportlettimelineform_form_validationRules,messages:org.r3.jsportlet.timeline.tweet_jsportlettimelineform_form_validationMessages});$('#tweet_jsportlettimelineform_wrapper .jsportlettimelineform_fieldsetmessage').formmessage({});},resetForm:function()
{$('#tweet_jsportlettimelineform_form')[0].reset();$('#tweet_jsportlettimelineform_nodeparentid').val(null);$('#tweet_jsportlettimelineform_threadnodeid').val(null);},getForm:function()
{return $('#tweet_jsportlettimelineform_form');},getThreadNodeIdFieldValue:function()
{return $('#tweet_jsportlettimelineform_threadnodeid').val();},serializePost:function()
{},showMessage:function(m)
{$('#tweet_jsportlettimelineform_form .jsportlettimelineform_fieldsetmessage').formmessage('setText',m);},initializeForm:function(aBBSThreadNodeDTOAdapter)
{if(aBBSThreadNodeDTOAdapter)
{if(_.isString(aBBSThreadNodeDTOAdapter))
{$('#tweet_jsportlettimelineform_nodeparentid').val(aBBSThreadNodeDTOAdapter);}
else
{$('#tweet_jsportlettimelineform_nodetitle').val(aBBSThreadNodeDTOAdapter.dataBean.nodetitle);$('#tweet_jsportlettimelineform_nodetext').val(aBBSThreadNodeDTOAdapter.dataBean.nodetext);$('#tweet_jsportlettimelineform_nodeparentid').val(aBBSThreadNodeDTOAdapter.dataBean.nodeparentid);$('#tweet_jsportlettimelineform_threadnodeid').val(aBBSThreadNodeDTOAdapter.dataBean.threadnodeid);}}
else
{$('#tweet_jsportlettimelineform_nodetitle').val(null);$('#tweet_jsportlettimelineform_nodetext').val("");}},getNewPostTemplate:function()
{return'/org/r3/jsportlet/bbs/tweet_BBSThreadPortletView_FormTemplate.html.jsp';},getPostActions:function()
{var postActions=[{"id":'edit-child',"text":'Modifica',"visibility":"onUserIsOwner"},{"id":'delete',"text":'Elimina',"visibility":"onUserIsOwner"}];return postActions;},getLabels:function()
{var labels={newPost:"Nuovo Commento",multiplePosts:"Commenti",singlePost:"Commento",newPostPanelHeading:'Inserimento Commento'};return labels;},postInfoRenderer:function(aBBSTopic,aBBSThread,aPost)
{var templatedHtml=tmpl('template-timelineportletviewactionform_postinforenderer',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"threadProfile":this});return templatedHtml;},postContentRenderer:function(aBBSTopic,aBBSThread,aPost)
{return aPost.dataBean.nodetext;},postRenderer:function(aBBSTopic,aBBSThread,aPost)
{var nodetextAsHtml=this.postContentRenderer(aBBSTopic,aBBSThread,aPost);var templatedHtml=tmpl('template-timelineportletviewactionform',{"topic":aBBSTopic,"thread":aBBSThread,"post":aPost,"nodetextashtml":nodetextAsHtml,"threadProfile":this});return templatedHtml;},});$.r3Utils.namespace("org.r3.jsportlet.timeline",window,function(aNamespace)
{aNamespace.tweet_jsportlettimelineform_form_validationRules={nodetitle:{required:true,maxlength:80},crewrole:{required:false},crewlevel:{required:false},ownername:{required:true,maxlength:60},crewname:{required:true,maxlength:60},owneremail:{required:true,email:true,maxlength:60},crewemail:{required:true,email:true,maxlength:60},ownerphone:{required:true,digits:true,maxlength:15},crewphone:{required:true,digits:true,maxlength:15},crewweight:{required:false,digits:true,maxlength:6},crewheight:{required:false,digits:true,maxlength:6},crewage:{required:false,digits:true,maxlength:6},crewinfo:{required:false,maxlength:255},yachtinfo:{required:false,maxlength:255},yachtname:{required:true,maxlength:30},yachtmodel:{required:true,maxlength:30}};aNamespace.tweet_jsportlettimelineform_form_validationMessages={nodetitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewrole:{required:org.r3.message.field_required},crewlevel:{required:org.r3.message.field_required},ownername:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},crewname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},ownermail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},crewemail:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,email:org.r3.message.field_email,},ownerphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewweight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewheight:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewage:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},crewinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtinfo:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},yachtmodel:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.user");org.r3.jsportlet.user.BusinessCardInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aUserCollectionDTOAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/user/BusinessCardInfoActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#businesscardinfoactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.user.businesscardinfoactionform_form_validationRules,messages:org.r3.jsportlet.user.businesscardinfoactionform_form_validationMessages});$('#businesscardinfoactionform_action_saveitem').click($.r3Utils.hitch(this,this.doSaveBusinessCard));$('#changepasswordactionform_fieldset_message').formmessage({});this._initializeFormFields(aUserCollectionDTOAdapter);this.show();}),function(d)
{console.error("controller did not load");});},_initializeFormFields:function(aUserCollectionDTOAdapter)
{if(aUserCollectionDTOAdapter&&aUserCollectionDTOAdapter.dataBean.businesscard)
{$('#businesscardinfoactionform_personalstatement').val(aUserCollectionDTOAdapter.dataBean.businesscard.personalstatement);$('#businesscardinfoactionform_email').val(aUserCollectionDTOAdapter.dataBean.businesscard.email);$('#businesscardinfoactionform_cellphone').val(aUserCollectionDTOAdapter.dataBean.businesscard.cellphone);}},doSaveBusinessCard:function()
{var _self=this;var theForm=$('#businesscardinfoactionform_form');org.r3.AjaxUtils.submitForm("PUT",org.r3.PageManager.getRESTUrl("PUT_UserCollection_BusinessCard",[org.r3.PageManager.userInfo.dataBean.userid]),theForm,function(responseData){if(_self.actionFormManager&&_self.actionFormManager.onViewStatusChanged)
{_self.actionFormManager.onViewStatusChanged();}},function(jqXHR,timeout,message){console.error(message);},"org.r3.message.saveconfirm",true);}});$.r3Utils.namespace("org.r3.jsportlet.user",window,function(aNamespace)
{aNamespace.businesscardinfoactionform_form_validationRules={personalstatement:{required:true,maxlength:1024},email:{required:false,email:true,maxlength:1024},cellphone:{required:false,maxlength:1024,digits:true,}};aNamespace.businesscardinfoactionform_form_validationMessages={personalstatement:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},email:{required:org.r3.message.field_required,email:org.r3.message.field_email,maxlength:org.r3.message.field_maxlength},cellphone:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits,}};});$.r3Utils.namespace("org.r3.jsportlet.user");org.r3.jsportlet.user.ChangePasswordActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aDataBeanInfo)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/user/ChangePasswordActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#changepasswordactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.user.changepasswordactionform_form_validationRules,messages:org.r3.jsportlet.user.changepasswordactionform_form_validationMessages});$('#changepasswordactionform_action_ok').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.doChangePassword));$('#changepasswordactionform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.user",window,function(aNamespace)
{aNamespace.changepasswordactionform_form_validationRules={password:{required:true,maxlength:10},confpasswd:{required:true,maxlength:10,equalTo:'#changepasswordactionform_form_password'}};aNamespace.changepasswordactionform_form_validationMessages={password:{required:"Inserire la parola chiave dell'utente",maxlength:"La valorizzazione eccede i limiti conesntiti"},confpasswd:{required:"Inserire la parola chiave di conferma dell'utente",maxlength:"La valorizzazione eccede i limiti consentiti",equalTo:"La parola chiave di conferma non corrisponde alla parola chiave inserita"}};});$.r3Utils.namespace("org.r3.jsportlet.user");org.r3.jsportlet.user.UserDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.user.UserDetailActionFormView(aDetailViewContainerId,this);this.changePasswordView=new org.r3.jsportlet.user.ChangePasswordActionFormView('#changePasswordActionForm',this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();this.changePasswordView.hide();},show:function()
{this.detailView.show();},open:function(aDataBeanInfo)
{console.log("UserDetailActionForm::open",aDataBeanInfo);this.setDataBeanInfo(aDataBeanInfo);this.detailView.open(aDataBeanInfo);},updateItem:function()
{this._saveItem(true);},createItem:function()
{this._saveItem(false);},_saveItem:function(isUpdate)
{var theForm=$('#userdetailactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_User');if(isUpdate)
{var idUser=this.dataBeanInfo.userDataBean.dataBean.userid;restUrl=org.r3.PageManager.getRESTUrl('PUT_User',[idUser]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('userdetailactionform_fieldset_message');}
else
{org.r3.PageManager.back();}}});}},listaUsers:function()
{org.r3.PageManager.back();},openChangePasswdPanel:function()
{this.changePasswordView.open(this.dataBeanInfo);},doChangePassword:function()
{var theForm=$('#changepasswordactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="put";var idUser=this.dataBeanInfo.userDataBean.dataBean.userid;var restUrl=org.r3.PageManager.getRESTUrl('PUT_User_Passwd',[idUser]);org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('changepasswordactionform_fieldset_message');if(restDto.isOk())
{theForm.resetForm();}}}});}},updateRoles:function()
{var theForm=$('#siterolesactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{var method="put";var idUser=this.dataBeanInfo.userDataBean.dataBean.userid;var restUrl=org.r3.PageManager.getRESTUrl('PUT_User_Roles',[idUser]);org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('siterolesactionform_fieldset_message');}}});}}});$.r3Utils.namespace("org.r3.jsportlet.user");org.r3.jsportlet.user.UserDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.tabGenerale=null;},close:function()
{this.hide();},open:function(aDataBeanInfo)
{org.r3.PageManager.wait("org.r3.message.waiting");console.log("Logged User Is: ",org.r3.PageManager.userInfo);var networkRequestsQueue=[];if(aDataBeanInfo)
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/user/UserDetailActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_User_Detail',[aDataBeanInfo.userDataBean.dataBean.userid]),dataType:"json"});networkRequestsQueue.push({id:"content_roles",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_User_Roles',[aDataBeanInfo.userDataBean.dataBean.userid]),dataType:"json"});}
else
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/user/UserDetailActionFormView.html.jsp?mode=create'),dataType:"html"});}
networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_AuthRole'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_sys_recstatus'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var userDataBean=responseData['content'];var roles=responseData['content_roles'];if(userDataBean)
{userDataBean=new org.r3.db.system.user.user.UserDTOAdapter(userDataBean);if(roles)
{roles=new org.r3.db.DTOTableAdapter(roles,function(aRowDataBean){return new org.r3.db.system.user.userroleview.UserRoleViewDTOAdapter(aRowDataBean);});userDataBean.setRoles(roles);}}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));this.tabGenerale=new org.r3.jsportlet.user.UserDetailActionFormView_TabGenerale('__UNUSED__',this.actionFormManager,userDataBean);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.jsportlet.user");org.r3.jsportlet.user.UserDetailActionFormView_TabGenerale=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aUserDataBean)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#userdetailactionform_form').validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.user.userdetailactionform_form_validationRules,messages:org.r3.jsportlet.user.userdetailactionform_form_validationMessages});if(aUserDataBean==null)
{$('#userdetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.createItem));$('#userdetailactionform_action_openchangepasswd').hide();}
else
{$('#userdetailactionform_form_nickname').attr('value',aUserDataBean.dataBean.nickname);$('#userdetailactionform_form_firstname').attr('value',aUserDataBean.dataBean.firstname);$('#userdetailactionform_form_lastname').attr('value',aUserDataBean.dataBean.lastname);$('#userdetailactionform_form_email').attr('value',aUserDataBean.dataBean.email);$('#userdetailactionform_form_nickname').prop('disabled',true);$('#userdetailactionform_action_saveitem').unbind().click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.updateItem));$('#userdetailactionform_action_openchangepasswd').click($.r3Utils.hitch(this.actionFormManager,this.actionFormManager.openChangePasswdPanel));$('#userdetailactionform_form_createsiteactor').prop('checked',aUserDataBean.dataBean.actorid&&true);}
var checkContainer=$('#userdetailactionform_authrole_cnt');if(checkContainer.length>0)
{var resolvedUrl=org.r3.PageManager.getRESTUrl('LUT_AuthRole');org.r3.PageManager.lutManager.populateCheckBoxGroup({"lutUrl":resolvedUrl,"groupContainer":$('#userdetailactionform_authrole_cnt'),"groupId":"userdetailactionform_authrole_","groupName":"authrole","value":aUserDataBean&&aUserDataBean.getCSVPermissions4Site(org.r3.Constants.site),"labelSize":200});}
org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('GET_classifier_sys_recstatus'),"selectWidget":$('#userdetailactionform_form_recstatus'),"selectedValue":(aUserDataBean)?aUserDataBean.dataBean.recstatus:null});$('#userdetailactionform_action_cancel').click(function(e){org.r3.PageManager.back();});$('#userdetailactionform_fieldset_message').formmessage({});}});$.r3Utils.namespace("org.r3.jsportlet.user",window,function(aNamespace)
{aNamespace.userdetailactionform_form_validationRules={nickname:{required:true,maxlength:10},password:{required:true,maxlength:10},confpasswd:{required:true,maxlength:10,equalTo:'#userdetailactionform_form_password'},username:{required:true,maxlength:80},usertype:{required:true},idareaorganizzativa:{required:true},idcentrolavorazione:{required:true},idcentroesiti:{required:true},idgruppo:{required:false},idcliente:{required:false},ruolipostaliz:{required:true},ruoliesiti:{required:true}};aNamespace.userdetailactionform_form_validationMessages={nickname:{required:"Inserire l'account dell'utente",maxlength:"La valorizzazione eccede i limiti conesntiti"},password:{required:"Inserire la parola chiave dell'utente",maxlength:"La valorizzazione eccede i limiti conesntiti"},confpasswd:{required:"Inserire la parola chiave di conferma dell'utente",maxlength:"La valorizzazione eccede i limiti consentiti",equalTo:"La parola chiave di conferma non corrisponde alla parola chiave inserita"},username:{required:"Inserire il nominativo dell'utente",maxlength:"La valorizzazione eccede i limiti conesntiti"},usertype:{required:"Inserire il tipo dell'operatore"},idareaorganizzativa:{required:"Inserire l'ALT"},idcentrolavorazione:{required:"Inserire il Centro Lavorazione"},idcentroesiti:{required:"Inserire il Centro Esiti"},idgruppo:{required:"Inserire il Gruppo"},idcliente:{required:"Inserire il Cliente"},ruolipostaliz:{required:"Inserire il/i ruoli dell'utente"},ruoliesiti:{required:"Inserire il/i ruoli dell'utente"}};});$.r3Utils.namespace("org.r3.jsportlet.user");org.r3.jsportlet.user.UserPickerActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.advancedSearchForm=new org.r3.jsportlet.user.UserQueryAdvancedSearchActionFormView(anAdvancedSearchHtmlActionFormContainerId,this);this.advancedSearchForm.open();this.pickedValue=null;this.listView=new org.r3.db.system.user.user.UserQueryActionFormView(anHtmlActionFormContainerId,this,{dataTableId:'R3UserQueryActionFormView',gradeLevel:'grade_level2 grade_clickable',legend:org.r3.db.system.user.user.message.queryactionformview_legend,sortable:false,layout:'fullWidth',actionBarOnTop:true,dataTableColumns:"singleselector,userid,nickname,firstname,lastname,email,queryformview-tools",onToolsIconSelected:$.r3Utils.hitch(this,this.userDetail),onSelected:$.r3Utils.hitch(this,this._onRowSelected),onClearSelection:null,onDblClick:null,onPageChange:$.r3Utils.hitch(this,function(){$('#userpickeractionform_action_selectuser').prop('disabled',true);}),searchInfo:{label:org.r3.jsportlet.user.message.search_username,validationRules:org.r3.jsportlet.user.R3UserQueryActionFormView_filter_searchform_validationRules,validationMessages:org.r3.jsportlet.user.R3UserQueryActionFormView_filter_searchform_validationMessages,autoStart:true},advancedSearchInfo:[{label:org.r3.jsportlet.user.message.search_advanced,actionView:this.advancedSearchForm,autoOpen:false}],buttons:[{id:'userpickeractionform_action_selectuser',label:org.r3.message.action_select,disabled:true,onClick:$.r3Utils.hitch(this,this.onItemSelected)}],onInitializationComplete:$.r3Utils.hitch(this,function()
{var matchExpr='input[name="userid"]';$('#R3UserQueryActionFormView_tableform').off('click',matchExpr).on('click',matchExpr,$.r3Utils.hitch(this,function(e)
{$('#userpickeractionform_action_selectuser').prop('disabled',false);var currentTarget=$(e.currentTarget);this.pickedValue={dtokey:currentTarget.val(),dtodescr:currentTarget.val()+' - '+currentTarget.attr('title')};e.stopPropagation();}));})});},close:function()
{this.hide();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{},open:function(options)
{this.srcPickerWidget=options.pickerWidget;var dataTableSourceRestUrlReference='GET_Users';if(options.queryUrl)
dataTableSourceRestUrlReference=options.queryUrl;var dataTableSource=org.r3.PageManager.getRESTUrl(dataTableSourceRestUrlReference);this.listView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});},onItemSelected:function(){console.info("actionForm:pickerWidget is: ",this.srcPickerWidget);this.srcPickerWidget.addVal(this.pickedValue);org.r3.PageManager.back();},_onRowSelected:function(aUserDTOAdapter)
{$('#R3UserQueryActionFormView_'+aUserDTOAdapter.dataBean.userid).prop('checked',true);$('#userpickeractionform_action_selectuser').prop('disabled',false);this.pickedValue={dtokey:aUserDTOAdapter.dataBean.userid,dtodescr:aUserDTOAdapter.dataBean.userid+' - '+aUserDTOAdapter.getUsername()};},userDetail:function(aUserDTOAdapter)
{this._onRowSelected(aUserDTOAdapter);this.hide();this.pageManager.openUserDetailPanel(aUserDTOAdapter);}});$.r3Utils.namespace("org.r3.jsportlet.user",window,function(aNamespace)
{aNamespace.R3UserQueryActionFormView_filter_searchform_validationRules={filter_item:{required:false}};aNamespace.R3UserQueryActionFormView_filter_searchform_validationMessages={filter_item:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.user");org.r3.jsportlet.user.UserQueryAdvancedSearchActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.executeSearch=null;},close:function()
{$("#dialog-form").dialog("close");},show:function(anExecuteSearchFunction)
{$("#dialog-form").dialog("open");this.executeSearch=anExecuteSearchFunction;},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkInitializationQueue=[];networkInitializationQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/user/UserQueryAdvancedSearchActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkInitializationQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);var actionFormView=this;$("#dialog-form").dialog({autoOpen:false,height:250,width:700,modal:true,buttons:{"Ricerca":$.r3Utils.hitch(actionFormView,actionFormView.executeAdvancedSearch),"Annulla":$.r3Utils.hitch(actionFormView,actionFormView.dismissAdvancedSearchDialog)},close:function()
{}});$("#userquery_advancedsearchform_form").validate
({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.user.advancedsearchform_form_validationRules,messages:org.r3.jsportlet.user.advancedsearchform_form_validationMessages});}),function(d)
{console.error("controller did not load");});},dismissAdvancedSearchDialog:function()
{$("#dialog-form").dialog("close");},executeAdvancedSearch:function()
{var theForm=$('#userquery_advancedsearchform_form');if(!theForm.valid())
return;var qparams=[];qparams.push({"name":"nickname","value":$('#userquery_advancedsearchform_form_nickname').attr('value')});qparams.push({"name":"userid","value":$('#userquery_advancedsearchform_form_userid').val()});qparams.push({"name":"firstname","value":$('#userquery_advancedsearchform_form_firstname').val()});qparams.push({"name":"lastname","value":$('#userquery_advancedsearchform_form_lastname').val()});qparams.push({"name":"email","value":$('#userquery_advancedsearchform_form_email').val()});this.executeSearch(qparams);$("#dialog-form").dialog("close");}});$.r3Utils.namespace("org.r3.jsportlet.user",window,function(aNamespace)
{aNamespace.advancedsearchform_form_validationRules={userid:{required:false,maxlength:15},nickname:{required:false,maxlength:40},firstname:{required:false,maxlength:80},lastname:{required:false,maxlength:80},email:{required:false,maxlength:80}};aNamespace.advancedsearchform_form_validationMessages={userid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},nickname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},firstname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},lastname:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},email:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.jsportlet.wbs");org.r3.jsportlet.wbs.MyWbsesPortletActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.wbs.MyWbsesPortletActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'workshop'))
this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.wbs");org.r3.jsportlet.wbs.MyWbsesPortletActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/wbs/MyWbsesPortletActionForm.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"wbses",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBSes"),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var wbsesDataTableAdapter=null;wbsesDataTableAdapter=responseData['wbses'];if(wbsesDataTableAdapter)
{wbsesDataTableAdapter=new org.r3.db.DTOTableAdapter(wbsesDataTableAdapter,function(aRowDataBean){return new org.r3.db.wbs.wbs.WBSDTOAdapter(aRowDataBean);});}
var templatedHtml=tmpl(responseData['view'],{"userid":org.r3.PageManager.userInfo.dataBean.userid,"wbses":wbsesDataTableAdapter,"dictionary":org.r3.jsportlet.wbs.message});$(this.htmlContainerId).html(templatedHtml);this.show();}),function(d)
{console.error("controller did not load");});},onGotoWBSPage:function(aWbsId)
{var targetUrl=org.r3.Constants.getStrutsActionContext()+"/org/r3/wbs/wbsfillout.do?pageid=wbses";if(aWbsId)
targetUrl+="&wbsid="+aWbsId;org.r3.PageManager.gotoPage(targetUrl);}});$.r3Utils.namespace("org.r3.jsportlet.wbs",window,function(aNamespace)
{aNamespace.wbsnodeactionform_form_validationRules={nodename:{required:true,maxlength:40},assignedto:{required:true},startdate:{required:true},duration:{required:true,maxlength:5,digits:true,min:1,max:365},completion:{required:true,maxlength:5,number:true,range:[0,100]},completiondescr:{required:false,maxlength:80},completionfrom:{required:true,maxlength:5,digits:true,min:0},completionto:{required:true,maxlength:5,digits:true,greaterThan:'#wbsnodeactionform_completionfrom'},nodesummary:{required:true,maxlength:255},completioneffort:{required:false,maxlength:5,digits:true},economicvalue:{required:false,maxlength:8,number:true,min:0},economicvalue2:{required:false,maxlength:8,number:true,min:0},economicvalue3:{required:false,maxlength:8,number:true,min:0},stereotype:{required:true}};aNamespace.wbsnodeactionform_form_validationMessages={nodename:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},assignedto:{required:org.r3.message.field_required},startdate:{required:org.r3.message.field_required},duration:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits,min:org.r3.message.field_min,max:org.r3.message.field_max},completion:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number,range:org.r3.message.field_range},completiondescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},completionfrom:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits,min:org.r3.message.field_min,},completionto:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits,greaterThan:org.r3.message.field_greaterThan},nodesummary:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},completioneffort:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},economicvalue:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number,min:org.r3.message.field_min},economicvalue2:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number,min:org.r3.message.field_min},economicvalue3:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number,min:org.r3.message.field_min},stereotype:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.wbs");org.r3.jsportlet.wbs.TabWBSNode_Detail_WBSActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aWBSDtoAdapter)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);$('#wbsnodeactionform_fieldset_message').formmessage({});$('#wbsnodeactionform_form .r3_datepicker').datepicker({format:"dd/mm/yyyy"});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_LoginActorsInGroup",['ACGWORKSHOP']);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#wbsnodeactionform_assignedto'),"useBusinessKey":true});$('#wbsnodeactionform_nodetype').unbind().change(function(e)
{var currentTarget=$(e.currentTarget);var l=currentTarget.val();_self._setNodeType(l);});$('#wbsnodeactionform_completiontype_percentage, #wbsnodeactionform_completiontype_int_pos_range').click(function(e)
{var currentTarget=$(e.currentTarget);var currentTargetId=currentTarget.attr('id');if(currentTarget.prop('checked'))
{_self._setCompletiontypeOnActionNodeType(currentTarget.val());}});$('#wbsnodeactionform_form').validate({ignore:[],errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.wbs.wbsnodeactionform_form_validationRules,messages:org.r3.jsportlet.wbs.wbsnodeactionform_form_validationMessages});$('#wbsnodeactionform_action_saveitem').click($.r3Utils.hitch(this,this._onSaveItem));},startNodeEditing:function(actionContext)
{this.actionContext=actionContext;switch(actionContext.action)
{case'none':this.hide();break;case'add':this.show();$('#wbsnodeactionform_action_saveitem').prop('disabled',false);this._startAddingNode();break;case'update':this._initializeFields(actionContext.nodeObj);this.show();$('#wbsnodeactionform_action_saveitem').prop('disabled',false);break;}},_startAddingNode:function()
{this._resetForm();this._setNodeType('node');},_resetForm:function()
{$('#wbsnodeactionform_nodetype').val('node');$('#wbsnodeactionform_stereotype').val('stynone');$('#wbsnodeactionform_nodename').val('');$('#wbsnodeactionform_assignedto').val('');$('#wbsnodeactionform_form_startdate').val('');$('#wbsnodeactionform_form_enddate').html('');$('#wbsnodeactionform_duration').val('0');$('#wbsnodeactionform_completiontype_percentage').prop('checked',true);$('#wbsnodeactionform_completiondescr').val('');$('#wbsnodeactionform_completion').html('0');$('#wbsnodeactionform_completionfrom').val('0');$('#wbsnodeactionform_completionto').val('0');$('#wbsnodeactionform_nodesummary').val('');$('#wbsnodeactionform_completioneffort').val('0');$('#wbsnodeactionform_economicvalue').val('0');$('#wbsnodeactionform_economicvalue2').val('0');$('#wbsnodeactionform_economicvalue3').val('0');},_initializeFields:function(aNodeObj)
{var aWBSNodeDTOAdapter=aNodeObj.node.nodeUserData;$('#wbsnodeactionform_nodetype').val(aWBSNodeDTOAdapter.dataBean.nodetype);$('#wbsnodeactionform_stereotype').val(aWBSNodeDTOAdapter.dataBean.stereotype);$('#wbsnodeactionform_nodename').val(aWBSNodeDTOAdapter.dataBean.nodename);$('#wbsnodeactionform_assignedto').val(aWBSNodeDTOAdapter.dataBean.assignedto);$('#wbsnodeactionform_form_startdate').val(aWBSNodeDTOAdapter.getStartdate());$('#wbsnodeactionform_form_enddate').html(aWBSNodeDTOAdapter.getEnddate());$('#wbsnodeactionform_duration').val(aWBSNodeDTOAdapter.dataBean.duration||'0');$('#wbsnodeactionform_completiontype_'+aWBSNodeDTOAdapter.dataBean.completiontype).prop('checked',true);$('#wbsnodeactionform_completiondescr').val(aWBSNodeDTOAdapter.dataBean.completiondescr);$('#wbsnodeactionform_completion').html(aWBSNodeDTOAdapter.dataBean.completion||'0');$('#wbsnodeactionform_completionfrom').val(aWBSNodeDTOAdapter.dataBean.completionfrom);$('#wbsnodeactionform_completionto').val(aWBSNodeDTOAdapter.dataBean.completionto);$('#wbsnodeactionform_nodesummary').val(aWBSNodeDTOAdapter.dataBean.nodesummary);$('#wbsnodeactionform_completioneffort').val(aWBSNodeDTOAdapter.dataBean.completioneffort||'0');$('#wbsnodeactionform_economicvalue').val(aWBSNodeDTOAdapter.dataBean.economicvalue||'0');$('#wbsnodeactionform_economicvalue2').val(aWBSNodeDTOAdapter.dataBean.economicvalue2||'0');$('#wbsnodeactionform_economicvalue3').val(aWBSNodeDTOAdapter.dataBean.economicvalue3||'0');this._setNodeType(aWBSNodeDTOAdapter.dataBean.nodetype);},_setCompletiontypeOnActionNodeType:function(aCompletionType)
{var perc=aCompletionType=='percentage';$('#wbsnodeactionform_completionfrom').prop('disabled',perc);$('#wbsnodeactionform_completionto').prop('disabled',perc);},_setNodeType:function(aNodeType)
{switch(aNodeType)
{case'action':$('#wbsnodeactionform_assignedto').prop('disabled',false);$('#wbsnodeactionform_form_startdate').prop('disabled',false);$('#wbsnodeactionform_duration').prop('disabled',false);$('#wbsnodeactionform_completiontype_percentage').prop('disabled',false);$('#wbsnodeactionform_completiontype_int_pos_range').prop('disabled',false);$('#wbsnodeactionform_completiondescr').prop('disabled',false);var perc=$('#wbsnodeactionform_completiontype_percentage').prop('checked');this._setCompletiontypeOnActionNodeType((perc)?'percentage':'other');$('#wbsnodeactionform_completioneffort').prop('disabled',false);$('#wbsnodeactionform_economicvalue').prop('disabled',false);$('#wbsnodeactionform_economicvalue2').prop('disabled',false);$('#wbsnodeactionform_economicvalue3').prop('disabled',false);break;default:$('#wbsnodeactionform_assignedto').val('');$('#wbsnodeactionform_form_startdate').val('');$('#wbsnodeactionform_form_enddate').html('');$('#wbsnodeactionform_duration').val('0');$('#wbsnodeactionform_assignedto').prop('disabled',true);$('#wbsnodeactionform_form_startdate').prop('disabled',true);$('#wbsnodeactionform_duration').prop('disabled',true);$('#wbsnodeactionform_completion').html('0');$('#wbsnodeactionform_completiontype_percentage').prop('checked',true);$('#wbsnodeactionform_completiontype_percentage').prop('disabled',true);$('#wbsnodeactionform_completiontype_int_pos_range').prop('disabled',true);$('#wbsnodeactionform_completionfrom').val('0');$('#wbsnodeactionform_completionfrom').prop('disabled',true);$('#wbsnodeactionform_completionto').val('0');$('#wbsnodeactionform_completionto').prop('disabled',true);$('#wbsnodeactionform_completiondescr').val('');$('#wbsnodeactionform_completiondescr').prop('disabled',true);$('#wbsnodeactionform_completioneffort').val('0');$('#wbsnodeactionform_completioneffort').prop('disabled',true);$('#wbsnodeactionform_economicvalue').val('0');$('#wbsnodeactionform_economicvalue').prop('disabled',true);$('#wbsnodeactionform_economicvalue2').val('0');$('#wbsnodeactionform_economicvalue2').prop('disabled',true);$('#wbsnodeactionform_economicvalue3').val('0');$('#wbsnodeactionform_economicvalue3').prop('disabled',true);break;}},_onSaveItem:function()
{var _self=this;var theForm=$('#wbsnodeactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{if(this.actionContext.action=='add')
{this.actionFormManager.createWBSNode(this.actionContext,function(responseData){var isError=true;if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('wbsnodeactionform_fieldset_message');}
else
{isError=false;$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});$('#wbsnodeactionform_form_enddate').html(responseData.enddate);_self.hide();}
return isError;},function(jqXHR,timeout,message){$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}
else
{if(this.actionContext.action=='update')
{this.actionFormManager.updateWBSNode(this.actionContext,function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('wbsnodeactionform_fieldset_message');}
else
{$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});$('#wbsnodeactionform_form_enddate').html(responseData.enddate);}},function(jqXHR,timeout,message){$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}}}}});$.r3Utils.namespace("org.r3.jsportlet.wbs");org.r3.jsportlet.wbs.TabWBSNode_Miller_WBSActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aWBSDtoAdapter)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.wbsId=aWBSDtoAdapter.dataBean.wbsid;this.actionContext={action:'none'};this.itemIdCounter=100;this.selectedItem=null;this.selectedGroup=null;$('#wbsnodeform_fieldset_message').formmessage({text:org.r3.jsportlet.wbs.message.wbsmillertip,category:'info'});$('#wbs_miller').gmiller({rootNodeId:aWBSDtoAdapter.dataBean.wbsid,rootNodeName:aWBSDtoAdapter.dataBean.wbstitle,nodeMove:true,onFetch:$.r3Utils.hitch(this,this._fetchNodeChildren),onSelect:$.r3Utils.hitch(this,this._nodeSelected),onClearActiveContainer:$.r3Utils.hitch(this,this._stopNodeEditing),onSort:$.r3Utils.hitch(this,this._onSort),onMove:$.r3Utils.hitch(this,this._onMove),renderHtml4NewNode:$.r3Utils.hitch(this,this._renderNode),buttons:[{id:"action_showwbs",caption:org.r3.jsportlet.wbs.message.wbsnodemanager_milleraction_outline,showOn:'first',enabled:'always',onClick:$.r3Utils.hitch(this,this._onWBSOutlineDisplay)},{id:"action_add",caption:org.r3.jsportlet.wbs.message.wbsnodemanager_milleraction_add,enabled:'onRefNode',showOn:'all',onClick:$.r3Utils.hitch(this,this._onAddNode)},{id:"action_delete",caption:org.r3.jsportlet.wbs.message.wbsnodemanager_milleraction_delete,showOn:'all',enabled:'onSelection',onClick:$.r3Utils.hitch(this,this._onDeleteNode)}]});$('#action_updatewbsnumbering').unbind().click($.r3Utils.hitch(this,this._onWBSOutlineUpdate));},dummy_fetchNodeChildren:function(aParentNodeId,treeLevel,onSuccess)
{var fetchedDataArray=[];for(var i=0;i<7;i++)
{var n={"dtokey":"Key_"+treeLevel+"_"+_self.itemIdCounter,"dtodescr":"Descr_"+treeLevel+"_"+_self.itemIdCounter};_self.itemIdCounter++;fetchedDataArray.push(n);}
onSuccess(fetchedDataArray,fetchedDataArray.length);},_nodeSelected:function(aSortableContainerId,aParentNodeId,aNodeId,aNodePosition,aNodeObj)
{console.log("ONSELECT - sid: "+aSortableContainerId+" parent: "+aParentNodeId+" node: "+aNodeId+" position: "+aNodePosition);this.actionContext.action='update';this.actionContext.sortableContainerId=aSortableContainerId;this.actionContext.parentNodeId=aParentNodeId;this.actionContext.nodeId=aNodeId;this.actionContext.nodePosition=aNodePosition;this.actionContext.nodeObj=aNodeObj;this.actionFormManager.detailView.startNodeEditing(this.actionContext);},_stopNodeEditing:function()
{this.actionContext.action='none';this.actionFormManager.detailView.startNodeEditing(this.actionContext);},_renderNode:function(nodeData)
{var nodeClass=nodeData.getCustomCSSClassName();if(nodeClass)
nodeClass="class='"+nodeClass+"'";var summary=nodeData.dataBean.nodesummary;if(summary&&summary.length>30)
summary=summary.substring(0,27)+'...';var h=$("<li id='"+nodeData.getNodeId()+"' "+nodeClass+">"
+"<div><b>"+nodeData.dataBean.nodename+"</b><br />"+summary+"</div>"
+"</li>");return h;},_onAddNode:function(aSortableContainerId,aParentNodeId,aSelectedNodeId){console.log("Clicked...."+aSortableContainerId+" on "+aSelectedNodeId+" within "+aParentNodeId);this.actionContext.action='add';this.actionContext.sortableContainerId=aSortableContainerId;this.actionContext.parentNodeId=aParentNodeId;this.actionFormManager.detailView.startNodeEditing(this.actionContext);return false;},addNode:function(aSortableContainerId,aParentNodeId,nodeInfo)
{$('#wbs_miller').gmiller('add',aSortableContainerId,aParentNodeId,nodeInfo);},refreshMillerView:function(aSortableContainerId,aNode)
{$('#wbs_miller').gmiller('refresh',aSortableContainerId,aNode);this._hideWBSOutline();},_onWBSOutlineUpdate:function()
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var method="PUT";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('PUT_WBSNodes_OutlineNumbering',[this.wbsId]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var dtoAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData);var renderedOutline=tmpl("tpl_wbsoutline",{"wbs":dtoAdapter});$('.wbs_outline').html(renderedOutline);_self._showWBSOutline();location.href='#wbs_outline_anchor';},"error":function(jqXHR,timeout,message)
{org.r3.PageManager.closeNotifier();$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});},_onWBSOutlineDisplay:function(aSortableContainerId,aParentNodeId,aSelectedNodeId)
{var _self=this;var method="GET";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('GET_WBSTree',[this.wbsId]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{var dtoAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData);var renderedOutline=tmpl("tpl_wbsoutline",{"wbs":dtoAdapter});$('.wbs_outline').html(renderedOutline);_self._showWBSOutline();location.href='#wbs_outline_anchor';},"error":function(jqXHR,timeout,message)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});},_showWBSOutline:function()
{var wbsObject=$('.wbs');if(wbsObject.hasClass('wbs_collapsed'))
wbsObject.toggleClass('wbs_collapsed');if($('.wbs .wbs_outline .invalid').length)
{$('#wbsoutline_actonbar').show();$('#action_updatewbsnumbering').prop('disabled',false);}
else
{$('#wbsoutline_actonbar').hide();$('#action_updatewbsnumbering').prop('disabled',true);}},_hideWBSOutline:function()
{var wbsObject=$('.wbs');if(!wbsObject.hasClass('wbs_collapsed'))
wbsObject.toggleClass('wbs_collapsed');},_onDeleteNode:function(aSortableContainerId,aParentNodeId,aSelectedNodeId)
{console.log("Clicked...."+aSortableContainerId+" on "+aSelectedNodeId+" within "+aParentNodeId);if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{this._hideWBSOutline();this.actionContext.action='none';this.actionFormManager.detailView.startNodeEditing(this.actionContext);var restUrl=org.r3.PageManager.getRESTUrl('DELETE_WBSNode',[this.wbsId,aSelectedNodeId]);$.ajax({"type":"DELETE","url":restUrl,"dataType":"json","success":function(responseData)
{$('#wbs_miller').gmiller('remove',aSortableContainerId,aParentNodeId,aSelectedNodeId);},"error":function(jqXHR,timeout,message)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}
return false;},_fetchNodeChildren:function(aParentNodeId,treeLevel,onSuccess)
{var restUrl=org.r3.PageManager.getRESTUrl('GET_WBSNodeChildren',[this.wbsId,aParentNodeId]);$.ajax({"type":"GET","url":restUrl,"dataType":"json","success":function(responseData)
{var fetchedDataArray=[];for(var i=0;i<responseData.iTotalRecords;i++)
{var dtoAdapter=new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(responseData.aaData[i]);fetchedDataArray.push(dtoAdapter);}
onSuccess(fetchedDataArray,fetchedDataArray.length);},"error":function(jqXHR,timeout,message)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});},_onMove:function(aDroppableContainerId,aSortableContainerId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId)
{console.log("ONMOVE - did: "+aDroppableContainerId+" sid: "+aSortableContainerId+" parent: "+aParentNodeId+" node: "+aNodeId+" position: "+aNewPosition+" prevSiblingId: "+aNewPreviousSiblingNodeId);this._onSort(aSortableContainerId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId);},_onSort:function(aSortableContainerId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId)
{console.log("ONSORT - sid: "+aSortableContainerId+" parent: "+aParentNodeId+" node: "+aNodeId+" position: "+aNewPosition+" prevSiblingId: "+aNewPreviousSiblingNodeId);var restUrl=org.r3.PageManager.getRESTUrl('SORT_WBSNode',[this.wbsId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId]);this._hideWBSOutline();$.ajax({"type":"PUT","url":restUrl,"dataType":"json","success":function(responseData)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},"error":function(jqXHR,timeout,message)
{$('#wbsnodeform_fieldset_message').formmessage('setText',{text:message,category:'error'});}});}});$.r3Utils.namespace("org.r3.jsportlet.wbs");org.r3.jsportlet.wbs.TabWBS_WBSActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aWBSDtoAdapter)
{this._super(anHtmlActionFormContainerId,anActionFormManager);$('#wbsactionform_form').validate({ignore:[],errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.jsportlet.wbs.wbsactionform_form_validationRules,messages:org.r3.jsportlet.wbs.wbsactionform_form_validationMessages});$('#wbsactionform_wbstext').ckeditor();$('#wbsactionform_fieldset_message').formmessage({});this._initializeFormFields(aWBSDtoAdapter);var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_LoginActorsInGroup",['ACGWSEXECS']);var wbsManager=aWBSDtoAdapter&&aWBSDtoAdapter.getManager();org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#wbsactionform_wbsmanager'),"selectedValue":wbsManager&&wbsManager.dataBean.actorid,"useBusinessKey":true});var wbsSponsor=aWBSDtoAdapter&&aWBSDtoAdapter.getSponsor();org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#wbsactionform_wbssponsor'),"selectedValue":wbsSponsor&&wbsSponsor.dataBean.actorid,"useBusinessKey":true});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_LoginActorsInGroup",['ACGWSCOACHES']);var wbsCoach=aWBSDtoAdapter&&aWBSDtoAdapter.getCoach();org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#wbsactionform_wbscoach'),"selectedValue":wbsCoach&&wbsCoach.dataBean.actorid,"useBusinessKey":true});if(aWBSDtoAdapter)
$('#wbsactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));else $('#wbsactionform_action_saveitem').click($.r3Utils.hitch(this,this._onCreateItem));},_onCreateItem:function()
{if(!$('#wbsactionform_wbstext').val())
{org.r3.PageManager.alert("org.r3.jsportlet.wbs.message.wbstextEmptyConfirmation");return;}
this.actionFormManager.createWBS(function(responseData){$('#wbsactionform_action_saveitem').prop('disabled',true);$('#wbsactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#wbsactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_onUpdateItem:function()
{if(!$('#wbsactionform_wbstext').val())
{org.r3.PageManager.alert("org.r3.jsportlet.wbs.message.wbstextEmptyConfirmation");return;}
this.actionFormManager.updateWBS(function(responseData){$('#wbsactionform_action_saveitem').prop('disabled',true);$('#wbsactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#wbsactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});},_initializeFormFields:function(aWBSDtoAdapter)
{if(aWBSDtoAdapter)
{$('#wbsactionform_wbstitle').val(aWBSDtoAdapter.dataBean.wbstitle);$('#wbsactionform_wbstext').val(aWBSDtoAdapter.dataBean.wbstext);$('#wbsactionform_bbstopicid').html(aWBSDtoAdapter.dataBean.bbstopicid);var optionsSelected=aWBSDtoAdapter.getOptionsAsArray();if(optionsSelected)
{for(var i=0;i<optionsSelected.length;i++)
{$('#wbsactionform_options_'+optionsSelected[i]).prop('checked',true);}}}
else
{$('#wbsactionform_options_'+'notify').prop('checked',true);$('#wbsactionform_options_'+'discussion').prop('checked',true);}}});$.r3Utils.namespace("org.r3.jsportlet.wbs");org.r3.jsportlet.wbs.TabWBSNode_WBSActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,aWBSDtoAdapter)
{var _self=this;this._super(anHtmlActionFormContainerId,anActionFormManager);this.itemIdCounter=100;this.selectedItem=null;this.selectedGroup=null;$('#wbsnodeform_fieldset_message').formmessage({text:org.r3.jsportlet.wbs.message.wbsmillertip,category:'info'});$('#wbs_miller').gmiller({rootNodeId:aWBSDtoAdapter.dataBean.wbsid,rootNodeName:aWBSDtoAdapter.dataBean.wbstitle,nodeMove:true,onFetch:function(aParentNodeId,treeLevel,onSuccess)
{var fetchedDataArray=[];for(var i=0;i<7;i++)
{var n={"dtokey":"Key_"+treeLevel+"_"+_self.itemIdCounter,"dtodescr":"Descr_"+treeLevel+"_"+_self.itemIdCounter};_self.itemIdCounter++;fetchedDataArray.push(n);}
onSuccess(fetchedDataArray,fetchedDataArray.length);},onSelect:function(aSortableContainerId,aParentNodeId,aNodeId,aNodePosition)
{console.log("ONSELECT - sid: "+aSortableContainerId+" parent: "+aParentNodeId+" node: "+aNodeId+" position: "+aNodePosition);},onSort:function(aSortableContainerId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId)
{console.log("ONSORT - sid: "+aSortableContainerId+" parent: "+aParentNodeId+" node: "+aNodeId+" position: "+aNewPosition+" prevSiblingId: "+aNewPreviousSiblingNodeId);},onMove:function(aDroppableContainerId,aSortableContainerId,aParentNodeId,aNodeId,aNewPosition,aNewPreviousSiblingNodeId)
{console.log("ONSORT - did: "+aDroppableContainerId+" sid: "+aSortableContainerId+" parent: "+aParentNodeId+" node: "+aNodeId+" position: "+aNewPosition+" prevSiblingId: "+aNewPreviousSiblingNodeId);},renderHtml4NewNode:function(nodeData)
{var h=$("<li id='"+nodeData.dtokey+"' class='wbs_stereotype'>"
+"<span ></span>"
+"<div>"+nodeData.dtodescr+"</div>"
+"</li>");return h;},buttons:[{id:"action_add",caption:"Add",enabled:'onRefNode',showOn:'all',onClick:$.r3Utils.hitch(this,function(aSortableContainerId,aParentNodeId,aSelectedNodeId){console.log("Clicked...."+aSortableContainerId+" on "+aSelectedNodeId+" within "+aParentNodeId);var n={"dtokey":"Key_"+'NEW'+"_"+_self.itemIdCounter,"dtodescr":"Descr_"+'NEW'+"_"+_self.itemIdCounter};this.itemIdCounter++;$('#wbs_miller').gmiller('add',aSortableContainerId,aParentNodeId,n);return false;})},{id:"action_delete",caption:"Delete",showOn:'all',enabled:'onSelection',onClick:function(aSortableContainerId,aParentNodeId,aSelectedNodeId){console.log("Clicked...."+aSortableContainerId+" on "+aSelectedNodeId+" within "+aParentNodeId);$('#wbs_miller').gmiller('remove',aSortableContainerId,aParentNodeId,aSelectedNodeId);return false;}}]});},fetchNodeChildren:function(aParentNodeId,treeLevel,onSuccess)
{var fetchedDataArray=[];for(var i=0;i<7;i++)
{var n={"dtokey":"Key_"+treeLevel+"_"+_self.itemIdCounter,"dtodescr":"Descr_"+treeLevel+"_"+_self.itemIdCounter};_self.itemIdCounter++;fetchedDataArray.push(n);}
onSuccess(fetchedDataArray,fetchedDataArray.length);}});$.r3Utils.namespace("org.r3.jsportlet.wbs");org.r3.jsportlet.wbs.WBSActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.wbs.WBSActionFormView(aDetailViewContainerId,this);},close:function()
{this.detailView.close();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(aWBSDtoAdapter)
{this.setDataBeanInfo(aWBSDtoAdapter);var _self=this;this.detailView.open(aWBSDtoAdapter);},createWBS:function(onSuccessResponse,onFailResponse)
{this._saveWBS(false,onSuccessResponse,onFailResponse);},updateWBS:function(onSuccessResponse,onFailResponse)
{this._saveWBS(true,onSuccessResponse,onFailResponse);},_saveWBS:function(isUpdate,onSuccessResponse,onErrorResponse)
{var _self=this;var theForm=$('#wbsactionform_form');var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_WBS');if(isUpdate)
{var idWBS=this.dataBeanInfo.dataBean.wbsid;restUrl=org.r3.PageManager.getRESTUrl('PUT_WBS',[idWBS]);method="put";}
if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);if(!isUpdate)
_self.pageManager.closeWBSPanel();},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}},createWBSNode:function(anActionContext,onSuccessResponse,onFailResponse)
{this._saveWBSNode(false,anActionContext,onSuccessResponse,onFailResponse);},updateWBSNode:function(anActionContext,onSuccessResponse,onFailResponse)
{this._saveWBSNode(true,anActionContext,onSuccessResponse,onFailResponse);},_saveWBSNode:function(isUpdate,anActionContext,onSuccessResponse,onErrorResponse)
{var _self=this;var wbsid=this.dataBeanInfo.dataBean.wbsid;var theForm=$('#wbsnodeactionform_form');var method="post";var restUrl=org.r3.PageManager.getRESTUrl('POST_WBSNode',[wbsid,anActionContext.parentNodeId]);if(isUpdate)
{restUrl=org.r3.PageManager.getRESTUrl('PUT_WBSNode',[wbsid,anActionContext.nodeId]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();var isApplicationError=false;if(onSuccessResponse)
isApplicationError=onSuccessResponse(responseData);if(!isApplicationError)
{var dtoAdapter=new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(responseData);if(!isUpdate)
{_self.detailView.addNodeToMiller(anActionContext,dtoAdapter);}
else
_self.detailView.refreshMillerView(anActionContext,dtoAdapter);}},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}});$.r3Utils.namespace("org.r3.jsportlet.wbs");org.r3.jsportlet.wbs.WBSActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aWBSDtoAdapter)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];if(aWBSDtoAdapter)
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/wbs/WBSActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"view_tabwbsnode_miller",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/wbs/TabWBSNode_Miller_WBSActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_tabwbsnode_detail",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/wbs/TabWBSNode_Detail_WBSActionFormView.html.jsp'),dataType:"html"});}
else
{networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/wbs/WBSActionFormView.html.jsp?mode=create'),dataType:"html"});}
networkRequestsQueue.push({id:"view_tabwbs",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/wbs/TabWBS_WBSActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#wbsActionForm_tab_generale').html(tmpl(responseData['view_tabwbs'],{}));this.tabWBS=new org.r3.jsportlet.wbs.TabWBS_WBSActionFormView('__UNUSED__',this.actionFormManager,aWBSDtoAdapter);if(aWBSDtoAdapter)
{$('#wbsActionForm_tab_nodes_miller').html(tmpl(responseData['view_tabwbsnode_miller'],{}));$('#wbsActionForm_tab_nodes_detail').html(tmpl(responseData['view_tabwbsnode_detail'],{}));this.tabWBSNode_miller=new org.r3.jsportlet.wbs.TabWBSNode_Miller_WBSActionFormView('__UNUSED__',this.actionFormManager,aWBSDtoAdapter);this.tabWBSNode_detail=new org.r3.jsportlet.wbs.TabWBSNode_Detail_WBSActionFormView('#wbsActionForm_tab_nodes_detail',this.actionFormManager,aWBSDtoAdapter);}
this.show();}),function(d)
{console.error("controller did not load");});},startNodeEditing:function(actionContext)
{this.tabWBSNode_detail.startNodeEditing(actionContext);},addNodeToMiller:function(actionContext,aNode)
{this.tabWBSNode_miller.addNode(actionContext.sortableContainerId,actionContext.parentNodeId,aNode);},refreshMillerView:function(actionContext,aNode)
{this.tabWBSNode_miller.refreshMillerView(actionContext.sortableContainerId,aNode);}});$.r3Utils.namespace("org.r3.jsportlet.wbs",window,function(aNamespace)
{aNamespace.wbsactionform_form_validationRules={bbstopicid:{required:false,maxlength:15,identifier:true,texttransform:'uppercase'},wbstitle:{required:true,maxlength:255},wbsmanager:{required:true},wbscoach:{required:true},wbssponsor:{required:true}};aNamespace.wbsactionform_form_validationMessages={bbstopicid:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},wbstitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength},wbsmanager:{required:org.r3.message.field_required},wbscoach:{required:org.r3.message.field_required},wbssponsor:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.jsportlet.wbs");org.r3.jsportlet.wbs.WBSQueryActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,anHtmlActionFormContainerId,anAdvancedSearchHtmlActionFormContainerId)
{this.setPageManager(aPageManager);this.listView=new org.r3.db.wbs.wbs.WBSQueryActionFormView
(anHtmlActionFormContainerId,this,{dataTableId:'WBSQueryActionFormView',gradeLevel:'grade_level6 grade_clickable',legend:org.r3.db.wbs.wbs.message.WBSQueryActionFormView_caption,iDisplayLength:25,dataTableSource:'GET_WBSes',layout:'fullWidth',sortable:true,dataTableColumns:"wbstitle",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,this.openDetail),onClearSelection:null,actionBarOnTop:true,buttons:[{id:'console_wbs_action_refresh',label:org.r3.jsportlet.wbs.message.console_wbs_action_refresh,disabled:false,onClick:$.r3Utils.hitch(this,function(){this.listView.refresh();})}]});},open:function()
{this.listView.open();},close:function()
{this.listView.close();},hide:function()
{this.listView.hide();},show:function()
{this.listView.show();},refresh:function()
{this.listView.refresh();},openDetail:function(aWBSDTOAdapter)
{this.listView.hide();this.pageManager.openWBSPanel(aWBSDTOAdapter);}});$.r3Utils.namespace("org.r3.jsportlet.wbs.dashboard");org.r3.jsportlet.wbs.dashboard.WBSPortletDashBoardActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.wbs.dashboard.WBSPortletDashBoardActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(aWbsId_OR_aWbsDTOAdapter)
{this.detailView.open(aWbsId_OR_aWbsDTOAdapter);}});$.r3Utils.namespace("org.r3.jsportlet.wbs.dashboard");org.r3.jsportlet.wbs.dashboard.WBSPortletDashBoardActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,optionHash)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.defaultOptions={"isPrinted":false};this.options=$.extend({},this.defaultOptions,optionHash);},close:function()
{this.hide();},open:function(aWbsId_OR_aWbsDTOAdapter)
{var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/wbs/dashboard/WBSPortletDashBoardActionForm.html.jsp'),dataType:"html"});if(_.isString(aWbsId_OR_aWbsDTOAdapter))
{networkRequestsQueue.push({id:"wbsdetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBSTree",[aWbsId_OR_aWbsDTOAdapter]),dataType:"json"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var wbsDTOAdapter=aWbsId_OR_aWbsDTOAdapter;if(_.isString(aWbsId_OR_aWbsDTOAdapter))
{wbsDTOAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData["wbsdetail"]);}
$(this.htmlContainerId).html(responseData['view']);var wbsROI=wbsDTOAdapter.getROI();if(wbsROI)
$(this.htmlContainerId+' .wbsroi_canvas').html('ROI: '+wbsDTOAdapter.getROI());this.renderGantt(this.htmlContainerId+' .wbs_dashboard .gantt',wbsDTOAdapter);var wbsStatInfo=wbsDTOAdapter.collectWbsStatInfo();this.renderFlotChart1(this.htmlContainerId+' .wbs_dashboard .qplot_cnt .qplot_wbspie1',wbsDTOAdapter,wbsStatInfo);this.renderFlotChart2(this.htmlContainerId+' .wbs_dashboard .qplot_cnt .qplot_wbspie2',wbsDTOAdapter,wbsStatInfo);this.show();}),function(d)
{console.error("controller did not load");});},renderGantt:function(divContainer,aWbsDTOAdapter)
{var theWbsNodes=aWbsDTOAdapter.getListOfWbsNodes();if(theWbsNodes)
{var ganttSource=[];for(var j=0;j<theWbsNodes.length;j++)
{var aNode=theWbsNodes[j];var s=aNode.getGanttSource();if(s)
ganttSource.push(s);}
$(divContainer).gantt({scale:"days",minScale:"days",maxScale:"months",navigate:"scroll",source:ganttSource});}},renderFlotChart1:function(divContainer,aWbsDTOAdapter,v)
{if(v.numberOfActions>0)
{var pieData=[{label:org.r3.jsportlet.wbs.dashboard.message.numberOfCompleted,data:v.numberOfCompleted},{label:org.r3.jsportlet.wbs.dashboard.message.numberOfStarted,data:v.numberOfStarted},{label:org.r3.jsportlet.wbs.dashboard.message.numberOfNotStarted,data:v.numberOfNotStarted}];var seriesColors=["#34B501","#FFC300","#999999","#B50501","#4bb2c5","#c5b47f","#EAA228","#579575","#839557","#958c12","#953579","#4b5de4","#d8b83f","#ff5800","#0085cc"];var idQPlotCanvas='qplot_wbspie1_'+aWbsDTOAdapter.dataBean.wbsid;if(this.options.isPrinted)
idQPlotCanvas=idQPlotCanvas+'_printed';var placeHolder=$(divContainer);placeHolder.attr('id',idQPlotCanvas);placeHolder.unbind();$.plot(placeHolder,pieData,{series:{pie:{show:true,radius:1,label:{show:true,radius:3/4,formatter:function(label,slice){return"<div style='font-size:small;text-align:center;padding:2px;color:"+'#ffffff'+";'>"+Math.round(slice.percent)+"%</div>";},background:{opacity:0.8}}}},legend:{show:true,container:'.qplot_wbspie1_legend'},colors:seriesColors});}
var canvas=$('#'+idQPlotCanvas+' .flot-base');var img=canvas[0].toDataURL("image/png");$('#'+idQPlotCanvas+' canvas').remove();$('#'+idQPlotCanvas).append('<img src="'+img+'"/>');},renderFlotChart2:function(divContainer,aWbsDTOAdapter,v)
{if(v.numberOfActions>0)
{var pieData=[{label:org.r3.jsportlet.wbs.dashboard.message.numberOfOnTimeCompleted,data:v.numberOfCompleted-v.numberOfLateCompleted},{label:org.r3.jsportlet.wbs.dashboard.message.numberOfLateCompleted,data:v.numberOfLateCompleted},{label:org.r3.jsportlet.wbs.dashboard.message.numberOfOnTimeIncomplete,data:v.numberOfStarted+v.numberOfNotStarted-v.numberOfLateIncomplete},{label:org.r3.jsportlet.wbs.dashboard.message.numberOfLateIncomplete,data:v.numberOfLateIncomplete}];var seriesColors=["#34B501","#4040FF","#FFC300","#B50501","#4bb2c5","#c5b47f","#EAA228","#579575","#839557","#958c12","#953579","#4b5de4","#d8b83f","#ff5800","#0085cc"];var idQPlotCanvas='qplot_wbspie2_'+aWbsDTOAdapter.dataBean.wbsid;if(this.options.isPrinted)
idQPlotCanvas=idQPlotCanvas+'_printed';var placeHolder=$(divContainer);placeHolder.attr('id',idQPlotCanvas);placeHolder.unbind();$.plot(placeHolder,pieData,{series:{pie:{show:true,radius:1,label:{show:true,radius:3/4,formatter:function(label,slice){return"<div style='font-size:small;text-align:center;padding:2px;color:"+'#ffffff'+";'>"+Math.round(slice.percent)+"%</div>";},background:{opacity:0.8}}}},legend:{show:true,container:'.qplot_wbspie2_legend'},colors:seriesColors});var canvas=$('#'+idQPlotCanvas+' .flot-base');var img=canvas[0].toDataURL("image/png");$('#'+idQPlotCanvas+' canvas').remove();$('#'+idQPlotCanvas).append('<img src="'+img+'"/>');}},renderPie2Chart:function(divContainer,aWbsDTOAdapter,v)
{if(v.numberOfActions>0)
{var pieData=[[org.r3.jsportlet.wbs.dashboard.message.numberOfOnTimeCompleted,v.numberOfCompleted-v.numberOfLateCompleted],[org.r3.jsportlet.wbs.dashboard.message.numberOfLateCompleted,v.numberOfLateCompleted],[org.r3.jsportlet.wbs.dashboard.message.numberOfOnTimeIncomplete,v.numberOfStarted+v.numberOfNotStarted-v.numberOfLateIncomplete],[org.r3.jsportlet.wbs.dashboard.message.numberOfLateIncomplete,v.numberOfLateIncomplete]];var seriesColors=["#34B501","#4040FF","#FFC300","#B50501","#4bb2c5","#c5b47f","#EAA228","#579575","#839557","#958c12","#953579","#4b5de4","#d8b83f","#ff5800","#0085cc"];var idQPlotCanvas='qplot_wbspie2_'+aWbsDTOAdapter.dataBean.wbsid;if(this.options.isPrinted)
idQPlotCanvas=idQPlotCanvas+'_printed';$(divContainer).attr('id',idQPlotCanvas);var plot1=$.jqplot(idQPlotCanvas,[pieData],{gridPadding:{top:0,bottom:38,left:0,right:0},seriesDefaults:{renderer:$.jqplot.PieRenderer,trendline:{show:false},rendererOptions:{padding:8,showDataLabels:true,dataLabelFormatString:"%#.1f%%"}},legend:{show:true,placement:'outside',location:'e'},gridPadding:{top:0,right:0,bottom:0,left:0},"seriesColors":seriesColors});}},renderPie1Chart:function(divContainer,aWbsDTOAdapter,v)
{if(v.numberOfActions>0)
{var pieData=[[org.r3.jsportlet.wbs.dashboard.message.numberOfCompleted,v.numberOfCompleted],[org.r3.jsportlet.wbs.dashboard.message.numberOfStarted,v.numberOfStarted],[org.r3.jsportlet.wbs.dashboard.message.numberOfNotStarted,v.numberOfNotStarted]];var seriesColors=["#34B501","#FFC300","#999999","#B50501","#4bb2c5","#c5b47f","#EAA228","#579575","#839557","#958c12","#953579","#4b5de4","#d8b83f","#ff5800","#0085cc"];var idQPlotCanvas='qplot_wbspie1_'+aWbsDTOAdapter.dataBean.wbsid;if(this.options.isPrinted)
idQPlotCanvas=idQPlotCanvas+'_printed';$(divContainer).attr('id',idQPlotCanvas);var plot1=$.jqplot(idQPlotCanvas,[pieData],{gridPadding:{top:0,bottom:38,left:0,right:0},seriesDefaults:{renderer:$.jqplot.PieRenderer,trendline:{show:false},rendererOptions:{padding:8,showDataLabels:true,dataLabelFormatString:"%#.1f%%"}},legend:{show:true,placement:'outside',location:'e'},gridPadding:{top:0,right:0,bottom:0,left:0},"seriesColors":seriesColors});}}});$.r3Utils.namespace("org.r3.jsportlet.wbs.mytodolist");org.r3.jsportlet.wbs.mytodolist.MyWbsNodesToDoListPortletActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.jsportlet.wbs.mytodolist.MyWbsNodesToDoListPortletActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{if(org.r3.PageManager.userInfo.isInRole(org.r3.Constants.site,'workshop')&&org.r3.PageManager.getSiteActorId())
this.detailView.open();}});$.r3Utils.namespace("org.r3.jsportlet.wbs.mytodolist");org.r3.jsportlet.wbs.mytodolist.MyWbsNodesToDoListPortletActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/jsportlet/wbs/mytodolist/MyWbsNodesToDoListPortletActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"wbs_nodes",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_ActorWbsNodes",[org.r3.PageManager.getSiteActorId()]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var wbsesDataTableAdapter=null;wbsesDataTableAdapter=responseData['wbs_nodes'];if(wbsesDataTableAdapter)
{wbsesDataTableAdapter=new org.r3.db.DTOTableAdapter(wbsesDataTableAdapter,function(aRowDataBean){return new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(aRowDataBean);});}
var templatedHtml=tmpl(responseData['view'],{"userid":org.r3.PageManager.userInfo.dataBean.userid,"wbses":wbsesDataTableAdapter,"dictionary":org.r3.jsportlet.wbs.mytodolist.message});$(this.htmlContainerId).html(templatedHtml);$(this.htmlContainerId+' div.wbsnode').unbind().click(function(e){var currentTarget=$(e.currentTarget);var wbsnodeid=currentTarget.attr('id');_self.onGotoWBSPage(currentTarget.attr('data-wbsid'),wbsnodeid);});$('#mywbsesportlet_goto_page').unbind().click($.r3Utils.hitch(this,function(e){this.onGotoWBSPage();}));this.show();}),function(d)
{console.error("controller did not load");});},onGotoWBSPage:function(aWbsId,aWbsNodeId)
{var targetUrl=org.r3.Constants.getStrutsActionContext()+"/org/r3/wbs/wbsfillout.do?pageid=wbses";if(aWbsId)
targetUrl+="&wbsid="+aWbsId;if(aWbsNodeId)
targetUrl+="&wbsnodeid="+aWbsNodeId;org.r3.PageManager.gotoPage(targetUrl);}});$.r3Utils.namespace("org.r3.registration");org.r3.registration.ActivationPageManager={init:function(isSuccessFlag)
{this.randomPhotoSideBarActionForm=new org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionForm(this,'#JSPortlet_SideBar');this.registrationOutcomeActionForm=new org.r3.registration.RegistrationOutcomeActionForm(this,'#registrationOutcomeActionForm');this.openPanel(isSuccessFlag);},openPanel:function(isSuccessFlag)
{org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":org.r3.registration.message.outcome_breadcrumb_caption,"actionForm":this.registrationOutcomeActionForm});this.randomPhotoSideBarActionForm.open();this.registrationOutcomeActionForm.open(isSuccessFlag);}};$.r3Utils.namespace("org.r3.registration");org.r3.registration.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();if(org.r3.PageManager.userInfo.isGuest())
{this.registrationActionForm=new org.r3.jsportlet.registration.RegistrationActionForm(this,'#JSPortlet_RegistrationActionForm');this.openRegistrationPanel();}},openRegistrationPanel:function()
{org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":org.r3.registration.message.registration_breadcrumb_caption,"actionForm":this.registrationActionForm});$('#HLP_REGISTRATION').cmsCard({cardid:"HLP_REGISTRATION"});this.registrationActionForm.open();}};$.r3Utils.namespace("org.r3.registration");org.r3.registration.RegistrationOutcomeActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.registration.RegistrationOutcomeActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(isSuccessFlag)
{this.detailView.open(isSuccessFlag);}});$.r3Utils.namespace("org.r3.registration");org.r3.registration.RegistrationOutcomeActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(isSuccessFlag)
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/registration/RegistrationOutcomeActionForm.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);var title=org.r3.registration.message.failed_activation_title;var cardId='REGACT_KO';if(isSuccessFlag)
{title=org.r3.registration.message.success_activation_title;cardId='REGACT_OK';}
$('div.legend_title').html(title);$(this.htmlContainerId+" .panel_content").cmsCard({card_tmpl:"cms_tpl_simple","cardid":cardId});$('#registrationoutcome_action_end').unbind().click(function(e){org.r3.PageManager.redirectToHomePage();});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.sev.application");org.r3.sev.application.PageManager={init:function(applicationId)
{this.applicationActionForm=new org.r3.jsportlet.sev.application.ApplicationActionForm(this,'#JSPortlet_SEVApplicationActionForm');this._retrieveApplication(applicationId);},_retrieveApplication:function(applicationId)
{org.r3.PageManager.wait("org.r3.message.waiting");var _self=this;$.ajax({"type":"get","url":org.r3.PageManager.getRESTUrl('GET_SEV_Application_Detail',[applicationId]),"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);console.error("Whatta...");}
else
{var applicationDTOAdapter=new org.r3.db.sailevent.application.SailApplicationDTOAdapter(responseData);_self.openApplicationPortlet(applicationDTOAdapter);}},"error":function(jqXHR,timeout,message)
{console.error("...> error");org.r3.PageManager.closeNotifier();}});},openApplicationPortlet:function(applicationDTOAdapter)
{org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Modulo Iscrizione","actionForm":this.applicationActionForm});this.applicationActionForm.open(applicationDTOAdapter);}};$.r3Utils.namespace("org.r3.sev.cms.comunicati");org.r3.sev.cms.comunicati.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Comunicati","actionForm":null});this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=comunicati","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.sev.cms.meteo");org.r3.sev.cms.meteo.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":cardInfo.title,"actionForm":null});this.cmsPageActionForm.open(pageInfo,cardInfo,{});}};$.r3Utils.namespace("org.r3.sev.cms.miscellanea");org.r3.sev.cms.miscellanea.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Altre Notizie","actionForm":null});this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=miscellanea","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.sev.cms.pressroom");org.r3.sev.cms.pressroom.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.cmsPageActionForm=new org.r3.jsportlet.cms.CMSPage_CardIndexDetailActionForm(this,'#cmsPageActionForm');this.openCMSPage(pageInfo,cardInfo);},openCMSPage:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Rassesgna Stampa","actionForm":null});this.cmsPageActionForm.open(pageInfo,cardInfo,{"cardindexquery":"groupid=grp_pressinfo","downloadCanvas":false});}};$.r3Utils.namespace("org.r3.sev.cms.tracker");org.r3.sev.cms.tracker.CMSPageActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.sev.cms.tracker.CMSPageActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function()
{this.detailView.open();},openCMSLink2fullscreenViewer:function(theUrl)
{this.pageManager.openCMSLink2fullscreenViewer(theUrl);}});$.r3Utils.namespace("org.r3.sev.cms.tracker");org.r3.sev.cms.tracker.CMSPageActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.pageId='tracker';},close:function()
{this.hide();},open:function()
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/sev/cms/tracker/CMSPageActionForm.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData['view']);$("#tack_tracker_info").cmsCard({card_tmpl:"cms_tpl_simple",cardid:"thtracker",pageid:this.pageId,onComplete:function()
{}});$("#cmsCardGroup").cmsCard({card_tmpl:"cms_tpl_trackerview",cardquery:"groupid=t_tracker",pageid:this.pageId,onComplete:function()
{$('.cmsCard_link2fullscreen').unbind().click($.r3Utils.hitch(_self,_self._onCMSCardLink2FullScreen));}});this.show();}),function(d)
{console.error("controller did not load");});},_onCMSCardLink2FullScreen:function(e)
{var theItem=$(e.currentTarget);var theUrl=theItem.attr('data-dmsurl');this.actionFormManager.openCMSLink2fullscreenViewer(theUrl);}});$.r3Utils.namespace("org.r3.sev.cms.tracker");org.r3.sev.cms.tracker.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();this.randomPhotoSideBarActionForm=new org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionForm(this,'#JSPortlet_SideBar');this.cmsPageActionForm=new org.r3.sev.cms.tracker.CMSPageActionForm(this,'#cmsPageActionForm');this.cmsHTMLPageViewerActionForm=new org.r3.jsportlet.cms.CMSHTMLPageViewerActionForm(this,'#canvas_report_content');this.openCMSPage()},openCMSPage:function()
{org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Pagina Tack Tracker","actionForm":this.cmsPageActionForm});this.randomPhotoSideBarActionForm.open({"collection":"tacktracker","numberOfIcons":4});this.cmsPageActionForm.open();},openCMSLink2fullscreenViewer:function(aDmsUrl)
{$('#canvas_report_title').html("Repporto Tracker");org.r3.PageManager.openFullScreenLayout(this.cmsHTMLPageViewerActionForm);this.cmsHTMLPageViewerActionForm.open(aDmsUrl);}};$.r3Utils.namespace("org.r3.sev.entrylist");org.r3.sev.entrylist.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();this.entryListActionForm=new org.r3.jsportlet.sev.entrylist.EntryListActionForm(this,'#JSPortlet_SEVEntryListActionForm');this.openEntryListPortlet();},openEntryListPortlet:function()
{org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Lista Iscritti","actionForm":this.entryListActionForm});this.entryListActionForm.open();}};$.r3Utils.namespace("org.r3.sev.ranking");org.r3.sev.ranking.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();this.rankingSynopticActionForm=new org.r3.jsportlet.sev.rankingview.RankingSynopticActionForm(this,"#rankingSynopticActionForm",true);this.rankingInstanceViewerActionForm=new org.r3.jsportlet.sev.rankingview.RankingInstanceViewerActionForm(this,'#rankingInstanceViewerActionForm','#rankingInstanceViewerActionForm_Entries',false);this.rankingInstanceViewerCyFileActionForm=new org.r3.jsportlet.sev.rankingview.RankingInstanceViewerCyFileActionForm(this,'#canvas_report_content',true);this.openSynopticPanel();},openSynopticPanel:function()
{org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Quadro Sinottico Classifiche","actionForm":this.rankingSynopticActionForm});this.rankingSynopticActionForm.open();},openRankingInstanceViewer:function(aRankingInstanceViewDTOAdapter)
{if(aRankingInstanceViewDTOAdapter.isRankType('rank_filedet'))
{org.r3.PageManager.pushBreadCrumb({"title":"Dettaglio Classifica","actionForm":this.rankingInstanceViewerActionForm});this.rankingInstanceViewerActionForm.open(aRankingInstanceViewDTOAdapter);}
else
{org.r3.PageManager.openFullScreenLayout(this.rankingInstanceViewerCyFileActionForm);this.rankingInstanceViewerCyFileActionForm.open(aRankingInstanceViewDTOAdapter);}},openPrintableRankingInstanceViewer:function(aRankingInstanceViewDTOAdapter)
{org.r3.PageManager.openFullScreenLayout(this.rankingInstanceViewerCyFileActionForm);this.rankingInstanceViewerCyFileActionForm.open(aRankingInstanceViewDTOAdapter);}};$.r3Utils.namespace("org.r3.shakeus.newsite");org.r3.shakeus.newsite.SiteInfoActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.shakeus.newsite.SiteInfoActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(anOpeningOptionsHash)
{this.detailView.open(anOpeningOptionsHash);},onSiteCreationRequestPosted:function(aSiteDTOAdapter)
{this.close();this.pageManager.onSiteCreationRequestPosted(aSiteDTOAdapter);}});$.r3Utils.namespace("org.r3.shakeus.newsite");org.r3.shakeus.newsite.SiteInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.configOptions=null;},close:function()
{this.hide();},open:function(openParamsHash)
{this.configOptions=openParamsHash;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/shakeus/newsite/SiteInfoActionFormView.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var templatedHtml=tmpl(responseData['view'],(openParamsHash!=null)?{title:org.r3.PageManager.getMessageFromDict(openParamsHash.messagesNamespace+".message.createNewProfile_siteInfoTitle"),subtitle:org.r3.PageManager.getMessageFromDict(openParamsHash.messagesNamespace+".message.createNewProfile_siteInfoSubTitle"),sitecode:org.r3.PageManager.getMessageFromDict(openParamsHash.messagesNamespace+".message.createNewProfile_sitecode"),sitedescr:org.r3.PageManager.getMessageFromDict(openParamsHash.messagesNamespace+".message.createNewProfile_sitedescr"),sitetype:openParamsHash.sitetype}:{});$(this.htmlContainerId).html(templatedHtml);$('#siteinfoform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.shakeus.newsite.siteinfoform_validationRules,messages:org.r3.shakeus.newsite.siteinfoform_validationMessages});$('#siteinfoform_confirm_action').unbind().click($.r3Utils.hitch(this,this.onConfirmClick));$('#siteinfoform_cancel_action').unbind().click($.r3Utils.hitch(this,this.onCancelClick));$(this.htmlContainerId+" .siteCodeDescriptionCard").cmsCard({site:org.r3.SiteConstants.sitedomain,card_tmpl:"cms_tpl_embeddedfragments","cardid":openParamsHash.siteCodeDescriptionCardId});$('#siteinfoform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},onConfirmClick:function(event)
{var _self=this;event.preventDefault();org.r3.AjaxUtils.submitForm("post",org.r3.PageManager.getRESTUrl('POST_ShakeUs_NewSite'),$("#siteinfoform_form"),function(responseData){if(org.r3.PageManager.isRestDTO(responseData))
{var restDto=new org.r3.RestDTOAdapter(responseData);restDto.showMessage('siteinfoform_fieldset_message',_self.configOptions.messagesNamespace);}
else
{var createdSite=new org.r3.db.system.site.SiteDTOAdapter(responseData);_self.actionFormManager.onSiteCreationRequestPosted(createdSite);}},function(jqXHR,timeout,message){console.error(message);$('#siteinfoform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},onCancelClick:function(event)
{org.r3.PageManager.redirectToHomePage();event.preventDefault();}});$.r3Utils.namespace("org.r3.shakeus.newsite",window,function(aNamespace)
{aNamespace.siteinfoform_validationRules={sitetype:{required:true},site:{required:true,maxlength:15,identifier:true,texttransform:'lowercase'},sitedescr:{required:true,maxlength:40},};aNamespace.siteinfoform_validationMessages={sitetype:{required:org.r3.message.field_required},site:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},sitedescr:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.shakeus.newsite");org.r3.shakeus.newsite.SiteRequestAcceptedActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.shakeus.newsite.SiteRequestAcceptedActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(anOpeningOptionsHash)
{this.detailView.open(anOpeningOptionsHash);}});$.r3Utils.namespace("org.r3.shakeus.newsite");org.r3.shakeus.newsite.SiteRequestAcceptedActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.configOptions=null;},close:function()
{this.hide();},open:function(openParamsHash)
{this.configOptions=openParamsHash;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/shakeus/newsite/SiteRequestAcceptedActionFormView.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var templatedHtml=tmpl(responseData['view'],(openParamsHash!=null)?{title:org.r3.PageManager.getMessageFromDict(openParamsHash.messagesNamespace+".message.createNewProfileTitle"),subtitle:org.r3.PageManager.getMessageFromDict(openParamsHash.messagesNamespace+".message.createNewProfileSubTitle")}:{});$(this.htmlContainerId).html(templatedHtml);$(this.htmlContainerId+' .newSiteRequestAcceptedCard').cmsCard({site:org.r3.SiteConstants.sitedomain,card_tmpl:"cms_tpl_embeddedfragments","cardid":this.configOptions.siteCreatedCardId});$('#newsiterequestaccepted_gotosite_action').unbind().click($.r3Utils.hitch(this,this.onGotoSiteClick));this.show();}),function(d)
{console.error("controller did not load");});},onGotoSiteClick:function(event)
{var createdSiteId=this.configOptions.siteCreated.dataBean.site;var homePage=org.r3.Constants.getStrutsActionContext(createdSiteId)+"/org/r3/home.do";org.r3.PageManager.gotoPage(homePage);event.preventDefault();}});$.r3Utils.namespace("org.r3.shakeus.newsite");org.r3.shakeus.newsite.TermsAndConditionActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.shakeus.newsite.TermsAndConditionActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(anOpeningOptionsHash)
{this.detailView.open(anOpeningOptionsHash);},onTermsAndConditionAccepted:function()
{this.close();this.pageManager.onTermsAndConditionAccepted();}});$.r3Utils.namespace("org.r3.shakeus.newsite");org.r3.shakeus.newsite.TermsAndConditionActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.termsAndConditionsExtendedCardId=null;},close:function()
{this.hide();},open:function(openParamsHash)
{this.termsAndConditionsExtendedCardId=openParamsHash.termsAndConditionsExtendedCardId;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/shakeus/newsite/TermsAndConditionActionFormView.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var templatedHtml=tmpl(responseData['view'],(openParamsHash!=null)?openParamsHash:{});$(this.htmlContainerId).html(templatedHtml);$('#termsandconditionsdisclaimerForm_accept_action').unbind().click($.r3Utils.hitch(this,this.onAcceptTermsAndConditionsClick));$('#termsandconditionsdisclaimerForm_deny_action').unbind().click($.r3Utils.hitch(this,this.onDenyTermsAndConditionsClick));$('#termsandconditionsdisclaimerForm_showfull_action').unbind().click($.r3Utils.hitch(this,this.onShofFullTermsAndConditions));$(this.htmlContainerId+" .termsAndConditionsDisclaimerSummary").cmsCard({site:org.r3.SiteConstants.sitedomain,card_tmpl:"cms_tpl_embeddedfragments","cardid":openParamsHash.termsAndConditionsBriefCardId});$('#termsandconditions_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},onShofFullTermsAndConditions:function(event)
{event.preventDefault();$(this.htmlContainerId+" .termsAndConditionsDisclaimerSummary").cmsCard({site:org.r3.SiteConstants.sitedomain,card_tmpl:"cms_tpl_embeddedfragments","cardid":this.termsAndConditionsExtendedCardId});},onAcceptTermsAndConditionsClick:function(event)
{console.log("I'm onAcceptTermsAndConditionsClick.... ",this,event);event.preventDefault();var isCheckBoxSelected=$('#termsandconditionsdisclaimerForm_accept').prop('checked');if(!isCheckBoxSelected)
{org.r3.PageManager.alert("org.r3.shakeus.newsite.message.explicitaknowledgerequired");}
else
{this.actionFormManager.onTermsAndConditionAccepted();}},onDenyTermsAndConditionsClick:function(event)
{console.log("I'm onDenyTermsAndConditionsClick.... ",this,event);org.r3.PageManager.redirectToHomePage();event.preventDefault();}});$.r3Utils.namespace("org.r3.shakeus.newsite.neighborhood");org.r3.shakeus.newsite.neighborhood.PageManager={init:function()
{var _self=this;org.r3.PageManager.googleAnalyticsSendPageView();this.photoSideBar=new org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionForm(this,'#JSPortlet_RandomPhotoSideBar');this.photoSideBar.open();this.siteInfoActionForm=new org.r3.shakeus.newsite.SiteInfoActionForm(this,'#newsite_siteinfo_actionform');this.siteRequestAcceptedActionForm=new org.r3.shakeus.newsite.SiteRequestAcceptedActionForm(this,'#newsite_siterequestaccepted_actionform');this.termsAndConditionActionForm=new org.r3.shakeus.newsite.TermsAndConditionActionForm(this,'#newsite_termsandconditions_actionform');this.termsAndConditionActionForm.open({title:org.r3.shakeus.newsite.neighborhood.message.createNewProfileTitle,subtitle:org.r3.shakeus.newsite.neighborhood.message.createNewProfileSubTitle,termsAndConditionsBriefCardId:"TCBNEWNEIGHB",termsAndConditionsExtendedCardId:"TCENEWNEIGHB"});},onTermsAndConditionAccepted:function()
{this.siteInfoActionForm.open({title:org.r3.shakeus.newsite.neighborhood.message.createNewProfile_siteInfoTitle,subtitle:org.r3.shakeus.newsite.neighborhood.message.createNewProfile_siteInfoSubTitle,siteCodeDescriptionCardId:"SITEINFONEWNEIGHB",siteCreatedCardId:"SITEINFONEWNEIGHBOK",sitecode:org.r3.shakeus.newsite.neighborhood.message.createNewProfile_sitecode,sitedescr:org.r3.shakeus.newsite.neighborhood.message.createNewProfile_sitedescr,sitetype:"shkneighb",messagesNamespace:"org.r3.shakeus.newsite.neighborhood"});},onSiteCreationRequestPosted:function(aSiteDTOAdapter)
{console.log("Neighborhood Created");this.siteRequestAcceptedActionForm.open({siteCreated:aSiteDTOAdapter,siteCreatedCardId:"SITEINFONEWNEIGHBOK",messagesNamespace:"org.r3.shakeus.newsite.neighborhood"});}};$.r3Utils.namespace("org.r3.shakeus.newsite.shop");org.r3.shakeus.newsite.shop.PageManager={init:function()
{var _self=this;org.r3.PageManager.googleAnalyticsSendPageView();this.photoSideBar=new org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionForm(this,'#JSPortlet_RandomPhotoSideBar');this.photoSideBar.open();this.siteInfoActionForm=new org.r3.shakeus.newsite.SiteInfoActionForm(this,'#newsite_siteinfo_actionform');this.siteRequestAcceptedActionForm=new org.r3.shakeus.newsite.SiteRequestAcceptedActionForm(this,'#newsite_siterequestaccepted_actionform');this.termsAndConditionActionForm=new org.r3.shakeus.newsite.TermsAndConditionActionForm(this,'#newsite_termsandconditions_actionform');this.termsAndConditionActionForm.open({title:org.r3.shakeus.newsite.shop.message.createNewProfileTitle,subtitle:org.r3.shakeus.newsite.shop.message.createNewProfileSubTitle,termsAndConditionsBriefCardId:"TCBNEWSHOP",termsAndConditionsExtendedCardId:"TCENEWSHOP"});},onTermsAndConditionAccepted:function()
{this.siteInfoActionForm.open({title:org.r3.shakeus.newsite.shop.message.createNewProfile_siteInfoTitle,subtitle:org.r3.shakeus.newsite.shop.message.createNewProfile_siteInfoSubTitle,siteCodeDescriptionCardId:"SITEINFONEWSHOP",siteCreatedCardId:"SITEINFONEWSHOPOK",sitecode:org.r3.shakeus.newsite.shop.message.createNewProfile_sitecode,sitedescr:org.r3.shakeus.newsite.shop.message.createNewProfile_sitedescr,sitetype:"shkshop",messagesNamespace:"org.r3.shakeus.newsite.shop"});},onSiteCreationRequestPosted:function(aSiteDTOAdapter)
{console.log("Shop Created");this.siteRequestAcceptedActionForm.open({siteCreated:aSiteDTOAdapter,siteCreatedCardId:"SITEINFONEWSHOPOK",messagesNamespace:"org.r3.shakeus.newsite.shop"});}};$.r3Utils.namespace("org.r3.shkadmin.cms");org.r3.shkadmin.cms.PageManager={init:function()
{this.cardQueryActionForm=new org.r3.jsportlet.mongocms.CardQueryActionForm(this,'#cardQueryActionForm','#cardQueryAdvancedSearchActionForm');this.cardDetailActionForm=new org.r3.jsportlet.mongocms.CardDetailActionForm(this,'#cardDetailActionForm');this.timelineDetailActionForm=new org.r3.jsportlet.mongocms.TimelineDetailActionForm(this,'#timelineDetailActionForm');this.timelineQueryActionForm=new org.r3.jsportlet.mongocms.TimelineQueryActionForm(this,'#timelineQueryActionForm');this.uploadFileActionForm=new org.r3.jsportlet.fileupload.UploadFileActionForm(this,"#uploadFileActionForm");this.createGSideBar();org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb(this.getHomeBreadCrumb());this.openCMSCardQueryActionFormPanel();},getHomeBreadCrumb:function()
{return{"type":"breadcrumb_system","noHistory":true,"title":"Area Privata","actionForm":{show:function()
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext()+"/org/r3/shkadmin/home.do");},close:function()
{},refresh:function()
{}}};},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'gmenubar_act_newcard',title:org.r3.shkadmin.cms.message.gmenubar_action_newcard,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'plus'});sect1.items.push({id:'act_querycards',title:org.r3.shkadmin.cms.message.gmenubar_action_querycards,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'table'});var sect2={type:'section',id:'gmenubar_sect_promotedcards',title:org.r3.shkadmin.cms.message.gmenubar_action_promotedcategories,bottom_border:true,items:[],grouped:true,icon:'bars'};gsidebarCfg.sections.push(sect2);var sect3={type:'section',id:'gmenubar_sect_timelines',bottom_border:true,items:[],icon:'bars'};gsidebarCfg.sections.push(sect3);sect3.items.push({id:'act_newtimeline',title:org.r3.shkadmin.cms.message.gmenubar_action_newtimeline,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'plus'});sect3.items.push({id:'act_querytimeline',title:org.r3.shkadmin.cms.message.gmenubar_action_querytimeline,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'list'});$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var _self=this;$.ajax({"dataType":'json',"type":"GET","url":org.r3.PageManager.getRESTUrl('GET_classifier_m_contentclass'),"success":function(data,textStatus,jqXHR)
{if(data.aaData&&data.aaData.length)
{var categoryItems=[];for(var i=0;i<data.aaData.length;i++)
{if(data.aaData[i].classifieritemsattr=='promoted')
{categoryItems.push({id:data.aaData[i].clsitemid,title:data.aaData[i].classifieritemdescr,onClick:$.r3Utils.hitch(_self,_self._onGMenuBarClick),deletable:false});}}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_promotedcards',categoryItems);}},"error":function(xhr,error,thrown)
{if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. "+"This is caused by a JSON formatting error.");}}});},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newcard')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openNewCardPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_querycards':this.openCMSCardQueryActionFormPanel();break;case'act_newtimeline':this.openNewTimelinePanel();break;case'act_querytimeline':this.openQueryTimelineActionFormPanel();break;default:this.openCMSCardQueryActionFormPanel(e.id);break;}}}},openCMSCardQueryActionFormPanel:function(categoryId)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.cms.message.breadcrumb_managecards,"actionForm":this.cardQueryActionForm});this.cardQueryActionForm.open(categoryId);if(categoryId)
$('#gsidebar-navanchor').gsidebar('select',categoryId);else
$('#gsidebar-navanchor').gsidebar('select','act_querycards');},openNewCardPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.cms.message.breadcrumb_newcard,"actionForm":this.cardDetailActionForm});this.cardDetailActionForm.open(null);},onNewCardCreated:function(cardDataBean)
{org.r3.PageManager.closeAllBreadCrumbs();this.detailCard(cardDataBean);},closeCardPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openCMSCardQueryActionFormPanel();},detailCard:function(cardDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.cms.message.breadcrumb_carddetail,"actionForm":this.cardDetailActionForm});var dataBeanInfo={"cardDataBean":cardDataBean};this.cardDetailActionForm.open(cardDataBean);},openNewTimelinePanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.cms.message.breadcrumb_newtimeline,"actionForm":this.timelineDetailActionForm});this.timelineDetailActionForm.open(null);},onNewTimelineCreated:function(timelineDataBean)
{this.closeTimelinePanel();},closeTimelinePanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openQueryTimelineActionFormPanel();},detailTimeline:function(timelineDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.cms.message.breadcrumb_timelinedetail,"actionForm":this.timelineDetailActionForm});var dataBeanInfo={"timelineDataBean":timelineDataBean};this.timelineDetailActionForm.open(timelineDataBean);},openQueryTimelineActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.cms.message.breadcrumb_managetimeline,"actionForm":this.timelineQueryActionForm});this.timelineQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_querytimeline');},uploadFile:function(cardDTOAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.cms.message.breadcrumb_fileupload,"actionForm":this.uploadFileActionForm});this.uploadFileActionForm.open({"uploadfile_resturl":org.r3.PageManager.getRESTUrl('POST_PostFileAttachment',[cardDTOAdapter.dataBean.site,org.r3.Constants.language,cardDTOAdapter.dataBean.postid]),"uploadfile_resturl_ie":org.r3.PageManager.getRESTUrl('POST_PostFileAttachment',[cardDTOAdapter.dataBean.site,org.r3.Constants.language,cardDTOAdapter.dataBean.postid]),"fileTypes":org.r3.message.getDefaultAcceptedCMSFileTypes(),"formfragment":org.r3.Constants.applicationContext+'/org/r3/jsportlet/mongocms/UploadFileExtensionActionForm.html.jsp',"formFragmentInit":function()
{org.r3.PageManager.lutManager.populateSelectField({"lutUrl":org.r3.PageManager.getRESTUrl('LUT_CMS_Attachtype_post_fileattach'),"selectWidget":$('#uploadfileactionform_form_cms_attachtype')});}});}};$.r3Utils.namespace("org.r3.shkadmin.contacts");org.r3.shkadmin.contacts.PageManager={init:function()
{this.deleteGroupConfirmationDialogActionForm=new org.r3.jsportlet.dialog.DialogConfirmationActionForm(this,"#actorGroupDeleteConfirmationDialogActionForm");this.deleteGroupConfirmationDialogActionForm.open();this.actorQueryActionForm=new org.r3.console.contacts.ActorQueryActionForm(this,"#actorQueryActionForm");this.actorDetailActionForm=new org.r3.console.contacts.ActorDetailActionForm(this,"#actorDetailActionForm","#actorDetailActionFormView_tab_generale","#actorDetailActionFormView_tab_siteresource");this.actorGroupQueryActionForm=new org.r3.console.contacts.ActorGroupQueryActionForm(this,"#actorGroupQueryActionForm");this.actorGroupDetailActionForm=new org.r3.console.contacts.ActorGroupDetailActionForm(this,"#actorGroupDetailActionForm","#actorGroupActorQueryActionForm");this.actorGroupAddActorsActionForm=new org.r3.console.contacts.ActorGroupAddActorsActionForm(this,"#actorGroupAddActorsActionForm");this.createGSideBar();org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb(this.getHomeBreadCrumb());this.openActorQueryActionFormPanel();},getHomeBreadCrumb:function()
{return{"type":"breadcrumb_system","noHistory":true,"title":"Area Privata","actionForm":{show:function()
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext()+"/org/r3/shkadmin/home.do");},close:function()
{},refresh:function()
{}}};},ask4Confirmation:function(optHash)
{this.deleteGroupConfirmationDialogActionForm.show(optHash);},createGSideBar:function()
{var gsidebarCfg={};gsidebarCfg.csshoverenabled=false;gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'gmenubar_act_newcontact',title:org.r3.console.contacts.message.gmenubar_act_newcontact_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),selected:true,icon:'user-plus'});sect1.items.push({id:'act_querycontacts',title:org.r3.console.contacts.message.gmenubar_act_querycontacts_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'users'});var sectg={type:'section',id:'gmenubar_sect_groups',bottom_border:true,items:[]};gsidebarCfg.sections.push(sectg);sectg.items.push({id:'act_query_groups',title:org.r3.console.contacts.message.gmenubar_act_act_query_groups_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,icon:'group'});sectg.items.push({id:'act_newgroup',title:org.r3.console.contacts.message.gmenubar_act_act_newgroup_caption,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,icon:'plus'});var sect2={type:'section',id:'gmenubar_sect_quickgroupmenu',bottom_border:true,items:[],title:"Menu' Rapido Gruppi",grouped:true,icon:'bars'};gsidebarCfg.sections.push(sect2);$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var _self=this;$.ajax({"dataType":'json',"type":"GET","url":org.r3.PageManager.getRESTUrl('GET_UserAndApp_ActorGroups'),"success":function(data,textStatus,jqXHR)
{if(data.aaData&&data.aaData.length)
{var groupItems=[];for(var i=0;i<data.aaData.length;i++)
{if(data.aaData[i].groupprofile&&data.aaData[i].groupprofile.indexOf('gmenubar')>=0)
{groupItems.push({id:data.aaData[i].groupid,title:data.aaData[i].grouptitle,onClick:$.r3Utils.hitch(_self,_self._onGMenuBarClick),deletable:data.aaData[i].groupprofile&&data.aaData[i].groupprofile.indexOf('deletable')>=0});}}
$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_quickgroupmenu',groupItems);}},"error":function(xhr,error,thrown)
{if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. "+"This is caused by a JSON formatting error.");}}});},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_newcontact')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openNewActorPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{this.onDeleteActorGroup(e.id);}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_querycontacts':this.openActorQueryActionFormPanel();break;case'act_filecontacts':this.openUploadFilesPanel();break;case'act_query_groups':this.openActorGroupQueryPanel();break;case'act_newgroup':this.openNewActorGroupPanel();break;default:this.openActorGroupDetailPanel(e.id);break;}}}},openActorQueryActionFormPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Elenco Contatti","actionForm":this.actorQueryActionForm});this.actorQueryActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_querycontacts');},openActorGroupQueryPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Gruppi Contatto","actionForm":this.actorGroupQueryActionForm});this.actorGroupQueryActionForm.open();},openActorDetailPanel:function(actorDataBean)
{org.r3.PageManager.pushBreadCrumb({"title":"Det. Contatto","actionForm":this.actorDetailActionForm});this.actorDetailActionForm.open(actorDataBean);},openNewActorPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuovo Contatto","actionForm":this.actorDetailActionForm});this.actorDetailActionForm.open();},closeNewActorPanel:function()
{org.r3.PageManager.closeAllBreadCrumbs();this.openActorQueryActionFormPanel();},openActorGroupDetailPanel:function(groupId)
{org.r3.PageManager.pushBreadCrumb({"title":"Det. Gruppo","actionForm":this.actorGroupDetailActionForm});this.actorGroupDetailActionForm.open(groupId);},onActorGroupUpdate:function(anActorGroupDTOAdapter)
{var theItem=$('#gsidebar-navanchor').gsidebar('find',anActorGroupDTOAdapter.dataBean.groupid);if(anActorGroupDTOAdapter.isGroupprofile('gmenubar'))
{if(theItem)
$('#gsidebar-navanchor').gsidebar('updateItemTitle',anActorGroupDTOAdapter.dataBean.groupid,anActorGroupDTOAdapter.dataBean.grouptitle);else
{groupItems=[{id:anActorGroupDTOAdapter.dataBean.groupid,title:anActorGroupDTOAdapter.dataBean.grouptitle,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:anActorGroupDTOAdapter.isGroupprofile('deletable')}];$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_quickgroupmenu',groupItems);}}
else
{if(theItem)
$('#gsidebar-navanchor').gsidebar('remove',anActorGroupDTOAdapter.dataBean.groupid);}},onActorGroupCreate:function(anActorGroupDTOAdapter)
{if(anActorGroupDTOAdapter.isGroupprofile('gmenubar'))
{groupItems=[{id:anActorGroupDTOAdapter.dataBean.groupid,title:anActorGroupDTOAdapter.dataBean.grouptitle,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:anActorGroupDTOAdapter.isGroupprofile('deletable')}];$('#gsidebar-navanchor').gsidebar('addItems2Section','gmenubar_sect_quickgroupmenu',groupItems);}
this.closeNewActorGroupPanel(anActorGroupDTOAdapter);},openNewActorGroupPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Nuovo Gruppo","actionForm":this.actorGroupDetailActionForm});this.actorGroupDetailActionForm.open();},onDeleteActorGroup:function(aGroupId)
{this.ask4Confirmation({onConfirmed:$.r3Utils.hitch(this,function(aRemoveActorsFlag){this.deleteActorGroup(aGroupId,aRemoveActorsFlag);})});},deleteActorGroup:function(aGroupId,removeActorsFlag)
{var _self=this;var method="DELETE";var restUrl=org.r3.PageManager.getRESTUrl('DELETE_ActorGroup',[aGroupId,removeActorsFlag]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function()
{org.r3.PageManager.closeNotifier();$('#gsidebar-navanchor').gsidebar('remove',aGroupId);$('#gsidebar-navanchor').gsidebar('select','act_querycontacts');org.r3.PageManager.closeAllBreadCrumbs();_self.openActorQueryActionFormPanel();},"error":function(jqXHR,timeout,message)
{console.error("Errore Deleting Actor Group: ",message);}});},closeNewActorGroupPanel:function(anActorGroupDTOAdapter)
{org.r3.PageManager.closeAllBreadCrumbs();if(anActorGroupDTOAdapter)
{$('#gsidebar-navanchor').gsidebar('select',anActorGroupDTOAdapter.dataBean.groupid);this.openActorGroupDetailPanel(anActorGroupDTOAdapter.dataBean.groupid);}
else
{$('#gsidebar-navanchor').gsidebar('select','act_querycontacts');this.openActorQueryActionFormPanel();}},addActorsToGroup:function(aGroupId)
{org.r3.PageManager.pushBreadCrumb({"title":"Aggiungi Contatti","actionForm":this.actorGroupAddActorsActionForm});this.actorGroupAddActorsActionForm.open(aGroupId);}};$.r3Utils.namespace("org.r3.shkadmin.home");org.r3.shkadmin.home.PageManager={init:function()
{org.r3.PageManager.pushHomeBreadCrumb();this.shkWelcomeCard=new org.r3.shkadmin.home.SHKAdminWelcomeActionForm(this,"#shkinfoprofile_welcomecard");this.createGMenuBar($.r3Utils.hitch(this,this._onGMenuBarClick),$.r3Utils.hitch(this,this._onGMenuBarSiteClick));},createGMenuBar:function(onClickCallBack,onClickSiteCallBack)
{var gsidebarCfg={};gsidebarCfg.sections=[];var networkRequestsQueue=[];networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_ConsolePages'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{var lutPageResolvedUrl=org.r3.PageManager.getRESTUrl('LUT_CMS_ConsolePages');var firstSelectedSideBarItem=null;var firstEnabledSideBarItem=null;var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);var lutPageItem=org.r3.PageManager.lutManager.getLUTItem(lutPageResolvedUrl,org.r3.Constants.site+"_shksiteprofile");if(lutPageItem||true)
{var sideBarItem={id:'act_shkprofile',title:org.r3.shkadmin.home.message.gmenubar_act_shksiteprofile,onClick:onClickCallBack,deletable:false,selected:false,icon:'cog'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
if(lutPageItem||true)
{var sideBarItem={id:'act_shkcms',title:org.r3.shkadmin.home.message.gmenubar_act_cms,onClick:onClickCallBack,deletable:false,selected:false,icon:'database'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
if(lutPageItem||true)
{var sideBarItem={id:'act_shkcontacts',title:org.r3.shkadmin.home.message.gmenubar_act_contacts,onClick:onClickCallBack,deletable:false,selected:false,icon:'users'};if(!firstSelectedSideBarItem&&sideBarItem.selected)
firstSelectedSideBarItem=sideBarItem;if(!firstEnabledSideBarItem)
firstEnabledSideBarItem=sideBarItem;sect1.items.push(sideBarItem);}
$('#gsidebar-navanchor').gsidebar(gsidebarCfg);}));this.openWelcomeCard();},_onGMenuBarSiteClick:function(e,actionTriggered)
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext(e.id)+"/org/r3/shkadmin/home.do");},_onGMenuBarClick:function(e,actionTriggered)
{if(!actionTriggered)
{if(e.selected)
{org.r3.PageManager.activateFirstBreadCrumb();}
else
{this.activateItem(e);}}
else
{switch(actionTriggered)
{case'delete':break;case'gsidebar_init':this.activateItem(e);break;}}},activateItem:function(e)
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_shkprofile':this.openConfigPanel();break;case'act_shkcms':this.openCMSPanel();break;case'act_shkcontacts':this.openContactsPanel();break;default:break;}},openConfigPanel:function()
{org.r3.PageManager.gotoPage('siteconfig.do');},openCMSPanel:function()
{org.r3.PageManager.gotoPage('cms.do');},openContactsPanel:function()
{org.r3.PageManager.gotoPage('contacts.do');},openWelcomeCard:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.home.message.breadcrumb_shkadmin,"actionForm":this.shkWelcomeCard});this.shkWelcomeCard.open({});}};$.r3Utils.namespace("org.r3.shkadmin.home");org.r3.shkadmin.home.SHKAdminWelcomeActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.shkadmin.home.SHKAdminWelcomeActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},refresh:function()
{},open:function(anOpeningOptionsHash)
{this.detailView.open(anOpeningOptionsHash);}});$.r3Utils.namespace("org.r3.shkadmin.home");org.r3.shkadmin.home.SHKAdminWelcomeActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.configOptions=null;},close:function()
{this.hide();},open:function(openParamsHash)
{this.configOptions=openParamsHash;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/shkadmin/home/SHKAdminWelcomeActionFormView.html'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(responseData["view"]);var cardCanvas=$(this.htmlContainerId+" #shkAdminWelcomeCard");var dataCardId=openParamsHash.welcomeCardId;if(!dataCardId)
{dataCardId=$(this.htmlContainerId).attr("data-cardid");}
cardCanvas.cmsCard({site:org.r3.SiteConstants.sitedomain,card_tmpl:"cms_tpl_embeddedfragments","cardid":dataCardId});this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.shkadmin.siteconfig");org.r3.shkadmin.siteconfig.AddressActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.addressActionFormView=new org.r3.jsportlet.address.AddressActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.addressActionFormView.hide();},show:function()
{this.addressActionFormView.show();},refresh:function()
{},open:function(openParams)
{var _self=this;var method='get';var restUrl=org.r3.PageManager.getRESTUrl('GET_SiteCollection_Detail',[org.r3.Constants.site]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{var siteCollectionDTOAdapter=responseData;if(siteCollectionDTOAdapter)
{siteCollectionDTOAdapter=new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(siteCollectionDTOAdapter);siteAddressDTOAdapter=siteCollectionDTOAdapter.getAddressDTOAdapter();}
_self.addressActionFormView.open(siteCollectionDTOAdapter.getAddressDTOAdapter(),false);if(openParams&&openParams.tabbedlayout)
{$('#addressActionFormViewTabs a[data-toggle="tab"]').on('shown.bs.tab',function(e)
{var activated=e.target;var prevActivated=e.relatedTarget;console.log(activated,prevActivated);_self.addressActionFormView.map.invalidateSize();});}
_self.show();},"error":function(jqXHR,timeout,message)
{console.error(message);}});},onViewStatusChanged:function()
{},onAddressFormSave:function()
{var _self=this;org.r3.AjaxUtils.submitForm("put",org.r3.PageManager.getRESTUrl('PUT_SiteCollection_Address',[org.r3.Constants.site]),$("#addressform_form"),function(responseData){$('#addressform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});_self.onViewStatusChanged();},function(jqXHR,timeout,message){console.error(message);},"org.r3.message.saveconfirm",true);}});$.r3Utils.namespace("org.r3.shkadmin.siteconfig");org.r3.shkadmin.siteconfig.AdminsActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.shkadmin.siteconfig.AdminsActionFormView(aDetailViewContainerId,this);this.listView=new org.r3.db.system.user.user.UserQueryActionFormView
(aChildEntityListViewContainerId,this,{dataTableId:'UserQueryActionFormView',gradeLevel:'grade_level5',legend:org.r3.shkadmin.siteconfig.message.adminsctionform_listofadmins,iDisplayLength:25,layout:'fullWidth',sortable:true,dataTableColumns:"multiselector,firstname,lastname;sort,email",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:null,onClearSelection:null,actionBarOnTop:true,buttons:[{id:'shkadmin_admins_action_deleteuser',label:org.r3.shkadmin.siteconfig.message.admins_deleteusersfromadminsgroup,disabled:true,onClick:$.r3Utils.hitch(this,function(){this.onRemoveItemsFromAdminsGroup();})}],onInitializationComplete:function()
{$('#UserQueryActionFormView_all_userid').unbind().click(function(e)
{var currentTarget=$(e.currentTarget);if(currentTarget.prop('checked'))
{$('#shkadmin_admins_action_deleteuser').prop('disabled',false);$("#UserQueryActionFormView_tableform input[type='checkbox'][name='userid']").prop('checked',true);}
else
{$('#shkadmin_admins_action_deleteuser').prop('disabled',true);$("#UserQueryActionFormView_tableform input[type='checkbox'][name='userid']").prop('checked',false);}});$('#UserQueryActionFormView').bind('page',function(){$('#UserQueryActionFormView_all_userid').prop('checked',false);$('#shkadmin_admins_action_deleteuser').prop('disabled',true);});var matchExpr="#UserQueryActionFormView_tableform input[type='checkbox'][name='userid']";$(document).off('click',matchExpr).on('click',matchExpr,function(e){$('#UserQueryActionFormView_all_userid').prop('checked',false);var numberOfSelected=0;$.each($("#UserQueryActionFormView_tableform input[type='checkbox'][name='userid']"),function(index,item)
{if($(item).prop('checked'))
numberOfSelected++;});if(numberOfSelected)
{$('#shkadmin_admins_action_deleteuser').prop('disabled',false);}
else
{$('#shkadmin_admins_action_deleteuser').prop('disabled',true);}
e.stopPropagation();});}});},close:function()
{this.hide();},hide:function()
{this.detailView.hide();this.listView.hide();},show:function()
{this.detailView.show();this.listView.show();},refresh:function()
{this.listView.refresh();},open:function()
{this.detailView.open();var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Users_InRole',['shkadmin']);this.listView.open({"dataTableSource":dataTableSource,"onInitializationCompleteArgs":arguments});},onRemoveItemsFromAdminsGroup:function()
{var _self=this;var theForm=$('#UserQueryActionFormView_tableform');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.deletemulticonfirm"))
{restUrl=org.r3.PageManager.getRESTUrl('DELETE_Role_From_Users_4_Site',['shkadmin']);method="put";org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.listView.refresh();},"error":function(jqXHR,timeout,message)
{console.error(message);org.r3.PageManager.closeNotifier();}});}}});$.r3Utils.namespace("org.r3.shkadmin.siteconfig");org.r3.shkadmin.siteconfig.AdminsActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/shkadmin/siteconfig/AdminsActionFormView.html.jsp?mode=detail'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#actorgroupdetailactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.console.contacts.actorgroupdetailactionform_form_validationRules,messages:org.r3.console.contacts.actorgroupdetailactionform_form_validationMessages});$("#adminsactionform_email").typeahead({source:function(queryValue,processCallBack)
{var dataTableSource=org.r3.PageManager.getRESTUrl('GET_Users_ByEMail',[queryValue]);return $.getJSON(dataTableSource,function(data)
{return processCallBack(data.aaData);});},minLength:5,autoSelect:true,displayText:function(item){return item.email;}});$("#adminsactionform_email").change(function()
{var current=$("#adminsactionform_email").typeahead("getActive");if(current&&current.email==$("#adminsactionform_email").val())
{console.log("Exact Match");$('#adminsactionform_firstname').val(current.firstname);$('#adminsactionform_lastname').val(current.lastname);$('#adminsactionform_userid').val(current.userid);$('#adminsactionform_action_saveitem').prop('disabled',false);}
else
{$('#adminsactionform_action_saveitem').prop('disabled',true);}});this._initializeFormFields();$('#adminsactionform_action_saveitem').click($.r3Utils.hitch(this,this._onSaveItem));$('#adminsactionform_action_cancel').hide();$('#adminsactionform_fieldset_message').formmessage({});this.show();}),function(d)
{console.error("controller did not load");});},_resetForm:function()
{var theForm=$('#adminsactionform_form');theForm.resetForm();$('#adminsactionform_action_saveitem').prop('disabled',true);},_onEmailSelected:function(item)
{console.info(item);},_onSaveItem:function()
{var _self=this;var aUserId=$('#adminsactionform_userid').val();var theForm=$('#adminsactionform_form');org.r3.AjaxUtils.submitForm("PUT",org.r3.PageManager.getRESTUrl('PUT_User_Add_Role',[aUserId,'shkadmin']),theForm,function(responseData){$('#adminsactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});_self.actionFormManager.refresh();_self._resetForm();},function(jqXHR,timeout,message){$('#adminsactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},_initializeFormFields:function()
{}});$.r3Utils.namespace("org.r3.console.contacts",window,function(aNamespace)
{aNamespace.actorgroupdetailactionform_form_validationRules={grouptitle:{required:true,maxlength:30,texttransform:'uppercase'}};aNamespace.actorgroupdetailactionform_form_validationMessages={grouptitle:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.shkadmin.siteconfig");org.r3.shkadmin.siteconfig.FacebookConfigActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.shkadmin.siteconfig.FacebookConfigActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.shkadmin.siteconfig");org.r3.shkadmin.siteconfig.FacebookConfigActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.faceBookLoginStatus=null;this.fbPageInfo=null;},close:function()
{this.hide();},open:function()
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/shkadmin/siteconfig/FacebookConfigActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SiteCollection_Detail',[org.r3.Constants.site]),dataType:"json"});networkRequestsQueue.push({id:"pkg_facebookconfig_properties",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_FacebookConfig_SiteProperties'),dataType:"json"});fbEnsureInit(function(){FB.getLoginStatus(function(response){_self.onFaceBookLoginStatus(response);});});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$(this.htmlContainerId+' .showwhenacquiringtoken').hide();var pkg_facebookconfig_properties=responseData['pkg_facebookconfig_properties'];if(pkg_facebookconfig_properties)
{pkg_facebookconfig_properties=new org.r3.db.system.siteproperty.SitePropertyDTOTableAdapter(pkg_facebookconfig_properties,function(aRowDataBean){return new org.r3.db.system.siteproperty.SitePropertyDTOAdapter(aRowDataBean);});this._initializeFormFields(pkg_facebookconfig_properties);}
else this._initializeFormFields(null);$('#facebookconfigform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.shkadmin.siteconfig.facebookconfigform_form_validationRules,messages:org.r3.shkadmin.siteconfig.facebookconfigform_form_validationMessages});$('#getfacebookpagetokenform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.shkadmin.siteconfig.getfacebookpagetokenform_form_validationRules,messages:org.r3.shkadmin.siteconfig.getfacebookpagetokenform_form_validationMessages});$('#facebookconfigform_fieldset_message').formmessage({});$('#facebookconfigform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));$('#getfacebookpagetokenform_action_getpagetoken').click($.r3Utils.hitch(this,this._onGetPageToken));$('#getfacebookpagetokenform_action_saveitem').click($.r3Utils.hitch(this,this._onSavePageToken));$('#getfacebookpagetokenform_action_cancel').click($.r3Utils.hitch(this,this._onCancelSavePageToken));this.show();}),function(d)
{console.error("controller did not load");});},_initializeFormFields:function(siteProperties)
{if(siteProperties)
{var property=siteProperties.getPropertyByPropertyscopePropertykey("facebook.page.url","pageurl");if(property)
{$('#pkg_facebook_pageurl').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("facebook.page.pub","fbpagename");if(property)
{$('#pkg_facebook_fbpagename').val(property.dataBean.propertyvalue);}
var property=siteProperties.getPropertyByPropertyscopePropertykey("facebook.page.pub","fbpageid");if(property)
{$('#pkg_facebook_fbpageid').val(property.dataBean.propertyvalue);}}},_onUpdateItem:function()
{var _self=this;var theForm=$('#facebookconfigform_form');org.r3.AjaxUtils.submitForm("POST",org.r3.PageManager.getRESTUrl("POST_SiteProperties_Invalidate",["facebook.page.url"]),theForm,function(responseData){$('#facebookconfigform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#facebookconfigform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},onFaceBookLoginStatus:function(response)
{this.faceBookLoginStatus=response;},_onGetPageToken:function(e)
{var _self=this;e.preventDefault();FB.login(function(response)
{_self.faceBookLoginStatus=response;if(response.status==='connected')
{_self.onConnected();}},{scope:'public_profile,email,manage_pages,pages_show_list,publish_pages',return_scopes:true});},onConnected:function()
{var _self=this;_self.fbPageInfo=[];FB.api('/me/accounts',function(response)
{console.info(response);if(response&&response.data.length)
{var pages=[];for(var i=0;i<response.data.length;i++)
{var item=response.data[i];var permissions="";var canCreateContent=false;if(item.perms&&item.perms.length)
{for(var j=0;j<item.perms.length;j++)
{permissions=permissions+item.perms[j]+',';if(item.perms[j]=='ADMINISTER'||item.perms[j]=='EDIT_PROFILE'||item.perms[j]=='CREATE_CONTENT')
{canCreateContent=true;console.log('Candidate Page: '+item.name+" - "+item.id+" - "+item.access_token+' - '+permissions);}}
if(canCreateContent)
{pages.push({name:item.name,id:item.id,accesstoken:item.access_token});}}}
_self.fbPageInfo=pages;if(pages.length)
{_self._populateListOfCandidatePages($('#getfacebookpagetokenform_fbpageid'),pages);$('#getfacebookpagetokenform_fbaccesstoken').val(_self.faceBookLoginStatus.authResponse.accessToken);$('#getfacebookpagetokenform_fbuserid').val(_self.faceBookLoginStatus.authResponse.userID);$(_self.htmlContainerId+' .hidewhenacquiringtoken').hide();$(_self.htmlContainerId+' .showwhenacquiringtoken').show();}
else
{$('#facebookconfigform_fieldset_message').formmessage('setText',{text:org.r3.shkadmin.siteconfig.message.facebook_nopages,category:'error'});}}
else $('#facebookconfigform_fieldset_message').formmessage('setText',{text:org.r3.shkadmin.siteconfig.message.facebook_nopages,category:'error'});});},_populateListOfCandidatePages:function(selectWidget,anArrayOfPages)
{var selectOptions=selectWidget.prop('options');selectOptions.length=0;for(var i=0;i<anArrayOfPages.length;i++)
{selectOptions[selectOptions.length]=new Option(anArrayOfPages[i].name,anArrayOfPages[i].id);}},_onSavePageToken:function()
{var _self=this;var selectedIndex=$('#getfacebookpagetokenform_fbpageid').prop('selectedIndex');if(this.fbPageInfo.length>selectedIndex)
{$('#getfacebookpagetokenform_fbpagename').val(this.fbPageInfo[selectedIndex].name);$('#getfacebookpagetokenform_fbpagetoken').val(this.fbPageInfo[selectedIndex].accesstoken);}
var theForm=$('#getfacebookpagetokenform_form');org.r3.AjaxUtils.submitForm("POST",org.r3.PageManager.getRESTUrl("POST_SiteProperties_AcquireFacebookPageToken",["facebook.page.pub"]),theForm,function(responseData)
{$('#facebookconfigform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});_self._onCancelSavePageToken();},function(jqXHR,timeout,message){$('#facebookconfigform_fieldset_message').formmessage('setText',{text:message,category:'error'});_self._onCancelSavePageToken();},"org.r3.message.saveconfirm",true);},_onCancelSavePageToken:function()
{$(this.htmlContainerId+' .hidewhenacquiringtoken').show();$(this.htmlContainerId+' .showwhenacquiringtoken').hide();}});$.r3Utils.namespace("org.r3.shkadmin.siteconfig",window,function(aNamespace)
{aNamespace.facebookconfigform_form_validationRules={prop_pageurl:{maxlength:100}};aNamespace.facebookconfigform_form_validationMessages={prop_pageurl:{maxlength:org.r3.message.field_maxlength}};aNamespace.getfacebookpagetokenform_form_validationRules={fbpageid:{required:true}};aNamespace.getfacebookpagetokenform_form_validationMessages={fbpageid:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.shkadmin.siteconfig");org.r3.shkadmin.siteconfig.PageManager={init:function()
{this.addressActionForm=new org.r3.shkadmin.siteconfig.AddressActionForm(this,'#addressActionForm');this.imageUploadActionForm1=new org.r3.jsportlet.imageupload.ImageUploadActionForm(this,'#imageUploadActionForm','#imageUploadActionForm .imageUploadGraphicCanvas');this.imageUploadActionForm2=new org.r3.jsportlet.imageupload.ImageUploadActionForm(this,'#imageUploadActionForm','#imageUploadActionForm .imageUploadGraphicCanvas');this.siteInfoActionForm=new org.r3.shkadmin.siteconfig.SiteInfoActionForm(this,'#siteInfoActionForm');this.facebookConfigActionForm=new org.r3.shkadmin.siteconfig.FacebookConfigActionForm(this,'#facebookConfigActionForm');this.adminsActionForm=new org.r3.shkadmin.siteconfig.AdminsActionForm(this,'#adminsActionForm','#listOfAdminsActionForm');this.createGSideBar();org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb(this.getHomeBreadCrumb());this.openInfoPanel();},getHomeBreadCrumb:function()
{return{"type":"breadcrumb_system","noHistory":true,"title":"Area Privata","actionForm":{show:function()
{org.r3.PageManager.gotoPage(org.r3.Constants.getStrutsActionContext()+"/org/r3/shkadmin/home.do");},close:function()
{},refresh:function()
{}}};},createGSideBar:function()
{var targetSiteType=org.r3.SiteConstants.targetSiteType;var gsidebarCfg={};gsidebarCfg.sections=[];var sect1={type:'section',id:'gmenubar_sect_action',bottom_border:true,items:[]};gsidebarCfg.sections.push(sect1);sect1.items.push({id:'act_info',title:org.r3.shkadmin.siteconfig.message.gmenubar_act_info,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'info'});sect1.items.push({id:'act_address',title:org.r3.shkadmin.siteconfig.message.gmenubar_act_address,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'map-marker'});sect1.items.push({id:'act_img_sitesquared',title:org.r3.shkadmin.siteconfig.message.gmenubar_act_img_sitesquared,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'picture-o'});sect1.items.push({id:'act_img_shksitephoto',title:org.r3.shkadmin.siteconfig.message.gmenubar_act_img_shksitephoto,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'picture-o'});sect1.items.push({id:'act_admins',title:org.r3.shkadmin.siteconfig.message.gmenubar_act_admins,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'user-circle'});sect1.items.push({id:'act_facebook',title:org.r3.shkadmin.siteconfig.message.gmenubar_act_facebook,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:true,icon:'facebook'});$('#gsidebar-navanchor').gsidebar(gsidebarCfg);var _self=this;},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.id=='gmenubar_act_site')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gsidebar-navanchor').gsidebar('select',e.id);this.openSiteConfigPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{$('#gsidebar-navanchor').gsidebar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.id)
{case'act_info':this.openInfoPanel();break;case'act_address':this.openAddressConfigPanel();break;case'act_img_sitesquared':this.openImageConfigPanel('sitesquared',this.imageUploadActionForm1);break;case'act_img_shksitephoto':this.openImageConfigPanel('shksitephoto',this.imageUploadActionForm2);break;case'act_admins':this.openAdminsPanel();break;case'act_facebook':this.openFacebookConfigPanel();break;default:break;}}}},openAddressConfigPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.siteconfig.message.breadcrumb_address,"actionForm":this.addressActionForm});this.addressActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_address');},openFacebookConfigPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.siteconfig.message.breadcrumb_facebook,"actionForm":this.facebookConfigActionForm});this.facebookConfigActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_facebook');},openInfoPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.siteconfig.message.breadcrumb_siteinfo,"actionForm":this.siteInfoActionForm});this.siteInfoActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_info');},openAdminsPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.siteconfig.message.breadcrumb_address,"actionForm":this.addressActionForm});this.addressActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_address');},openAdminsPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.shkadmin.siteconfig.message.breadcrumb_admins,"actionForm":this.adminsActionForm});this.adminsActionForm.open();$('#gsidebar-navanchor').gsidebar('select','act_admins');},openImageConfigPanel:function(aGraphicType,anActionForm)
{var _self=this;var currentSite=org.r3.Constants.site;org.r3.AjaxUtils.ajaxInvoke('get',org.r3.PageManager.getRESTUrl('GET_SiteCollection_Detail',[currentSite]),function(responseData)
{var siteCollectionDTOAdapter=null;if(responseData)
{siteCollectionDTOAdapter=new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(responseData);var mongoImage=siteCollectionDTOAdapter.getGraphicByRole('image',aGraphicType);console.log(mongoImage);org.r3.PageManager.pushBreadCrumb({"title":eval('org.r3.shkadmin.siteconfig.message.breadcrumb_img_'+aGraphicType),"actionForm":anActionForm});anActionForm.open(aGraphicType,mongoImage);$('#gsidebar-navanchor').gsidebar('select','act_img_graphicType');}});}};$.r3Utils.namespace("org.r3.shkadmin.siteconfig");org.r3.shkadmin.siteconfig.SiteInfoActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.shkadmin.siteconfig.SiteInfoActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function()
{this.detailView.open();}});$.r3Utils.namespace("org.r3.shkadmin.siteconfig");org.r3.shkadmin.siteconfig.SiteInfoActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function()
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/shkadmin/siteconfig/SiteInfoActionFormView.html.jsp?mode=detail'),dataType:"html"});networkRequestsQueue.push({id:"content",type:"Get",url:org.r3.PageManager.getRESTUrl('GET_SiteCollection_Detail',[org.r3.Constants.site]),dataType:"json"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var siteDataBean=responseData['content'];if(siteDataBean)
{siteDataBean=new org.r3.db.mongo.sitecollection.SiteCollectionDTOAdapter(siteDataBean);}
$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#siteinfoactionform_form').validate({errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.shkadmin.siteconfig.siteinfoactionform_form_validationRules,messages:org.r3.shkadmin.siteconfig.siteinfoactionform_form_validationMessages});$('#siteinfoactionform_fieldset_message').formmessage({});this._initializeFormFields(siteDataBean);$('#siteinfoactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));this.show();}),function(d)
{console.error("controller did not load");});},_onUpdateItem:function()
{var _self=this;var theForm=$('#siteinfoactionform_form');org.r3.AjaxUtils.submitForm("PUT",org.r3.PageManager.getRESTUrl('PUT_SiteCollection_Info',[org.r3.Constants.site]),theForm,function(responseData){$('#siteinfoactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#siteinfoactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);},_initializeFormFields:function(aSiteDTOAdapter)
{if(aSiteDTOAdapter)
{$('#siteinfoactionform_site').val(aSiteDTOAdapter.dataBean.site);$('#siteinfoactionform_site').prop('disabled',true);$('#siteinfoactionform_summary').val(aSiteDTOAdapter.dataBean.summary);}}});$.r3Utils.namespace("org.r3.shkadmin.siteconfig",window,function(aNamespace)
{aNamespace.siteinfoactionform_form_validationRules={site:{required:true,maxlength:15,identifier:true,texttransform:'lowercase'},summary:{required:true,maxlength:1024}};aNamespace.siteinfoactionform_form_validationMessages={site:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,identifier:org.r3.message.field_identifier},summary:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength}};});$.r3Utils.namespace("org.r3.user.myr3");org.r3.user.myr3.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();this.randomPhotoSideBarActionForm=new org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionForm(this,'#JSPortlet_SideBar');this.changeUserPwdActionForm=new org.r3.jsportlet.changeuserpwd.ChangeUserPasswordActionForm(this,'#changeUserPasswordActionForm');this.userPhotoActionForm=new org.r3.jsportlet.imageupload.UserPhotoActionForm(this,'#userPhotoActionForm');this.openPanel();},openPanel:function()
{org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Recupero Parola Chiave","actionForm":this.changeUserPwdActionForm});this.randomPhotoSideBarActionForm.open();this.userPhotoActionForm.open();this.changeUserPwdActionForm.open();}};$.r3Utils.namespace("org.r3.user.myr3_profile1");org.r3.user.myr3_profile1.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();this.userProfileActionForm=new org.r3.user.myr3_profile1.UserProfileActionForm(this,'#userprofileactionform');this.openPanel();},openPanel:function()
{org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Gestione Profilo","actionForm":this.userProfileActionForm});this.userProfileActionForm.open();}};$.r3Utils.namespace("org.r3.user.myr3_profile1");org.r3.user.myr3_profile1.UserProfileActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId)
{this.setPageManager(aPageManager);this.randomPhotoSideBarActionFormView=new org.r3.jsportlet.rndphotosidebar.RandomPhotoSideBarActionFormView('#JSPortlet_RandomPhotoSideBar',this);this.taskCompletionSideBarActionFormView=new org.r3.jsportlet.taskcompletionsidebar.TaskCompletionSideBarActionFormView('#JSPortlet_TaskCompletionSideBar',this);this.changeUserPwdActionFormView=new org.r3.jsportlet.changeuserpwd.ChangeUserPasswordActionFormView('#changeUserPasswordActionForm',this);this.userPhotoActionFormView=new org.r3.jsportlet.imageupload.ImageUploadActionFormView('#userPhotoActionForm',this);this.addressActionFormView=new org.r3.jsportlet.address.AddressActionFormView('#addressActionForm',this);this.businesscardinfoActionFormView=new org.r3.jsportlet.user.BusinessCardInfoActionFormView('#businesscardinfoActionForm',this);},close:function()
{this.hide();},hide:function()
{this.randomPhotoSideBarActionFormView.hide();this.taskCompletionSideBarActionFormView.hide();this.changeUserPwdActionFormView.hide();this.userPhotoActionFormView.hide();this.addressActionFormView.hide();this.businesscardinfoActionFormView.hide();},show:function()
{this.randomPhotoSideBarActionFormView.show();this.taskCompletionSideBarActionFormView.show();this.changeUserPwdActionFormView.show();this.userPhotoActionFormView.show();this.addressActionFormView.show();this.businesscardinfoActionFormView.show();},refresh:function()
{},open:function()
{var _self=this;var method='get';var restUrl=org.r3.PageManager.getRESTUrl('GET_UserCollection_Detail',[org.r3.PageManager.userInfo.dataBean.userid]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{var dtoAdapter=null;if(responseData)
{dtoAdapter=new org.r3.db.mongo.usercollection.UserCollectionDTOAdapter(responseData);}
else dtoAdapter=new org.r3.db.mongo.usercollection.UserCollectionDTOAdapter({userid:org.r3.PageManager.userInfo.dataBean.userid,description:org.r3.PageManager.userInfo.dataBean.lastname});_self.randomPhotoSideBarActionFormView.open();_self.taskCompletionSideBarActionFormView.open({taskCompletionLevel:dtoAdapter.getCompletionPercentage()});_self.changeUserPwdActionFormView.open(dtoAdapter);_self.userPhotoActionFormView.open({"cssClassName":"css_"+"userphoto","extraInfo":[{"name":"cms_attachtype","value":"userphoto"}],"aspectRatio":1,"maxSize":[300,300],"templateFile":"ImageUploadActionFormView.html.jsp","uploadUrl":org.r3.PageManager.getRESTUrl('PUT_UserCollection_Photo',[org.r3.PageManager.userInfo.dataBean.userid]),"currentImageUrl":dtoAdapter.getPhotoUrl(),"imageCanvasIdHash":'#loadimage_canvas',"inputFileTriggerSelector":'#loadimage_input_file',"onSubmission":$.r3Utils.hitch(_self,_self.updateProfileStatusInfo)});_self.addressActionFormView.open(dtoAdapter.getAddressDTOAdapter(),true);_self.businesscardinfoActionFormView.open(dtoAdapter);$('#profileActionFormTabs a[data-toggle="tab"]').on('shown.bs.tab',function(e)
{var activated=e.target;var prevActivated=e.relatedTarget;console.log(activated,prevActivated);_self.addressActionFormView.map.invalidateSize();});},"error":function(jqXHR,timeout,message)
{console.error(message);}});},onViewStatusChanged:function()
{this.updateProfileStatusInfo();},updateProfileStatusInfo:function()
{var _self=this;var method='get';var restUrl=org.r3.PageManager.getRESTUrl('GET_UserCollection_Detail',[org.r3.PageManager.userInfo.dataBean.userid]);$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{var dtoAdapter=null;if(responseData)
{dtoAdapter=new org.r3.db.mongo.usercollection.UserCollectionDTOAdapter(responseData);}
else dtoAdapter=new org.r3.db.mongo.usercollection.UserCollectionDTOAdapter({userid:org.r3.PageManager.userInfo.dataBean.userid,description:org.r3.PageManager.userInfo.dataBean.lastname});_self.taskCompletionSideBarActionFormView.refresh({taskCompletionLevel:dtoAdapter.getCompletionPercentage()});},"error":function(jqXHR,timeout,message)
{console.error(message);}});},doChangeUserPassword:function()
{var _self=this;org.r3.AjaxUtils.submitForm("post",org.r3.PageManager.getRESTUrl('POST_User_ChangeMyPassword'),$("#changeuserpwdform_form"),function(responseData){var restDto=new org.r3.RestDTOAdapter(responseData);if(restDto.isOk())
{restDto.showMessage('changeuserpwdform_fieldset_message');}
else restDto.showMessage('changeuserpwdform_fieldset_message');},function(jqXHR,timeout,message){console.error(message);$('#changeuserpwdform_fieldset_message').formmessage('setText',{text:message,category:'error'});},"org.r3.message.saveconfirm",true);event.preventDefault();},onAddressFormSave:function()
{var _self=this;org.r3.AjaxUtils.submitForm("put",org.r3.PageManager.getRESTUrl('PUT_UserCollection_Address',[org.r3.PageManager.userInfo.dataBean.userid]),$("#addressform_form"),function(responseData){$('#addressform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});_self.onViewStatusChanged();},function(jqXHR,timeout,message){console.error(message);},"org.r3.message.saveconfirm",true);},});$.r3Utils.namespace("org.r3.user.resetuserpwd");org.r3.user.resetuserpwd.PageManager={init:function()
{org.r3.PageManager.googleAnalyticsSendPageView();if(org.r3.PageManager.userInfo.isGuest())
{this.resetUserPasswordActionForm=new org.r3.jsportlet.resetuserpwd.ResetUserPasswordActionForm(this,'#JSPortlet_ResetUserPasswordActionForm');this.openPanel();}},openPanel:function()
{org.r3.PageManager.pushHomeBreadCrumb();org.r3.PageManager.pushBreadCrumb({"title":"Recupero Parola Chiave","actionForm":this.resetUserPasswordActionForm});$('#HLP_RESETPWD').cmsCard({cardid:"HLP_RESETPWD"});this.resetUserPasswordActionForm.open();}};$.r3Utils.namespace("org.r3.wbs.towfillout");org.r3.wbs.towfillout.NavigatorActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.wbs.towfillout.NavigatorActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(pageInfo,cardInfo,aWbsId,aWbsNodeId)
{this.detailView.open(pageInfo,cardInfo,aWbsId,aWbsNodeId);},openWBSDetailActionFormPanel:function(aWbsId_OR_aWbsDTOAdapter)
{this.pageManager.openWBSDetailActionFormPanel(aWbsId_OR_aWbsDTOAdapter);},openWBSNodeDetailActionFormPanel:function(aWbsId,aWbsNodeId)
{this.pageManager.openWBSNodeDetailActionFormPanel(aWbsId,aWbsNodeId);}});$.r3Utils.namespace("org.r3.wbs.towfillout");org.r3.wbs.towfillout.NavigatorActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.gmenubarInitialized=false;},close:function()
{this.hide();},open:function(pageInfo,cardInfo,aWbsId,aWbsNodeId)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var wbsesUrl=org.r3.PageManager.getRESTUrl("GET_WBSes");var networkRequestsQueue=[];networkRequestsQueue.push({id:"wbses",type:"Get",url:wbsesUrl,dataType:"json"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_Page'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();org.r3.PageManager.lutManager.addLUT(wbsesUrl,responseData["wbses"]);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":wbsesUrl,"selectWidget":$('#wbsselection_filter'),"selectedValue":aWbsId,"useBusinessKey":true,"onComplete":function(theLUT)
{var selectedWbs=$('#wbsselection_filter').val();if(selectedWbs)
{_self.fetchWBSOutline(selectedWbs,aWbsNodeId);}
console.log("Select Field Loaded....",$('#wbsselection_filter').val());}});var resolvedUrl=org.r3.PageManager.getRESTUrl("LUT_CMS_Page");var lutItem=org.r3.PageManager.lutManager.getLUTItem(resolvedUrl,org.r3.Constants.site+'_'+pageInfo.pageid);if(lutItem)
{this.pageDTOAdapter=new org.r3.db.cms.page.PageDTOAdapter(lutItem);this.pageDTOAdapter.loadPageImage('#page_image');}
$('#wbsselection_filter').unbind().change(function(e)
{var currentTarget=$(e.currentTarget);var selectedWbs=currentTarget.val();if(selectedWbs)
{_self.fetchWBSOutline(selectedWbs,null);}});this.show();}),function(d)
{console.error("controller did not load");});},fetchWBSOutline:function(aWbsId,aWbsNodeId)
{var _self=this;var method="GET";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('GET_WBSTree',[aWbsId]);if(this.gmenubarInitialized)
{$('#gmenubar').gmenubar('destroy');}
$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{var dtoAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData);_self.createGMenuBar(dtoAdapter,aWbsNodeId);org.r3.PageManager.closeAllBreadCrumbs();if(aWbsNodeId)
_self.openWBSNodeDetailActionFormPanel(aWbsId,aWbsNodeId);else _self.openWBSDetailActionFormPanel(dtoAdapter);},"error":function(jqXHR,timeout,message)
{console.error(message);}});},createGMenuBar:function(aWBSDTOAdapter,aSelectedWbsNodeId)
{var theWbsNodes=aWBSDTOAdapter.getListOfWbsNodes();var gemnubarCfg={};gemnubarCfg.sections=[];var sectWBS={type:'section',id:'gmenubar_sect_wbs',bottom_border:true,items:[]};gemnubarCfg.sections.push(sectWBS);sectWBS.items.push({id:aWBSDTOAdapter.dataBean.wbsid,actionId:'wbs_detail',title:aWBSDTOAdapter.dataBean.wbstitle,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:!aSelectedWbsNodeId});var sectOutline={type:'section',id:'gmenubar_sect_wbsnode',bottom_border:true,items:[]};gemnubarCfg.sections.push(sectOutline);if(theWbsNodes){for(var j=0;j<theWbsNodes.length;j++)
{sectOutline.items.push({id:theWbsNodes[j].dataBean.wbsnodeid,wbsid:aWBSDTOAdapter.dataBean.wbsid,actionId:'wbsnode_detail',title:theWbsNodes[j].getNodeLabel(true),onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),customCSSClassName:theWbsNodes[j].getCustomCSSClassName(),deletable:false,selected:aSelectedWbsNodeId&&(aSelectedWbsNodeId==theWbsNodes[j].dataBean.wbsnodeid)});}}
$('#gmenubar').gmenubar(gemnubarCfg);this.gmenubarInitialized=true;},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.actionId=='gmenubar_act_newcontact')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gmenubar').gmenubar('select',e.id);this.openNewActorPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{this.deleteActorGroup(e.id);}
else
{$('#gmenubar').gmenubar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.actionId)
{case'wbs_detail':this.openWBSDetailActionFormPanel(e.id);break;case'wbsnode_detail':this.openWBSNodeDetailActionFormPanel(e.wbsid,e.id);break;}}}},openWBSDetailActionFormPanel:function(aWbsId_OR_aWbsDTOAdapter)
{if(_.isString(aWbsId_OR_aWbsDTOAdapter))
$('#gmenubar').gmenubar('select',aWbsId_OR_aWbsDTOAdapter);this.actionFormManager.openWBSDetailActionFormPanel(aWbsId_OR_aWbsDTOAdapter);},openWBSNodeDetailActionFormPanel:function(aWbsId,aWbsNodeId)
{$('#gmenubar').gmenubar('select',aWbsNodeId);this.actionFormManager.openWBSNodeDetailActionFormPanel(aWbsId,aWbsNodeId);}});$.r3Utils.namespace("org.r3.wbs.towfillout");org.r3.wbs.towfillout.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.navigator=new org.r3.wbs.towfillout.NavigatorActionForm(this,"#navigatorActionForm");this.wbsDetail=new org.r3.wbs.towfillout.WBSDetailActionForm(this,"#wbsDetailActionForm");this.wbsNodeDetail=new org.r3.wbs.towfillout.WBSNodeDetailActionForm(this,"#wbsNodeDetailActionForm","#wbsNodeQueryActionForm");org.r3.PageManager.pushHomeBreadCrumb();var wbsIdParam=$.r3Utils.getQueryStringParamFromPageUrl("wbsid");console.log("wbsIdParam",wbsIdParam);var wbsNodeIdParam=$.r3Utils.getQueryStringParamFromPageUrl("wbsnodeid");console.log("wbsNodeIdParam",wbsNodeIdParam);this.openNavigator(pageInfo,cardInfo,wbsIdParam,wbsNodeIdParam);},openNavigator:function(pageInfo,cardInfo,aWbsId,aWbsNodeId)
{var _self=this;this.navigator.open(pageInfo,cardInfo,aWbsId,aWbsNodeId);},openWBSDetailActionFormPanel:function(aWbsId_OR_aWbsDTOAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.wbs.towfillout.message.wbs_detail_breadcrumb,"actionForm":this.wbsDetail});this.wbsDetail.open(aWbsId_OR_aWbsDTOAdapter);},openWBSNodeDetailActionFormPanel:function(aWbsId,aWbsNodeId)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.wbs.towfillout.message.wbs_node_detail_breadcrumb,"actionForm":this.wbsNodeDetail});this.wbsNodeDetail.open(aWbsId,aWbsNodeId);}};$.r3Utils.namespace("org.r3.wbs.towfillout");org.r3.wbs.towfillout.WBSDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.wbs.towfillout.WBSDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(aWbsId_OR_aWbsDTOAdapter)
{this.detailView.open(aWbsId_OR_aWbsDTOAdapter);}});$.r3Utils.namespace("org.r3.wbs.towfillout");org.r3.wbs.towfillout.WBSDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aWbsId_OR_aWbsDTOAdapter)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];var theWbsId=null;if(_.isString(aWbsId_OR_aWbsDTOAdapter))
{theWbsId=aWbsId_OR_aWbsDTOAdapter;networkRequestsQueue.push({id:"wbsdetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBSTree",[aWbsId_OR_aWbsDTOAdapter]),dataType:"json"});}
else theWbsId=aWbsId_OR_aWbsDTOAdapter.dataBean.wbsid;networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/wbs/towfillout/WBSDetailActionFormView.html.jsp'),dataType:"html"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_skillambit'));networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'GET_classifier_skillprofile'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var wbsDTOAdapter=aWbsId_OR_aWbsDTOAdapter;if(_.isString(aWbsId_OR_aWbsDTOAdapter))
{wbsDTOAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData["wbsdetail"]);}
var templatedHtml=tmpl(responseData['view'],{"wbs":wbsDTOAdapter});$(this.htmlContainerId).html(templatedHtml);var teamDashBoard=new org.r3.jsportlet.project.dashboard.TeamWBSNodeTabularDashBoardActionFormView("#wbs_teamprofile",this.actionFormManager);teamDashBoard.open(wbsDTOAdapter.dataBean.wbsid,org.r3.Constants.site);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.wbs.towfillout");org.r3.wbs.towfillout.WBSNodeDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.wbs.towfillout.WBSNodeDetailActionFormView(aDetailViewContainerId,this);this.listView=new org.r3.db.project.resourcetimesheetview.ResourceTimesheetViewQueryActionFormView
(aChildEntityListViewContainerId,this,{dataTableId:'ResourceTimesheetViewQueryActionFormView',gradeLevel:'grade_level4 grade_clickable',legend:org.r3.db.project.resourcetimesheetview.message.queryactionformview_legend,iDisplayLength:25,layout:'fullWidth',sortable:false,dataTableColumns:"resourcedescr,profiledescr,startperiod,endperiod,effort",requiredLUTs:["GET_classifier_sys_recstatus"],onDblClick:null,onSelected:$.r3Utils.hitch(this,function(aResourceTimesheetDTOAdapter)
{$('#resurcetimesheet_action_delete').prop('disabled',false);this.detailView.itemDetail(aResourceTimesheetDTOAdapter);}),onClearSelection:function()
{$('#resurcetimesheet_action_delete').prop('disabled',true);},actionBarOnTop:true,buttons:[{id:'resurcetimesheet_action_delete',label:'Elimina',disabled:true,onClick:$.r3Utils.hitch(this,this._onDelete)}],searchInfo:{widget:'select',widgetInitialization:{url:org.r3.PageManager.getRESTUrl('GET_TeamMemberProfiles',[org.r3.Constants.site]),blankOptionText:org.r3.PageManager.getMessageFromDict("org.r3.wbs.towfillout.message.any")},label:org.r3.wbs.towfillout.message.search_category,validationRules:org.r3.wbs.towfillout.queryfilter_searchform_validationRules,validationMessages:org.r3.wbs.towfillout.queryfilter_searchform_validationMessages,autoStart:true},});},close:function()
{this.detailView.close();this.listView.close();},hide:function()
{this.detailView.hide();this.listView.close();},show:function()
{this.detailView.show();this.listView.show();},refresh:function()
{this.detailView.refresh();this.listView.refresh();$('#resurcetimesheet_action_delete').prop('disabled',true);},open:function(aWbsId,aWbsNodeId)
{this.detailView.open(aWbsId,aWbsNodeId);var dataTableSource=org.r3.PageManager.getRESTUrl('GET_WBSNode_ResourceTimesheet',[aWbsId,aWbsNodeId]);this.listView.open({"dataTableSource":dataTableSource});},_onDelete:function()
{var _self=this;if(org.r3.PageManager.confirmation("org.r3.message.deleteconfirm"))
{var selectedItem=this.listView.fnGetSelectedDataBean();this.deleteItem(selectedItem,function(responseData){_self.refresh();},function(jqXHR,timeout,message){console.log("org.r3.jsportlet.classifier.ClassifierActionForm::"+message);});}},deleteItem:function(aResourceTimesheetEntryDTOAdapter,onSuccess,onError)
{var _self=this;var method="DELETE";var restUrl=null;var site=aResourceTimesheetEntryDTOAdapter.dataBean.site;var tsambitid=aResourceTimesheetEntryDTOAdapter.dataBean.tsambitid;var tsactivityid=aResourceTimesheetEntryDTOAdapter.dataBean.tsactivityid;var tsentryid=aResourceTimesheetEntryDTOAdapter.dataBean.tsentryid;restUrl=org.r3.PageManager.getRESTUrl('DELETE_WBSNode_ResourceTimesheet',[tsambitid,tsactivityid,tsentryid]);org.r3.PageManager.wait("org.r3.message.waiting");$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccess)
onSuccess(responseData);},"error":function(jqXHR,timeout,message)
{if(onError)
onError(message);}});},saveResourceTimesheetEntry:function(theForm,aWbsId,aWbsNodeId,aTsEntryId,onSuccessResponse,onErrorResponse)
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl('POST_WBSNode_ResourceTimesheet',[aWbsId,aWbsNodeId]);var method="post";if(aTsEntryId&&aTsEntryId.length)
{restUrl=org.r3.PageManager.getRESTUrl('PUT_WBSNode_ResourceTimesheet',[aWbsId,aWbsNodeId,aTsEntryId]);method="put";}
org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();_self.refresh();if(onSuccessResponse)
onSuccessResponse(responseData);},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}});$.r3Utils.namespace("org.r3.wbs.towfillout");$.r3Utils.namespace("org.r3.wbs.towfillout");org.r3.wbs.towfillout.WBSNodeDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.wbsId=null;this.wbsNodeId=null;},close:function()
{this.hide();},refresh:function()
{$("#wbsnodeactionform_form").resetForm();$('#wbsnodeactionform_form_tsentryid').val("");},open:function(aWbsId,aWbsNodeId)
{var _self=this;this.wbsId=aWbsId;this.wbsNodeId=aWbsNodeId;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"wbsdetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBS",[aWbsId]),dataType:"json"});networkRequestsQueue.push({id:"wbsnodedetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBSNode",[aWbsId,aWbsNodeId]),dataType:"json"});networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/wbs/towfillout/WBSNodeDetailActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var wbsDTOAdapter=responseData['wbsdetail'];if(wbsDTOAdapter)
{wbsDTOAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(wbsDTOAdapter);}
var wbsNodeDTOAdapter=responseData['wbsnodedetail'];if(wbsNodeDTOAdapter)
wbsNodeDTOAdapter=new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(wbsNodeDTOAdapter);$(this.htmlContainerId).html(tmpl(responseData['view'],{}));$('#wbsnodeactionform_form .r3_datepicker').datepicker({format:"dd/mm/yyyy"});var resolvedUrl=org.r3.PageManager.getRESTUrl("GET_Resources");org.r3.PageManager.lutManager.populateSelectField({"lutUrl":resolvedUrl,"blankOptionText":org.r3.PageManager.getMessageFromDict("org.r3.message.defaultBlankOptionText"),"selectWidget":$('#wbsnodeactionform_form_resourceid')});$('#wbsnodeactionform_fieldset_message').formmessage({});$('#wbsnodeactionform_action_saveitem').unbind().click($.r3Utils.hitch(this,this._onSaveItem));$('#wbsnodeactionform_action_cancel').unbind().click($.r3Utils.hitch(this,this._onClearForm));$('#wbsnodeactionform_form').validate({ignore:[],errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.wbs.towfillout.wbsnodeactionform_form_validationRules,messages:org.r3.wbs.towfillout.wbsnodeactionform_form_validationMessages});this.show();}),function(d)
{console.error("controller did not load");});},_onClearForm:function()
{$("#wbsnodeactionform_form").resetForm();$('#wbsnodeactionform_form_tsentryid').val("");},itemDetail:function(aResourceTimesheetAdapter)
{$('#wbsnodeactionform_form_tsentryid').val(aResourceTimesheetAdapter.dataBean.tsentryid);$('#wbsnodeactionform_form_resourceid').val(aResourceTimesheetAdapter.dataBean.resourceid);$('#wbsnodeactionform_form_effort').val(aResourceTimesheetAdapter.dataBean.effort);$('#wbsnodeactionform_form_startperiod').val(aResourceTimesheetAdapter.getStartperiod());$('#wbsnodeactionform_form_endperiod').val(aResourceTimesheetAdapter.getEndperiod());},_onSaveItem:function()
{var theForm=$('#wbsnodeactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{this.actionFormManager.saveResourceTimesheetEntry(theForm,this.wbsId,this.wbsNodeId,$('#wbsnodeactionform_form_tsentryid').val(),function(responseData){$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}}});$.r3Utils.namespace("org.r3.wbs.towfillout",window,function(aNamespace)
{aNamespace.wbsnodeactionform_form_validationRules={effort:{required:true,maxlength:5,digits:true},resourceid:{required:true},startperiod:{required:true},endperiod:{required:true}};aNamespace.wbsnodeactionform_form_validationMessages={effort:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits},resourceid:{required:org.r3.message.field_required},startperiod:{required:org.r3.message.field_required},endperiod:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.wbs.towfillout",window,function(aNamespace)
{aNamespace.queryfilter_searchform_validationRules={filter_item:{required:false}};aNamespace.queryfilter_searchform_validationMessages={filter_item:{required:org.r3.message.field_required}};});$.r3Utils.namespace("org.r3.wbs.wbsfillout");org.r3.wbs.wbsfillout.NavigatorActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.wbs.wbsfillout.NavigatorActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(pageInfo,cardInfo,aWbsId,aWbsNodeId)
{this.detailView.open(pageInfo,cardInfo,aWbsId,aWbsNodeId);},openWBSDetailActionFormPanel:function(aWbsId_OR_aWbsDTOAdapter)
{this.pageManager.openWBSDetailActionFormPanel(aWbsId_OR_aWbsDTOAdapter);},openWBSNodeDetailActionFormPanel:function(aWbsId,aWbsNodeId)
{this.pageManager.openWBSNodeDetailActionFormPanel(aWbsId,aWbsNodeId);}});$.r3Utils.namespace("org.r3.wbs.wbsfillout");org.r3.wbs.wbsfillout.NavigatorActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.gmenubarInitialized=false;},close:function()
{this.hide();},open:function(pageInfo,cardInfo,aWbsId,aWbsNodeId)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var wbsesUrl=org.r3.PageManager.getRESTUrl("GET_WBSes");var networkRequestsQueue=[];networkRequestsQueue.push({id:"wbses",type:"Get",url:wbsesUrl,dataType:"json"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_Page'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();org.r3.PageManager.lutManager.addLUT(wbsesUrl,responseData["wbses"]);org.r3.PageManager.lutManager.populateSelectField({"lutUrl":wbsesUrl,"selectWidget":$('#wbsselection_filter'),"selectedValue":aWbsId,"useBusinessKey":true,"onComplete":function(theLUT)
{var selectedWbs=$('#wbsselection_filter').val();if(selectedWbs)
{_self.fetchWBSOutline(selectedWbs,aWbsNodeId);}
console.log("Select Field Loaded....",$('#wbsselection_filter').val());}});var resolvedUrl=org.r3.PageManager.getRESTUrl("LUT_CMS_Page");var lutItem=org.r3.PageManager.lutManager.getLUTItem(resolvedUrl,org.r3.Constants.site+'_'+pageInfo.pageid);if(lutItem)
{this.pageDTOAdapter=new org.r3.db.cms.page.PageDTOAdapter(lutItem);this.pageDTOAdapter.loadPageImage('#page_image');}
$('#wbsselection_filter').unbind().change(function(e)
{var currentTarget=$(e.currentTarget);var selectedWbs=currentTarget.val();if(selectedWbs)
{_self.fetchWBSOutline(selectedWbs,null);}});this.show();}),function(d)
{console.error("controller did not load");});},fetchWBSOutline:function(aWbsId,aWbsNodeId)
{var _self=this;var method="GET";var restUrl=null;restUrl=org.r3.PageManager.getRESTUrl('GET_WBSTree',[aWbsId]);if(this.gmenubarInitialized)
{$('#gmenubar').gmenubar('destroy');}
$.ajax({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{var dtoAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData);_self.createGMenuBar(dtoAdapter,aWbsNodeId);org.r3.PageManager.closeAllBreadCrumbs();if(aWbsNodeId)
_self.openWBSNodeDetailActionFormPanel(aWbsId,aWbsNodeId);else _self.openWBSDetailActionFormPanel(dtoAdapter);},"error":function(jqXHR,timeout,message)
{console.error(message);}});},createGMenuBar:function(aWBSDTOAdapter,aSelectedWbsNodeId)
{var theWbsNodes=aWBSDTOAdapter.getListOfWbsNodes();var gemnubarCfg={};gemnubarCfg.sections=[];var sectWBS={type:'section',id:'gmenubar_sect_wbs',bottom_border:true,items:[]};gemnubarCfg.sections.push(sectWBS);sectWBS.items.push({id:aWBSDTOAdapter.dataBean.wbsid,actionId:'wbs_detail',title:aWBSDTOAdapter.dataBean.wbstitle,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:!aSelectedWbsNodeId});var sectOutline={type:'section',id:'gmenubar_sect_wbsnode',bottom_border:true,items:[]};gemnubarCfg.sections.push(sectOutline);if(theWbsNodes){for(var j=0;j<theWbsNodes.length;j++)
{sectOutline.items.push({id:theWbsNodes[j].dataBean.wbsnodeid,wbsid:aWBSDTOAdapter.dataBean.wbsid,actionId:'wbsnode_detail',title:theWbsNodes[j].getNodeLabel(true),onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),customCSSClassName:theWbsNodes[j].getCustomCSSClassName(),deletable:false,selected:aSelectedWbsNodeId&&(aSelectedWbsNodeId==theWbsNodes[j].dataBean.wbsnodeid)});}}
$('#gmenubar').gmenubar(gemnubarCfg);this.gmenubarInitialized=true;},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.actionId=='gmenubar_act_newcontact')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gmenubar').gmenubar('select',e.id);this.openNewActorPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{this.deleteActorGroup(e.id);}
else
{$('#gmenubar').gmenubar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.actionId)
{case'wbs_detail':this.openWBSDetailActionFormPanel(e.id);break;case'wbsnode_detail':this.openWBSNodeDetailActionFormPanel(e.wbsid,e.id);break;}}}},openWBSDetailActionFormPanel:function(aWbsId_OR_aWbsDTOAdapter)
{if(_.isString(aWbsId_OR_aWbsDTOAdapter))
$('#gmenubar').gmenubar('select',aWbsId_OR_aWbsDTOAdapter);this.actionFormManager.openWBSDetailActionFormPanel(aWbsId_OR_aWbsDTOAdapter);},openWBSNodeDetailActionFormPanel:function(aWbsId,aWbsNodeId)
{$('#gmenubar').gmenubar('select',aWbsNodeId);this.actionFormManager.openWBSNodeDetailActionFormPanel(aWbsId,aWbsNodeId);}});$.r3Utils.namespace("org.r3.wbs.wbsfillout");org.r3.wbs.wbsfillout.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.navigator=new org.r3.wbs.wbsfillout.NavigatorActionForm(this,"#navigatorActionForm");this.wbsDetail=new org.r3.wbs.wbsfillout.WBSDetailActionForm(this,"#wbsDetailActionForm");this.wbsNodeDetail=new org.r3.wbs.wbsfillout.WBSNodeDetailActionForm(this,"#wbsNodeDetailActionForm","#wbsNodeDiscussionActionForm");org.r3.PageManager.pushHomeBreadCrumb();var wbsIdParam=$.r3Utils.getQueryStringParamFromPageUrl("wbsid");console.log("wbsIdParam",wbsIdParam);var wbsNodeIdParam=$.r3Utils.getQueryStringParamFromPageUrl("wbsnodeid");console.log("wbsNodeIdParam",wbsNodeIdParam);this.openNavigator(pageInfo,cardInfo,wbsIdParam,wbsNodeIdParam);},openNavigator:function(pageInfo,cardInfo,aWbsId,aWbsNodeId)
{var _self=this;this.navigator.open(pageInfo,cardInfo,aWbsId,aWbsNodeId);},openWBSDetailActionFormPanel:function(aWbsId_OR_aWbsDTOAdapter)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.wbs.wbsfillout.message.wbs_detail_breadcrumb,"actionForm":this.wbsDetail});this.wbsDetail.open(aWbsId_OR_aWbsDTOAdapter);},openWBSNodeDetailActionFormPanel:function(aWbsId,aWbsNodeId)
{org.r3.PageManager.pushBreadCrumb({"title":org.r3.wbs.wbsfillout.message.wbs_node_detail_breadcrumb,"actionForm":this.wbsNodeDetail});this.wbsNodeDetail.open(aWbsId,aWbsNodeId);}};$.r3Utils.namespace("org.r3.wbs.wbsfillout");org.r3.wbs.wbsfillout.WBSDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.wbs.wbsfillout.WBSDetailActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(aWbsId_OR_aWbsDTOAdapter)
{this.detailView.open(aWbsId_OR_aWbsDTOAdapter);}});$.r3Utils.namespace("org.r3.wbs.wbsfillout");org.r3.wbs.wbsfillout.WBSDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);},close:function()
{this.hide();},open:function(aWbsId_OR_aWbsDTOAdapter)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];var theWbsId=null;if(_.isString(aWbsId_OR_aWbsDTOAdapter))
{theWbsId=aWbsId_OR_aWbsDTOAdapter;networkRequestsQueue.push({id:"wbsdetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBSTree",[aWbsId_OR_aWbsDTOAdapter]),dataType:"json"});}
else theWbsId=aWbsId_OR_aWbsDTOAdapter.dataBean.wbsid;networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/wbs/wbsfillout/WBSDetailActionFormView.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var wbsDTOAdapter=aWbsId_OR_aWbsDTOAdapter;if(_.isString(aWbsId_OR_aWbsDTOAdapter))
{wbsDTOAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData["wbsdetail"]);}
var templatedHtml=tmpl(responseData['view'],{"wbs":wbsDTOAdapter});$(this.htmlContainerId).html(templatedHtml);this.show();}),function(d)
{console.error("controller did not load");});}});$.r3Utils.namespace("org.r3.wbs.wbsfillout");org.r3.wbs.wbsfillout.WBSNodeDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aDiscussionViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.wbs.wbsfillout.WBSNodeDetailActionFormView(aDetailViewContainerId,this);this.bbsThreadPortletView=new org.r3.jsportlet.bbs.BBSThreadPortletView(aDiscussionViewContainerId,this);this.bbsThreadPortletView_isOpen=false;},close:function()
{this.detailView.close();this.bbsThreadPortletView.close();},hide:function()
{this.detailView.hide();this.bbsThreadPortletView.close();},show:function()
{this.detailView.show();if(this.bbsThreadPortletView_isOpen)
this.bbsThreadPortletView.show();},open:function(aWbsId,aWbsNodeId)
{this.bbsThreadPortletView_isOpen=false;this.detailView.open(aWbsId,aWbsNodeId);},openBBSThreadPortlet:function(aBBSTopicId,aBBSThreadId)
{this.bbsThreadPortletView.open(aBBSTopicId,aBBSThreadId);this.bbsThreadPortletView_isOpen=true;},updateWBSNode:function(theForm,aWbsId,aWbsNodeId,onSuccessResponse,onErrorResponse)
{this._saveWBSNode(theForm,aWbsId,aWbsNodeId,onSuccessResponse,onErrorResponse);},_saveWBSNode:function(theForm,aWbsId,aWbsNodeId,onSuccessResponse,onErrorResponse)
{var _self=this;var restUrl=org.r3.PageManager.getRESTUrl('FILL_PUT_WBSNode',[aWbsId,aWbsNodeId]);var method="put";org.r3.PageManager.wait("org.r3.message.waiting");theForm.ajaxSubmit({"type":method,"url":restUrl,"dataType":"json","success":function(responseData)
{org.r3.PageManager.closeNotifier();if(onSuccessResponse)
onSuccessResponse(responseData);var dtoAdapter=new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(responseData);},"error":function(jqXHR,timeout,message)
{console.log(arguments);org.r3.PageManager.closeNotifier();if(onErrorResponse)
onErrorResponse(jqXHR,timeout,message);}});}});$.r3Utils.namespace("org.r3.wbs.wbsfillout");$.r3Utils.namespace("org.r3.wbs.wbsfillout");org.r3.wbs.wbsfillout.WBSNodeDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.wbsId=null;this.wbsNodeId=null;this.hasCKEditor=false;},close:function()
{$('#wbsnode_infoLine_page').infoLine('destroy');if(this.hasCKEditor)
$('#wbsnodeactionform_nodetext').ckeditor('destroy');this.hide();},open:function(aWbsId,aWbsNodeId)
{var _self=this;this.wbsId=aWbsId;this.wbsNodeId=aWbsNodeId;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];networkRequestsQueue.push({id:"wbsdetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBS",[aWbsId]),dataType:"json"});networkRequestsQueue.push({id:"wbsnodedetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBSNode",[aWbsId,aWbsNodeId]),dataType:"json"});networkRequestsQueue.push({id:"wbsnodethread",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBSNode_BBS_Thread",[aWbsId,aWbsNodeId]),dataType:"json"});networkRequestsQueue.push({id:"view_readonly",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/wbs/wbsfillout/WBSNodeDetailActionFormView_readonly.html.jsp'),dataType:"html"});networkRequestsQueue.push({id:"view_editable",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/wbs/wbsfillout/WBSNodeDetailActionFormView_editable.html.jsp'),dataType:"html"});org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var wbsDTOAdapter=responseData['wbsdetail'];if(wbsDTOAdapter)
{wbsDTOAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(wbsDTOAdapter);}
var wbsNodeDTOAdapter=responseData['wbsnodedetail'];if(wbsNodeDTOAdapter)
wbsNodeDTOAdapter=new org.r3.db.wbs.wbsnode.WBSNodeDTOAdapter(wbsNodeDTOAdapter);var wbsNodeThread=responseData['wbsnodethread'];if(wbsNodeThread)
this.actionFormManager.openBBSThreadPortlet(wbsNodeThread.topicid,wbsNodeThread.threadid);this.hasCKEditor=false;if(wbsNodeDTOAdapter.isEditable()&&wbsNodeDTOAdapter.isAssignee(org.r3.PageManager.actorUserProfileInfo))
{$(this.htmlContainerId).html(tmpl(responseData['view_editable'],{}));$('#wbsnodeactionform_nodetext').ckeditor();this.hasCKEditor=true;$('#wbsnodeactionform_completion_slider').bootstrapSlider({value:0,min:wbsNodeDTOAdapter.getCompletionMinValue(),max:wbsNodeDTOAdapter.getCompletionMaxValue(),slide:function(event,ui){$("#wbsnodeactionform_completion_label").html(wbsNodeDTOAdapter.getCompletion(ui.value));$("#wbsnodeactionform_completion").val(ui.value);}}).on('slide',function(e){$("#wbsnodeactionform_completion_label").html(wbsNodeDTOAdapter.getCompletion(e.value));$("#wbsnodeactionform_completion").val(e.value);});$('#wbsnodeactionform_fieldset_message').formmessage({});$('#wbsnodeactionform_action_saveitem').click($.r3Utils.hitch(this,this._onUpdateItem));$('#wbsnodeactionform_form').validate({ignore:[],errorPlacement:$.r3Utils.layoutClassicErrorPlacement,rules:org.r3.wbs.wbsfillout.wbsnodeactionform_form_validationRules,messages:org.r3.wbs.wbsfillout.wbsnodeactionform_form_validationMessages});}
else
{$(this.htmlContainerId).html(tmpl(responseData['view_readonly'],{}));}
var infoLine_items=[];if(wbsNodeDTOAdapter.isAction())
{infoLine_items.push({id:"infoline_startdate",label:org.r3.db.wbs.wbsnode.message.startdate,value:wbsNodeDTOAdapter.getStartdate()},{id:"infoline_duration",label:org.r3.db.wbs.wbsnode.message.duration,value:wbsNodeDTOAdapter.dataBean.duration},{id:"infoline_enddate",label:org.r3.db.wbs.wbsnode.message.enddate,value:wbsNodeDTOAdapter.getEnddate()});if(wbsNodeDTOAdapter.isAssignee(org.r3.PageManager.actorUserProfileInfo))
{infoLine_items.push({newLine:true,id:"infoline_assignedto",label:org.r3.db.wbs.wbsnode.message.assignee,value:wbsNodeDTOAdapter.getAssignedToUserName()},{id:"infoline_completion",label:org.r3.db.wbs.wbsnode.message.completiondescr,value:wbsNodeDTOAdapter.getCompletionDescr()},{id:"infoline_completiondate",label:org.r3.db.wbs.wbsnode.message.completiondate,value:wbsNodeDTOAdapter.getCompletionDate()},{newLine:true,id:"infoline_economicvalue",label:org.r3.db.wbs.wbsnode.message.economicvalue,value:wbsNodeDTOAdapter.getEconomicvalue()},{id:"infoline_completioneffort",label:org.r3.db.wbs.wbsnode.message.completioneffort,value:wbsNodeDTOAdapter.getCompletioneffort()},{id:"infoline_completioneffortvalue",label:org.r3.db.wbs.wbsnode.message.completioneffortevalue,value:wbsNodeDTOAdapter.getCompletioneffortEValue()});}}
if(true)
{$('#wbsnode_infoLine_page').infoLine({groupId:"wbsnodeinfo",defaultOnEmptyValues:'skip',items:infoLine_items});}
if(wbsNodeDTOAdapter.isEditable())
{this._initializeFieldsEditableNode(wbsNodeDTOAdapter);}
else
{this._initializeFieldsReadOnlyNode(wbsNodeDTOAdapter);}
this.show();}),function(d)
{console.error("controller did not load");});},_initializeFieldsEditableNode:function(aDtoAdapter)
{$('#wbsnodeactionform_nodename').html(aDtoAdapter.getNodeLabel(true));$('#wbsnodeactionform_nodesummary').html(aDtoAdapter.dataBean.nodesummary);$('#wbsnodeactionform_current_completioneffort').val(aDtoAdapter.dataBean.completioneffort||0);$('#wbsnodeactionform_nodetext').val(aDtoAdapter.dataBean.nodetext);var l=aDtoAdapter.dataBean.completiondescr;if(aDtoAdapter.dataBean.completiondescr)
$('#wbsnodeactionform_completioncaption').html(aDtoAdapter.dataBean.completiondescr);$('#wbsnodeactionform_completion_label').html(aDtoAdapter.getCompletion());$("#wbsnodeactionform_completion").val(aDtoAdapter.dataBean.completion||0);$("#wbsnodeactionform_completioneffort").val(aDtoAdapter.dataBean.completioneffort||0);$("#wbsnodeactionform_economicvalue").val(aDtoAdapter.dataBean.economicvalue||0);},_initializeFieldsReadOnlyNode:function(aDtoAdapter)
{$('#wbsnodeactionform_nodename').html(aDtoAdapter.getNodeLabel(true));$('#wbsnodeactionform_nodesummary').html(aDtoAdapter.dataBean.nodesummary);$('#wbsnodeactionform_nodetext').html(aDtoAdapter.dataBean.nodetext);},_onUpdateItem:function()
{var theForm=$('#wbsnodeactionform_form');if(theForm.valid()&&org.r3.PageManager.confirmation("org.r3.message.saveconfirm"))
{if(!$('#wbsnodeactionform_nodetext').val())
{org.r3.PageManager.alert("org.r3.wbs.wbsfillout.message.wbstextEmptyConfirmation");return;}
this.actionFormManager.updateWBSNode(theForm,this.wbsId,this.wbsNodeId,function(responseData){$('#wbsnodeactionform_action_saveitem').prop('disabled',true);$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:org.r3.message.success,category:'info'});},function(jqXHR,timeout,message){$('#wbsnodeactionform_fieldset_message').formmessage('setText',{text:message,category:'error'});});}}});$.r3Utils.namespace("org.r3.wbs.wbsfillout",window,function(aNamespace)
{aNamespace.wbsnodeactionform_form_validationRules={completioneffort:{required:true,maxlength:5,digits:true,greaterThan:'#wbsnodeactionform_current_completioneffort'},economicvalue:{required:true,maxlength:8,number:true,min:0}};aNamespace.wbsnodeactionform_form_validationMessages={completioneffort:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,digits:org.r3.message.field_digits,greaterThan:org.r3.wbs.wbsfillout.message.wbsnodeactionform_completioneffort_greaterThan_validation},economicvalue:{required:org.r3.message.field_required,maxlength:org.r3.message.field_maxlength,number:org.r3.message.field_number,min:org.r3.message.field_min}};});$.r3Utils.namespace("org.r3.wbs.wsreport");org.r3.wbs.wsreport.NavigatorActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,aChildEntityListViewContainerId)
{this.setPageManager(aPageManager);this.detailView=new org.r3.wbs.wsreport.NavigatorActionFormView(aDetailViewContainerId,this);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(pageInfo,cardInfo)
{this.detailView.open(pageInfo,cardInfo);},openReportDetailActionFormPanel:function(aWbsId)
{this.pageManager.openReportDetailActionFormPanel(aWbsId);},openFullReportPanel:function()
{this.pageManager.openFullReportPanel();}});$.r3Utils.namespace("org.r3.wbs.wsreport");org.r3.wbs.wsreport.NavigatorActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.gmenubarInitialized=false;},close:function()
{this.hide();},open:function(pageInfo,cardInfo)
{var _self=this;org.r3.PageManager.wait("org.r3.message.waiting");var wbsesUrl=org.r3.PageManager.getRESTUrl("GET_WBSes");var networkRequestsQueue=[];networkRequestsQueue.push({id:"wbses",type:"Get",url:wbsesUrl,dataType:"json"});networkRequestsQueue.push(org.r3.PageManager.lutManager.getLUTNetworkRequest(this,'LUT_CMS_Page'));org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();org.r3.PageManager.lutManager.addLUT(wbsesUrl,responseData["wbses"]);var wbses=responseData["wbses"];if(wbses)
{wbses=new org.r3.db.DTOTableAdapter(wbses,function(aRowDataBean){return new org.r3.db.wbs.wbs.WBSDTOAdapter(aRowDataBean);});this.createGMenuBar(wbses);}
var resolvedUrl=org.r3.PageManager.getRESTUrl("LUT_CMS_Page");var lutItem=org.r3.PageManager.lutManager.getLUTItem(resolvedUrl,org.r3.Constants.site+'_'+pageInfo.pageid);if(lutItem)
{this.pageDTOAdapter=new org.r3.db.cms.page.PageDTOAdapter(lutItem);this.pageDTOAdapter.loadPageImage('#page_image');}
this.openFullReportPanel();this.show();}),function(d)
{console.error("controller did not load");});},createGMenuBar:function(aListOfWBSDTOAdapter)
{var gemnubarCfg={};gemnubarCfg.sections=[];gemnubarCfg.mainaction={id:'gmenubar_act_fullreport',actionId:'gmenubar_act_fullreport',title:org.r3.wbs.wsreport.message.gmenubar_action_fullreport,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick)};if(aListOfWBSDTOAdapter.getNumberOfItems()>0)
{var sectWBS={type:'section',id:'gmenubar_sect_wbs',bottom_border:true,items:[]};gemnubarCfg.sections.push(sectWBS);for(var i=0;i<aListOfWBSDTOAdapter.getNumberOfItems();i++)
{var aWBSDTOAdapter=aListOfWBSDTOAdapter.getItem(i);sectWBS.items.push({id:aWBSDTOAdapter.dataBean.wbsid,actionId:'wbs_report',title:"Rep. "+aWBSDTOAdapter.dataBean.wbstitle,onClick:$.r3Utils.hitch(this,this._onGMenuBarClick),deletable:false,selected:false});}}
$('#gmenubar').gmenubar(gemnubarCfg);this.gmenubarInitialized=true;},_onGMenuBarClick:function(e,actionTriggered)
{console.info("_itsbeenclicked",e);if(e.actionId=='gmenubar_act_fullreport')
{org.r3.PageManager.closeAllBreadCrumbs();$('#gmenubar').gmenubar('select',e.id);this.openFullReportPanel();return;}
if(e.selected)
{if(actionTriggered&&actionTriggered=='delete')
{}
else
{org.r3.PageManager.activateFirstBreadCrumb();}}
else
{if(actionTriggered&&actionTriggered=='delete')
{this.deleteActorGroup(e.id);}
else
{$('#gmenubar').gmenubar('select',e.id);org.r3.PageManager.closeAllBreadCrumbs();switch(e.actionId)
{case'wbs_report':this.openReportDetailActionFormPanel(e.id);break;}}}},openReportDetailActionFormPanel:function(aWbsId)
{$('#gmenubar').gmenubar('select',aWbsId);this.actionFormManager.openReportDetailActionFormPanel(aWbsId);},openFullReportPanel:function()
{this.actionFormManager.openFullReportPanel();}});$.r3Utils.namespace("org.r3.wbs.wsreport");org.r3.wbs.wsreport.PageManager={init:function(pageInfo,cardInfo)
{org.r3.PageManager.googleAnalyticsSendPageView();this.navigator=new org.r3.wbs.wsreport.NavigatorActionForm(this,"#navigatorActionForm");this.reportDetail=new org.r3.wbs.wsreport.ReportDetailActionForm(this,"#reportDetailActionForm");this.printableReportDetail=new org.r3.wbs.wsreport.ReportDetailActionForm(this,'#canvas_report_content',true);org.r3.PageManager.pushHomeBreadCrumb();this.openNavigator(pageInfo,cardInfo);},openNavigator:function(pageInfo,cardInfo)
{var _self=this;this.navigator.open(pageInfo,cardInfo);},openReportDetailActionFormPanel:function(aWbsId)
{org.r3.PageManager.pushBreadCrumb({"title":"Report WBS","actionForm":this.reportDetail});this.reportDetail.open(aWbsId);},openFullReportPanel:function()
{org.r3.PageManager.pushBreadCrumb({"title":"Report WBS","actionForm":null});this.reportDetail.open();},openPrintableReportPanel:function(aWbsId)
{org.r3.PageManager.openFullScreenLayout(this.printableReportDetail);this.printableReportDetail.open(aWbsId);}};$.r3Utils.namespace("org.r3.wbs.wsreport");org.r3.wbs.wsreport.ReportDetailActionForm=org.r3.ActionFormManager.extend({init:function(aPageManager,aDetailViewContainerId,isPrintable)
{this.setPageManager(aPageManager);this.detailView=new org.r3.wbs.wsreport.ReportDetailActionFormView(aDetailViewContainerId,this,isPrintable);},close:function()
{this.hide();},hide:function()
{this.detailView.hide();},show:function()
{this.detailView.show();},open:function(aWbsId)
{this.detailView.open(aWbsId);},openPrintableReportPanel:function(aWbsId)
{this.pageManager.openPrintableReportPanel(aWbsId);}});$.r3Utils.namespace("org.r3.wbs.wsreport");org.r3.wbs.wsreport.ReportDetailActionFormView=org.r3.ActionFormView.extend({init:function(anHtmlActionFormContainerId,anActionFormManager,isPrintedFlag)
{this._super(anHtmlActionFormContainerId,anActionFormManager);this.dashboardView=null;this.isPrinted=isPrintedFlag;this.wbsId=null;},close:function()
{this.hide();},open:function(aWbsId)
{var _self=this;this.wbsId=aWbsId;org.r3.PageManager.wait("org.r3.message.waiting");var networkRequestsQueue=[];if(aWbsId)
{networkRequestsQueue.push({id:"wbsdetail",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBSTree",[aWbsId]),dataType:"json"});networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/wbs/wsreport/ReportDetailActionFormView_WBS.html.jsp'),dataType:"html"});}
else
{networkRequestsQueue.push({id:"wbses",type:"Get",url:org.r3.PageManager.getRESTUrl("GET_WBSes_WithNodes"),dataType:"json"});networkRequestsQueue.push({id:"view",type:"Get",url:org.r3.PageManager.getVersionedUIURL(org.r3.Constants.applicationContext+'/org/r3/wbs/wsreport/ReportDetailActionFormView_FULL.html.jsp'),dataType:"html"});}
org.r3.PageManager.multiAjax(networkRequestsQueue,$.r3Utils.hitch(this,function(responseData)
{org.r3.PageManager.closeNotifier();var wbsDTOAdapter=null;var templatedHtml=null;if(aWbsId)
{wbsDTOAdapter=new org.r3.db.wbs.wbs.WBSDTOAdapter(responseData["wbsdetail"]);templatedHtml=tmpl(responseData['view'],{"isPrinted":this.isPrinted,"wbs":wbsDTOAdapter});}
else
{var wbsesDataTableAdapter=responseData['wbses'];wbsesDataTableAdapter=new org.r3.db.DTOTableAdapter(wbsesDataTableAdapter,function(aRowDataBean){return new org.r3.db.wbs.wbs.WBSDTOAdapter(aRowDataBean);});templatedHtml=tmpl(responseData['view'],{"isPrinted":this.isPrinted,"wbses":wbsesDataTableAdapter});}
$(this.htmlContainerId).html(templatedHtml);if(this.isPrinted)
{$('#reportdetailactionform_action_print').unbind().click(function(e)
{window.print();});$('#reportdetailactionform_action_back').unbind().click(function(e)
{_self.actionFormManager.close();org.r3.PageManager.closeFullScreenLayout();});}
else
{$('#reportdetailactionform_action_printable').unbind().click($.r3Utils.hitch(this,this.openPrintableReportPanel));}
if(aWbsId&&wbsDTOAdapter.isExecutiveOrCoach())
{var dashBoardContainerId='#wbs_'+aWbsId+'_dashboard';if(this.isPrinted)
dashBoardContainerId+="_printed";this.dashboardView=new org.r3.jsportlet.wbs.dashboard.WBSPortletDashBoardActionFormView(dashBoardContainerId,this.actionFormManager,{"isPrinted":this.isPrinted});this.dashboardView.open(wbsDTOAdapter);}
else
{}
this.show();}),function(d)
{console.error("controller did not load");});},openPrintableReportPanel:function()
{this.actionFormManager.openPrintableReportPanel(this.wbsId);}});